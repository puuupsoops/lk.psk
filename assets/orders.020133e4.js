import{N as Me,_ as Fe}from"./PersonalBar.a6a1f9bc.js";import{_ as Te}from"./CompanyBarTop.02d0a800.js";import{_ as Ue}from"./TopNav.815f848b.js";import{S as ee}from"./SelectInput.68dd15b8.js";import{d as le,g as f,z as ue,i as U,_ as Re,o as l,b as a,a as e,x as m,t as w,F as z,e as J,k as O,f as $e,M as qe,y as ye,I as q,h as be,O as Ne,r as ze,l as D,u as p,Q as A,j as v,n as Je,ag as N,w as te,c as Z,aj as je,Z as Ze,ai as Ge,al as Ye,am as Ke,an as Y,ao as We,B as Qe,p as He}from"./index.f17c8be4.js";import{P as G}from"./PreloaderLocal.b9830a63.js";import{O as se,M as Xe,a as B,_ as et}from"./types.d0a0336b.js";import{_ as tt}from"./CatalogPagination.87380da5.js";import{_ as ut,K as st}from"./KP.5f92553a.js";const lt=le({props:{show:{type:Boolean,default:!0},modelValue:{type:String,default:""},error:{type:Boolean,default:!1}},emits:["update:modelValue","update:show","onInput"],setup(d,{emit:r}){const C=f(0),L=f(null);ue(L,()=>r("update:show",!1));const V=U(()=>d.modelValue?d.modelValue:""),_=U(()=>{let b=new Date;b.setHours(0,0,0,0);let n=new Date;d.modelValue!=""&&(n=new Date(parseInt(d.modelValue.substr(6,4)),parseInt(d.modelValue.substr(3,2))-1,parseInt(d.modelValue.substr(0,2)))),n.setMonth(n.getMonth()+C.value),n=new Date(n.toISOString().substr(0,7)+"-01");let k=n.toLocaleString("default",{month:"long"});k=k.charAt(0).toUpperCase()+k.slice(1);let E=n.getMonth(),h=n.getFullYear(),I=[],y=[];n=new Date(n.getFullYear(),n.getMonth(),n.getDay()==1?-6:2-n.getDay());for(let x=1;x<=42;x++){let c=n.getDate(),P=!1;d.modelValue!=""&&(P=n.getTime()===new Date(parseInt(d.modelValue.substr(6,4)),parseInt(d.modelValue.substr(3,2))-1,parseInt(d.modelValue.substr(0,2))).getTime()),y.push({day:c,disable:n.getMonth()!=E,today:n.getMonth()==b.getMonth()&&n.getDate()==b.getDate()&&n.getFullYear()==b.getFullYear(),select:P}),n=new Date(n.getFullYear(),n.getMonth(),c+1),x%7==0&&(I.push(y),y=[])}return{year:h,month:{month:k,month_int:E},dateArr:I}});return{select_date:(b,n,k)=>{let E=new Date(b,n,k);C.value=0,r("update:modelValue",E.toLocaleString("ru").substr(0,10)),r("onInput"),r("update:show",!1)},dateText:V,genDay:_,target:L,delta:C}}}),at={class:"modal-datepicker",ref:"target"},it={class:"ui-datepicker-date"},ot=["value"],nt={class:m("ui-datepicker active")},rt={class:"ui-datepicker-header"},dt=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 0.71186 -0.702321 0.71186 11.8181 0)",fill:"#53565B"},null,-1),vt=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 -0.71186 -0.702321 -0.71186 11.8181 24)",fill:"#53565B"},null,-1),ct=[dt,vt],mt={class:"ui-datepicker-title"},ht={class:"ui-datepicker-month"},ft=O("\xA0"),pt={class:"ui-datepicker-year"},gt=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 0.71186 0.702322 0.71186 1.73828 0)",fill:"#53565B"},null,-1),_t=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 -0.71186 0.702322 -0.71186 1.73828 24)",fill:"#53565B"},null,-1),wt=[gt,_t],Ct={class:"ui-datepicker-calendar"},yt=e("thead",null,[e("tr",null,[e("th",{scope:"col"},[e("span",{title:"\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A"},"\u041F\u043D")]),e("th",{scope:"col"},[e("span",{title:"\u0432\u0442\u043E\u0440\u043D\u0438\u043A"},"\u0412\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0440\u0435\u0434\u0430"},"\u0421\u0440")]),e("th",{scope:"col"},[e("span",{title:"\u0447\u0435\u0442\u0432\u0435\u0440\u0433"},"\u0427\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u043F\u044F\u0442\u043D\u0438\u0446\u0430"},"\u041F\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0443\u0431\u0431\u043E\u0442\u0430"},"\u0421\u0431")]),e("th",{scope:"col",class:"ui-datepicker-week-end"},[e("span",{title:"\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435"},"\u0412\u0441")])])],-1),$t=["onClick"];function bt(d,r,C,L,V,_){return l(),a("div",{class:m("modal-datepicker-wrap"+(d.show?" show":"")),ref:"target"},[e("div",at,[e("div",it,[e("input",{class:m("active"),type:"text",placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",name:"date",autocomplete:"off",readonly:"",value:d.dateText,onFocus:r[0]||(r[0]=S=>d.active=!0)},null,40,ot),e("div",{class:"ui-datepicker-date-clear",onClick:r[1]||(r[1]=S=>d.modelValue==""?d.$emit("update:show",!1):d.$emit("update:modelValue",""))}),e("div",nt,[e("div",rt,[(l(),a("svg",{class:"ui-datepicker-prev",title:"<\u041F\u0440\u0435\u0434",onClick:r[2]||(r[2]=S=>d.delta=d.delta-1),width:"13",height:"24",viewBox:"0 0 13 24",xmlns:"http://www.w3.org/2000/svg"},ct)),e("div",mt,[e("span",ht,w(d.genDay.month.month),1),ft,e("span",pt,w(d.genDay.year),1)]),(l(),a("svg",{class:"ui-datepicker-next",title:"\u0421\u043B\u0435\u0434>",onClick:r[3]||(r[3]=S=>d.delta=d.delta+1),width:"14",height:"24",viewBox:"0 0 14 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wt))]),e("table",Ct,[yt,e("tbody",null,[(l(!0),a(z,null,J(d.genDay.dateArr,(S,b)=>(l(),a("tr",{key:b},[(l(!0),a(z,null,J(S,(n,k)=>(l(),a("td",{key:k,class:m((n.disable?" disable":"")+(n.today?" today":"")+(n.select?" select":"")),onClick:E=>n.disable?"":d.select_date(d.genDay.year,d.genDay.month.month_int,n.day)},[e("span",null,w(n.day),1)],10,$t))),128))]))),128))])])])])],512)],2)}var kt=Re(lt,[["render",bt]]);const At={class:"orders-heading-info"},Dt={class:"orders-heading-pagination"},Et=e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[e("path",{fill:"#A5A7A9",d:"m9.8 21.3-.375-3q-.175-.025-.625-.275T7.775 17.4l-2.75 1.15-2.2-3.825 2.4-1.825q-.05-.2-.062-.413-.013-.212-.013-.487 0-.175.025-.413.025-.237.05-.537l-2.4-1.8 2.2-3.8L7.8 6.625q.35-.275.762-.525.413-.25.863-.4L9.8 2.675h4.4l.375 3q.475.175.838.4.362.225.737.55l2.825-1.175 2.2 3.8-2.5 1.875q.05.25.063.437.012.188.012.438 0 .225-.012.438-.013.212-.063.462l2.475 1.825-2.225 3.825-2.775-1.175q-.325.275-.7.5-.375.225-.875.425l-.375 3Zm2.175-6.4q1.2 0 2.038-.85.837-.85.837-2.05 0-1.2-.837-2.05-.838-.85-2.038-.85-1.225 0-2.062.85-.838.85-.838 2.05 0 1.2.838 2.05.837.85 2.062.85Zm0-1.4q-.625 0-1.062-.438-.438-.437-.438-1.062t.438-1.062q.437-.438 1.062-.438.6 0 1.05.438.45.437.45 1.062t-.45 1.062q-.45.438-1.05.438ZM12 11.975ZM11 19.9h1.95l.375-2.7q.75-.2 1.35-.55.6-.35 1.175-.925l2.5 1.075.975-1.7-2.2-1.625q.125-.4.163-.75.037-.35.037-.725t-.037-.713q-.038-.337-.163-.737l2.2-1.675-.95-1.675-2.55 1.075q-.45-.5-1.15-.913-.7-.412-1.375-.587l-.3-2.7h-1.975l-.325 2.7q-.8.2-1.4.525-.6.325-1.2.95L5.625 7.2 4.65 8.875l2.15 1.6q-.125.375-.175.75-.05.375-.05.775 0 .375.038.738.037.362.162.762L4.65 15.1l.975 1.7 2.45-1.05q.6.575 1.225.938.625.362 1.375.537Z"})],-1),Ot=[Et],St=["onClick"],xt=e("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),Bt=e("span",null,"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C",-1),Vt=[xt,Bt],It={class:"orders-list"},Pt=e("div",null,"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),Lt=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),Mt=[Lt],Ft=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),Tt=[Ft],Ut={class:"orders-list-elem-center"},Rt=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),qt=[Rt],Nt=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),zt=[Nt],Jt=["onClick"],jt=e("div",{class:"table-arrow"},null,-1),Zt=["tooltip"],Gt=["onClick"],Yt=["onClick"],Kt=["onClick"],Wt=["onClick"],Qt=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B",-1),Ht=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B",-1),Xt=["onClick"],eu=O(" \u0417\u0430\u044F\u0432\u043A\u0430 \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442 "),tu=O(" \u041A\u043E\u043D\u0441\u0442\u0440\u0443\u043A\u0442\u043E\u0440 \u041A\u041F "),uu={key:0},su={class:"orders-list-info-elem"},lu={class:"orders-list-info-elem"},au={key:0,class:"orders-list-info-about tooltip"},iu=["onClick"],ou=e("span",{class:"tooltiptext"},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442",-1),nu={key:1,class:"orders-list-info-about tooltip"},ru={class:"orders-list-info-download disable"},du=e("span",{class:"tooltiptext"},[O("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442 \u043C\u043E\u0436\u043D\u043E \u0442\u043E\u043B\u044C\u043A\u043E "),e("br"),O(" \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430")],-1),vu={key:0,class:"orders-list-info-elem orders-list-info-doc-wrap"},cu={key:1,class:"orders-list-info-elem orders-list-info-doc-wrap"},mu=["href"],hu=["href"],fu=["href"],pu=["href"],gu={class:"orders-list-info-elem"},_u={class:"orders-list-info-elem"},wu={key:0,class:"orders-list-elem-request-bill"},Cu=["onClick"],yu={class:"orders-list-elem-request-bill"},$u=["onClick"],bu={key:1,class:"orders-list-info-row"},ku=Qe('<div class="orders-list-info-elem"></div><div class="orders-list-info-elem"> \u0421\u0447\u0435\u0442 \u043E\u0442\u0441\u0443\u0442\u0432\u0443\u0435\u0442 </div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div>',6),Au=[ku],Du={key:0,class:"orders-list-row orders-list-main-row"},Eu={class:"order-info"},Ou=O(" \u0417\u0430\u043A\u0430\u0437\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 "),Su=O("\u043D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437"),xu=O(" \u0438 \u043E\u043D \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0432 \u0441\u043F\u0438\u0441\u043A\u0435. "),Bu=le({__name:"OrdersListCard",props:{contrAgent:{type:String},period:{type:String},status:{type:String},loading:{type:Boolean,default:!1},search:{type:Object,required:!0},refresh:{type:Boolean,default:!1}},setup(d){var ce,me;const r=d,C=$e(),L=qe(),V=f(!1),_=f(-1),S=f(-1),b=f(null),n=f(!1),k=f([]),E=f(-1),h=f([{name:"id",value:"",show:!1},{name:"name",value:"",show:!1},{name:"date",value:"",show:!1}]),I=f(!1),y=f(!1),x="http://91.232.12.198:82",c=f({maxItemOnPage:10,currentPage:1}),P=f(-1),ke=f((ce=ye("tempOrderId"))!=null?ce:-1),Ae=f((me=ye("tempKPType"))!=null?me:"");ue(b,()=>{S.value=-1});let K=U(()=>C.getters.getOrders);const ae=()=>{var i;if(_.value!=-1&&M.value&&Array.isArray(M.value[_.value].checks)){let t=(i=M.value[_.value].checks)==null?void 0:i.map(g=>g.doc_status?null:C.dispatch(Y.GET_ORDERS_DOCSTATUS,g.guid));t&&Promise.all(t).finally(()=>{})}};q(_,()=>{ae()}),q(()=>r.status,()=>{c.value.currentPage=1,_.value=-1}),q(()=>r.contrAgent,()=>{c.value.currentPage=1,_.value=-1}),q(()=>r.search,()=>{c.value.currentPage=1,_.value=-1}),q(()=>r.period,()=>{c.value.currentPage=1,_.value=-1}),q(()=>r.refresh,(i,t)=>{t==!0&&i==!1&&ae()});const M=U(()=>{let i=K.value.filter(t=>r.contrAgent==""||t.partner_guid==r.contrAgent);return i=i.filter(t=>De(t.date)),i=i.filter(t=>Ee(t)),i=i.filter(t=>F(t)),h.value[1].value!=""&&(i=i.filter(t=>t.name.indexOf(h.value[1].value)!=-1)),h.value[2].value!=""&&(i=i.filter(t=>t.date.indexOf(h.value[2].value)!=-1)),i}),ie=i=>c.value.maxItemOnPage!=-1?i>=(c.value.currentPage-1)*c.value.maxItemOnPage&&i<c.value.currentPage*c.value.maxItemOnPage:!0,F=i=>{if(r.search.search=="")return!0;switch(r.search.id){case 1:return i.name.toUpperCase().indexOf(r.search.search.toUpperCase())!=-1;case 2:return String(i.n).toUpperCase().indexOf(r.search.search.toUpperCase())!=-1;case 3:return i.date.toUpperCase().indexOf(r.search.search.toUpperCase())!=-1;default:return!0}},De=i=>{var t;if(r.period=="\u0412\u0441\u0435")return!0;{const g=(t=r.period)==null?void 0:t.split(" - ")[0],u=g==null?void 0:g.substring(6,10),$=g==null?void 0:g.substring(3,5);return u==i.substring(6,10)&&$==i.substring(3,5)}},Ee=i=>r.status=="\u0412\u0441\u0435"?!0:Array.isArray(i.checks)?i.checks.findIndex(t=>{var u;const g=(u=se.find($=>$.name==r.status))==null?void 0:u.id;return g&&g-1==t.status})!=-1:!1,Oe=i=>{k.value.push(i),C.dispatch(je.GET_BILL_FILE_SAVE,i).finally(()=>{k.value=k.value.filter(t=>t!==i)})},Se=(i,t)=>{const u=C.getters.getCompanyStoragesData(i).find($=>$.guid==t);return u?u.name.replace(/(^|\s)\S/g,$=>$.toUpperCase()).replace(/(ООО)|(")|(\s)|([а-я])/g,""):"\u0421\u043A\u043B\u0430\u0434"},oe=i=>{C.commit(Ze.SET_CURRENT_ORDER,i),ke.value=i,Ae.value=st.ORDER},xe=i=>{V.value=!0,C.commit(Ge.CLEAN_ORDER_DETAIL),C.commit(Ye.CLEAR_CLAIMS_NEW),C.dispatch(Ke.ADD_CLAIMS_NEW,i).then(()=>{V.value=!1,L.push("/claims/request")})},Be=(i,t)=>{if(P.value==-1){P.value=t.id;const g=Object.assign({},{guid:t.guid,id:t.id,n:t.n,organization_id:t.organization_id,status:t.status});C.dispatch(Y.GET_ORDERS_BILL_REQUEST,{id:i,check:g}).then(()=>{P.value=-1}).catch(()=>{P.value=-1})}},Ve=i=>{let t=i.guid;C.dispatch(Y.GET_ORDERS_DOWNLOAD_CERTIFICATED,t)},ne=f(),re=f(0),R=f(""),W=f(!1),de=f();ue(de,()=>{W.value=!1});const Q={id:{name:"\u2116",width:3,unit:"%",min:10,visible:!0,disabled:!0},name:{name:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",width:20,unit:"%",min:10,visible:!0,disabled:!1},partner_name:{name:"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",width:20,unit:"%",min:10,visible:!0,disabled:!1},n:{name:"\u041D\u043E\u043C\u0435\u0440",width:15,unit:"%",min:5,visible:!0,disabled:!1},date:{name:"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F",width:15,unit:"%",min:10,visible:!0,disabled:!1},status:{name:"\u0421\u0442\u0430\u0442\u0443\u0441",width:10,unit:"%",min:10,visible:!0,disabled:!1},comment:{name:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438",width:15,unit:"%",min:10,visible:!0,disabled:!1},info:{name:"\u0418\u043D\u0444\u043E",width:10,unit:"%",min:10,visible:!0,disabled:!0}},s=f(JSON.parse(JSON.stringify(Q))),ve=i=>{const t=i.movementX/re.value*100;Object.keys(s.value).reduce((g,u)=>s.value[u].visible?g+s.value[u].width:g+0,0)+t<100&&s.value[R.value].width+t>s.value[R.value].min&&(s.value[R.value].width=s.value[R.value].width+t)},T=(i,t)=>{R.value=t,document.addEventListener("mousemove",ve)},Ie=()=>{document.removeEventListener("mousemove",ve),R.value="",H()},Pe=()=>{const i=Object.keys(s.value).reduce((t,g)=>s.value[g].visible?t+s.value[g].width:t+0,0);i>100&&Object.keys(s.value).forEach(t=>{t!="id"&&(s.value[t].width=s.value[t].width-(i-100)/6)})},Le=()=>{s.value=JSON.parse(JSON.stringify(Q)),H()},H=()=>{Pe(),localStorage.setItem("orders_list_table",JSON.stringify(s.value))};return be(()=>{Ne(()=>{re.value=ne.value.getBoundingClientRect().width;const i=localStorage.getItem("orders_list_table");i&&(s.value=JSON.parse(i)),s.value.comment||(s.value=JSON.parse(JSON.stringify(Q)),localStorage.setItem("orders_list_table",JSON.stringify(s.value)))})}),(i,t)=>{const g=ze("router-link");return l(),a("div",{class:"orders-list-wrap",onMouseup:t[23]||(t[23]=u=>Ie())},[e("div",At,[e("div",Dt,[D(tt,{maxPage:c.value.maxItemOnPage!=-1?Math.ceil(p(M).length/c.value.maxItemOnPage):1,currentPage:c.value.currentPage,"onUpdate:currentPage":t[0]||(t[0]=u=>c.value.currentPage=u),maxItemOnPage:c.value.maxItemOnPage,"onUpdate:maxItemOnPage":t[1]||(t[1]=u=>c.value.maxItemOnPage=u)},null,8,["maxPage","currentPage","maxItemOnPage"])]),e("div",{class:"orders-heading-info-text",style:A(p(M).length!=p(K).length?"visibility: visible":"visibility: hidden")}," \u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E "+w(p(M).length)+" \u0438\u0437 "+w(p(K).length),5),e("div",{class:m(["orders-heading-info-settings",{active:W.value}]),onClick:t[2]||(t[2]=u=>W.value=!0)},Ot,2),e("div",{class:m(["orders-heading-info-settings-dropdown",{active:W.value}]),ref_key:"tableMenu",ref:de},[(l(!0),a(z,null,J(s.value,(u,$)=>(l(),a("a",{class:"orders-list-more-dropdown-link",key:$,onClick:H},[D(ut,{modelValue:u.visible,"onUpdate:modelValue":j=>u.visible=j,disabled:u.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"]),e("span",{onClick:j=>u.disabled?null:u.visible=!u.visible},w(u.name),9,St)]))),128)),e("a",{class:"orders-list-more-dropdown-link clear",onClick:t[3]||(t[3]=u=>Le())},Vt)],2)]),e("div",It,[e("div",{class:"orders-list-row orders-list-heading",ref_key:"table",ref:ne},[s.value.id.visible?(l(),a("div",{key:0,class:m(["orders-list-elem",{id:!0}]),style:A(`width: ${s.value.id.width}${s.value.id.unit}`)},[O(w(s.value.id.name)+" ",1),e("div",{class:"orders-list-elem-resize",onMousedown:t[4]||(t[4]=u=>T(u,"id"))},null,32)],4)):v("",!0),s.value.name.visible?(l(),a("div",{key:1,class:m(["orders-list-elem",{name:!0,active:F.search!=""&&F.id==1||h.value[1].value!=""}]),style:A(`width: ${s.value.name.width}${s.value.name.unit}`)},[D(Xe,{modelValue:h.value[1].value,"onUpdate:modelValue":t[5]||(t[5]=u=>h.value[1].value=u),show:h.value[1].show,"onUpdate:show":t[6]||(t[6]=u=>h.value[1].show=u)},null,8,["modelValue","show"]),Pt,e("div",{class:m("orders-list-elem-filter"+(h.value[1].show||h.value[1].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:t[7]||(t[7]=u=>h.value[1].show=!0)},Mt,2),h.value[1].value!=""?(l(),a("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:t[8]||(t[8]=u=>{h.value[1].value="",_.value=-1})},Tt)):v("",!0),e("div",{class:"orders-list-elem-resize",onMousedown:t[9]||(t[9]=u=>T(u,"name"))},null,32)],6)):v("",!0),s.value.partner_name.visible?(l(),a("div",{key:2,class:m(["orders-list-elem",{partner_name:!0,active:d.contrAgent!=""}]),style:A(`width: ${s.value.partner_name.width}${s.value.partner_name.unit}`)},[O(w(s.value.partner_name.name)+" ",1),e("div",{class:"orders-list-elem-resize",onMousedown:t[10]||(t[10]=u=>T(u,"partner_name"))},null,32)],6)):v("",!0),s.value.n.visible?(l(),a("div",{key:3,class:m(["orders-list-elem",{n:!0,active:F.search!=""&&F.id==2}]),style:A(`width: ${s.value.n.width}${s.value.n.unit}`)},[e("div",Ut,w(s.value.n.name),1),e("div",{class:"orders-list-elem-resize",onMousedown:t[11]||(t[11]=u=>T(u,"n"))},null,32)],6)):v("",!0),s.value.date.visible?(l(),a("div",{key:4,class:m(["orders-list-elem",{date:!0,active:F.search!=""&&F.id==3||d.period!="\u0412\u0441\u0435"||h.value[2].value!=""}]),style:A(`width: ${s.value.date.width}${s.value.date.unit}`)},[D(kt,{modelValue:h.value[2].value,"onUpdate:modelValue":t[12]||(t[12]=u=>h.value[2].value=u),show:h.value[2].show,"onUpdate:show":t[13]||(t[13]=u=>h.value[2].show=u)},null,8,["modelValue","show"]),e("div",null,w(s.value.date.name),1),e("div",{class:m("orders-list-elem-filter"+(h.value[2].show||h.value[2].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:t[14]||(t[14]=u=>h.value[2].show=!0)},qt,2),h.value[2].value!=""?(l(),a("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:t[15]||(t[15]=u=>{h.value[2].value="",_.value=-1})},zt)):v("",!0),e("div",{class:"orders-list-elem-resize",onMousedown:t[16]||(t[16]=u=>T(u,"date"))},null,32)],6)):v("",!0),s.value.status.visible?(l(),a("div",{key:5,class:m(["orders-list-elem",{status:!0,active:d.status!="\u0412\u0441\u0435"}]),style:A(`width: ${s.value.status.width}${s.value.status.unit}`)},[O(w(s.value.status.name)+" ",1),e("div",{class:"orders-list-elem-resize",onMousedown:t[17]||(t[17]=u=>T(u,"status"))},null,32)],6)):v("",!0),s.value.comment.visible?(l(),a("div",{key:6,class:m(["orders-list-elem",{comment:!0,active:d.status!="\u0412\u0441\u0435"}]),style:A(`width: ${s.value.comment.width}${s.value.comment.unit}`)},[O(w(s.value.comment.name)+" ",1),e("div",{class:"orders-list-elem-resize",onMousedown:t[18]||(t[18]=u=>T(u,"comment"))},null,32)],6)):v("",!0),s.value.info.visible?(l(),a("div",{key:7,class:m(["orders-list-elem",{info:!0}]),style:A(`width: ${s.value.info.width}${s.value.info.unit}`)},w(s.value.info.name),5)):v("",!0)],512),(l(!0),a(z,null,J(p(M),(u,$)=>{var j,he;return l(),a("div",{class:m(["orders-list-item",{active:$==_.value,reserved:u.reserved}]),key:$},[ie($)?(l(),a("div",{key:0,class:"orders-list-row orders-list-main-row",onClick:o=>$==_.value?_.value=-1:_.value=$},[s.value.id.visible?(l(),a("div",{key:0,class:m(["orders-list-elem",{id:!0}]),style:A(`width: ${s.value.id.width}${s.value.id.unit}`)},[O(w($+1)+" ",1),jt],4)):v("",!0),s.value.name.visible?(l(),a("div",{key:1,class:m(["orders-list-elem",{name:!0}]),style:A(`width: ${s.value.name.width}${s.value.name.unit}`)},w(u.name),5)):v("",!0),s.value.partner_name.visible?(l(),a("div",{key:2,class:m(["orders-list-elem",{partner_name:!0}]),style:A(`width: ${s.value.partner_name.width}${s.value.partner_name.unit}`)},w(p(Je)(u.partner_name)),5)):v("",!0),s.value.n.visible?(l(),a("div",{key:3,class:m(["orders-list-elem",{n:!0}]),style:A(`width: ${s.value.n.width}${s.value.n.unit}`)},w(u.n),5)):v("",!0),s.value.date.visible?(l(),a("div",{key:4,class:m(["orders-list-elem",{date:!0}]),style:A(`width: ${s.value.date.width}${s.value.date.unit}`)},w(u.date),5)):v("",!0),s.value.status.visible?(l(),a("div",{key:5,class:m(["orders-list-elem",{status:!0}]),style:A(`width: ${s.value.status.width}${s.value.status.unit}`)},[(l(!0),a(z,null,J(u.checks,(o,X)=>(l(),a("div",{class:m("orders-list-elem-status "+(o.status>=0&&o.status<p(B).length?p(B)[o.status].class:"")),tooltip:o.status>=0&&o.status<p(B).length?p(B)[o.status].name:"",flow:"up",key:X},null,10,Zt))),128))],4)):v("",!0),s.value.comment.visible?(l(),a("div",{key:6,class:m(["orders-list-elem",{comment:!0}]),style:A(`width: ${s.value.comment.width}${s.value.comment.unit}`)},w(u.comment),5)):v("",!0),s.value.info.visible?(l(),a("div",{key:7,class:m(["orders-list-elem",{info:!0}]),style:A(`width: ${s.value.info.width}${s.value.info.unit}`)},[e("button",{class:"orders-list-more",onClick:N(o=>S.value=$,["stop"])},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E",8,Gt),e("div",{class:m("orders-list-more-dropdown"+($==S.value?" active":"")),ref_for:!0,ref_key:"target",ref:b},[e("a",{class:"orders-list-more-dropdown-link",onClick:N(o=>{E.value=u.n,n.value=!0},["stop"])},"\u0414\u0435\u0442\u0430\u043B\u0438 \u0437\u0430\u043A\u0430\u0437\u0430",8,Yt),e("a",{class:"orders-list-more-dropdown-link",onClick:N(o=>{E.value=u.n,n.value=!0,y.value=!1,I.value=!0},["stop"])},"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,Kt),u.reserved?(l(),a("a",{key:0,class:"orders-list-more-dropdown-link",onClick:N(o=>{E.value=u.n,n.value=!0,y.value=!0,I.value=!1},["stop"])},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,Wt)):v("",!0),Qt,Ht,((j=u.checks)==null?void 0:j.filter(o=>o.status==5||o.status==9))&&((he=u.checks)==null?void 0:he.filter(o=>o.status==5||o.status==9).length)>0?(l(),a("a",{key:1,class:"orders-list-more-dropdown-link",onClick:N(o=>xe(u.n),["stop"])}," \u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u043F\u0440\u0435\u0442\u0435\u043D\u0437\u0438\u044E ",8,Xt)):v("",!0),D(g,{class:"orders-list-more-dropdown-link",tag:"a",to:"/shipments/request",onClick:o=>oe(u.n)},{default:te(()=>[eu]),_:2},1032,["onClick"]),D(g,{class:"orders-list-more-dropdown-link",tag:"a",to:"/kp",onClick:N(o=>oe(u.n),["stop"])},{default:te(()=>[tu]),_:2},1032,["onClick"])],2)],4)):v("",!0)],8,Jt)):v("",!0),ie($)?(l(),a("div",{key:1,class:m(["orders-list-info",{active:$==_.value}]),onClick:t[19]||(t[19]=o=>S.value=-1)},[Array.isArray(u.checks)&&u.checks.length>0&&u.status_code!=7&&u.status_code!=9?(l(),a("div",uu,[(l(!0),a(z,null,J(u.checks,(o,X)=>{var fe,pe,ge,_e,we;return l(),a("div",{class:"orders-list-info-row",key:X},[e("div",su,w(Se(u.partner_guid,o.organization_id)),1),e("div",lu,[(fe=o.doc_status)!=null&&fe.StatusSchet?(l(),a("div",au,[e("div",{class:"orders-list-info-download",onClick:Ce=>Oe(o.guid)},[e("span",null," \u0421\u0447\u0451\u0442 \u043E\u0442 "+w(u.date.substring(0,10)),1),k.value.includes(o.guid)?(l(),Z(G,{key:0,small:""})):v("",!0)],8,iu),ou])):(l(),a("div",nu,[e("div",ru," \u0421\u0447\u0451\u0442 \u043E\u0442 "+w(u.date.substring(0,10)),1),du]))]),o.doc_status?(l(),a("div",cu,[(pe=o.doc_status)!=null&&pe.StatusSchet?(l(),a("a",{key:0,class:"orders-list-info-doc sc",href:`${p(x)}/api/order/print?id=${o.guid}&name=\u0421\u0447\u0435\u0442`,target:"_blank",title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0447\u0435\u0442"},null,8,mu)):v("",!0),(ge=o.doc_status)!=null&&ge.StatusUPD?(l(),a("a",{key:1,class:"orders-list-info-doc upd",href:`${p(x)}/api/order/print?id=${o.guid}&name=\u0423\u041F\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0435\u0440\u0435\u0434\u0430\u0442\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,hu)):v("",!0),(_e=o.doc_status)!=null&&_e.StatusSF?(l(),a("a",{key:2,class:"orders-list-info-doc sf",href:`${p(x)}/api/order/print?id=${o.guid}&name=\u0421\u0424`,target:"_blank",title:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043A\u0442\u0443\u0440\u0430"},null,8,fu)):v("",!0),(we=o.doc_status)!=null&&we.StatusUPK?(l(),a("a",{key:3,class:"orders-list-info-doc kor",href:`${p(x)}/api/order/print?id=${o.guid}&name=\u0423\u041A\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,pu)):v("",!0)])):(l(),a("div",vu,[D(G,{small:""})])),e("div",gu,[O(w(p(B)[o.status]?p(B)[o.status].name:"")+" ",1),p(B)[o.status]?(l(),a("div",{key:0,class:m("orders-list-elem-status small "+(o.status>=0&&o.status<p(B).length?p(B)[o.status].class:"")),flow:"up"},null,2)):v("",!0)]),e("div",_u,[o.status!=10?(l(),a("div",wu,[P.value==o.id?(l(),Z(G,{key:0,small:""})):(l(),a("span",{key:1,onClick:Ce=>Be(u.n,o)},"\u0417\u0430\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u0441\u0447\u0435\u0442",8,Cu))])):v("",!0),e("div",yu,[e("span",{onClick:Ce=>Ve(o)},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B",8,$u)])])])}),128))])):(l(),a("div",bu,Au))],2)):v("",!0)],2)}),128)),p(K).length==0&&!d.loading?(l(),a("div",Du,[e("div",Eu,[Ou,D(g,{tag:"a",class:"order-info-link",to:"/order"},{default:te(()=>[Su]),_:1}),xu])])):v("",!0)]),d.loading?(l(),Z(G,{key:0,style:{width:"100%"}})):v("",!0),V.value?(l(),Z(We,{key:1})):v("",!0),D(et,{modelValue:n.value,"onUpdate:modelValue":t[20]||(t[20]=u=>n.value=u),orderId:E.value,repeatOrder:I.value,"onUpdate:repeatOrder":t[21]||(t[21]=u=>I.value=u),editOrder:y.value,"onUpdate:editOrder":t[22]||(t[22]=u=>y.value=u)},null,8,["modelValue","orderId","repeatOrder","editOrder"])],32)}}}),Vu={class:"top-line product-page"},Iu={class:"orders-heading"},Pu={class:"orders-heading-elem"},Lu={class:"orders-heading-item"},Mu=e("div",{class:"orders-heading-text"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442:",-1),Fu={class:"orders-heading-item"},Tu=e("div",{class:"orders-heading-text"},"\u0421\u0442\u0430\u0442\u0443\u0441:",-1),Uu={class:"orders-heading-item"},Ru=e("div",{class:"orders-heading-text"},"\u041F\u0435\u0440\u0438\u043E\u0434:",-1),qu={key:0,class:"orders-heading-elem"},Nu={key:1},Hu=le({__name:"orders",setup(d){const r=$e(),C=f(!0),L=f({id:1,search:""}),V=U(()=>r.getters.getCompanysList),_=f(0),S=U(()=>r.getters.getCompanyFromOrders()),b=f(""),n=U(()=>r.getters.getOrdersDataPeriodArray),k=f(0),E=f(!1),h=()=>{E.value==!1&&(E.value=!0,r.dispatch(Y.GET_ORDERS).finally(()=>{E.value=!1,C.value=!0,C.value=!1}))};return be(()=>{r.dispatch(Y.GET_ORDERS).finally(()=>{C.value=!1}),r.getters.isCompanysLoad||r.dispatch(He.GET_COMPANYS).then(()=>{})}),(I,y)=>{var x;return l(),a("div",null,[e("div",Vu,[D(Te,{data:p(V),modelValue:b.value,"onUpdate:modelValue":y[0]||(y[0]=c=>b.value=c)},null,8,["data","modelValue"]),D(Me),D(Fe)]),D(Ue,{newOrder:""}),e("div",Iu,[e("div",Pu,[e("div",Lu,[Mu,D(ee,{data:p(S),modelValue:b.value,"onUpdate:modelValue":y[1]||(y[1]=c=>b.value=c)},null,8,["data","modelValue"])]),e("div",Fu,[Tu,D(ee,{data:p(se),modelValue:_.value,"onUpdate:modelValue":y[2]||(y[2]=c=>_.value=c)},null,8,["data","modelValue"])]),e("div",Uu,[Ru,D(ee,{data:p(n),modelValue:k.value,"onUpdate:modelValue":y[3]||(y[3]=c=>k.value=c)},null,8,["data","modelValue"])]),e("div",{class:"orders-heading-clean",title:"\u0423\u0431\u0440\u0430\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B",onClick:y[4]||(y[4]=c=>{b.value="",k.value=0,_.value=0})})]),C.value?v("",!0):(l(),a("div",qu,[e("button",{class:"product-search-btn gradient-btn",onClick:y[5]||(y[5]=c=>h())},[E.value?(l(),Z(G,{key:0,small:""})):(l(),a("div",Nu,"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"))])]))]),D(Bu,{loading:C.value,contrAgent:b.value,period:p(n)[k.value].name,status:(x=p(se).find(c=>c.id==_.value))==null?void 0:x.name,search:L.value,refresh:E.value},null,8,["loading","contrAgent","period","status","search","refresh"])])}}});export{Hu as default};
