import{N as de,_ as ce}from"./PersonalBar.9b84b0fc.js";import{_ as ve}from"./CompanyBarTop.48f64128.js";import{_ as he}from"./TopNav.c2e2c6d8.js";import{S as z}from"./SelectInput.d490096b.js";import{d as q,g as p,z as ee,i as P,_ as me,o,b as i,a as e,y as E,t as A,F as R,e as Y,l as I,f as ue,O as pe,J as L,r as _e,m as k,u as h,Q as fe,j as D,n as ge,ad as M,w as X,c as T,k as te,ag as we,Y as Ce,af as ye,ah as De,ai as ke,aj as Ae,B as Ee,ak as G,h as $e,q as Oe}from"./index.dd5c42dc.js";import{P as N}from"./PreloaderLocal.0fdb54b9.js";import{O as U,M as xe,a as Be}from"./types.27837570.js";import{_ as Ve}from"./CatalogPagination.cced27d2.js";import"./DeleteButton.f5aacfdc.js";import"./OrderDraftCard.41d10b78.js";const Se=q({props:{show:{type:Boolean,default:!0},modelValue:{type:String,default:""},error:{type:Boolean,default:!1}},emits:["update:modelValue","update:show","onInput"],setup(r,{emit:l}){const m=p(0),V=p(null);ee(V,()=>l("update:show",!1));const x=P(()=>r.modelValue?r.modelValue:""),d=P(()=>{let _=new Date;_.setHours(0,0,0,0);let s=new Date;r.modelValue!=""&&(s=new Date(parseInt(r.modelValue.substr(6,4)),parseInt(r.modelValue.substr(3,2))-1,parseInt(r.modelValue.substr(0,2)))),s.setMonth(s.getMonth()+m.value),s=new Date(s.toISOString().substr(0,7)+"-01");let f=s.toLocaleString("default",{month:"long"});f=f.charAt(0).toUpperCase()+f.slice(1);let C=s.getMonth(),n=s.getFullYear(),B=[],v=[];s=new Date(s.getFullYear(),s.getMonth(),s.getDay()==1?-6:2-s.getDay());for(let g=1;g<=42;g++){let w=s.getDate(),S=!1;r.modelValue!=""&&(S=s.getTime()===new Date(parseInt(r.modelValue.substr(6,4)),parseInt(r.modelValue.substr(3,2))-1,parseInt(r.modelValue.substr(0,2))).getTime()),v.push({day:w,disable:s.getMonth()!=C,today:s.getMonth()==_.getMonth()&&s.getDate()==_.getDate()&&s.getFullYear()==_.getFullYear(),select:S}),s=new Date(s.getFullYear(),s.getMonth(),w+1),g%7==0&&(B.push(v),v=[])}return{year:n,month:{month:f,month_int:C},dateArr:B}});return{select_date:(_,s,f)=>{let C=new Date(_,s,f);m.value=0,l("update:modelValue",C.toLocaleString("ru").substr(0,10)),l("onInput"),l("update:show",!1)},dateText:x,genDay:d,target:V,delta:m}}}),be={class:"modal-datepicker",ref:"target"},Fe={class:"ui-datepicker-date"},Pe=["value"],Ie={class:E("ui-datepicker active")},Le={class:"ui-datepicker-header"},Ue=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 0.71186 -0.702321 0.71186 11.8181 0)",fill:"#53565B"},null,-1),Me=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 -0.71186 -0.702321 -0.71186 11.8181 24)",fill:"#53565B"},null,-1),Te=[Ue,Me],Ne={class:"ui-datepicker-title"},Re={class:"ui-datepicker-month"},Ye=I("\xA0"),ze={class:"ui-datepicker-year"},Ge=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 0.71186 0.702322 0.71186 1.73828 0)",fill:"#53565B"},null,-1),qe=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 -0.71186 0.702322 -0.71186 1.73828 24)",fill:"#53565B"},null,-1),je=[Ge,qe],Ke={class:"ui-datepicker-calendar"},We=e("thead",null,[e("tr",null,[e("th",{scope:"col"},[e("span",{title:"\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A"},"\u041F\u043D")]),e("th",{scope:"col"},[e("span",{title:"\u0432\u0442\u043E\u0440\u043D\u0438\u043A"},"\u0412\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0440\u0435\u0434\u0430"},"\u0421\u0440")]),e("th",{scope:"col"},[e("span",{title:"\u0447\u0435\u0442\u0432\u0435\u0440\u0433"},"\u0427\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u043F\u044F\u0442\u043D\u0438\u0446\u0430"},"\u041F\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0443\u0431\u0431\u043E\u0442\u0430"},"\u0421\u0431")]),e("th",{scope:"col",class:"ui-datepicker-week-end"},[e("span",{title:"\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435"},"\u0412\u0441")])])],-1),Ze=["onClick"];function He(r,l,m,V,x,d){return o(),i("div",{class:E("modal-datepicker-wrap"+(r.show?" show":"")),ref:"target"},[e("div",be,[e("div",Fe,[e("input",{class:E("active"),type:"text",placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",name:"date",autocomplete:"off",readonly:"",value:r.dateText,onFocus:l[0]||(l[0]=$=>r.active=!0)},null,40,Pe),e("div",{class:"ui-datepicker-date-clear",onClick:l[1]||(l[1]=$=>r.modelValue==""?r.$emit("update:show",!1):r.$emit("update:modelValue",""))}),e("div",Ie,[e("div",Le,[(o(),i("svg",{class:"ui-datepicker-prev",title:"<\u041F\u0440\u0435\u0434",onClick:l[2]||(l[2]=$=>r.delta=r.delta-1),width:"13",height:"24",viewBox:"0 0 13 24",xmlns:"http://www.w3.org/2000/svg"},Te)),e("div",Ne,[e("span",Re,A(r.genDay.month.month),1),Ye,e("span",ze,A(r.genDay.year),1)]),(o(),i("svg",{class:"ui-datepicker-next",title:"\u0421\u043B\u0435\u0434>",onClick:l[3]||(l[3]=$=>r.delta=r.delta+1),width:"14",height:"24",viewBox:"0 0 14 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},je))]),e("table",Ke,[We,e("tbody",null,[(o(!0),i(R,null,Y(r.genDay.dateArr,($,_)=>(o(),i("tr",{key:_},[(o(!0),i(R,null,Y($,(s,f)=>(o(),i("td",{key:f,class:E((s.disable?" disable":"")+(s.today?" today":"")+(s.select?" select":"")),onClick:C=>s.disable?"":r.select_date(r.genDay.year,r.genDay.month.month_int,s.day)},[e("span",null,A(s.day),1)],10,Ze))),128))]))),128))])])])])],512)],2)}var Je=me(Se,[["render",He]]);const Qe={class:"orders-list-wrap"},Xe={class:"orders-heading-info"},eu={class:"orders-heading-pagination"},uu={class:"orders-list"},tu={class:"orders-list-row orders-list-heading"},su=e("div",{class:"orders-list-elem"},"\u2116",-1),au=e("div",null,"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),lu=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),ou=[lu],ru=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),iu=[ru],nu=e("div",null,"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F",-1),du=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),cu=[du],vu=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),hu=[vu],mu=e("div",{class:"orders-list-elem"},"\u0418\u043D\u0444\u043E",-1),pu=["onClick"],_u={class:"orders-list-elem"},fu=e("div",{class:"table-arrow"},null,-1),gu={class:"orders-list-elem"},wu={class:"orders-list-elem"},Cu={class:"orders-list-elem"},yu={class:"orders-list-elem"},Du={class:"orders-list-elem"},ku={key:0,tooltip:"\u0412 \u043F\u043E\u0437\u0438\u0446\u0438\u044F\u0445 \u0437\u0430\u043A\u0430\u0437\u0430 \u043F\u0440\u0438\u0441\u0443\u0442\u0441\u0432\u0443\u0435\u0442 \u0440\u0435\u0437\u0435\u0440\u0432",flow:"down",style:{width:"100%"}},Au={class:"orders-list-elem"},Eu=["onClick"],$u=["onClick"],Ou=["onClick"],xu=["onClick"],Bu=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B",-1),Vu=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B",-1),Su=["onClick"],bu=e("span",null,"\u0417\u0430\u044F\u0432\u043A\u0430 \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442",-1),Fu={key:0},Pu={class:"orders-list-info-elem"},Iu={class:"orders-list-info-elem"},Lu={key:0,class:"orders-list-info-about tooltip"},Uu=["onClick"],Mu=e("span",{class:"tooltiptext"},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442",-1),Tu={key:1,class:"orders-list-info-about tooltip"},Nu={class:"orders-list-info-download disable"},Ru=e("span",{class:"tooltiptext"},[I("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442 \u043C\u043E\u0436\u043D\u043E \u0442\u043E\u043B\u044C\u043A\u043E "),e("br"),I(" \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430")],-1),Yu={key:0,class:"orders-list-info-elem orders-list-info-doc-wrap"},zu={key:1,class:"orders-list-info-elem orders-list-info-doc-wrap"},Gu=["href"],qu=["href"],ju=["href"],Ku=["href"],Wu={class:"orders-list-info-elem"},Zu=e("div",{class:"orders-list-info-elem"},null,-1),Hu={key:1,class:"orders-list-info-row"},Ju=Ee('<div class="orders-list-info-elem"></div><div class="orders-list-info-elem"> \u0421\u0447\u0435\u0442 \u043E\u0442\u0441\u0443\u0442\u0432\u0443\u0435\u0442 </div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div>',6),Qu=[Ju],Xu={key:0,class:"orders-list-row orders-list-main-row"},et={class:"order-info"},ut=I(" \u0417\u0430\u043A\u0430\u0437\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 "),tt=I("\u043D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437"),st=I(" \u0438 \u043E\u043D \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0432 \u0441\u043F\u0438\u0441\u043A\u0435. "),at=q({__name:"OrdersListCard",props:{contrAgent:{type:String},period:{type:String},status:{type:String},loading:{type:Boolean,default:!1},search:{type:Object,required:!0},refresh:{type:Boolean,default:!1}},setup(r){const l=r,m=ue(te),V=pe(),x=p(!1),d=p(-1),$=p(-1),_=p(null),s=p(!1),f=p([]),C=p(-1),n=p([{name:"id",value:"",show:!1},{name:"name",value:"",show:!1},{name:"date",value:"",show:!1}]),B=p(!1),v=p(!1),g="http://91.232.12.198:82",w=p({maxItemOnPage:10,currentPage:1});ee(_,()=>{$.value=-1});let S=P(()=>m.getters.getOrders);const j=()=>{var a;if(d.value!=-1&&b.value&&Array.isArray(b.value[d.value].checks)){let u=(a=b.value[d.value].checks)==null?void 0:a.map(O=>O.doc_status?null:m.dispatch(G.GET_ORDERS_DOCSTATUS,O.guid));u&&Promise.all(u).finally(()=>{})}};L(d,()=>{j()}),L(()=>l.status,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.contrAgent,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.search,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.period,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.refresh,(a,u)=>{u==!0&&a==!1&&j()});const b=P(()=>{let a=S.value.filter(u=>l.contrAgent==""||u.partner_guid==l.contrAgent);return a=a.filter(u=>se(u.date)),a=a.filter(u=>ae(u)),a=a.filter(u=>F(u)),n.value[1].value!=""&&(a=a.filter(u=>u.name.indexOf(n.value[1].value)!=-1)),n.value[2].value!=""&&(a=a.filter(u=>u.date.indexOf(n.value[2].value)!=-1)),a}),K=a=>w.value.maxItemOnPage!=-1?a>=(w.value.currentPage-1)*w.value.maxItemOnPage&&a<w.value.currentPage*w.value.maxItemOnPage:!0,F=a=>{if(l.search.search=="")return!0;switch(l.search.id){case 1:return a.name.toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;case 2:return String(a.n).toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;case 3:return a.date.toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;default:return!0}},se=a=>{var u;if(l.period=="\u0412\u0441\u0435")return!0;{const O=(u=l.period)==null?void 0:u.split(" - ")[0],t=O==null?void 0:O.substring(6,10),y=O==null?void 0:O.substring(3,5);return t==a.substring(6,10)&&y==a.substring(3,5)}},ae=a=>l.status=="\u0412\u0441\u0435"?!0:Array.isArray(a.checks)?a.checks.findIndex(u=>U[parseInt(u.status+1)]?l.status==U[parseInt(u.status+1)].name:!1)!=-1:!1,le=a=>{f.value.push(a),m.dispatch(we.GET_BILL_FILE_SAVE,a).finally(()=>{f.value=f.value.filter(u=>u!==a)})},oe=(a,u)=>{const t=m.getters.getCompanyStoragesData(a).find(y=>y.guid==u);return t?t.name.replace(/(^|\s)\S/g,y=>y.toUpperCase()).replace(/(ООО)|(")|(\s)|([а-я])/g,""):"\u0421\u043A\u043B\u0430\u0434"},re=a=>{m.commit(Ce.SET_CURRENT_ORDER,a)},ie=a=>{x.value=!0,m.commit(ye.CLEAN_ORDER_DETAIL),m.commit(De.CLEAR_CLAIMS_NEW),m.dispatch(ke.ADD_CLAIMS_NEW,a).then(()=>{x.value=!1,V.push("/claims/request")})};return(a,u)=>{const O=_e("router-link");return o(),i("div",Qe,[e("div",Xe,[e("div",eu,[k(Ve,{maxPage:w.value.maxItemOnPage!=-1?Math.ceil(h(b).length/w.value.maxItemOnPage):1,currentPage:w.value.currentPage,"onUpdate:currentPage":u[0]||(u[0]=t=>w.value.currentPage=t),maxItemOnPage:w.value.maxItemOnPage,"onUpdate:maxItemOnPage":u[1]||(u[1]=t=>w.value.maxItemOnPage=t)},null,8,["maxPage","currentPage","maxItemOnPage"])]),e("div",{class:"orders-heading-info-text",style:fe(h(b).length!=h(S).length?"visibility: visible":"visibility: hidden")}," \u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E "+A(h(b).length)+" \u0438\u0437 "+A(h(S).length),5)]),e("div",uu,[e("div",tu,[su,e("div",{class:E("orders-list-elem"+(F.search!=""&&F.id==1?" active":"")+(n.value[1].value!=""?" active":""))},[k(xe,{modelValue:n.value[1].value,"onUpdate:modelValue":u[2]||(u[2]=t=>n.value[1].value=t),show:n.value[1].show,"onUpdate:show":u[3]||(u[3]=t=>n.value[1].show=t)},null,8,["modelValue","show"]),au,e("div",{class:E("orders-list-elem-filter"+(n.value[1].show||n.value[1].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:u[4]||(u[4]=t=>n.value[1].show=!0)},ou,2),n.value[1].value!=""?(o(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:u[5]||(u[5]=t=>{n.value[1].value="",d.value=-1})},iu)):D("",!0)],2),e("div",{class:E("orders-list-elem"+(r.contrAgent!=""?" active":""))},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",2),e("div",{class:E("orders-list-elem"+(F.search!=""&&F.id==2?" active":""))},"\u041D\u043E\u043C\u0435\u0440",2),e("div",{class:E("orders-list-elem"+(F.search!=""&&F.id==3?" active":"")+(r.period!="\u0412\u0441\u0435"?" active":"")+(n.value[2].value!=""?" active":""))},[k(Je,{modelValue:n.value[2].value,"onUpdate:modelValue":u[6]||(u[6]=t=>n.value[2].value=t),show:n.value[2].show,"onUpdate:show":u[7]||(u[7]=t=>n.value[2].show=t)},null,8,["modelValue","show"]),nu,e("div",{class:E("orders-list-elem-filter"+(n.value[2].show||n.value[2].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:u[8]||(u[8]=t=>n.value[2].show=!0)},cu,2),n.value[2].value!=""?(o(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:u[9]||(u[9]=t=>{n.value[2].value="",d.value=-1})},hu)):D("",!0)],2),e("div",{class:E("orders-list-elem"+(r.status!="\u0412\u0441\u0435"?" active":""))},"\u0421\u0442\u0430\u0442\u0443\u0441",2),mu]),(o(!0),i(R,null,Y(h(b),(t,y)=>(o(),i("div",{class:E(["orders-list-item",{active:y==d.value,reserved:t.reserved}]),key:y},[K(y)?(o(),i("div",{key:0,class:"orders-list-row orders-list-main-row",onClick:c=>y==d.value?d.value=-1:d.value=y},[e("div",_u,[I(A(y+1)+" ",1),fu]),e("div",gu,A(t.name),1),e("div",wu,A(h(ge)(t.partner_name)),1),e("div",Cu,A(t.n),1),e("div",yu,A(t.date),1),e("div",Du,[t.reserved?(o(),i("div",ku)):D("",!0)]),e("div",Au,[e("button",{class:"orders-list-more",onClick:M(c=>$.value=y,["stop"])},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E",8,Eu),e("div",{class:E("orders-list-more-dropdown"+(y==$.value?" active":"")),ref_for:!0,ref_key:"target",ref:_},[e("a",{class:"orders-list-more-dropdown-link",onClick:M(c=>{C.value=t.n,s.value=!0},["stop"])},"\u0414\u0435\u0442\u0430\u043B\u0438 \u0437\u0430\u043A\u0430\u0437\u0430",8,$u),e("a",{class:"orders-list-more-dropdown-link",onClick:M(c=>{C.value=t.n,s.value=!0,v.value=!1,B.value=!0},["stop"])},"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,Ou),t.reserved?(o(),i("a",{key:0,class:"orders-list-more-dropdown-link",onClick:M(c=>{C.value=t.n,s.value=!0,v.value=!0,B.value=!1},["stop"])},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,xu)):D("",!0),Bu,Vu,e("a",{class:"orders-list-more-dropdown-link",onClick:M(c=>ie(t.n),["stop"])},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u043F\u0440\u0435\u0442\u0435\u043D\u0437\u0438\u044E",8,Su),k(O,{class:"orders-list-more-dropdown-link",tag:"a",to:"/shipments/request",onClick:c=>re(t.n)},{default:X(()=>[bu]),_:2},1032,["onClick"])],2)])],8,pu)):D("",!0),K(y)?(o(),i("div",{key:1,class:E(["orders-list-info",{active:y==d.value}]),onClick:u[10]||(u[10]=c=>$.value=-1)},[Array.isArray(t.checks)&&t.checks.length>0?(o(),i("div",Fu,[(o(!0),i(R,null,Y(t.checks,(c,ne)=>{var W,Z,H,J,Q;return o(),i("div",{class:"orders-list-info-row",key:ne},[e("div",Pu,A(oe(t.partner_guid,c.organization_id)),1),e("div",Iu,[(W=c.doc_status)!=null&&W.StatusSchet?(o(),i("div",Lu,[e("div",{class:"orders-list-info-download",onClick:_t=>le(c.guid)},[e("span",null," \u0421\u0447\u0451\u0442 \u043E\u0442 "+A(t.date.substring(0,10)),1),f.value.includes(t.guid)?(o(),T(N,{key:0,small:""})):D("",!0)],8,Uu),Mu])):(o(),i("div",Tu,[e("div",Nu," \u0421\u0447\u0451\u0442 \u043E\u0442 "+A(t.date.substring(0,10)),1),Ru]))]),c.doc_status?(o(),i("div",zu,[(Z=c.doc_status)!=null&&Z.StatusSchet?(o(),i("a",{key:0,class:"orders-list-info-doc sc",href:`${h(g)}/api/order/print?id=${c.guid}&name=\u0421\u0447\u0435\u0442`,target:"_blank",title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0447\u0435\u0442"},null,8,Gu)):D("",!0),(H=c.doc_status)!=null&&H.StatusUPD?(o(),i("a",{key:1,class:"orders-list-info-doc upd",href:`${h(g)}/api/order/print?id=${c.guid}&name=\u0423\u041F\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0435\u0440\u0435\u0434\u0430\u0442\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,qu)):D("",!0),(J=c.doc_status)!=null&&J.StatusSF?(o(),i("a",{key:2,class:"orders-list-info-doc sf",href:`${h(g)}/api/order/print?id=${c.guid}&name=\u0421\u0424`,target:"_blank",title:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043A\u0442\u0443\u0440\u0430"},null,8,ju)):D("",!0),(Q=c.doc_status)!=null&&Q.StatusUPK?(o(),i("a",{key:3,class:"orders-list-info-doc kor",href:`${h(g)}/api/order/print?id=${c.guid}&name=\u0423\u041A\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,Ku)):D("",!0)])):(o(),i("div",Yu,[k(N,{small:""})])),e("div",Wu,A(h(U)[c.status+1]?h(U)[c.status+1].name:""),1),Zu])}),128))])):(o(),i("div",Hu,Qu))],2)):D("",!0)],2))),128)),h(S).length==0&&!r.loading?(o(),i("div",Xu,[e("div",et,[ut,k(O,{tag:"a",class:"order-info-link",to:"/order"},{default:X(()=>[tt]),_:1}),st])])):D("",!0)]),r.loading?(o(),T(N,{key:0,style:{width:"100%"}})):D("",!0),x.value?(o(),T(Ae,{key:1})):D("",!0),k(Be,{modelValue:s.value,"onUpdate:modelValue":u[11]||(u[11]=t=>s.value=t),orderId:C.value,repeatOrder:B.value,"onUpdate:repeatOrder":u[12]||(u[12]=t=>B.value=t),editOrder:v.value,"onUpdate:editOrder":u[13]||(u[13]=t=>v.value=t)},null,8,["modelValue","orderId","repeatOrder","editOrder"])])}}}),lt={class:"top-line product-page"},ot={class:"orders-heading"},rt={class:"orders-heading-elem"},it={class:"orders-heading-item"},nt=e("div",{class:"orders-heading-text"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442:",-1),dt={class:"orders-heading-item"},ct=e("div",{class:"orders-heading-text"},"\u0421\u0442\u0430\u0442\u0443\u0441:",-1),vt={class:"orders-heading-item"},ht=e("div",{class:"orders-heading-text"},"\u041F\u0435\u0440\u0438\u043E\u0434:",-1),mt={key:0,class:"orders-heading-elem"},pt={key:1},Ot=q({__name:"orders",setup(r){const l=ue(te),m=p(!0),V=p({id:1,search:""}),x=P(()=>l.getters.getCompanysList),d=p(0),$=P(()=>l.getters.getCompanyFromOrders),_=p(""),s=P(()=>l.getters.getOrdersDataPeriodArray),f=p(0),C=p(!1),n=()=>{C.value==!1&&(C.value=!0,l.dispatch(G.GET_ORDERS).finally(()=>{C.value=!1,m.value=!0,m.value=!1}))};return $e(()=>{l.dispatch(G.GET_ORDERS).finally(()=>{m.value=!1}),l.getters.isCompanysLoad||l.dispatch(Oe.GET_COMPANYS).then(()=>{})}),(B,v)=>(o(),i("div",null,[e("div",lt,[k(ve,{data:h(x),modelValue:_.value,"onUpdate:modelValue":v[0]||(v[0]=g=>_.value=g)},null,8,["data","modelValue"]),k(de),k(ce)]),k(he,{newOrder:""}),e("div",ot,[e("div",rt,[e("div",it,[nt,k(z,{data:h($),modelValue:_.value,"onUpdate:modelValue":v[1]||(v[1]=g=>_.value=g)},null,8,["data","modelValue"])]),e("div",dt,[ct,k(z,{data:h(U),modelValue:d.value,"onUpdate:modelValue":v[2]||(v[2]=g=>d.value=g)},null,8,["data","modelValue"])]),e("div",vt,[ht,k(z,{data:h(s),modelValue:f.value,"onUpdate:modelValue":v[3]||(v[3]=g=>f.value=g)},null,8,["data","modelValue"])]),e("div",{class:"orders-heading-clean",title:"\u0423\u0431\u0440\u0430\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B",onClick:v[4]||(v[4]=g=>{_.value="",f.value=0,d.value=0})})]),m.value?D("",!0):(o(),i("div",mt,[e("button",{class:"product-search-btn gradient-btn",onClick:v[5]||(v[5]=g=>n())},[C.value?(o(),T(N,{key:0,small:""})):(o(),i("div",pt,"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"))])]))]),k(at,{loading:m.value,contrAgent:_.value,period:h(s)[f.value].name,status:h(U)[d.value].name,search:V.value,refresh:C.value},null,8,["loading","contrAgent","period","status","search","refresh"])]))}});export{Ot as default};
