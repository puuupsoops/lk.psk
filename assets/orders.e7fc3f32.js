import{N as he,_ as me}from"./PersonalBar.e2416ec8.js";import{_ as pe}from"./CompanyBarTop.25f8464b.js";import{_ as _e}from"./TopNav.90e72b9d.js";import{S as Z}from"./SelectInput.eebfe136.js";import{d as K,g as p,z as se,i as L,_ as ge,o as a,b as i,a as e,x as A,t as k,F as N,e as z,k as b,f as ae,M as fe,I as U,r as Ce,l as $,u as c,Q as we,j as D,n as ye,ae as M,w as ue,c as R,ah as De,Z as Ae,ag as Ee,ai as $e,aj as ke,ak as G,al as Oe,B as xe,h as Be,p as Ie}from"./index.933e68e4.js";import{P as T}from"./PreloaderLocal.89d6e863.js";import{O as Y,M as Se,a as x,_ as be}from"./types.2254608c.js";import{_ as Ve}from"./CatalogPagination.eb983d5c.js";import"./DeleteButton.d7ea8cda.js";import"./OrderDraftCard.23fff0a4.js";const Pe=K({props:{show:{type:Boolean,default:!0},modelValue:{type:String,default:""},error:{type:Boolean,default:!1}},emits:["update:modelValue","update:show","onInput"],setup(n,{emit:o}){const m=p(0),V=p(null);se(V,()=>o("update:show",!1));const B=L(()=>n.modelValue?n.modelValue:""),v=L(()=>{let _=new Date;_.setHours(0,0,0,0);let l=new Date;n.modelValue!=""&&(l=new Date(parseInt(n.modelValue.substr(6,4)),parseInt(n.modelValue.substr(3,2))-1,parseInt(n.modelValue.substr(0,2)))),l.setMonth(l.getMonth()+m.value),l=new Date(l.toISOString().substr(0,7)+"-01");let g=l.toLocaleString("default",{month:"long"});g=g.charAt(0).toUpperCase()+g.slice(1);let w=l.getMonth(),d=l.getFullYear(),I=[],h=[];l=new Date(l.getFullYear(),l.getMonth(),l.getDay()==1?-6:2-l.getDay());for(let f=1;f<=42;f++){let C=l.getDate(),S=!1;n.modelValue!=""&&(S=l.getTime()===new Date(parseInt(n.modelValue.substr(6,4)),parseInt(n.modelValue.substr(3,2))-1,parseInt(n.modelValue.substr(0,2))).getTime()),h.push({day:C,disable:l.getMonth()!=w,today:l.getMonth()==_.getMonth()&&l.getDate()==_.getDate()&&l.getFullYear()==_.getFullYear(),select:S}),l=new Date(l.getFullYear(),l.getMonth(),C+1),f%7==0&&(I.push(h),h=[])}return{year:d,month:{month:g,month_int:w},dateArr:I}});return{select_date:(_,l,g)=>{let w=new Date(_,l,g);m.value=0,o("update:modelValue",w.toLocaleString("ru").substr(0,10)),o("onInput"),o("update:show",!1)},dateText:B,genDay:v,target:V,delta:m}}}),Fe={class:"modal-datepicker",ref:"target"},Le={class:"ui-datepicker-date"},Ue=["value"],Me={class:A("ui-datepicker active")},Re={class:"ui-datepicker-header"},Te=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 0.71186 -0.702321 0.71186 11.8181 0)",fill:"#53565B"},null,-1),Ne=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 -0.71186 -0.702321 -0.71186 11.8181 24)",fill:"#53565B"},null,-1),ze=[Te,Ne],qe={class:"ui-datepicker-title"},Ge={class:"ui-datepicker-month"},Ye=b("\xA0"),je={class:"ui-datepicker-year"},Ze=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 0.71186 0.702322 0.71186 1.73828 0)",fill:"#53565B"},null,-1),Ke=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 -0.71186 0.702322 -0.71186 1.73828 24)",fill:"#53565B"},null,-1),Qe=[Ze,Ke],We={class:"ui-datepicker-calendar"},He=e("thead",null,[e("tr",null,[e("th",{scope:"col"},[e("span",{title:"\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A"},"\u041F\u043D")]),e("th",{scope:"col"},[e("span",{title:"\u0432\u0442\u043E\u0440\u043D\u0438\u043A"},"\u0412\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0440\u0435\u0434\u0430"},"\u0421\u0440")]),e("th",{scope:"col"},[e("span",{title:"\u0447\u0435\u0442\u0432\u0435\u0440\u0433"},"\u0427\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u043F\u044F\u0442\u043D\u0438\u0446\u0430"},"\u041F\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0443\u0431\u0431\u043E\u0442\u0430"},"\u0421\u0431")]),e("th",{scope:"col",class:"ui-datepicker-week-end"},[e("span",{title:"\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435"},"\u0412\u0441")])])],-1),Je=["onClick"];function Xe(n,o,m,V,B,v){return a(),i("div",{class:A("modal-datepicker-wrap"+(n.show?" show":"")),ref:"target"},[e("div",Fe,[e("div",Le,[e("input",{class:A("active"),type:"text",placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",name:"date",autocomplete:"off",readonly:"",value:n.dateText,onFocus:o[0]||(o[0]=O=>n.active=!0)},null,40,Ue),e("div",{class:"ui-datepicker-date-clear",onClick:o[1]||(o[1]=O=>n.modelValue==""?n.$emit("update:show",!1):n.$emit("update:modelValue",""))}),e("div",Me,[e("div",Re,[(a(),i("svg",{class:"ui-datepicker-prev",title:"<\u041F\u0440\u0435\u0434",onClick:o[2]||(o[2]=O=>n.delta=n.delta-1),width:"13",height:"24",viewBox:"0 0 13 24",xmlns:"http://www.w3.org/2000/svg"},ze)),e("div",qe,[e("span",Ge,k(n.genDay.month.month),1),Ye,e("span",je,k(n.genDay.year),1)]),(a(),i("svg",{class:"ui-datepicker-next",title:"\u0421\u043B\u0435\u0434>",onClick:o[3]||(o[3]=O=>n.delta=n.delta+1),width:"14",height:"24",viewBox:"0 0 14 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qe))]),e("table",We,[He,e("tbody",null,[(a(!0),i(N,null,z(n.genDay.dateArr,(O,_)=>(a(),i("tr",{key:_},[(a(!0),i(N,null,z(O,(l,g)=>(a(),i("td",{key:g,class:A((l.disable?" disable":"")+(l.today?" today":"")+(l.select?" select":"")),onClick:w=>l.disable?"":n.select_date(n.genDay.year,n.genDay.month.month_int,l.day)},[e("span",null,k(l.day),1)],10,Je))),128))]))),128))])])])])],512)],2)}var et=ge(Pe,[["render",Xe]]);const tt={class:"orders-list-wrap"},ut={class:"orders-heading-info"},st={class:"orders-heading-pagination"},at={class:"orders-list"},lt={class:"orders-list-row orders-list-heading"},ot=e("div",{class:"orders-list-elem"},"\u2116",-1),rt=e("div",null,"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),it=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),nt=[it],dt=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),ct=[dt],vt=e("div",null,"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F",-1),ht=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),mt=[ht],pt=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),_t=[pt],gt=e("div",{class:"orders-list-elem"},"\u0418\u043D\u0444\u043E",-1),ft=["onClick"],Ct={class:"orders-list-elem"},wt=e("div",{class:"table-arrow"},null,-1),yt={class:"orders-list-elem"},Dt={class:"orders-list-elem"},At={class:"orders-list-elem"},Et={class:"orders-list-elem"},$t={class:"orders-list-elem"},kt=["tooltip"],Ot={class:"orders-list-elem"},xt=["onClick"],Bt=["onClick"],It=["onClick"],St=["onClick"],bt=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B",-1),Vt=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B",-1),Pt=["onClick"],Ft=e("span",null,"\u0417\u0430\u044F\u0432\u043A\u0430 \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442",-1),Lt={key:0},Ut={class:"orders-list-info-elem"},Mt={class:"orders-list-info-elem"},Rt={key:0,class:"orders-list-info-about tooltip"},Tt=["onClick"],Nt=e("span",{class:"tooltiptext"},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442",-1),zt={key:1,class:"orders-list-info-about tooltip"},qt={class:"orders-list-info-download disable"},Gt=e("span",{class:"tooltiptext"},[b("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442 \u043C\u043E\u0436\u043D\u043E \u0442\u043E\u043B\u044C\u043A\u043E "),e("br"),b(" \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430")],-1),Yt={key:0,class:"orders-list-info-elem orders-list-info-doc-wrap"},jt={key:1,class:"orders-list-info-elem orders-list-info-doc-wrap"},Zt=["href"],Kt=["href"],Qt=["href"],Wt=["href"],Ht={class:"orders-list-info-elem"},Jt={class:"orders-list-info-elem"},Xt={key:0,class:"orders-list-elem-request-bill"},eu=["onClick"],tu={key:1,class:"orders-list-info-row"},uu=xe('<div class="orders-list-info-elem"></div><div class="orders-list-info-elem"> \u0421\u0447\u0435\u0442 \u043E\u0442\u0441\u0443\u0442\u0432\u0443\u0435\u0442 </div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div>',6),su=[uu],au={key:0,class:"orders-list-row orders-list-main-row"},lu={class:"order-info"},ou=b(" \u0417\u0430\u043A\u0430\u0437\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 "),ru=b("\u043D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437"),iu=b(" \u0438 \u043E\u043D \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0432 \u0441\u043F\u0438\u0441\u043A\u0435. "),nu=K({__name:"OrdersListCard",props:{contrAgent:{type:String},period:{type:String},status:{type:String},loading:{type:Boolean,default:!1},search:{type:Object,required:!0},refresh:{type:Boolean,default:!1}},setup(n){const o=n,m=ae(),V=fe(),B=p(!1),v=p(-1),O=p(-1),_=p(null),l=p(!1),g=p([]),w=p(-1),d=p([{name:"id",value:"",show:!1},{name:"name",value:"",show:!1},{name:"date",value:"",show:!1}]),I=p(!1),h=p(!1),f="http://91.232.12.198:82",C=p({maxItemOnPage:10,currentPage:1}),S=p(-1);se(_,()=>{O.value=-1});let q=L(()=>m.getters.getOrders);const Q=()=>{var s;if(v.value!=-1&&P.value&&Array.isArray(P.value[v.value].checks)){let t=(s=P.value[v.value].checks)==null?void 0:s.map(E=>E.doc_status?null:m.dispatch(G.GET_ORDERS_DOCSTATUS,E.guid));t&&Promise.all(t).finally(()=>{})}};U(v,()=>{Q()}),U(()=>o.status,()=>{C.value.currentPage=1,v.value=-1}),U(()=>o.contrAgent,()=>{C.value.currentPage=1,v.value=-1}),U(()=>o.search,()=>{C.value.currentPage=1,v.value=-1}),U(()=>o.period,()=>{C.value.currentPage=1,v.value=-1}),U(()=>o.refresh,(s,t)=>{t==!0&&s==!1&&Q()});const P=L(()=>{let s=q.value.filter(t=>o.contrAgent==""||t.partner_guid==o.contrAgent);return s=s.filter(t=>le(t.date)),s=s.filter(t=>oe(t)),s=s.filter(t=>F(t)),d.value[1].value!=""&&(s=s.filter(t=>t.name.indexOf(d.value[1].value)!=-1)),d.value[2].value!=""&&(s=s.filter(t=>t.date.indexOf(d.value[2].value)!=-1)),s}),W=s=>C.value.maxItemOnPage!=-1?s>=(C.value.currentPage-1)*C.value.maxItemOnPage&&s<C.value.currentPage*C.value.maxItemOnPage:!0,F=s=>{if(o.search.search=="")return!0;switch(o.search.id){case 1:return s.name.toUpperCase().indexOf(o.search.search.toUpperCase())!=-1;case 2:return String(s.n).toUpperCase().indexOf(o.search.search.toUpperCase())!=-1;case 3:return s.date.toUpperCase().indexOf(o.search.search.toUpperCase())!=-1;default:return!0}},le=s=>{var t;if(o.period=="\u0412\u0441\u0435")return!0;{const E=(t=o.period)==null?void 0:t.split(" - ")[0],u=E==null?void 0:E.substring(6,10),y=E==null?void 0:E.substring(3,5);return u==s.substring(6,10)&&y==s.substring(3,5)}},oe=s=>o.status=="\u0412\u0441\u0435"?!0:Array.isArray(s.checks)?s.checks.findIndex(t=>Y[parseInt(t.status+1)]?o.status==Y[parseInt(t.status+1)].name:!1)!=-1:!1,re=s=>{g.value.push(s),m.dispatch(De.GET_BILL_FILE_SAVE,s).finally(()=>{g.value=g.value.filter(t=>t!==s)})},ie=(s,t)=>{const u=m.getters.getCompanyStoragesData(s).find(y=>y.guid==t);return u?u.name.replace(/(^|\s)\S/g,y=>y.toUpperCase()).replace(/(ООО)|(")|(\s)|([а-я])/g,""):"\u0421\u043A\u043B\u0430\u0434"},ne=s=>{m.commit(Ae.SET_CURRENT_ORDER,s)},de=s=>{B.value=!0,m.commit(Ee.CLEAN_ORDER_DETAIL),m.commit($e.CLEAR_CLAIMS_NEW),m.dispatch(ke.ADD_CLAIMS_NEW,s).then(()=>{B.value=!1,V.push("/claims/request")})},ce=(s,t)=>{if(S.value==-1){S.value=t.id;const E=Object.assign({},{guid:t.guid,id:t.id,n:t.n,organization_id:t.organization_id,status:t.status});m.dispatch(G.GET_ORDERS_BILL_REQUEST,{id:s,check:E}).then(()=>{S.value=-1}).catch(()=>{S.value=-1})}};return(s,t)=>{const E=Ce("router-link");return a(),i("div",tt,[e("div",ut,[e("div",st,[$(Ve,{maxPage:C.value.maxItemOnPage!=-1?Math.ceil(c(P).length/C.value.maxItemOnPage):1,currentPage:C.value.currentPage,"onUpdate:currentPage":t[0]||(t[0]=u=>C.value.currentPage=u),maxItemOnPage:C.value.maxItemOnPage,"onUpdate:maxItemOnPage":t[1]||(t[1]=u=>C.value.maxItemOnPage=u)},null,8,["maxPage","currentPage","maxItemOnPage"])]),e("div",{class:"orders-heading-info-text",style:we(c(P).length!=c(q).length?"visibility: visible":"visibility: hidden")}," \u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E "+k(c(P).length)+" \u0438\u0437 "+k(c(q).length),5)]),e("div",at,[e("div",lt,[ot,e("div",{class:A("orders-list-elem"+(F.search!=""&&F.id==1?" active":"")+(d.value[1].value!=""?" active":""))},[$(Se,{modelValue:d.value[1].value,"onUpdate:modelValue":t[2]||(t[2]=u=>d.value[1].value=u),show:d.value[1].show,"onUpdate:show":t[3]||(t[3]=u=>d.value[1].show=u)},null,8,["modelValue","show"]),rt,e("div",{class:A("orders-list-elem-filter"+(d.value[1].show||d.value[1].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:t[4]||(t[4]=u=>d.value[1].show=!0)},nt,2),d.value[1].value!=""?(a(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:t[5]||(t[5]=u=>{d.value[1].value="",v.value=-1})},ct)):D("",!0)],2),e("div",{class:A("orders-list-elem"+(n.contrAgent!=""?" active":""))},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",2),e("div",{class:A("orders-list-elem"+(F.search!=""&&F.id==2?" active":""))},"\u041D\u043E\u043C\u0435\u0440",2),e("div",{class:A("orders-list-elem"+(F.search!=""&&F.id==3?" active":"")+(n.period!="\u0412\u0441\u0435"?" active":"")+(d.value[2].value!=""?" active":""))},[$(et,{modelValue:d.value[2].value,"onUpdate:modelValue":t[6]||(t[6]=u=>d.value[2].value=u),show:d.value[2].show,"onUpdate:show":t[7]||(t[7]=u=>d.value[2].show=u)},null,8,["modelValue","show"]),vt,e("div",{class:A("orders-list-elem-filter"+(d.value[2].show||d.value[2].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:t[8]||(t[8]=u=>d.value[2].show=!0)},mt,2),d.value[2].value!=""?(a(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:t[9]||(t[9]=u=>{d.value[2].value="",v.value=-1})},_t)):D("",!0)],2),e("div",{class:A("orders-list-elem"+(n.status!="\u0412\u0441\u0435"?" active":""))},"\u0421\u0442\u0430\u0442\u0443\u0441",2),gt]),(a(!0),i(N,null,z(c(P),(u,y)=>(a(),i("div",{class:A(["orders-list-item",{active:y==v.value,reserved:u.reserved}]),key:y},[W(y)?(a(),i("div",{key:0,class:"orders-list-row orders-list-main-row",onClick:r=>y==v.value?v.value=-1:v.value=y},[e("div",Ct,[b(k(y+1)+" ",1),wt]),e("div",yt,k(u.name),1),e("div",Dt,k(c(ye)(u.partner_name)),1),e("div",At,k(u.n),1),e("div",Et,k(u.date),1),e("div",$t,[(a(!0),i(N,null,z(u.checks,(r,j)=>(a(),i("div",{class:A("orders-list-elem-status "+(parseInt(r.status)>=0&&parseInt(r.status)<c(x).length?c(x)[parseInt(r.status)].class:"")),tooltip:parseInt(r.status)>=0&&parseInt(r.status)<c(x).length?c(x)[parseInt(r.status)].name:"",flow:"up",key:j},null,10,kt))),128))]),e("div",Ot,[e("button",{class:"orders-list-more",onClick:M(r=>O.value=y,["stop"])},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E",8,xt),e("div",{class:A("orders-list-more-dropdown"+(y==O.value?" active":"")),ref_for:!0,ref_key:"target",ref:_},[e("a",{class:"orders-list-more-dropdown-link",onClick:M(r=>{w.value=u.n,l.value=!0},["stop"])},"\u0414\u0435\u0442\u0430\u043B\u0438 \u0437\u0430\u043A\u0430\u0437\u0430",8,Bt),e("a",{class:"orders-list-more-dropdown-link",onClick:M(r=>{w.value=u.n,l.value=!0,h.value=!1,I.value=!0},["stop"])},"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,It),u.reserved?(a(),i("a",{key:0,class:"orders-list-more-dropdown-link",onClick:M(r=>{w.value=u.n,l.value=!0,h.value=!0,I.value=!1},["stop"])},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,St)):D("",!0),bt,Vt,e("a",{class:"orders-list-more-dropdown-link",onClick:M(r=>de(u.n),["stop"])},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u043F\u0440\u0435\u0442\u0435\u043D\u0437\u0438\u044E",8,Pt),$(E,{class:"orders-list-more-dropdown-link",tag:"a",to:"/shipments/request",onClick:r=>ne(u.n)},{default:ue(()=>[Ft]),_:2},1032,["onClick"])],2)])],8,ft)):D("",!0),W(y)?(a(),i("div",{key:1,class:A(["orders-list-info",{active:y==v.value}]),onClick:t[10]||(t[10]=r=>O.value=-1)},[Array.isArray(u.checks)&&u.checks.length>0&&u.status_code!="7"&&u.status_code!="9"?(a(),i("div",Lt,[(a(!0),i(N,null,z(u.checks,(r,j)=>{var H,J,X,ee,te;return a(),i("div",{class:"orders-list-info-row",key:j},[e("div",Ut,k(ie(u.partner_guid,r.organization_id)),1),e("div",Mt,[(H=r.doc_status)!=null&&H.StatusSchet?(a(),i("div",Rt,[e("div",{class:"orders-list-info-download",onClick:ve=>re(r.guid)},[e("span",null," \u0421\u0447\u0451\u0442 \u043E\u0442 "+k(u.date.substring(0,10)),1),g.value.includes(u.guid)?(a(),R(T,{key:0,small:""})):D("",!0)],8,Tt),Nt])):(a(),i("div",zt,[e("div",qt," \u0421\u0447\u0451\u0442 \u043E\u0442 "+k(u.date.substring(0,10)),1),Gt]))]),r.doc_status?(a(),i("div",jt,[(J=r.doc_status)!=null&&J.StatusSchet?(a(),i("a",{key:0,class:"orders-list-info-doc sc",href:`${c(f)}/api/order/print?id=${r.guid}&name=\u0421\u0447\u0435\u0442`,target:"_blank",title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0447\u0435\u0442"},null,8,Zt)):D("",!0),(X=r.doc_status)!=null&&X.StatusUPD?(a(),i("a",{key:1,class:"orders-list-info-doc upd",href:`${c(f)}/api/order/print?id=${r.guid}&name=\u0423\u041F\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0435\u0440\u0435\u0434\u0430\u0442\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,Kt)):D("",!0),(ee=r.doc_status)!=null&&ee.StatusSF?(a(),i("a",{key:2,class:"orders-list-info-doc sf",href:`${c(f)}/api/order/print?id=${r.guid}&name=\u0421\u0424`,target:"_blank",title:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043A\u0442\u0443\u0440\u0430"},null,8,Qt)):D("",!0),(te=r.doc_status)!=null&&te.StatusUPK?(a(),i("a",{key:3,class:"orders-list-info-doc kor",href:`${c(f)}/api/order/print?id=${r.guid}&name=\u0423\u041A\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,Wt)):D("",!0)])):(a(),i("div",Yt,[$(T,{small:""})])),e("div",Ht,[b(k(c(x)[r.status]?c(x)[r.status].name:"")+" ",1),c(x)[r.status]?(a(),i("div",{key:0,class:A("orders-list-elem-status small "+(parseInt(r.status)>=0&&parseInt(r.status)<c(x).length?c(x)[parseInt(r.status)].class:"")),flow:"up"},null,2)):D("",!0)]),e("div",Jt,[r.status!=10?(a(),i("div",Xt,[S.value==r.id?(a(),R(T,{key:0,small:""})):(a(),i("span",{key:1,onClick:ve=>ce(u.n,r)},"\u0417\u0430\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u0441\u0447\u0435\u0442",8,eu))])):D("",!0)])])}),128))])):(a(),i("div",tu,su))],2)):D("",!0)],2))),128)),c(q).length==0&&!n.loading?(a(),i("div",au,[e("div",lu,[ou,$(E,{tag:"a",class:"order-info-link",to:"/order"},{default:ue(()=>[ru]),_:1}),iu])])):D("",!0)]),n.loading?(a(),R(T,{key:0,style:{width:"100%"}})):D("",!0),B.value?(a(),R(Oe,{key:1})):D("",!0),$(be,{modelValue:l.value,"onUpdate:modelValue":t[11]||(t[11]=u=>l.value=u),orderId:w.value,repeatOrder:I.value,"onUpdate:repeatOrder":t[12]||(t[12]=u=>I.value=u),editOrder:h.value,"onUpdate:editOrder":t[13]||(t[13]=u=>h.value=u)},null,8,["modelValue","orderId","repeatOrder","editOrder"])])}}}),du={class:"top-line product-page"},cu={class:"orders-heading"},vu={class:"orders-heading-elem"},hu={class:"orders-heading-item"},mu=e("div",{class:"orders-heading-text"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442:",-1),pu={class:"orders-heading-item"},_u=e("div",{class:"orders-heading-text"},"\u0421\u0442\u0430\u0442\u0443\u0441:",-1),gu={class:"orders-heading-item"},fu=e("div",{class:"orders-heading-text"},"\u041F\u0435\u0440\u0438\u043E\u0434:",-1),Cu={key:0,class:"orders-heading-elem"},wu={key:1},Su=K({__name:"orders",setup(n){const o=ae(),m=p(!0),V=p({id:1,search:""}),B=L(()=>o.getters.getCompanysList),v=p(0),O=L(()=>o.getters.getCompanyFromOrders),_=p(""),l=L(()=>o.getters.getOrdersDataPeriodArray),g=p(0),w=p(!1),d=()=>{w.value==!1&&(w.value=!0,o.dispatch(G.GET_ORDERS).finally(()=>{w.value=!1,m.value=!0,m.value=!1}))};return Be(()=>{o.dispatch(G.GET_ORDERS).finally(()=>{m.value=!1}),o.getters.isCompanysLoad||o.dispatch(Ie.GET_COMPANYS).then(()=>{})}),(I,h)=>(a(),i("div",null,[e("div",du,[$(pe,{data:c(B),modelValue:_.value,"onUpdate:modelValue":h[0]||(h[0]=f=>_.value=f)},null,8,["data","modelValue"]),$(he),$(me)]),$(_e,{newOrder:""}),e("div",cu,[e("div",vu,[e("div",hu,[mu,$(Z,{data:c(O),modelValue:_.value,"onUpdate:modelValue":h[1]||(h[1]=f=>_.value=f)},null,8,["data","modelValue"])]),e("div",pu,[_u,$(Z,{data:c(Y),modelValue:v.value,"onUpdate:modelValue":h[2]||(h[2]=f=>v.value=f)},null,8,["data","modelValue"])]),e("div",gu,[fu,$(Z,{data:c(l),modelValue:g.value,"onUpdate:modelValue":h[3]||(h[3]=f=>g.value=f)},null,8,["data","modelValue"])]),e("div",{class:"orders-heading-clean",title:"\u0423\u0431\u0440\u0430\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B",onClick:h[4]||(h[4]=f=>{_.value="",g.value=0,v.value=0})})]),m.value?D("",!0):(a(),i("div",Cu,[e("button",{class:"product-search-btn gradient-btn",onClick:h[5]||(h[5]=f=>d())},[w.value?(a(),R(T,{key:0,small:""})):(a(),i("div",wu,"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"))])]))]),$(nu,{loading:m.value,contrAgent:_.value,period:c(l)[g.value].name,status:c(Y)[v.value].name,search:V.value,refresh:w.value},null,8,["loading","contrAgent","period","status","search","refresh"])]))}});export{Su as default};
