import{N as J,_ as j}from"./PersonalBar.48aee952.js";import{_ as W}from"./CompanyBarTop.5ee1f250.js";import{_ as z}from"./TopNav.efb054df.js";import{d as $,o as l,b as o,a as e,x as p,f as P,g as a,i as S,aw as Y,I as q,a9 as x,as as X,F as O,e as F,t as k,u as w,l as n,j as R,aa as A,c as T,k as ee,aj as ue,ax as U,h as te,p as se,an as le,Q as oe}from"./index.27b8292e.js";import{P as N}from"./PreloaderLocal.4f88a1f0.js";import{D as ie}from"./DatePicker.ad9eca28.js";import{A as M}from"./AmountInput.46054879.js";import{_ as ae}from"./ModalInputFull.c688c5c6.js";import{_ as I}from"./CheckButton.9f725e57.js";const ne=e("div",{class:"kp-step-title"},"\u0421\u043E\u0431\u0440\u0430\u0442\u044C \u041A\u041F \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0438\u0438",-1),de=e("div",{class:"kp-step-body"},[e("div",null,"* \u0417\u0430\u043A\u0430\u0437\u0430"),e("div",null,"* \u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430"),e("div",null,"* \u041F\u043E\u0437\u0438\u0446\u0438\u0439 \u0438\u0437 \u043A\u0430\u0442\u043E\u043B\u043E\u0433\u0430")],-1),re={class:"kp-step-actions"},ce=$({__name:"KpStep1",props:{active:{type:Boolean,default:!1}},emits:["next","prev"],setup(Q,{emit:f}){return(d,r)=>(l(),o("div",{class:p(["kp-step",{active:Q.active}])},[ne,de,e("div",re,[e("div",{class:"kp-step-actions-link right",onClick:r[0]||(r[0]=s=>d.$emit("next"))},"\u0414\u0430\u043B\u0435\u0435")])],2))}}),ve=e("div",{class:"kp-step-title"},"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043A\u0430\u0437",-1),pe={class:"kp-step-body"},me={class:"shipment-heading-select"},_e={class:"base-select-wrap"},fe=e("option",{value:"-1"},"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043A\u0430\u0437",-1),he=["value"],Ee={key:0,style:"padding: 30px"},De={key:0,style:{display:"flex","justify-content":"center"}},ke={key:1,class:"order-list-bottom scroll-elem"},Qe={class:"order-list-bottom-wrap"},ge={key:0,class:"order-list-row order-list-heading"},xe=e("div",{class:"order-list-elem"},"\u2116",-1),Ce=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),ye=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),Ae={class:"order-list-elem"},we=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),$e=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),Ve=e("div",{class:"order-list-elem"},null,-1),Be=["onClick"],be={class:"order-list-elem"},Oe={class:"order-list-elem"},Fe={class:"order-list-elem"},Ne=["innerHTML"],Se=e("div",{class:"order-list-elem"},null,-1),Ue={class:"order-list-elem"},Pe={class:"order-list-elem"},Re=e("div",{class:"order-list-elem-delete"},null,-1),Te=e("div",{class:"order-list-elem"},null,-1),Me=e("div",{class:"order-list-elem"},null,-1),Ie={class:"order-list-elem"},Le={class:"order-list-elem",style:"display: flex;align-items: center;gap: 10px"},Ke=ee(" \u20BD"),Ge={class:"order-list-elem"},Ze={class:"order-list-elem"},He=e("div",{class:"order-list-elem-delete"},null,-1),Je={class:"kp-step-body-input"},je={class:"profile-personal-info-item-edit"},We={class:"input-textfield"},ze=e("label",null,"\u041F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A",-1),Ye={class:"profile-personal-info-item-edit",style:"display: flex; align-items: center;"},qe={key:0,class:"input-textfield",style:"width: 100%"},Xe=e("label",null,"\u041F\u043E\u043A\u0443\u043F\u0430\u0442\u0435\u043B\u044C",-1),eu=["flow"],uu=e("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{width:"2.17029",height:"21.7029",rx:"1.08514",transform:"matrix(0.999975 -0.00708126 -0.00708126 0.999975 11.097 1.26186)",fill:"#A5A7A9"}),e("rect",{width:"2.17029",height:"21.7029",rx:"1.08514",transform:"matrix(0.00708126 -0.999975 -0.999975 0.00708126 22.7798 12.9446)",fill:"#A5A7A9"})],-1),tu={class:"profile-personal-info-item-edit"},su={class:"input-textfield"},lu=e("label",null,"\u041D\u043E\u043C\u0435\u0440 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430",-1),ou={class:"shipment-form-item"},iu=e("div",{class:"shipment-form-elem-title"},[e("span",null,"\u0414\u0430\u0442\u0430")],-1),au={class:"shipment-form-row",style:"display:flex; align-items: center;"},nu={class:"shipment-form-date"},du=e("div",{style:"margin-left: 10px"},"PDF",-1),ru=e("div",{style:"margin-left: 10px"},"Word",-1),cu={class:"order-comment-form show"},vu=e("div",{class:"order-comment-title"},[e("span",null,"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439")],-1),pu={class:"kp-step-actions"},mu=$({__name:"KpStep2",props:{active:{type:Boolean,default:!1}},emits:["next","prev"],setup(Q,{emit:f}){const d=P(),r=a(!1),s=a(!1),c=a(!1),m=a(!1),_=a(""),g=a(!1),v=a(-1),h=a([]),L=S(()=>d.getters.getOrders),V=S(()=>d.getters.getOrderDetail),i=a(JSON.parse(JSON.stringify(Y))),C=a(!0),y=a(!1),B=a(new Date().toLocaleString("ru").substr(0,10));q(v,()=>{v.value!=-1&&(r.value=!0,d.dispatch(ue.GET_ORDER_DETAIL,v.value).finally(()=>{r.value=!1}))});const K=()=>{v.value!=-1&&(i.value.offer.date=new Date(B.value).getTime(),i.value.offer.position=JSON.parse(JSON.stringify(V.value.position)),s.value=!0,d.dispatch(U.SEND_KP,i.value).finally(()=>{f("next"),s.value=!1}))},G=()=>{_.value.length>=2&&(i.value.offer.customer="",c.value=!0,m.value=!1,g.value=!1,d.dispatch(U.GET_ORG_BY_INN,_.value).then(()=>{c.value=!1,i.value.offer.customer=d.getters.getKPOrgName,_.value=""}).catch(()=>{m.value=!0,setTimeout(()=>{m.value=!1},1e4),c.value=!1,_.value=""}))};return(Z,t)=>(l(),o("div",{class:p(["kp-step",{active:Q.active}])},[ve,e("div",pe,[e("div",me,[e("div",_e,[x(e("select",{class:"base-select",style:{width:"100%"},"onUpdate:modelValue":t[0]||(t[0]=u=>v.value=u)},[fe,(l(!0),o(O,null,F(w(L),(u,E)=>(l(),o("option",{key:E,value:u.n},k(u.name),9,he))),128))],512),[[X,v.value]])])]),v.value!=-1?(l(),o("div",Ee,[r.value?(l(),o("div",De,[n(N)])):(l(),o("div",ke,[e("div",Qe,[w(V).position.length>0?(l(),o("div",ge,[xe,Ce,ye,e("div",Ae,k(h.value.length!=0?"\u0426\u0435\u043D\u0430":""),1),we,$e,Ve])):R("",!0),(l(!0),o(O,null,F(w(V).position,(u,E)=>(l(),o("div",{class:p(h.value.indexOf(E)!==-1?"order-list-item active":"order-list-item"),key:E},[e("div",{class:"order-list-row order-list-main-row",onClick:D=>h.value.indexOf(E)===-1?h.value.push(E):h.value.splice(h.value.indexOf(E),1)},[e("div",be,k(E+1),1),e("div",Oe,k(u.article),1),e("div",Fe,[e("span",{innerHTML:u.product.NAME},null,8,Ne)]),Se,e("div",Ue,k(u.count),1),e("div",Pe,k(Number(u.total).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),Re],8,Be),e("div",{class:p(h.value.indexOf(E)!==-1?"order-list-sublist active":"order-list-sublist")},[(l(!0),o(O,null,F(u.characteristics,(D,H)=>(l(),o("div",{key:H,class:"order-list-row"},[Te,Me,e("div",Ie,k(D.CHARACTERISTIC),1),e("div",Le,[n(M,{modelValue:D.PRICE,"onUpdate:modelValue":b=>D.PRICE=b},null,8,["modelValue","onUpdate:modelValue"]),Ke]),e("div",Ge,[n(M,{modelValue:D.count,"onUpdate:modelValue":b=>D.count=b},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Ze,k(Number(D.PRICE*D.count).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),He]))),128))],2)],2))),128))])])),e("div",Je,[e("div",je,[e("div",We,[x(e("input",{name:"lastname",type:"text",placeholder:" ",class:"","onUpdate:modelValue":t[1]||(t[1]=u=>i.value.offer.executor=u)},null,512),[[A,i.value.offer.executor]]),ze])]),e("div",Ye,[c.value?(l(),T(N,{key:1})):(l(),o("div",qe,[x(e("input",{name:"lastname",type:"text",placeholder:" ",class:p({error:m.value}),"onUpdate:modelValue":t[2]||(t[2]=u=>i.value.offer.customer=u)},null,2),[[A,i.value.offer.customer]]),Xe])),e("div",{class:"kp-step-body-button",tooltip:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u0418\u041D\u041D",flow:g.value?"":"up",onClickCapture:t[6]||(t[6]=u=>g.value=!0)},[n(ae,{modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=u=>_.value=u),show:g.value,"onUpdate:show":t[4]||(t[4]=u=>g.value=u),"show-ok":"",onOnOk:t[5]||(t[5]=u=>G()),label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u041D\u041D"},null,8,["modelValue","show"]),uu],40,eu)]),e("div",tu,[e("div",su,[x(e("input",{name:"lastname",type:"text",placeholder:" ",class:"","onUpdate:modelValue":t[7]||(t[7]=u=>i.value.offer.n=u)},null,512),[[A,i.value.offer.n]]),lu])]),e("div",ou,[iu,e("div",au,[e("div",nu,[n(ie,{modelValue:B.value,"onUpdate:modelValue":t[8]||(t[8]=u=>B.value=u)},null,8,["modelValue"])]),n(I,{modelValue:C.value,"onUpdate:modelValue":t[9]||(t[9]=u=>C.value=u),onOnClick:t[10]||(t[10]=u=>{C.value=!0,y.value=!1,i.value.as="PDF"}),style:"margin-left: 30px"},null,8,["modelValue"]),du,n(I,{modelValue:y.value,"onUpdate:modelValue":t[11]||(t[11]=u=>y.value=u),onOnClick:t[12]||(t[12]=u=>{C.value=!1,y.value=!0,i.value.as="WORD"}),style:"margin-left: 30px"},null,8,["modelValue"]),ru])]),e("div",cu,[vu,x(e("textarea",{class:"order-comment-textarea","onUpdate:modelValue":t[13]||(t[13]=u=>i.value.offer.comment=u)},null,512),[[A,i.value.offer.comment]])])])])):R("",!0)]),e("div",pu,[e("div",{class:"kp-step-actions-link",onClick:t[14]||(t[14]=u=>Z.$emit("prev"))},"\u041D\u0430\u0437\u0430\u0434"),s.value?(l(),T(N,{key:0})):(l(),o("div",{key:1,class:p(["kp-step-actions-link",{disabled:v.value==-1}]),onClick:t[15]||(t[15]=u=>K())},"\u0414\u0430\u043B\u0435\u0435",2))])],2))}}),_u=e("div",{class:"kp-step-title"},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u0435 \u0444\u0430\u0439\u043B",-1),fu={class:"kp-step-body"},hu={class:"kp-step-actions"},Eu=$({__name:"KpStep3",props:{active:{type:Boolean,default:!1}},emits:["next","prev"],setup(Q,{emit:f}){const d=P(),r=()=>{d.dispatch(U.SAVE_KP)};return(s,c)=>(l(),o("div",{class:p(["kp-step",{active:Q.active}])},[_u,e("div",fu,[e("div",{onClick:c[0]||(c[0]=m=>r()),class:"kp-step-actions-link",style:"text-align: center"},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C")]),e("div",hu,[e("div",{class:"kp-step-actions-link",onClick:c[1]||(c[1]=m=>s.$emit("prev"))},"\u041D\u0430\u0437\u0430\u0434")])],2))}}),Du={class:"kp"},ku={class:"top-line product-page"},Qu=e("div",{class:"kp-head-card"},[e("div",{class:"kp-head-card-title"},"\u041A\u043E\u043D\u0441\u0442\u0440\u0443\u043A\u0442\u043E\u0440 \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u0438\u0439 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0439"),e("div",{class:"kp-head-card-subtitle"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",st:""},[e("path",{fill:"#A5A7A9",d:"M11.875 18Q12.5 18 12.95 17.55Q13.4 17.1 13.4 16.475Q13.4 15.85 12.95 15.412Q12.5 14.975 11.875 14.975Q11.25 14.975 10.8 15.412Q10.35 15.85 10.35 16.475Q10.35 17.1 10.8 17.55Q11.25 18 11.875 18ZM10.7 14.15H13.05Q13.05 13.425 13.25 12.925Q13.45 12.425 14.2 11.7Q14.775 11.15 15.137 10.525Q15.5 9.9 15.5 9.025Q15.5 7.525 14.525 6.737Q13.55 5.95 12.15 5.95Q10.625 5.95 9.613 6.825Q8.6 7.7 8.2 8.9L10.4 9.725Q10.575 9.225 10.95 8.725Q11.325 8.225 12.025 8.225Q12.525 8.225 12.8 8.537Q13.075 8.85 13.075 9.225Q13.075 9.6 12.812 10Q12.55 10.4 12.275 10.625Q11.275 11.55 10.988 12.137Q10.7 12.725 10.7 14.15ZM12 22.85Q9.75 22.85 7.763 22Q5.775 21.15 4.312 19.688Q2.85 18.225 2 16.25Q1.15 14.275 1.15 12Q1.15 9.725 2 7.75Q2.85 5.775 4.312 4.312Q5.775 2.85 7.763 2Q9.75 1.15 12 1.15Q14.275 1.15 16.25 2Q18.225 2.85 19.688 4.312Q21.15 5.775 22 7.75Q22.85 9.725 22.85 12Q22.85 14.275 22 16.25Q21.15 18.225 19.688 19.688Q18.225 21.15 16.25 22Q14.275 22.85 12 22.85ZM12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12ZM12 19.7Q15.2 19.7 17.45 17.462Q19.7 15.225 19.7 12Q19.7 8.775 17.45 6.537Q15.2 4.3 12 4.3Q8.8 4.3 6.55 6.537Q4.3 8.775 4.3 12Q4.3 15.225 6.55 17.462Q8.8 19.7 12 19.7Z"})]),e("div",null,"\u041D\u0430 \u044D\u0442\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 \u0412\u044B \u0441\u043C\u043E\u0436\u0435\u0442\u0435 \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0438\u0438 \u0441\u043E\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u043E\u0433\u043E \u0437\u0430\u043A\u0430\u0437\u0430, \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430 \u0438\u043B\u0438 \u0442\u043E\u0432\u0430\u0440\u0430 \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0441\u043E \u0441\u0432\u043E\u0438\u043C \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C \u0438 \u0446\u0435\u043D\u0430\u043C\u0438. \u041F\u0440\u043E\u0439\u0434\u0438\u0442\u0435 \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0448\u0430\u0433\u043E\u0432 \u0434\u043B\u044F \u0442\u043E\u0433\u043E \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u041A\u041F.")])],-1),gu={class:"kp-form"},xu={class:"kp-form-stepper-wrap"},Cu={class:"kp-form-stepper"},yu={class:"kp-form-stepper-list"},Au={class:"kp-form-stepper-content"},wu={class:"kp-form-stepper-content-tabs-box"},Pu=$({__name:"kp",setup(Q){const f=P(),d=S(()=>f.getters.getCompanysList),r=a(""),s=a(1),c=a(!1);te(()=>{f.getters.isCompanysLoad||f.dispatch(se.GET_COMPANYS),f.getters.isOrders||(c.value=!0,f.dispatch(le.GET_ORDERS).then(()=>{c.value=!1}))});const m=()=>{s.value<3&&(s.value=s.value+1)},_=()=>{s.value>1&&(s.value=s.value-1)};return(g,v)=>(l(),o("div",Du,[e("div",ku,[n(W,{data:w(d),modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=h=>r.value=h)},null,8,["data","modelValue"]),n(J),n(j)]),n(z),Qu,e("div",gu,[e("div",xu,[e("div",Cu,[e("div",{class:"kp-form-stepper-bar",style:oe("width:"+50*(s.value-1)+"%")},null,4),e("ul",yu,[e("li",{class:p(["kp-form-stepper-item",{active:s.value>=1}])},"1",2),e("li",{class:p(["kp-form-stepper-item",{active:s.value>=2}])},"2",2),e("li",{class:p(["kp-form-stepper-item with-image",{active:s.value>=3}])},null,2)])])]),e("div",Au,[e("div",wu,[e("div",{class:p(`kp-form-stepper-content-tabs step${s.value}`)},[n(ce,{onNext:m,onPrev:_,active:s.value==1},null,8,["active"]),n(mu,{companyUID:r.value,onNext:m,onPrev:_,active:s.value==2},null,8,["companyUID","active"]),n(Eu,{onNext:m,onPrev:_,active:s.value==3},null,8,["active"])],2)])])])]))}});export{Pu as default};
