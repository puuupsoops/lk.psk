import{d as ue,h as r,U as Ie,J as te,i as be,o as R,b as O,a as u,p,w as C,aP as y,z,aG as Ee,F as le,f as Le,k as Fe,u as Be,T as Re,m as _,l as Oe,_ as De,x as $e,y as Ye,g as Se}from"./index.8da950ad.js";import{_ as ae}from"./BaseInput.c370d3c6.js";import{_ as Ve}from"./PersonalBar.435b861c.js";const Xe={class:z("kp-canvas-controller")},Ne=_("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043B\u043E\u0433\u043E\u0442\u0438\u043F"),Ue={style:"display: flex; align-items: flex-end;"},Ae=_("\u{1F814}"),Pe=_("\u{1F815}"),ze=_("\u{1F817}"),He=_("\u279D"),Te=u("span",{style:"margin-bottom: 10px;"},"\u041C\u0430\u0441\u0448\u0442\u0430\u0431 \u043D\u0430\u043D\u0435\u0441\u0435\u043D\u0438\u044F",-1),Me={style:"display: flex;"},We=_("-"),je=_("+"),Ge={style:{display:"flex","align-items":"center"}},qe=_("?"),Je=u("span",{style:"margin-bottom: 10px;"},"\u0423\u0433\u043E\u043B \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u0430",-1),Ke={style:"display: flex;"},Qe=_("L"),Ze=_("R"),et=_("\u0421\u043A\u0430\u0447\u0430\u0442\u044C"),tt={style:{display:"flex","margin-top":"105px"}},lt={class:"product-slider-wrap",style:{display:"block"}},at=["src"],ut=Oe('<div style="margin:auto;"><div style="position:relative;" width="720" height="1080"><canvas width="720" height="1080" style="z-index:-1;"></canvas><canvas id="canvas-back" width="720" height="1080" style="position:absolute;left:0;top:0;z-index:0;"></canvas><canvas id="canvas-front" width="720" height="1080" style="position:absolute;left:0;top:0;z-index:1;"></canvas></div></div><span style="display:none;"><canvas id="c1" width="720" height="1080"></canvas></span>',2),ot=ue({__name:"LogoApplicationSinglePage",props:{active:{type:Boolean,default:!1},images:{type:Array,require:!0}},setup(L){const F=L;let f=r([]);const D=()=>{const a=f.value.shift();f.value=f.value.concat(a)},$=()=>{const a=f.value.pop();f.value=[a].concat(f.value)};Ie(()=>{var a;f.value=[],(a=F.images)==null||a.forEach((e,l)=>f.value.push({id:l,src:e.src}))});const Y=r(),o=r(),t=r(),S=r(),V=r(),I=r(),b=r(),n=r(),v=r(),H=100,T=100,h=r(H),x=r(T),i=r(H),d=r(T),X=r(!1),g=r("50%"),s=r(0),oe=a=>{console.log("click")},ne=a=>{let e=a.target.value;(e>=360||e<=-360)&&(e=0),w.value=e,N.value=w.value.toString();let l=n.value+i.value/2,m=v.value+d.value/2;t.value.getContext("2d").translate(l,m),t.value.getContext("2d").rotate(w.value*Math.PI/180),t.value.getContext("2d").translate(-l,-m),t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value,d.value),t.value.getContext("2d").resetTransform()},ve=a=>{console.log(a),g.value=g.value.replace("%","")},se=a=>{console.log("scaleFocusOutHandler"),console.log(g.value);let e=Number(g.value);if(e>100){s.value=1,g.value="100%",t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value=h.value+h.value*s.value,d.value=x.value+x.value*s.value);return}if(e<.01){s.value=-.99,g.value="0.01%",t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value=h.value+h.value*s.value,d.value=x.value+x.value*s.value);return}if(e==50){g.value="50%",s.value=0,t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value=h.value,d.value=x.value);return}let l=(e-50)/100;if(g.value+="%",console.log(l),e>50){s.value=Number(l.toFixed(2)),console.log(s.value),t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value=h.value+h.value*s.value,d.value=x.value+x.value*s.value),k();return}if(e<50){s.value=Number(l.toFixed(2)),console.log(s.value),t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value=h.value+h.value*s.value,d.value=x.value+x.value*s.value),k();return}g.value+="%"},M=a=>{console.log("scaleInputChange"),console.log(a);let e=g.value.replace("%",""),l=Number(e);console.log(l),l+=a*100/2,console.log(l),l%2==0?g.value=l.toString()+"%":g.value=l.toFixed(1)+"%"};te(g,()=>{console.log(g.value)});const U=r(null);r(F.images);const ie=a=>{console.log(a),de(a)},de=a=>{let e=new Image(I.value.width,I.value.height);e.onload=function(){I.value.getContext("2d").drawImage(e,0,0,I.value.width,I.value.height),I.value.getContext("2d").save()},e.crossOrigin="Anonymous",e.src=a+"?no-cache-please"},re=a=>new Promise((e,l)=>{const m=new FileReader;m.readAsDataURL(a),m.onload=()=>e(m.result),m.onerror=P=>l(P)}),ce=()=>{console.log("Image download"),b.value.getContext("2d").clearRect(0,0,b.value.width,b.value.height),b.value.getContext("2d").drawImage(I.value,0,0),b.value.getContext("2d").drawImage(t.value,0,0),b.value.toBlob(a=>{console.log(a);const e=window.URL.createObjectURL(a),l=document.createElement("a");l.href=e,l.setAttribute("download","image.png"),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(e)})},ge=async()=>{let a=await re(U.value.files[0]);o.value=new Image,o.value.src=a,o.value.onload=()=>{let e=o.value.width,l=o.value.height;h.value=e,x.value=l,i.value=e,d.value=l,g.value="50%",s.value=0,console.log("Logo load",o.value),t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value,d.value),t.value.getContext("2d").save(),K()}},me=()=>{U.value.click()},k=()=>{let a=n.value+i.value/2,e=v.value+d.value/2;t.value.getContext("2d").translate(a,e),t.value.getContext("2d").rotate(w.value*Math.PI/180),t.value.getContext("2d").translate(-a,-e),t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value,d.value),t.value.getContext("2d").resetTransform()},w=r(0),N=r(w.value.toString());te(w,()=>{(w.value>359||w.value<-359)&&(w.value=0),N.value=w.value.toString()});const W=a=>{a>0&&(a*=-1),G(a)},j=a=>{G(a)},G=a=>{if(a==0)return;w.value=Number(w.value)+Number(a);let e=n.value+i.value/2,l=v.value+d.value/2;t.value.getContext("2d").translate(e,l),t.value.getContext("2d").rotate(w.value*Math.PI/180),t.value.getContext("2d").translate(-e,-l),t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value,d.value),t.value.getContext("2d").resetTransform()},q=a=>{console.log("zoomUp"),!(s.value>=1)&&(s.value=Number((s.value+a).toFixed(2)),console.log(s.value),t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value=h.value+h.value*s.value,d.value=x.value+x.value*s.value),k(),M(a))},J=a=>{console.log("zoomDown"),!(s.value<=-1)&&(s.value=Number((s.value-a).toFixed(2)),t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value=h.value+h.value*s.value,d.value=x.value+x.value*s.value),k(),M(a*-1))},K=()=>{t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),n.value++,t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value,d.value),k()},pe=()=>{t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),n.value--,t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value,d.value),k()},fe=()=>{t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),v.value--,t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value,d.value),k()},he=()=>{t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),v.value++,t.value.getContext("2d").drawImage(o.value,n.value,v.value,i.value,d.value),k()},xe=()=>{let a=t.value.getBoundingClientRect();S.value=a.x,V.value=a.y,console.log("getFrontCanvasOffset X: ",S.value," Y: ",V.value)},A=a=>{a.preventDefault()};return be(async()=>{var ee;(ee=F.images)==null||ee.forEach((c,E)=>f.value.push({id:E,src:c.src})),t.value=window.document.getElementById("canvas-front"),I.value=window.document.getElementById("canvas-back"),b.value=window.document.getElementById("c1");let a=window.document.getElementById("canvas-back"),e=window.document.getElementById("canvas-front");Y.value=a.getContext("2d");const l=new Image(720,1080);l.onload=function(){a.getContext("2d").drawImage(l,0,0,720,1080),a.getContext("2d").save()},l.crossOrigin="Anonymous",l.src=f.value[0].src;let m=!1,P=e.width/2,we=e.height/2,Q=i.value,Z=d.value;n.value=P-Q/2,v.value=we-Z/2,o.value=new Image,o.value.src="https://psk.expert/upload/lk-kp-logo-NOT-REMOVE.png",o.value.crossOrigin="Anonymous",o.value.onload=()=>{e.getContext("2d").drawImage(o.value,n.value,v.value,Q,Z),e.getContext("2d").save()},e.onmousedown=c=>{xe(),console.log("layerX",c.layerX,"layerY",c.layerY),console.log("layerX",c.layerX/2,"layerY",c.layerY),console.log("startLogoPosX",n.value,"startLogoPosY",v.value),console.log("mouseDownCanvas",c);let E=c.clientX-S.value,B=c.clientY-V.value,Ce=n.value,ye=n.value+i.value,_e=v.value,ke=v.value+d.value;E>Ce&&E<ye&&B>_e&&B<ke?(m=!0,console.log("click Image"),window.addEventListener("wheel",A,{passive:!1})):console.log("didnt click Image"),console.log("isDraggable",m)},e.onmouseup=c=>{m=!1,window.removeEventListener("wheel",A,!1)},e.onmouseout=c=>{!m||(m=!1,window.removeEventListener("wheel",A,!1))},e.onmousemove=c=>{if(!m)return;let E=c.clientX-S.value-n.value-i.value/2,B=c.clientY-V.value-v.value-d.value/2;console.log("move x:",E," y: ",B),t.value.getContext("2d").clearRect(0,0,t.value.width,t.value.height),t.value.getContext("2d").drawImage(o.value,n.value+=E,v.value+=B,i.value,d.value),k()},e.onwheel=c=>{if(!!m)if(c.deltaY>0){if(console.log("wheel down",c.deltaY),X.value){W(-5);return}if(i.value<=10||d.value<=10)return;J(.05)}else{if(console.log("wheel up",c.deltaY),X.value){j(5);return}if(i.value>=700||d.value>=800)return;q(.05)}}}),(a,e)=>(R(),O(le,null,[u("div",Xe,[u("div",null,[u("input",{ref_key:"file",ref:U,id:"myfile",type:"file",onChange:e[0]||(e[0]=l=>ge()),style:{display:"none"}},null,544),p(y,{style:{width:"154px"},tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u0430\u0439\u043B \u0441 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C \u043D\u0430 \u0445\u043E\u043B\u0441\u0442",tooltipFlow:"up",onOnClick:e[1]||(e[1]=l=>me())},{default:C(()=>[Ne]),_:1})]),u("div",Ue,[u("div",null,[p(y,{onOnClick:e[2]||(e[2]=l=>pe())},{default:C(()=>[Ae]),_:1})]),u("div",null,[p(y,{onMousedown:e[3]||(e[3]=l=>fe())},{default:C(()=>[Pe]),_:1}),p(y,{style:{"margin-top":"5px"},onOnClick:e[4]||(e[4]=l=>he())},{default:C(()=>[ze]),_:1})]),u("div",null,[p(y,{onOnClick:e[5]||(e[5]=l=>K())},{default:C(()=>[He]),_:1})])]),u("div",null,[Te,u("div",Me,[u("div",null,[p(y,{onOnClick:e[6]||(e[6]=l=>J(.01))},{default:C(()=>[We]),_:1})]),u("div",null,[p(ae,{onClick:e[7]||(e[7]=l=>ve(l)),onFocusout:e[8]||(e[8]=l=>se()),modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=l=>g.value=l),class:z("input-text-field-modify")},null,8,["modelValue"])]),u("div",null,[p(y,{onOnClick:e[10]||(e[10]=l=>q(.01))},{default:C(()=>[je]),_:1})])])]),u("div",Ge,[p(y,{style:{margin:"0","border-radius":"100px",width:"30px","min-width":"30px","min-height":"30px",height:"30px",cursor:"help"},active:!1,tooltip:"\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u0430 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043A\u043E\u043B\u0435\u0441\u043E\u043C \u043C\u044B\u0448\u0438",tooltipFlow:"up"},{default:C(()=>[qe]),_:1}),p(Ee,{modelValue:X.value,"onUpdate:modelValue":e[11]||(e[11]=l=>X.value=l)},null,8,["modelValue"])]),u("div",null,[Je,u("div",Ke,[u("div",null,[p(y,{onOnClick:e[12]||(e[12]=l=>W(-1))},{default:C(()=>[Qe]),_:1})]),u("div",null,[p(ae,{onClick:e[13]||(e[13]=l=>oe()),onFocusout:e[14]||(e[14]=l=>ne(l)),modelValue:N.value,"onUpdate:modelValue":e[15]||(e[15]=l=>N.value=l),class:z("input-text-field-modify")},null,8,["modelValue"])]),u("div",null,[p(y,{onOnClick:e[16]||(e[16]=l=>j(1))},{default:C(()=>[Ze]),_:1})])])]),u("div",null,[p(y,{onOnClick:e[17]||(e[17]=l=>ce()),tooltip:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u043D\u0430 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E","tooltip-flow":"up",style:"background-color: oldlace;"},{default:C(()=>[et]),_:1})])]),u("div",tt,[u("div",lt,[u("div",{style:{display:"flex"}},[u("button",{style:{margin:"10px auto","background-image":"url(/src/assets/img/icon/arrow-i-up.svg)"},class:"product-slider-arrow prev",onClick:D})]),p(Re,{name:"product-slider-trans",class:"product-slider-small",tag:"div",style:{"flex-flow":"column","max-height":"960px",flex:"0 0 100%"}},{default:C(()=>[(R(!0),O(le,null,Le(Be(f),l=>(R(),O("div",{class:"product-slider-small-slide",style:{opacity:"1.0"},key:l.id},[l.src?(R(),O("img",{key:0,style:{"max-width":"146px"},src:l.src,onClick:e[18]||(e[18]=m=>ie(m.target.src))},null,8,at)):Fe("",!0)]))),128))]),_:1}),u("div",{style:{display:"flex"}},[u("button",{style:{margin:"10px auto","background-image":"url(/src/assets/img/icon/arrow-i-down.svg)"},class:"product-slider-arrow next",onClick:$})])]),ut])],64))}});const nt=L=>($e("data-v-2e3cfd96"),L=L(),Ye(),L),vt={class:"top-line product-page"},st=nt(()=>u("div",{class:"top-line-card-wrap header-lable"}," \u041C\u0430\u043A\u0435\u0442 \u043D\u0430\u043D\u0435\u0441\u0435\u043D\u0438\u044F \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u0430 ",-1)),it=ue({__name:"logo",setup(L){var D;const F=Se(),f=r([]);return(D=F.getters.getProductImages)==null||D.forEach(($,Y)=>f.value.push({id:Y,src:$})),($,Y)=>(R(),O("div",null,[u("div",vt,[st,p(Ve)]),p(ot,{images:f.value},null,8,["images"])]))}});var gt=De(it,[["__scopeId","data-v-2e3cfd96"]]);export{gt as default};
