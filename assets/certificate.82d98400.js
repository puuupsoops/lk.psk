import{_ as V,d as F,j as H,h as o,b as r,a as u,p,ac as O,u as l,w as P,T as j,k as I,x as N,y as $,g as z,O as G,X as q,ab as J,aj as S,o as i,F as K,f as W,S as X}from"./index.8da950ad.js";import{B as g,I as Y,a as Q}from"./ButtonWithIcon.ff84e438.js";import{_ as Z}from"./PersonalBar.435b861c.js";const L=d=>(N("data-v-0facbc00"),d=d(),$(),d),ee={class:"top-line product-page"},te=L(()=>u("div",{class:"top-line-card-wrap header-lable"},"\u041F\u043E\u0438\u0441\u043A \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0432",-1)),ue={key:0},ae={class:"content-heading-wrap proudct-heading-wrap"},oe={class:"content-heading-price"},se=["innerHTML"],le={class:"content-heading-wrap-elem",style:{width:"23.76%"}},ne={class:"content-heading-price"},ce=L(()=>u("div",{class:"content-heading-price-text"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B:",-1)),re=["innerHTML"],ie={style:"margin: 0 auto 0 auto; display: table;"},de={class:"product-slider-wrap"},pe=["src"],ve=F({__name:"certificate",setup(d){const c=z();G();const b=H({get:()=>c.getters.getLoader,set:a=>c.commit(q.SET_LOADER,a)}),w=o(""),B=a=>{console.log("search"),b.value=!0,v.value=a,c.dispatch(J.SEARCH_PRODUCT,v.value).then(()=>{console.log(c.getters.getProduct);let e=c.getters.getProduct;y.value=e.NAME,f.value=e.UID,T(f.value)}).finally(()=>{})},y=o("\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0430"),v=o("\u041AJC 321"),f=o("0");let s=o([]),_=o(!1),x=o([]),D=o(!1),C=()=>{const a=s.value.shift();s.value=s.value.concat(a)},A=()=>{const a=s.value.pop();s.value=[a].concat(s.value)},m=o("\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B \u0430\u0440\u0445\u0438\u0432\u043E\u043C "),h=o(g.Active),R=Y.Download,E=o(!1),T=a=>{s.value=[],x.value=[];let e=a;console.log(e),S.get("/product/"+e+"/certificates").then(t=>{var n;(n=t.data)==null||n.forEach((k,M)=>{s.value.push({id:M,src:k}),x.value.push(k)})}).catch(t=>{console.log("error"),console.log(t)}).finally(function(){D.value=!0,b.value=!1})},U=()=>{h.value=g.InProgress,m.value="\u0410\u0440\u0445\u0438\u0432 \u0441\u043A\u0430\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044F, \u043F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435";let a=f.value;S.get("/product/"+a+"/certificates/download",{responseType:"blob",transformRequest:(e,t)=>{t==null||delete t.common}}).then(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","cert.zip"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(t),E.value=!E}).catch(e=>{console.log("error"),console.log(e)}).finally(function(){h.value=g.Active,m.value="\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B \u0430\u0440\u0445\u0438\u0432\u043E\u043C "})};return(a,e)=>(i(),r("div",null,[u("div",ee,[te,p(Z)]),p(O,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=t=>w.value=t),to:"certificate",onSearch:B},null,8,["modelValue"]),l(s).length>0?(i(),r("div",ue,[u("div",ae,[u("div",oe,[u("div",{class:"content-heading-price-text",innerHTML:y.value},null,8,se)]),u("div",le,[u("div",ne,[ce,u("div",{class:"content-heading-price-value",innerHTML:v.value},null,8,re)])]),u("div",ie,[p(Q,{style:{display:"flex",margin:"0px auto"},text:l(m),icon:l(R),state:l(h),onClick:e[1]||(e[1]=t=>l(U)())},null,8,["text","icon","state"])])]),u("div",de,[u("button",{class:"product-slider-arrow prev",onClick:e[2]||(e[2]=(...t)=>l(A)&&l(A)(...t))}),p(j,{style:{"max-width":"560px"},name:"product-slider-trans",class:"product-slider",tag:"div"},{default:P(()=>[(i(!0),r(K,null,W(l(s),t=>(i(),r("div",{class:"product-slider-slide",key:t.id},[t.src?(i(),r("img",{key:0,src:t.src,onClick:e[3]||(e[3]=n=>X(_)?_.value=!0:_=!0)},null,8,pe)):I("",!0)]))),128))]),_:1}),u("div",{class:"product-slider-arrow next",onClick:e[4]||(e[4]=(...t)=>l(C)&&l(C)(...t))})])])):I("",!0)]))}});var he=V(ve,[["__scopeId","data-v-0facbc00"]]);export{he as default};
