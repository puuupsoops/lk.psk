import{N as de,_ as ce}from"./PersonalBar.1fd2928c.js";import{_ as ve}from"./CompanyBarTop.4121cbcb.js";import{_ as he}from"./TopNav.15c07b6a.js";import{S as j}from"./SelectInput.4a346e82.js";import{d as K,g as _,z as ue,i as L,_ as me,o,b as i,a as e,x as y,t as E,F as T,e as N,k as S,f as se,M as _e,I as U,r as pe,l as k,u as c,Q as fe,j as A,n as ge,ad as M,w as te,c as R,ag as we,Y as Ce,af as De,ah as ye,ai as Ae,aj as ke,B as Ee,ak as q,h as $e,p as xe}from"./index.8fd51b67.js";import{P as Y}from"./PreloaderLocal.e17c3f6e.js";import{O as z,M as Oe,a as F,_ as Be}from"./types.dbdd98ef.js";import{_ as Se}from"./CatalogPagination.5792d9d1.js";import"./DeleteButton.7442bbb2.js";import"./OrderDraftCard.59391d6b.js";const Ve=K({props:{show:{type:Boolean,default:!0},modelValue:{type:String,default:""},error:{type:Boolean,default:!1}},emits:["update:modelValue","update:show","onInput"],setup(r,{emit:l}){const m=_(0),V=_(null);ue(V,()=>l("update:show",!1));const O=L(()=>r.modelValue?r.modelValue:""),v=L(()=>{let p=new Date;p.setHours(0,0,0,0);let s=new Date;r.modelValue!=""&&(s=new Date(parseInt(r.modelValue.substr(6,4)),parseInt(r.modelValue.substr(3,2))-1,parseInt(r.modelValue.substr(0,2)))),s.setMonth(s.getMonth()+m.value),s=new Date(s.toISOString().substr(0,7)+"-01");let f=s.toLocaleString("default",{month:"long"});f=f.charAt(0).toUpperCase()+f.slice(1);let C=s.getMonth(),n=s.getFullYear(),B=[],h=[];s=new Date(s.getFullYear(),s.getMonth(),s.getDay()==1?-6:2-s.getDay());for(let g=1;g<=42;g++){let w=s.getDate(),b=!1;r.modelValue!=""&&(b=s.getTime()===new Date(parseInt(r.modelValue.substr(6,4)),parseInt(r.modelValue.substr(3,2))-1,parseInt(r.modelValue.substr(0,2))).getTime()),h.push({day:w,disable:s.getMonth()!=C,today:s.getMonth()==p.getMonth()&&s.getDate()==p.getDate()&&s.getFullYear()==p.getFullYear(),select:b}),s=new Date(s.getFullYear(),s.getMonth(),w+1),g%7==0&&(B.push(h),h=[])}return{year:n,month:{month:f,month_int:C},dateArr:B}});return{select_date:(p,s,f)=>{let C=new Date(p,s,f);m.value=0,l("update:modelValue",C.toLocaleString("ru").substr(0,10)),l("onInput"),l("update:show",!1)},dateText:O,genDay:v,target:V,delta:m}}}),be={class:"modal-datepicker",ref:"target"},Pe={class:"ui-datepicker-date"},Ie=["value"],Fe={class:y("ui-datepicker active")},Le={class:"ui-datepicker-header"},Ue=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 0.71186 -0.702321 0.71186 11.8181 0)",fill:"#53565B"},null,-1),Me=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 -0.71186 -0.702321 -0.71186 11.8181 24)",fill:"#53565B"},null,-1),Te=[Ue,Me],Ne={class:"ui-datepicker-title"},Re={class:"ui-datepicker-month"},Ye=S("\xA0"),ze={class:"ui-datepicker-year"},Ge=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 0.71186 0.702322 0.71186 1.73828 0)",fill:"#53565B"},null,-1),je=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 -0.71186 0.702322 -0.71186 1.73828 24)",fill:"#53565B"},null,-1),qe=[Ge,je],Ke={class:"ui-datepicker-calendar"},We=e("thead",null,[e("tr",null,[e("th",{scope:"col"},[e("span",{title:"\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A"},"\u041F\u043D")]),e("th",{scope:"col"},[e("span",{title:"\u0432\u0442\u043E\u0440\u043D\u0438\u043A"},"\u0412\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0440\u0435\u0434\u0430"},"\u0421\u0440")]),e("th",{scope:"col"},[e("span",{title:"\u0447\u0435\u0442\u0432\u0435\u0440\u0433"},"\u0427\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u043F\u044F\u0442\u043D\u0438\u0446\u0430"},"\u041F\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0443\u0431\u0431\u043E\u0442\u0430"},"\u0421\u0431")]),e("th",{scope:"col",class:"ui-datepicker-week-end"},[e("span",{title:"\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435"},"\u0412\u0441")])])],-1),Ze=["onClick"];function He(r,l,m,V,O,v){return o(),i("div",{class:y("modal-datepicker-wrap"+(r.show?" show":"")),ref:"target"},[e("div",be,[e("div",Pe,[e("input",{class:y("active"),type:"text",placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",name:"date",autocomplete:"off",readonly:"",value:r.dateText,onFocus:l[0]||(l[0]=$=>r.active=!0)},null,40,Ie),e("div",{class:"ui-datepicker-date-clear",onClick:l[1]||(l[1]=$=>r.modelValue==""?r.$emit("update:show",!1):r.$emit("update:modelValue",""))}),e("div",Fe,[e("div",Le,[(o(),i("svg",{class:"ui-datepicker-prev",title:"<\u041F\u0440\u0435\u0434",onClick:l[2]||(l[2]=$=>r.delta=r.delta-1),width:"13",height:"24",viewBox:"0 0 13 24",xmlns:"http://www.w3.org/2000/svg"},Te)),e("div",Ne,[e("span",Re,E(r.genDay.month.month),1),Ye,e("span",ze,E(r.genDay.year),1)]),(o(),i("svg",{class:"ui-datepicker-next",title:"\u0421\u043B\u0435\u0434>",onClick:l[3]||(l[3]=$=>r.delta=r.delta+1),width:"14",height:"24",viewBox:"0 0 14 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},qe))]),e("table",Ke,[We,e("tbody",null,[(o(!0),i(T,null,N(r.genDay.dateArr,($,p)=>(o(),i("tr",{key:p},[(o(!0),i(T,null,N($,(s,f)=>(o(),i("td",{key:f,class:y((s.disable?" disable":"")+(s.today?" today":"")+(s.select?" select":"")),onClick:C=>s.disable?"":r.select_date(r.genDay.year,r.genDay.month.month_int,s.day)},[e("span",null,E(s.day),1)],10,Ze))),128))]))),128))])])])])],512)],2)}var Qe=me(Ve,[["render",He]]);const Je={class:"orders-list-wrap"},Xe={class:"orders-heading-info"},et={class:"orders-heading-pagination"},tt={class:"orders-list"},ut={class:"orders-list-row orders-list-heading"},st=e("div",{class:"orders-list-elem"},"\u2116",-1),at=e("div",null,"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),lt=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),ot=[lt],rt=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),it=[rt],nt=e("div",null,"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F",-1),dt=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),ct=[dt],vt=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),ht=[vt],mt=e("div",{class:"orders-list-elem"},"\u0418\u043D\u0444\u043E",-1),_t=["onClick"],pt={class:"orders-list-elem"},ft=e("div",{class:"table-arrow"},null,-1),gt={class:"orders-list-elem"},wt={class:"orders-list-elem"},Ct={class:"orders-list-elem"},Dt={class:"orders-list-elem"},yt={class:"orders-list-elem"},At=["tooltip"],kt={class:"orders-list-elem"},Et=["onClick"],$t=["onClick"],xt=["onClick"],Ot=["onClick"],Bt=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B",-1),St=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B",-1),Vt=["onClick"],bt=e("span",null,"\u0417\u0430\u044F\u0432\u043A\u0430 \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442",-1),Pt={key:0},It={class:"orders-list-info-elem"},Ft={class:"orders-list-info-elem"},Lt={key:0,class:"orders-list-info-about tooltip"},Ut=["onClick"],Mt=e("span",{class:"tooltiptext"},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442",-1),Tt={key:1,class:"orders-list-info-about tooltip"},Nt={class:"orders-list-info-download disable"},Rt=e("span",{class:"tooltiptext"},[S("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442 \u043C\u043E\u0436\u043D\u043E \u0442\u043E\u043B\u044C\u043A\u043E "),e("br"),S(" \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430")],-1),Yt={key:0,class:"orders-list-info-elem orders-list-info-doc-wrap"},zt={key:1,class:"orders-list-info-elem orders-list-info-doc-wrap"},Gt=["href"],jt=["href"],qt=["href"],Kt=["href"],Wt={class:"orders-list-info-elem"},Zt=["tooltip"],Ht=e("div",{class:"orders-list-info-elem"},null,-1),Qt={key:1,class:"orders-list-info-row"},Jt=Ee('<div class="orders-list-info-elem"></div><div class="orders-list-info-elem"> \u0421\u0447\u0435\u0442 \u043E\u0442\u0441\u0443\u0442\u0432\u0443\u0435\u0442 </div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div>',6),Xt=[Jt],eu={key:0,class:"orders-list-row orders-list-main-row"},tu={class:"order-info"},uu=S(" \u0417\u0430\u043A\u0430\u0437\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 "),su=S("\u043D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437"),au=S(" \u0438 \u043E\u043D \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0432 \u0441\u043F\u0438\u0441\u043A\u0435. "),lu=K({__name:"OrdersListCard",props:{contrAgent:{type:String},period:{type:String},status:{type:String},loading:{type:Boolean,default:!1},search:{type:Object,required:!0},refresh:{type:Boolean,default:!1}},setup(r){const l=r,m=se(),V=_e(),O=_(!1),v=_(-1),$=_(-1),p=_(null),s=_(!1),f=_([]),C=_(-1),n=_([{name:"id",value:"",show:!1},{name:"name",value:"",show:!1},{name:"date",value:"",show:!1}]),B=_(!1),h=_(!1),g="http://91.232.12.198:82",w=_({maxItemOnPage:10,currentPage:1});ue(p,()=>{$.value=-1});let b=L(()=>m.getters.getOrders);const W=()=>{var a;if(v.value!=-1&&P.value&&Array.isArray(P.value[v.value].checks)){let t=(a=P.value[v.value].checks)==null?void 0:a.map(x=>x.doc_status?null:m.dispatch(q.GET_ORDERS_DOCSTATUS,x.guid));t&&Promise.all(t).finally(()=>{})}};U(v,()=>{W()}),U(()=>l.status,()=>{w.value.currentPage=1,v.value=-1}),U(()=>l.contrAgent,()=>{w.value.currentPage=1,v.value=-1}),U(()=>l.search,()=>{w.value.currentPage=1,v.value=-1}),U(()=>l.period,()=>{w.value.currentPage=1,v.value=-1}),U(()=>l.refresh,(a,t)=>{t==!0&&a==!1&&W()});const P=L(()=>{let a=b.value.filter(t=>l.contrAgent==""||t.partner_guid==l.contrAgent);return a=a.filter(t=>ae(t.date)),a=a.filter(t=>le(t)),a=a.filter(t=>I(t)),n.value[1].value!=""&&(a=a.filter(t=>t.name.indexOf(n.value[1].value)!=-1)),n.value[2].value!=""&&(a=a.filter(t=>t.date.indexOf(n.value[2].value)!=-1)),a}),Z=a=>w.value.maxItemOnPage!=-1?a>=(w.value.currentPage-1)*w.value.maxItemOnPage&&a<w.value.currentPage*w.value.maxItemOnPage:!0,I=a=>{if(l.search.search=="")return!0;switch(l.search.id){case 1:return a.name.toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;case 2:return String(a.n).toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;case 3:return a.date.toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;default:return!0}},ae=a=>{var t;if(l.period=="\u0412\u0441\u0435")return!0;{const x=(t=l.period)==null?void 0:t.split(" - ")[0],u=x==null?void 0:x.substring(6,10),D=x==null?void 0:x.substring(3,5);return u==a.substring(6,10)&&D==a.substring(3,5)}},le=a=>l.status=="\u0412\u0441\u0435"?!0:Array.isArray(a.checks)?a.checks.findIndex(t=>z[parseInt(t.status+1)]?l.status==z[parseInt(t.status+1)].name:!1)!=-1:!1,oe=a=>{f.value.push(a),m.dispatch(we.GET_BILL_FILE_SAVE,a).finally(()=>{f.value=f.value.filter(t=>t!==a)})},re=(a,t)=>{const u=m.getters.getCompanyStoragesData(a).find(D=>D.guid==t);return u?u.name.replace(/(^|\s)\S/g,D=>D.toUpperCase()).replace(/(ООО)|(")|(\s)|([а-я])/g,""):"\u0421\u043A\u043B\u0430\u0434"},ie=a=>{m.commit(Ce.SET_CURRENT_ORDER,a)},ne=a=>{O.value=!0,m.commit(De.CLEAN_ORDER_DETAIL),m.commit(ye.CLEAR_CLAIMS_NEW),m.dispatch(Ae.ADD_CLAIMS_NEW,a).then(()=>{O.value=!1,V.push("/claims/request")})};return(a,t)=>{const x=pe("router-link");return o(),i("div",Je,[e("div",Xe,[e("div",et,[k(Se,{maxPage:w.value.maxItemOnPage!=-1?Math.ceil(c(P).length/w.value.maxItemOnPage):1,currentPage:w.value.currentPage,"onUpdate:currentPage":t[0]||(t[0]=u=>w.value.currentPage=u),maxItemOnPage:w.value.maxItemOnPage,"onUpdate:maxItemOnPage":t[1]||(t[1]=u=>w.value.maxItemOnPage=u)},null,8,["maxPage","currentPage","maxItemOnPage"])]),e("div",{class:"orders-heading-info-text",style:fe(c(P).length!=c(b).length?"visibility: visible":"visibility: hidden")}," \u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E "+E(c(P).length)+" \u0438\u0437 "+E(c(b).length),5)]),e("div",tt,[e("div",ut,[st,e("div",{class:y("orders-list-elem"+(I.search!=""&&I.id==1?" active":"")+(n.value[1].value!=""?" active":""))},[k(Oe,{modelValue:n.value[1].value,"onUpdate:modelValue":t[2]||(t[2]=u=>n.value[1].value=u),show:n.value[1].show,"onUpdate:show":t[3]||(t[3]=u=>n.value[1].show=u)},null,8,["modelValue","show"]),at,e("div",{class:y("orders-list-elem-filter"+(n.value[1].show||n.value[1].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:t[4]||(t[4]=u=>n.value[1].show=!0)},ot,2),n.value[1].value!=""?(o(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:t[5]||(t[5]=u=>{n.value[1].value="",v.value=-1})},it)):A("",!0)],2),e("div",{class:y("orders-list-elem"+(r.contrAgent!=""?" active":""))},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",2),e("div",{class:y("orders-list-elem"+(I.search!=""&&I.id==2?" active":""))},"\u041D\u043E\u043C\u0435\u0440",2),e("div",{class:y("orders-list-elem"+(I.search!=""&&I.id==3?" active":"")+(r.period!="\u0412\u0441\u0435"?" active":"")+(n.value[2].value!=""?" active":""))},[k(Qe,{modelValue:n.value[2].value,"onUpdate:modelValue":t[6]||(t[6]=u=>n.value[2].value=u),show:n.value[2].show,"onUpdate:show":t[7]||(t[7]=u=>n.value[2].show=u)},null,8,["modelValue","show"]),nt,e("div",{class:y("orders-list-elem-filter"+(n.value[2].show||n.value[2].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:t[8]||(t[8]=u=>n.value[2].show=!0)},ct,2),n.value[2].value!=""?(o(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:t[9]||(t[9]=u=>{n.value[2].value="",v.value=-1})},ht)):A("",!0)],2),e("div",{class:y("orders-list-elem"+(r.status!="\u0412\u0441\u0435"?" active":""))},"\u0421\u0442\u0430\u0442\u0443\u0441",2),mt]),(o(!0),i(T,null,N(c(P),(u,D)=>(o(),i("div",{class:y(["orders-list-item",{active:D==v.value,reserved:u.reserved}]),key:D},[Z(D)?(o(),i("div",{key:0,class:"orders-list-row orders-list-main-row",onClick:d=>D==v.value?v.value=-1:v.value=D},[e("div",pt,[S(E(D+1)+" ",1),ft]),e("div",gt,E(u.name),1),e("div",wt,E(c(ge)(u.partner_name)),1),e("div",Ct,E(u.n),1),e("div",Dt,E(u.date),1),e("div",yt,[(o(!0),i(T,null,N(u.checks,(d,G)=>(o(),i("div",{class:y("orders-list-elem-status "+c(F)[d.status].class),tooltip:c(F)[d.status].name,flow:"up",key:G},null,10,At))),128))]),e("div",kt,[e("button",{class:"orders-list-more",onClick:M(d=>$.value=D,["stop"])},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E",8,Et),e("div",{class:y("orders-list-more-dropdown"+(D==$.value?" active":"")),ref_for:!0,ref_key:"target",ref:p},[e("a",{class:"orders-list-more-dropdown-link",onClick:M(d=>{C.value=u.n,s.value=!0},["stop"])},"\u0414\u0435\u0442\u0430\u043B\u0438 \u0437\u0430\u043A\u0430\u0437\u0430",8,$t),e("a",{class:"orders-list-more-dropdown-link",onClick:M(d=>{C.value=u.n,s.value=!0,h.value=!1,B.value=!0},["stop"])},"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,xt),u.reserved?(o(),i("a",{key:0,class:"orders-list-more-dropdown-link",onClick:M(d=>{C.value=u.n,s.value=!0,h.value=!0,B.value=!1},["stop"])},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,Ot)):A("",!0),Bt,St,e("a",{class:"orders-list-more-dropdown-link",onClick:M(d=>ne(u.n),["stop"])},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u043F\u0440\u0435\u0442\u0435\u043D\u0437\u0438\u044E",8,Vt),k(x,{class:"orders-list-more-dropdown-link",tag:"a",to:"/shipments/request",onClick:d=>ie(u.n)},{default:te(()=>[bt]),_:2},1032,["onClick"])],2)])],8,_t)):A("",!0),Z(D)?(o(),i("div",{key:1,class:y(["orders-list-info",{active:D==v.value}]),onClick:t[10]||(t[10]=d=>$.value=-1)},[Array.isArray(u.checks)&&u.checks.length>0&&u.status_code!="7"&&u.status_code!="9"?(o(),i("div",Pt,[(o(!0),i(T,null,N(u.checks,(d,G)=>{var H,Q,J,X,ee;return o(),i("div",{class:"orders-list-info-row",key:G},[e("div",It,E(re(u.partner_guid,d.organization_id)),1),e("div",Ft,[(H=d.doc_status)!=null&&H.StatusSchet?(o(),i("div",Lt,[e("div",{class:"orders-list-info-download",onClick:fu=>oe(d.guid)},[e("span",null," \u0421\u0447\u0451\u0442 \u043E\u0442 "+E(u.date.substring(0,10)),1),f.value.includes(u.guid)?(o(),R(Y,{key:0,small:""})):A("",!0)],8,Ut),Mt])):(o(),i("div",Tt,[e("div",Nt," \u0421\u0447\u0451\u0442 \u043E\u0442 "+E(u.date.substring(0,10)),1),Rt]))]),d.doc_status?(o(),i("div",zt,[(Q=d.doc_status)!=null&&Q.StatusSchet?(o(),i("a",{key:0,class:"orders-list-info-doc sc",href:`${c(g)}/api/order/print?id=${d.guid}&name=\u0421\u0447\u0435\u0442`,target:"_blank",title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0447\u0435\u0442"},null,8,Gt)):A("",!0),(J=d.doc_status)!=null&&J.StatusUPD?(o(),i("a",{key:1,class:"orders-list-info-doc upd",href:`${c(g)}/api/order/print?id=${d.guid}&name=\u0423\u041F\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0435\u0440\u0435\u0434\u0430\u0442\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,jt)):A("",!0),(X=d.doc_status)!=null&&X.StatusSF?(o(),i("a",{key:2,class:"orders-list-info-doc sf",href:`${c(g)}/api/order/print?id=${d.guid}&name=\u0421\u0424`,target:"_blank",title:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043A\u0442\u0443\u0440\u0430"},null,8,qt)):A("",!0),(ee=d.doc_status)!=null&&ee.StatusUPK?(o(),i("a",{key:3,class:"orders-list-info-doc kor",href:`${c(g)}/api/order/print?id=${d.guid}&name=\u0423\u041A\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,Kt)):A("",!0)])):(o(),i("div",Yt,[k(Y,{small:""})])),e("div",Wt,[S(E(c(F)[d.status]?c(F)[d.status].name:"")+" ",1),c(F)[d.status]?(o(),i("div",{key:0,class:y("orders-list-elem-status small "+c(F)[d.status].class),tooltip:c(F)[d.status].name,flow:"up"},null,10,Zt)):A("",!0)]),Ht])}),128))])):(o(),i("div",Qt,Xt))],2)):A("",!0)],2))),128)),c(b).length==0&&!r.loading?(o(),i("div",eu,[e("div",tu,[uu,k(x,{tag:"a",class:"order-info-link",to:"/order"},{default:te(()=>[su]),_:1}),au])])):A("",!0)]),r.loading?(o(),R(Y,{key:0,style:{width:"100%"}})):A("",!0),O.value?(o(),R(ke,{key:1})):A("",!0),k(Be,{modelValue:s.value,"onUpdate:modelValue":t[11]||(t[11]=u=>s.value=u),orderId:C.value,repeatOrder:B.value,"onUpdate:repeatOrder":t[12]||(t[12]=u=>B.value=u),editOrder:h.value,"onUpdate:editOrder":t[13]||(t[13]=u=>h.value=u)},null,8,["modelValue","orderId","repeatOrder","editOrder"])])}}}),ou={class:"top-line product-page"},ru={class:"orders-heading"},iu={class:"orders-heading-elem"},nu={class:"orders-heading-item"},du=e("div",{class:"orders-heading-text"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442:",-1),cu={class:"orders-heading-item"},vu=e("div",{class:"orders-heading-text"},"\u0421\u0442\u0430\u0442\u0443\u0441:",-1),hu={class:"orders-heading-item"},mu=e("div",{class:"orders-heading-text"},"\u041F\u0435\u0440\u0438\u043E\u0434:",-1),_u={key:0,class:"orders-heading-elem"},pu={key:1},Ou=K({__name:"orders",setup(r){const l=se(),m=_(!0),V=_({id:1,search:""}),O=L(()=>l.getters.getCompanysList),v=_(0),$=L(()=>l.getters.getCompanyFromOrders),p=_(""),s=L(()=>l.getters.getOrdersDataPeriodArray),f=_(0),C=_(!1),n=()=>{C.value==!1&&(C.value=!0,l.dispatch(q.GET_ORDERS).finally(()=>{C.value=!1,m.value=!0,m.value=!1}))};return $e(()=>{l.dispatch(q.GET_ORDERS).finally(()=>{m.value=!1}),l.getters.isCompanysLoad||l.dispatch(xe.GET_COMPANYS).then(()=>{})}),(B,h)=>(o(),i("div",null,[e("div",ou,[k(ve,{data:c(O),modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=g=>p.value=g)},null,8,["data","modelValue"]),k(de),k(ce)]),k(he,{newOrder:""}),e("div",ru,[e("div",iu,[e("div",nu,[du,k(j,{data:c($),modelValue:p.value,"onUpdate:modelValue":h[1]||(h[1]=g=>p.value=g)},null,8,["data","modelValue"])]),e("div",cu,[vu,k(j,{data:c(z),modelValue:v.value,"onUpdate:modelValue":h[2]||(h[2]=g=>v.value=g)},null,8,["data","modelValue"])]),e("div",hu,[mu,k(j,{data:c(s),modelValue:f.value,"onUpdate:modelValue":h[3]||(h[3]=g=>f.value=g)},null,8,["data","modelValue"])]),e("div",{class:"orders-heading-clean",title:"\u0423\u0431\u0440\u0430\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B",onClick:h[4]||(h[4]=g=>{p.value="",f.value=0,v.value=0})})]),m.value?A("",!0):(o(),i("div",_u,[e("button",{class:"product-search-btn gradient-btn",onClick:h[5]||(h[5]=g=>n())},[C.value?(o(),R(Y,{key:0,small:""})):(o(),i("div",pu,"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"))])]))]),k(lu,{loading:m.value,contrAgent:p.value,period:c(s)[f.value].name,status:c(z)[v.value].name,search:V.value,refresh:C.value},null,8,["loading","contrAgent","period","status","search","refresh"])]))}});export{Ou as default};
