import{_ as ye,N as Re}from"./PersonalBar.e2416ec8.js";import{_ as Ie}from"./CompanyBarTop.25f8464b.js";import{_ as Se}from"./TopNav.90e72b9d.js";import{P as Te,c as Le,a as Ve,b as be}from"./ProductInfoCard.e9033361.js";import{P as pe}from"./PreloaderLocal.89d6e863.js";import{d as F,g as _,z as re,I as Q,i as E,_ as X,f as Y,a8 as W,a9 as Pe,r as R,o as u,b as o,a as e,aa as ge,ab as fe,c as U,j as A,x as I,F as M,e as H,l as f,w as z,t as g,O as Be,k as V,u as O,h as J,W as Me,Z as Ce,T as Ue,M as de,ad as Fe,S as Ne,ae as ue,af as Ae,ag as $,ah as Z,B as ee,p as He}from"./index.933e68e4.js";import{A as oe}from"./AmountInput.945446a9.js";import{D as G}from"./DeleteButton.d7ea8cda.js";import{S as le}from"./SelectInput.eebfe136.js";import{D as qe,a as x,b as Ze}from"./types.e013fc47.js";import{_ as Ge}from"./OrderDraftCard.23fff0a4.js";const xe=F({props:{modelValue:{type:Boolean,required:!0}},components:{PreloaderLocal:pe},setup(t,{emit:s}){const r=Y(),d=_(""),m=_(!1),p=_(),v=_(null),C=_(null),l=()=>{clearTimeout(p.value),m.value=!0,p.value=setTimeout(()=>{d.value.length>=2&&r.dispatch(W.SEARCH_PRODUCT_ARTICLE,d.value).then(()=>{setTimeout(()=>{m.value=!1},500)})},500)},D=()=>{d.value="",r.commit(Pe.SET_PRODUCT_ARTICLS,[]),s("update:modelValue",!1)};return re(v,()=>{D()}),Q(()=>t.modelValue,()=>{Be(()=>{C.value.focus()})}),{search_str:d,loading:m,target:v,searchInput:C,articles:E(()=>r.getters.getProductArticles),doSearch:l,close:D}}}),Qe={class:"product-search-input-container"},ze={class:"product-search-input options"},Xe={key:0},Ye={key:1},je={class:"article"},Ke=V(),We={class:"name"},Je={key:0},et={key:1};function tt(t,s,r,d,m,p){const v=R("PreloaderLocal"),C=R("router-link");return u(),o("div",{class:I("product-search fullwidth"+(t.modelValue?"":" none")),ref:"target"},[e("div",Qe,[e("div",ze,[ge(e("input",{type:"text",placeholder:"\u041F\u043E\u0438\u0441\u043A",autocomplete:"off",onKeyup:s[0]||(s[0]=l=>t.doSearch()),"onUpdate:modelValue":s[1]||(s[1]=l=>t.search_str=l),ref:"searchInput"},null,544),[[fe,t.search_str]]),t.loading?(u(),U(v,{key:0,small:""})):A("",!0),e("div",{class:"product-search-clear",onClick:s[2]||(s[2]=l=>t.close())})]),e("div",{class:I("product-search-input-options"+(t.search_str==""||t.articles.length==0?" default":""))},[t.search_str==""?(u(),o("span",Xe,"\u0427\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u0430\u0437 \u043D\u043E\u0432\u044B\u0439 \u043F\u0440\u043E\u0434\u0443\u043A\u0442 - \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0432\u0432\u043E\u0434 \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0430")):(u(),o("div",Ye,[(u(!0),o(M,null,H(t.articles,(l,D)=>(u(),o("p",{key:D,class:I("product-search-input-options-item"+(t.loading?" loading":""))},[f(C,{tag:"a",onClick:s[3]||(s[3]=a=>t.close()),to:"/order/"+l.article},{default:z(()=>[e("div",je,g(l.article),1),Ke,e("div",We,g(l.name),1)]),_:2},1032,["to"])],2))),128)),t.loading&&t.articles.length==0?(u(),o("span",Je," \u041F\u043E\u0438\u0441\u043A...")):A("",!0),!t.loading&&t.articles.length==0?(u(),o("span",et,"\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")):A("",!0)]))],2)])],2)}var st=X(xe,[["render",tt]]);const ut=e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.7952 0.265077C13.4418 -0.0883587 12.8687 -0.0883589 12.5153 0.265076L5.41912 7.36126L1.54498 3.48711C1.19154 3.13368 0.618512 3.13368 0.265076 3.48711C-0.0883589 3.84055 -0.0883588 4.41358 0.265077 4.76702L4.75226 9.2542C4.88175 9.38369 5.04072 9.46574 5.20757 9.50034C5.50792 9.57832 5.84052 9.49967 6.0758 9.26438L13.7952 1.54498C14.1486 1.19154 14.1486 0.618512 13.7952 0.265077Z",fill:"#C4C4C4"},null,-1),ot=[ut],lt=F({__name:"CheckButton",props:{disabled:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","onClick"],setup(t,{emit:s}){const r=t,d=()=>{s("update:modelValue",r.disabled?r.modelValue:!r.modelValue),s("onClick")},m=E(()=>({"check-btn":!0,disable:r.disabled,active:r.modelValue}));return(p,v)=>(u(),o("button",{class:I(O(m)),onClick:v[0]||(v[0]=C=>d())},[(u(),o("svg",{class:I(t.modelValue?"check-btn-img active":"check-btn-img"),viewBox:"0 0 15 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ot,2))],2))}}),rt={class:"content-elem"},dt={class:"order-amount-table-wrap scroll-elem"},at={class:"table order-amount-table"},nt={class:"table-row table-heading"},it=e("div",{class:"table-elem"},"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430",-1),ct=e("div",{class:"table-elem"},"\u041E\u0441\u0442\u0430\u0442\u043E\u043A",-1),mt={class:"table-elem"},vt=V("\u0426\u0435\u043D\u0430"),ht={key:0,style:{"font-size":"10px"}},_t=e("div",{class:"table-elem"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E",-1),pt=e("div",{class:"table-elem"},"\u041F\u043F / \u0414\u0430\u0442\u0430",-1),gt={class:"table-wrap"},ft={class:"table-elem"},Ct=["innerHTML"],At={class:"table-elem"},Dt=["innerHTML"],Et={key:0,class:"table-elem"},$t=["innerHTML"],kt={key:1,class:"table-elem"},wt=["innerHTML"],Ot={class:"table-elem"},yt={class:"table-elem"},Rt={class:"order-amount-more"},It=e("span",{class:"order-amount-more-text"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u0430\u0437 ",-1),St={class:"order-amount-more-value"},Tt={key:0,class:"order-amount-more-text presail"},Lt={key:1,class:"order-amount-more-value"},Vt=F({__name:"ProductOffersOrderCard",props:{data:{type:Array,required:!0},discount:{type:Number},modelValue:{type:Array}},emits:["update:modelValue","onClick"],setup(t,{emit:s}){const r=t,d=_([]),m=E(()=>d.value.filter(a=>a.count>0).length),p=E(()=>d.value.filter(a=>a.count>a.RESIDUE&&a.count!=0).length),v=a=>{if(a.check){let c=d.value.find(h=>h.ID==a.ID);c&&(c.count=1)}else{let c=d.value.find(h=>h.ID==a.ID);c&&(c.count=0)}},C=a=>{if(a.count>0){let c=d.value.find(h=>h.ID==a.ID);c&&(c.check=!0)}else{let c=d.value.find(h=>h.ID==a.ID);c&&(c.check=!1)}},l=()=>{if(m.value>0){let a=[];d.value.forEach(c=>{c.count>0&&a.push({ID:c.ID,CHARACTERISTIC:c.CHARACTERISTIC,MAX_DISCOUNT:c.MAX_DISCOUNT,count:c.count,PRICE:c.PRICE,RESIDUE:c.RESIDUE,RESERVED:c.RESERVED,GUID:c.GUID,guid:c.GUID,ORGGUID:c.ORGGUID})}),s("update:modelValue",a),s("onClick"),d.value.forEach(c=>{c.count=0,c.check=!1})}},D=()=>{d.value=r.data.map(a=>({ID:a.ID,CHARACTERISTIC:a.CHARACTERISTIC,MAX_DISCOUNT:a.MAX_DISCOUNT,RESIDUE:a.RESIDUE,RESERVED:a.RESERVED,PRICE:a.PRICE,PPDATA:a.PPDATA,GUID:a.GUID,guid:a.GUID,ORGGUID:a.ORGGUID,count:0,check:!1}))};return J(()=>{D()}),Q(()=>r.data,()=>{D()}),(a,c)=>(u(),o("div",rt,[e("div",dt,[e("div",at,[e("div",nt,[it,ct,e("div",mt,[vt,t.discount?(u(),o("span",ht," - "+g(t.discount)+"%",1)):A("",!0)]),_t,pt]),e("div",gt,[(u(!0),o(M,null,H(d.value,h=>(u(),o("div",{class:I("table-row"+(h.count>0?" active":"")+(h.count>h.RESIDUE&&h.count!=0?" presail":"")),key:h.ID},[e("div",ft,[e("span",{innerHTML:h.CHARACTERISTIC},null,8,Ct)]),e("div",At,[e("span",{innerHTML:h.RESIDUE},null,8,Dt)]),t.discount?(u(),o("div",Et,[e("span",{innerHTML:Number(h.PRICE-h.PRICE/100*t.discount).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")+" \u20BD"},null,8,$t)])):(u(),o("div",kt,[e("span",{innerHTML:Number(h.PRICE).toLocaleString("ru")+" \u20BD"},null,8,wt)])),e("div",Ot,[f(oe,{modelValue:h.count,"onUpdate:modelValue":T=>h.count=T,onOnInput:T=>C(h)},null,8,["modelValue","onUpdate:modelValue","onOnInput"]),f(lt,{modelValue:h.check,"onUpdate:modelValue":T=>h.check=T,onOnClick:T=>v(h)},null,8,["modelValue","onUpdate:modelValue","onOnClick"])]),e("div",yt,[e("span",null,g(h.PPDATA.replaceAll("/","\xA0/\xA0")),1)])],2))),128))])])]),e("div",Rt,[e("div",{class:I(O(m)!=0||O(p)!=0?"order-amount-more-btn":"order-amount-more-btn disable"),onClick:c[0]||(c[0]=h=>l())},[It,e("span",St,"("+g(O(m))+")",1),O(p)>0?(u(),o("span",Tt," + \u043F\u0440\u0435\u0434\u0437\u0430\u043A\u0430\u0437 ")):A("",!0),O(p)>0?(u(),o("span",Lt,"("+g(O(p))+")",1)):A("",!0)],2)])]))}}),bt=F({props:{data:{type:Array}},emits:["toOrder"],components:{ProductSliderFullscreen:Te,ProductInfoCard:Le},setup(t){var C;let s=_([]),r=Y();const d=E({get:()=>r.getters.getLoader,set:l=>r.commit(Ce.SET_LOADER,l)}),m=_(!1);(C=t.data)==null||C.forEach((l,D)=>s.value.push({id:D,src:l})),Me(()=>{var l;s.value=[],(l=t.data)==null||l.forEach((D,a)=>s.value.push({id:a,src:D}))});let p=()=>{const l=s.value.shift();s.value=s.value.concat(l)},v=()=>{const l=s.value.pop();s.value=[l].concat(s.value)};return{loader:d,slides:s,fullscreen:m,product:E(()=>r.getters.getProduct),productProtect:E(()=>r.getters.getProductProtect),next:p,previous:v}}}),Pt={class:"content-elem"},Bt={key:0,class:"product-slider-wrap"},Mt=["src"];function Ut(t,s,r,d,m,p){const v=R("ProductInfoCard"),C=R("ProductSliderFullscreen");return u(),o("div",Pt,[t.loader?A("",!0):(u(),o("div",Bt,[e("div",{class:"product-slider-arrow prev",onClick:s[0]||(s[0]=(...l)=>t.previous&&t.previous(...l))}),f(Ue,{name:"product-slider-horisont-trans",class:"product-slider-horisont",tag:"div"},{default:z(()=>[(u(!0),o(M,null,H(t.slides,l=>(u(),o("div",{class:"product-slider-horisont-slide",key:l.id},[l.src?(u(),o("img",{key:0,src:l.src,onClick:s[1]||(s[1]=D=>t.fullscreen=!0)},null,8,Mt)):A("",!0)]))),128))]),_:1}),e("div",{class:"product-slider-arrow next",onClick:s[2]||(s[2]=(...l)=>t.next&&t.next(...l))})])),f(v,{data:t.product,protect:t.productProtect},null,8,["data","protect"]),f(C,{modelValue:t.fullscreen,"onUpdate:modelValue":s[3]||(s[3]=l=>t.fullscreen=l),data:t.data},null,8,["modelValue","data"])])}var Ft=X(bt,[["render",Ut]]);const Nt={class:"content-heading-wrap proudct-heading-wrap"},Ht={class:"content-heading-wrap-elem"},qt={key:0,class:"content-heading"},Zt={key:1,class:"content-heading"},Gt={class:"content-heading-wrap-elem"},xt={class:"content-heading-price"},Qt=e("div",{class:"content-heading-price-text"},"\u0421\u0443\u043C\u043C\u0430 \u0437\u0430\u043A\u0430\u0437\u0430: ",-1),zt={key:0,class:"content-heading-info-elem",style:{position:"absolute"}},Xt={key:0,class:"content-heading-price-value"},Yt={class:"strikethrough"},jt={key:1,class:"content-heading-price-value"},Kt={class:"content-heading-info"},Wt={class:"content-heading-info-elem"},Jt=e("span",{class:"content-heading-info-text"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0435\u0434\u0438\u043D\u0438\u0446: ",-1),e0={class:"content-heading-info-value"},t0={key:0,class:"content-heading-info-elem"},s0=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u0432\u0435\u0441: ",-1),u0={class:"content-heading-info-value"},o0={key:1,class:"content-heading-info-elem"},l0=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1),r0={class:"content-heading-info-value"},d0=F({__name:"OrderHeaderCard",props:{data:{type:Object,required:!0},discount:{type:Number}},setup(t){return(s,r)=>(u(),o("div",Nt,[e("div",Ht,[t.data.edit?(u(),o("div",qt,"\u0417\u0430\u043A\u0430\u0437 \u2116 "+g(t.data.id)+" \u043E\u0442 "+g(t.data.date),1)):(u(),o("div",Zt,"\u0417\u0430\u043A\u0430\u0437 \u2116 \u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437 \u043E\u0442 "+g(new Date(t.data.id).toLocaleDateString("ru-RU")),1))]),e("div",Gt,[e("div",xt,[e("div",null,[Qt,t.data.delivery.case=="other"?(u(),o("div",zt,"+\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430: "+g(t.data.delivery.cost)+" \u20BD",1)):A("",!0)]),t.data.total!=t.data.total_discount?(u(),o("div",Xt,[e("span",Yt,g(Number(t.data.total).toLocaleString("ru"))+" \u20BD",1),V(" "+g(Number(t.data.total_discount).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1)])):(u(),o("div",jt,g(Number(t.data.total).toLocaleString("ru"))+" \u20BD",1))])]),e("div",Kt,[e("div",Wt,[Jt,e("span",e0,g(t.data.total_count),1)]),t.data.total_weight?(u(),o("div",t0,[s0,e("span",u0,g(t.data.total_weight)+" \u043A\u0433.",1)])):A("",!0),t.data.total_valume?(u(),o("div",o0,[l0,e("span",r0,g(t.data.total_valume)+" \u043C.\u043A\u0443\u0431.",1)])):A("",!0)])]))}}),a0={emits:["onClick"],setup(){}},n0=e("svg",{class:"edit-btn-img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#000000"},[e("path",{d:"M0 0h24v24H0V0z",fill:"none"}),e("path",{class:"fill",fill:"#A5A7A9",d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})],-1),i0=[n0];function c0(t,s,r,d,m,p){return u(),o("div",{class:"edit-btn",onClick:s[0]||(s[0]=v=>t.$emit("onClick"))},i0)}var he=X(a0,[["render",c0]]);const m0={class:"shipment-form-heading shipment-form-wrap"},v0={class:"shipment-form-elem"},h0={class:"shipment-form-item"},_0=e("div",{class:"shipment-form-elem-title"},[e("span",null,"\u0410\u0434\u0440\u0435\u0441 \u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0438")],-1),p0={class:"shipment-form-row"},g0={class:"shipment-form-input-wrap"},f0=e("svg",{class:"shipment-form-map-btn-img",width:"19",height:"25",viewBox:"0 0 19 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M9.49968 25C8.95397 25 8.4653 24.717 8.19255 24.2429C8.18967 24.238 8.18688 24.2329 8.1841 24.2279L1.98479 12.8809C0.505001 10.1724 0.547432 6.95749 2.09831 4.28113C3.61555 1.66277 6.31047 0.0631103 9.30725 0.00197754C9.43527 -0.00065918 9.56398 -0.00065918 9.69191 0.00197754C12.6887 0.0631103 15.3837 1.66277 16.9009 4.28113C18.4518 6.95749 18.4943 10.1723 17.0145 12.8809L10.8152 24.2279C10.8124 24.2329 10.8096 24.238 10.8067 24.2429C10.534 24.717 10.0454 25 9.49968 25ZM9.49963 1.56252C9.44597 1.56252 9.39245 1.56306 9.33903 1.56414C6.89279 1.61404 4.69133 2.92258 3.45017 5.06453C2.17541 7.26448 2.14016 9.90642 3.35593 12.1317L9.49963 23.3768L15.6433 12.1318C16.8591 9.90642 16.8238 7.26448 15.549 5.06453C14.3078 2.92263 12.1064 1.61404 9.66013 1.56414C9.60685 1.56306 9.55329 1.56252 9.49963 1.56252Z",fill:"#8D8D8D"}),e("path",{d:"M9.5 11.3281C7.56147 11.3281 5.98438 9.75103 5.98438 7.8125C5.98438 5.87397 7.56147 4.29688 9.5 4.29688C11.4385 4.29688 13.0156 5.87397 13.0156 7.8125C13.0156 9.75103 11.4386 11.3281 9.5 11.3281ZM9.5 5.85938C8.42305 5.85938 7.54688 6.73555 7.54688 7.8125C7.54688 8.88945 8.42305 9.76563 9.5 9.76563C10.577 9.76563 11.4531 8.88945 11.4531 7.8125C11.4531 6.73555 10.577 5.85938 9.5 5.85938Z",fill:"#8D8D8D"})],-1),C0=e("span",null,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0430\u0434\u0440\u0435\u0441",-1),A0={class:"shipment-form-elem"},D0={class:"shipment-form-item"},E0=e("div",{class:"shipment-form-elem-title"},[e("span",null,"\u0414\u0430\u0442\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043A\u0438")],-1),$0={class:"shipment-form-row"},k0={class:"shipment-form-date"},w0={key:0,class:"shipment-form-elem"},O0={class:"shipment-form-item"},y0=e("span",null,"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0443 \u0432\u043A\u043B. \u0432 \u0441\u0447\u0435\u0442",-1),R0=[y0],I0=["onClick"],S0={key:0,class:"content-heading-btn-img active",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},T0=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"m 8.938 13 l 4.958 -4.938 L 12.833 7 l -3.895 3.875 l -1.771 -1.75 l -1.063 1.063 Z M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z m 0 -11 v 11 v -11 Z"},null,-1),L0=[T0],V0={key:1,class:"content-heading-btn-img",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},b0=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z"},null,-1),P0=[b0],B0={key:1,class:"order-modal"},M0={class:"order-modal-dialog map"},U0={class:"order-modal-content map"},F0={class:"order-modal-header"},N0=e("h3",{class:"order-modal-header-title"},"\u041A\u0430\u0440\u0442\u0430",-1),H0=e("div",{class:"order-modal-body map"},[e("iframe",{src:"https://yandex.ru/map-widget/v1/?mode=whatshere&whatshere%5Bpoint%5D=37.371453%2C55.980529&z=17",width:"800",height:"600",frameborder:"0"},`\r
						`)],-1),q0=F({__name:"ShipmentTransportAddressCard",props:{addressId:{type:Number,required:!0},errorAddress:{type:Boolean,default:!1},date:{type:String,required:!0},errorDate:{type:Boolean,default:!1},addressList:{type:Array,required:!0},loadingAddress:{type:Boolean,default:!1},other:{type:Boolean,default:!1},storagesList:{type:Array,required:!0},storage:{type:String,required:!0},storageError:{type:Boolean,default:!1}},emits:["update:addressId","update:date","update:errorAddress","update:errorDate","update:storage","update:storageError"],setup(t,{emit:s}){const r=t,d=_(!1),m=_(""),p=_(-1);_(!0),_(!1),J(()=>{m.value=r.date,p.value=r.addressId}),Q(p,()=>{s("update:addressId",p.value),s("update:errorAddress",!1)}),Q(m,()=>{s("update:date",m.value),s("update:errorDate",!1)});const v=C=>{s("update:storage",C),s("update:storageError",!1)};return(C,l)=>{const D=R("router-link");return u(),o("div",m0,[e("div",v0,[e("div",h0,[_0,e("div",p0,[e("div",g0,[t.loadingAddress?(u(),U(pe,{key:0,small:""})):(u(),U(le,{key:1,data:t.addressList,modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=a=>p.value=a),error:t.errorAddress},null,8,["data","modelValue","error"])),f(D,{tag:"a",class:"shipment-form-map-btn",to:"/shipments/address"},{default:z(()=>[f0,C0]),_:1})])])])]),e("div",A0,[e("div",D0,[E0,e("div",$0,[e("div",k0,[f(qe,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=a=>m.value=a),error:t.errorDate},null,8,["modelValue","error"])])])])]),t.other&&t.storagesList.length>0?(u(),o("div",w0,[e("div",O0,[e("div",{class:I(["shipment-form-elem-title",{error:t.storageError}])},R0,2),(u(!0),o(M,null,H(t.storagesList,(a,c)=>(u(),o("div",{class:I(["order-list-btn",{error:t.storageError}]),key:c,onClick:h=>v(String(a.id))},[t.storage==a.id?(u(),o("svg",S0,L0)):(u(),o("svg",V0,P0)),V(" "+g(a.name),1)],10,I0))),128))])])):A("",!0),d.value?(u(),o("div",B0,[e("div",M0,[e("div",U0,[e("div",F0,[N0,f(G,{onOnClick:l[2]||(l[2]=a=>d.value=!1)})]),H0])])])):A("",!0)])}}}),Z0=t=>new Date(t.split(".")[2]+"-"+t.split(".")[1]+"-"+t.split(".")[0]),G0={class:"order-list content-elem"},x0={class:"order-list-top"},Q0={class:"order-list-top-elem"},z0={class:"order-list-top-wrap"},X0=e("div",{class:"order-list-elem"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",-1),Y0={class:"order-list-top-elem"},j0={class:"order-list-top-wrap"},K0=e("div",{class:"order-list-elem"},"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F",-1),W0={class:"order-list-top-elem"},J0={key:0,class:"content-heading-btn-img",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},es=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z"},null,-1),ts=[es],ss={key:1,class:"content-heading-btn-img active",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},us=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"m 8.938 13 l 4.958 -4.938 L 12.833 7 l -3.895 3.875 l -1.771 -1.75 l -1.063 1.063 Z M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z m 0 -11 v 11 v -11 Z"},null,-1),os=[us],ls=V(" \u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B "),rs=e("svg",{class:"content-heading-btn-img",width:"30",height:"29",viewBox:"0 0 30 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"#A5A7A9",stroke:"#A5A7A9","stroke-width":"0.2",d:"M 3.2460938,1.2792969 A 0.82590935,0.82590935 0 0 0 2.4199219,2.1074219 L 2.4492188,20.238281 A 0.82590935,0.82590935 0 0 0 3.2734375,21.0625 h 3.7871094 l 0.044922,6.455078 a 0.82590935,0.82590935 0 0 0 1.4101563,0.578125 l 7.003906,-6.994141 h 12.179688 a 0.82590935,0.82590935 0 0 0 0.826172,-0.826171 V 2.1054688 A 0.82590935,0.82590935 0 0 0 27.699219,1.2792969 Z M 4.0742187,2.9316406 H 26.873047 V 19.449219 H 15.177734 A 0.82590935,0.82590935 0 0 0 14.59375,19.691406 L 8.7441406,25.533203 8.7070313,20.230469 A 0.82590935,0.82590935 0 0 0 7.8808594,19.410156 h -3.78125 z"}),e("path",{class:"stroke",stroke:"#A5A7A9","stroke-width":"1.5",d:"M 8.0573765,6.5547755 H 13.656047 M 8.1338615,10.770541 H 20.646739 M 8.0637134,15.056176 h 9.2246446"})],-1),ds=[rs],as=["tooltip"],ns=ee('<svg class="content-heading-btn-img" width="30" height="29" viewBox="0 0 30 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 2H18.75C19.3023 2 19.75 2.44772 19.75 3V15H21.75V3C21.75 1.34315 20.4069 0 18.75 0H3C1.34315 0 0 1.34315 0 3V21.8571C0 23.514 1.34315 24.8571 3 24.8571H16.4846C16.1942 24.6822 16 24.3638 16 24V22.8571H3C2.44772 22.8571 2 22.4094 2 21.8571V3C2 2.44772 2.44772 2 3 2Z" fill="#A5A7A9"></path><path d="M27.614 22.1745C26.585 23.406 25.1063 24.6558 23.394 26.1031L23.3937 26.1033C22.8085 26.5978 22.1454 27.1584 21.457 27.7553M27.614 22.1745L27.7675 22.3028M27.614 22.1745L27.7675 22.3028C27.7675 22.3028 27.7675 22.3028 27.7675 22.3028M27.614 22.1745C28.7643 20.798 29.3 19.4928 29.3 18.0669C29.3 16.6816 28.8211 15.4035 27.9515 14.4679C27.0715 13.5213 25.8639 13 24.551 13C23.5697 13 22.671 13.3077 21.88 13.9144L20.8 14.703M27.7675 22.3028C26.7274 23.5476 25.2378 24.8066 23.5349 26.2458L23.5228 26.2561L23.5228 26.2561C22.9375 26.7506 22.2753 27.3104 21.5881 27.9064L21.457 27.7553M27.7675 22.3028C28.9399 20.8998 29.5 19.5508 29.5 18.0669C29.5 16.6357 29.0051 15.3076 28.098 14.3318L28.098 14.3318C27.1795 13.3437 25.9184 12.8 24.551 12.8C23.525 12.8 22.5836 13.1227 21.7583 13.7557C21.4091 14.0235 21.0888 14.3408 20.8 14.703M21.457 27.7553L21.5881 27.9064M21.457 27.7553C21.2753 27.913 21.0419 28 20.8 28C20.558 28 20.3246 27.913 20.1428 27.7551C19.456 27.1595 18.7939 26.5998 18.2098 26.1062L18.2068 26.1036C16.4941 24.6561 15.0151 23.406 13.9861 22.1747C12.8358 20.798 12.3 19.4928 12.3 18.0669C12.3 16.6816 12.779 15.4035 13.6486 14.4679C14.5286 13.5213 15.7361 13 17.0491 13C18.0304 13 18.9291 13.3077 19.7201 13.9144C20.0677 14.1811 20.387 14.4998 20.6742 14.8663L21.5881 27.9064M21.5881 27.9064C21.3698 28.0958 21.0898 28.2 20.8 28.2C20.5101 28.2 20.2301 28.0958 20.0117 27.9061C19.3261 27.3115 18.6649 26.7527 18.0807 26.2589L18.0791 26.2576L18.0791 26.2576L18.0777 26.2563L18.0761 26.255L18.0669 26.2472C16.3632 24.8074 14.873 23.5479 13.8326 22.3029L13.8326 22.3029C12.6602 20.8998 12.1 19.5508 12.1 18.0669C12.1 16.6357 12.595 15.3076 13.5021 14.3318L13.5021 14.3318C14.4206 13.3437 15.6815 12.8 17.0491 12.8C18.0752 12.8 19.0165 13.1227 19.8418 13.7557L19.8418 13.7558C20.1908 14.0235 20.5113 14.3407 20.8 14.703M21.5881 27.9064L20.8 14.703M14.9062 21.4162L14.9062 21.4162C15.8663 22.5653 17.299 23.777 18.9807 25.1985C18.9811 25.1987 18.9814 25.199 18.9817 25.1992L18.9831 25.2004L18.9848 25.2018C19.5341 25.6661 20.153 26.1893 20.7988 26.7476C21.4482 26.1882 22.0682 25.6641 22.6187 25.199M14.9062 21.4162L14.5271 15.2735C15.1778 14.5736 16.072 14.1876 17.0491 14.1876C17.7595 14.1876 18.4107 14.4107 18.9892 14.8543C19.508 15.2523 19.873 15.7588 20.0887 16.1174L20.0887 16.1175C20.2397 16.3685 20.5068 16.5186 20.8 16.5186C21.0932 16.5186 21.3602 16.3685 21.5113 16.1175C21.7271 15.7588 22.0921 15.2523 22.6108 14.8543C23.1892 14.4107 23.8404 14.1876 24.551 14.1876C25.528 14.1876 26.4223 14.5737 27.0729 15.2735C27.7343 15.9851 28.1043 16.9751 28.1043 18.0669C28.1043 19.2064 27.6808 20.2351 26.6939 21.4162C25.7336 22.5655 24.3008 23.7772 22.6187 25.199M14.9062 21.4162C13.9192 20.2351 13.4957 19.2064 13.4957 18.0669C13.4957 16.9751 13.8657 15.9851 14.5271 15.2735L14.9062 21.4162ZM22.6187 25.199L22.7478 25.3517L22.6187 25.199Z" fill="#A5A7A9" stroke="#A5A7A9" stroke-width="0.4"></path><rect x="17.6071" y="5.17856" width="1.7" height="13.4643" rx="0.85" transform="rotate(90 17.6071 5.17856)" fill="#A5A7A9"></rect><rect x="10" y="13" width="1.7" height="6" rx="0.85" transform="rotate(90 10 13)" fill="#A5A7A9"></rect><rect x="14" y="9" width="1.7" height="10" rx="0.85" transform="rotate(90 14 9)" fill="#A5A7A9"></rect></svg>',1),is=[ns],cs={class:"order-list-delivery"},ms={class:"scroll-elem"},vs={class:"order-list-bottom-wrap"},hs={key:0,class:"order-list-row order-list-heading"},_s=e("div",{class:"order-list-elem"},"\u2116",-1),ps=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),gs=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),fs={class:"order-list-elem"},Cs=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),As=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),Ds=e("div",{class:"order-list-elem"},null,-1),Es=["onClick"],$s={class:"order-list-elem"},ks=e("div",{class:"table-arrow"},null,-1),ws={class:"order-list-elem"},Os=["innerHTML"],ys={class:"order-list-elem"},Rs=["innerHTML"],Is=e("div",{class:"order-list-elem"},null,-1),Ss={class:"order-list-elem"},Ts={class:"order-list-elem"},Ls={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},Vs={class:"order-list-elem-delete"},bs=e("div",{class:"order-list-elem"},null,-1),Ps=e("div",{class:"order-list-elem"},null,-1),Bs={class:"order-list-elem"},Ms={class:"order-list-elem"},Us={key:0,class:"order-list-elem-text"},Fs={class:"order-list-elem"},Ns={class:"order-list-elem"},Hs={class:"order-list-elem-delete"},qs={key:0,class:"order-list-bottom-wrap"},Zs=e("div",{class:"order-list-row order-list-subheading"},[e("div",null,"\u041F\u043E\u0437\u0438\u0446\u0438\u0438 \u0434\u043B\u044F \u043F\u0440\u0435\u0434\u0437\u0430\u043A\u0430\u0437\u0430")],-1),Gs={class:"order-list-row order-list-heading"},xs=e("div",{class:"order-list-elem"},"\u2116",-1),Qs=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),zs=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),Xs={class:"order-list-elem"},Ys=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),js=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),Ks=e("div",{class:"order-list-elem"},null,-1),Ws=["onClick"],Js={class:"order-list-elem"},eu=e("div",{class:"table-arrow"},null,-1),tu={class:"order-list-elem"},su=["innerHTML"],uu={class:"order-list-elem"},ou=["innerHTML"],lu=e("div",{class:"order-list-elem"},null,-1),ru={class:"order-list-elem"},du={class:"order-list-elem"},au={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},nu={class:"order-list-elem-delete"},iu=e("div",{class:"order-list-elem"},null,-1),cu=e("div",{class:"order-list-elem"},null,-1),mu={class:"order-list-elem"},vu={class:"order-list-elem"},hu={key:0,class:"order-list-elem-text"},_u={class:"order-list-elem"},pu={class:"order-list-elem"},gu={class:"order-list-elem-delete"},fu=e("div",{class:"order-comment-title"},[e("span",null,"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439")],-1),Cu={class:"order-list-buttons"},Au=e("div",{class:"gradient-btn-text"},"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",-1),Du=[Au],Eu=e("div",{class:"gradient-btn-text"},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),$u=[Eu],ku=e("div",{class:"gradient-btn-text"},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),wu=[ku],Ou=F({__name:"OrderCard",props:{data:{type:Object,required:!0},companys:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue","update:data","onClickAdd","onClickEdit"],setup(t,{emit:s}){const r=t,d=Y(),m=de(),p=_([]),v=_([]),C=_(!1),l=_(!1),D=_(""),a=_(!1),c=_(""),h=_(""),T=_(!1),N=_(-1),S=_(!1),b=_(""),L=_(!1),j=_(!1),B=_(0),K=E({get:()=>{var w;return(w=r.data)!=null&&w.edit?r.data.partner_id:r.modelValue},set:w=>s("update:modelValue",w)}),y=E(()=>d.getters.isOrderInDraft),De=E(()=>d.getters.getShipmentsAddressInputData),ae=E(()=>d.getters.getOrderStorages),ne=()=>{d.commit($.CALC_ORDER)},ie=(w,n)=>{b.value="",w?d.dispatch(Z.REMOVE_POSITION_PRESAIL,n):d.dispatch(Z.REMOVE_POSITION,n)},ce=(w,n)=>{b.value="",w?d.dispatch(Z.REMOVE_CHARACTERISTIC_PRESAIL,n):d.dispatch(Z.REMOVE_CHARACTERISTIC,n)},me=()=>{let w=!0;if(a.value||d.commit($.SET_ORDER_COMMENT,""),r.modelValue==""&&(C.value=!0,setTimeout(()=>{C.value=!1},5e3)),B.value>0&&h.value==""&&(T.value=!0,setTimeout(()=>{T.value=!1},5e3),w=!1),B.value>0&&N.value==-1&&(S.value=!0,setTimeout(()=>{S.value=!1},5e3),w=!1),x[B.value].code=="other"&&ae.value.length>0&&b.value==""&&(L.value=!0,setTimeout(()=>{L.value=!1},5e3),w=!1),w){let n={address:B.value==0?"":d.getters.getShipmentsAddress[N.value].address,case:x[B.value].code,date:Z0(h.value).getTime(),cost:x[B.value].code=="other"?900:0,bill_to:b.value};d.commit($.SET_ORDER_DELIVERY,n),r.data.edit?s("onClickEdit"):s("onClickAdd")}console.log(w)},Ee=()=>{d.commit($.CLEAN_ORDER)},$e=()=>{var w;d.getters.isOrderInDraft?(d.commit($.DEL_ORDER_FROM_DRAFT,(w=r.data)==null?void 0:w.id),l.value=!0,D.value="\u0417\u0430\u043A\u0430\u0437 \u0443\u0434\u0430\u043B\u0435\u043D \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430"):(d.commit($.ADD_ORDER_TO_DRAFT),l.value=!0,D.value="\u0417\u0430\u043A\u0430\u0437 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")},ve=w=>{m.push("/order/"+w)},ke=()=>{d.commit($.SET_ORDER_REQUEST_SERT,!r.data.request_certificate)},we=()=>{d.commit($.SET_ORDER_COMMENT,c.value)};J(()=>{var w;if(r.data.comment.length>0&&(a.value=!0,c.value=r.data.comment),d.getters.getShipmentsAddress.length==0&&(j.value=!0,d.dispatch(Fe.GET_SHIPMENTS_ADDRESS).then(()=>{j.value=!1})),r.data.edit){console.log(new Date(r.data.delivery.date).toISOString().substr(0,10));let n=(w=x.find(te=>te.code===r.data.delivery.case))==null?void 0:w.id;B.value=n||0,h.value=new Date(r.data.delivery.date).toLocaleString("ru").substr(0,10),s("update:modelValue",r.data.partner_id)}});const Oe=()=>{let w={address:"",case:x[B.value].code,date:0,cost:x[B.value].code=="other"?900:0,bill_to:""};d.commit($.SET_ORDER_DELIVERY,w),d.commit($.CALC_ORDER)};return(w,n)=>{const te=R("router-link");return u(),o(M,null,[e("div",G0,[e("div",x0,[e("div",Q0,[e("div",z0,[X0,f(le,{data:t.companys,error:C.value,"read-only":t.data.edit,modelValue:O(K),"onUpdate:modelValue":n[0]||(n[0]=i=>Ne(K)?K.value=i:null)},null,8,["data","error","read-only","modelValue"])])]),e("div",Y0,[e("div",j0,[K0,f(le,{data:O(Ze),modelValue:B.value,"onUpdate:modelValue":n[1]||(n[1]=i=>B.value=i),onOnInput:n[2]||(n[2]=i=>Oe())},null,8,["data","modelValue"])])]),e("div",W0,[e("div",{class:"order-list-btn",tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B \u043A \u0437\u0430\u043A\u0430\u0437\u0443",flow:"up",onClick:n[3]||(n[3]=i=>ke())},[t.data.request_certificate?(u(),o("svg",ss,os)):(u(),o("svg",J0,ts)),ls]),e("div",{class:I(["content-heading-btn",{active:a.value}]),to:"#",onClick:n[4]||(n[4]=i=>a.value=!a.value),tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043A\u0430\u0437\u0443",flow:"up"},ds,2),e("div",{class:I(["content-heading-btn",{active:O(y)}]),to:"#",onClick:n[5]||(n[5]=i=>$e()),tooltip:O(y)?"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A",flow:"up"},is,10,as)])]),e("div",cs,[B.value!=0?(u(),U(q0,{key:0,date:h.value,"onUpdate:date":n[6]||(n[6]=i=>h.value=i),addressId:N.value,"onUpdate:addressId":n[7]||(n[7]=i=>N.value=i),errorDate:T.value,"onUpdate:errorDate":n[8]||(n[8]=i=>T.value=i),errorAddress:S.value,"onUpdate:errorAddress":n[9]||(n[9]=i=>S.value=i),storage:b.value,"onUpdate:storage":n[10]||(n[10]=i=>b.value=i),storageError:L.value,"onUpdate:storageError":n[11]||(n[11]=i=>L.value=i),loadingAddress:j.value,addressList:O(De),other:t.data.delivery.case=="other",storagesList:O(ae)},null,8,["date","addressId","errorDate","errorAddress","storage","storageError","loadingAddress","addressList","other","storagesList"])):A("",!0)]),e("div",ms,[e("div",vs,[t.data.position.length>0?(u(),o("div",hs,[_s,ps,gs,e("div",fs,g(p.value.length!=0?"\u0426\u0435\u043D\u0430":""),1),Cs,As,Ds])):A("",!0),(u(!0),o(M,null,H(t.data.position,(i,P)=>(u(),o("div",{class:I(p.value.indexOf(P)!==-1?"order-list-item active":"order-list-item"),key:P},[e("div",{class:"order-list-row order-list-main-row",onClick:k=>p.value.indexOf(P)===-1?p.value.push(P):p.value.splice(p.value.indexOf(P),1)},[e("div",$s,[V(g(P+1)+" ",1),ks]),e("div",ws,[f(te,{tag:"a",class:"order-list-elem",to:"/order/"+i.article,title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},{default:z(()=>[e("span",{innerHTML:i.article},null,8,Os)]),_:2},1032,["to"])]),e("div",ys,[e("span",{innerHTML:i.product.NAME},null,8,Rs)]),Is,e("div",Ss,g(i.count),1),e("div",Ts,g(Number(i.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",Ls,[f(he,{onClick:ue(k=>ve(i.article),["stop"])},null,8,["onClick"])]),e("div",Vs,[f(G,{onOnClick:k=>ie(!1,i.guid)},null,8,["onOnClick"])])],8,Es),e("div",{class:I(p.value.indexOf(P)!==-1?"order-list-sublist active":"order-list-sublist")},[(u(!0),o(M,null,H(i.characteristics,(k,se)=>(u(),o("div",{key:se,class:"order-list-row"},[bs,Ps,e("div",Bs,g(k.CHARACTERISTIC),1),e("div",Ms,[V(g(Number(k.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),k.discount>0?(u(),o("div",Us,"\u0441\u043A\u0438\u0434\u043A\u0430 "+g(k.discount)+"% ",1)):A("",!0)]),e("div",Fs,[f(oe,{modelValue:k.count,"onUpdate:modelValue":q=>k.count=q,min:1,max:k.RESIDUE,onOnInput:n[12]||(n[12]=q=>ne())},null,8,["modelValue","onUpdate:modelValue","max"])]),e("div",Ns,g(Number(k.price_discount*k.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",Hs,[f(G,{onOnClick:q=>ce(!1,{guid:i.guid,characteristics:[k],article:i.article,product:i.product})},null,8,["onOnClick"])])]))),128))],2)],2))),128))]),t.data.position_presail.length>0?(u(),o("div",qs,[Zs,e("div",Gs,[xs,Qs,zs,e("div",Xs,g(v.value.length!=0?"\u0426\u0435\u043D\u0430":""),1),Ys,js,Ks]),(u(!0),o(M,null,H(t.data.position_presail,(i,P)=>(u(),o("div",{class:I(v.value.indexOf(P)!==-1?"order-list-item active":"order-list-item"),key:P},[e("div",{class:"order-list-row order-list-main-row",onClick:k=>v.value.indexOf(P)===-1?v.value.push(P):v.value.splice(v.value.indexOf(P),1)},[e("div",Js,[V(g(P+1)+" ",1),eu]),e("div",tu,[e("span",{innerHTML:i.article},null,8,su)]),e("div",uu,[e("span",{innerHTML:i.product.NAME},null,8,ou)]),lu,e("div",ru,g(i.count),1),e("div",du,g(Number(i.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",au,[f(he,{onClick:ue(k=>ve(i.article),["stop"])},null,8,["onClick"])]),e("div",nu,[f(G,{onOnClick:k=>ie(!0,i.guid)},null,8,["onOnClick"])])],8,Ws),e("div",{class:I(v.value.indexOf(P)!==-1?"order-list-sublist active":"order-list-sublist")},[(u(!0),o(M,null,H(i.characteristics,(k,se)=>(u(),o("div",{key:se,class:"order-list-row"},[iu,cu,e("div",mu,g(k.CHARACTERISTIC),1),e("div",vu,[V(g(Number(k.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),k.discount>0?(u(),o("div",hu,"\u0441\u043A\u0438\u0434\u043A\u0430 "+g(k.discount)+"% ",1)):A("",!0)]),e("div",_u,[f(oe,{modelValue:k.count,"onUpdate:modelValue":q=>k.count=q,min:k.RESIDUE+1,onOnInput:n[13]||(n[13]=q=>ne())},null,8,["modelValue","onUpdate:modelValue","min"])]),e("div",pu,g(Number(k.price_discount*k.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",gu,[f(G,{onOnClick:q=>ce(!0,{guid:i.guid,characteristics:[k],article:i.article,product:i.product})},null,8,["onOnClick"])])]))),128))],2)],2))),128))])):A("",!0)])]),e("div",{class:I(["order-comment-form",{show:a.value}])},[fu,ge(e("textarea",{class:"order-comment-textarea","onUpdate:modelValue":n[14]||(n[14]=i=>c.value=i),onInput:n[15]||(n[15]=i=>we()),name:""},null,544),[[fe,c.value]])],2),e("div",Cu,[e("button",{class:"order-list-submit gradient-btn disabled",onClick:n[16]||(n[16]=i=>Ee())},Du),t.data.edit?(u(),o("button",{key:0,class:"order-list-submit gradient-btn",onClick:n[17]||(n[17]=i=>me())},$u)):(u(),o("button",{key:1,class:"order-list-submit gradient-btn",onClick:n[18]||(n[18]=i=>me())},wu))]),f(Ae,{modelValue:l.value,"onUpdate:modelValue":n[19]||(n[19]=i=>l.value=i),message:D.value,timeout:2e3,notification:""},null,8,["modelValue","message"])],64)}}}),yu={props:{name:{type:String}},emits:["onClick"],setup(){}},Ru={class:""};function Iu(t,s,r,d,m,p){return u(),o("button",{class:"default-btn",onClick:s[0]||(s[0]=v=>t.$emit("onClick"))},[e("div",Ru,g(r.name),1)])}var _e=X(yu,[["render",Iu]]);const Su={key:0,class:"order-modal"},Tu={class:"order-modal-content"},Lu={class:"order-modal-header"},Vu={class:"order-modal-header-title"},bu={class:"order-modal-body"},Pu={key:0},Bu={key:0},Mu={key:0,class:"loading"},Uu=V(" \u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044F! "),Fu=e("br",null,null,-1),Nu=V(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),Hu=e("span",null,".",-1),qu=e("span",null,".",-1),Zu=e("span",null,".",-1),Gu=[Uu,Fu,Nu,Hu,qu,Zu],xu={key:1,class:"loading"},Qu=V(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),zu=e("span",null,".",-1),Xu=e("span",null,".",-1),Yu=e("span",null,".",-1),ju=[Qu,zu,Xu,Yu],Ku=ee('<svg width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><animateTransform attributeName="transform" dur="1s" type="translate" values="0 0; 1 -1; 1 1; 0 0;" repeatCount="indefinite" begin="0.1"></animateTransform></svg>',1),Wu={key:1},Ju={key:1},eo={class:"order-modal-action"},to=ee('<svg class="order-list-buttons-item-img" width="31" height="29" viewBox="0 0 31 29" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="stroke" x="1" y="1" width="19.75" height="22.8571" rx="2" stroke="#A5A7A9" stroke-width="2"></rect><circle cx="21.2322" cy="20.1964" r="8.80357" fill="#53565B"></circle><circle class="stroke" cx="21.2322" cy="20.1964" r="7.80357" stroke="#A5A7A9" stroke-width="2"></circle><rect class="fill" x="19.6786" y="15.5358" width="1.7" height="6.21429" rx="0.85" fill="#A5A7A9"></rect><rect class="fill" x="24.8571" y="20.1" width="1.7" height="5.17857" rx="0.85" transform="rotate(90 24.8571 20.1)" fill="#A5A7A9"></rect><rect class="fill" x="17.6071" y="5.17859" width="1.7" height="13.4643" rx="0.85" transform="rotate(90 17.6071 5.17859)" fill="#A5A7A9"></rect><rect class="fill" x="11.3929" y="13" width="1.7" height="7.25" rx="0.85" transform="rotate(90 11.3929 13)" fill="#A5A7A9"></rect><rect class="fill" x="14.5" y="9" width="1.7" height="10.3571" rx="0.85" transform="rotate(90 14.5 9)" fill="#A5A7A9"></rect></svg><div class="order-modal-action-btn-text">\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u043A\u0430\u0437\u043E\u0432</div>',2),so=[to],uo=ee('<svg class="order-list-buttons-item-img" width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="24" y="3" width="8" height="2" rx="1" fill="#A5A7A9"></rect><rect class="fill" x="29" width="8" height="2" rx="1" transform="rotate(90 29 0)" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle></svg><div class="order-modal-action-btn-text">\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437</div>',2),oo=[uo],lo=F({__name:"OrderModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:s}){const r=Y(),d=de(),m=_(!1),p=_(null);re(p,()=>{m.value=!0,setTimeout(()=>{m.value=!1},500)});const v=()=>{r.commit($.CLEAN_ORDER),r.commit($.CLEAN_ORDER_ERROR),r.commit($.CLEAN_ADD_ORDER),s("update:modelValue",!1)},C=()=>{r.commit($.CLEAN_ORDER),r.commit($.CLEAN_ORDER_ERROR),r.commit($.CLEAN_ADD_ORDER),s("update:modelValue",!1)},l=()=>{r.commit($.CLEAN_ORDER),r.commit($.CLEAN_ADD_ORDER),s("update:modelValue",!1),d.push({name:"Orders"})},D=E(()=>r.getters.getOrderError),a=E(()=>r.getters.getOrderErrorMsg),c=E(()=>r.getters.isOrderAddNew),h=E(()=>r.getters.getOrderAddNew),T=E(()=>r.getters.getOrder);return(N,S)=>t.modelValue?(u(),o("div",Su,[e("div",{class:I(m.value?"order-modal-dialog shake":"order-modal-dialog"),ref_key:"target_modal",ref:p},[e("div",Tu,[e("div",Lu,[e("h3",Vu,g(O(T).edit?"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430 \u2116"+O(T).id:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430"),1),O(c)?(u(),U(G,{key:0,onOnClick:S[0]||(S[0]=b=>v())})):A("",!0)]),e("div",bu,[O(D)?(u(),o("div",Ju,g(O(a)),1)):(u(),o("div",Pu,[O(c)?(u(),o("div",Wu,g(O(h).message),1)):(u(),o("div",Bu,[O(T).edit?(u(),o("span",xu,ju)):(u(),o("span",Mu,Gu)),Ku]))]))]),e("div",eo,[O(D)?(u(),U(_e,{key:0,name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",onOnClick:S[1]||(S[1]=b=>v())})):A("",!0),O(D)?(u(),U(_e,{key:1,name:"\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437",onOnClick:S[2]||(S[2]=b=>C())})):A("",!0),O(c)?(u(),o("button",{key:2,class:"order-modal-action-btn",onClick:S[3]||(S[3]=b=>l())},so)):A("",!0),O(c)?(u(),o("button",{key:3,class:"order-modal-action-btn",onClick:S[4]||(S[4]=b=>C())},oo)):A("",!0)])])],2)])):A("",!0)}}),ro=F({name:"OrderDraftModal",components:{DeleteButton:G,OrderDraftCard:Ge},props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:s}){const r=Y(),d=_(!1),m=_(!1),p=_(!1),v=_(!1),C=_(null),l=_(-1);re(C,()=>{v.value=!0,setTimeout(()=>{v.value=!1},500)});const D=()=>{r.commit($.CLEAN_ORDER_ERROR),r.commit($.CLEAN_ADD_ORDER),s("update:modelValue",!1)},a=h=>{h!=-1?(r.commit($.DEL_ORDER_FROM_DRAFT,h),d.value=!1,l.value=-1):(r.commit($.DEL_ALL_DRAFT),m.value=!1)},c=h=>{r.commit($.USE_DRAFT,h),m.value=!1,p.value=!1,d.value=!1,l.value=-1,s("update:modelValue",!1)};return{shake:v,targetModal:C,active:l,delItem:d,delAll:m,useDraft:p,orderDraft:E(()=>r.getters.getOrderDraft),close:D,del:a,draftToOrder:c}}}),ao={key:0,class:"order-modal"},no={class:"order-modal-content draft"},io={class:"order-modal-header"},co=e("h3",{class:"order-modal-header-title"},"\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438",-1),mo={class:"order-modal-body draft"},vo={key:0},ho={key:1,class:"order-draft-list"},_o={class:"shipment-address-list-wrap"},po=["onClick"],go={class:"shipment-address-list-elem"},fo={class:"shipment-address-list-elem"},Co=e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",viewBox:"0 0 24 24",width:"30px",fill:"#8D8D8D"},[e("path",{d:"M0 0h24v24H0V0z",fill:"none"}),e("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})],-1),Ao=[Co],Do={key:0,class:"shipment-address-list-row-info"},Eo=e("div",null,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A?",-1),$o=["onClick"],ko={class:"orders-list-info-row draft"},wo={key:0,class:"shipment-address-list-row-info"},Oo=e("div",null,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438?",-1),yo={key:1,class:"shipment-address-list-row-info"},Ro=e("div",null,"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0434\u043B\u044F \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430?",-1),Io={key:2,class:"order-modal-action"};function So(t,s,r,d,m,p){const v=R("DeleteButton"),C=R("OrderDraftCard");return t.modelValue?(u(),o("div",ao,[e("div",{class:I("order-modal-dialog draft"+(t.shake?" shake":"")),ref:"targetModal"},[e("div",no,[e("div",io,[co,f(v,{onOnClick:s[0]||(s[0]=l=>t.close())})]),e("div",mo,[t.orderDraft.length==0?(u(),o("div",vo," \u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438 \u043E\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044E\u0442 ")):(u(),o("div",ho,[e("div",_o,[(u(!0),o(M,null,H(t.orderDraft,(l,D)=>(u(),o("div",{key:D},[e("div",{class:I("shipment-address-list-row"+(l.id==t.active?" active":"")),onClick:a=>{l.id===t.active?t.active=-1:t.active=l.id,t.delAll=!1,t.useDraft=!1}},[e("div",go,g(D+1),1),e("div",fo," \u0421\u043E\u0437\u0434\u0430\u043D "+g(new Date(l.id).toLocaleString("ru")),1),l.id==t.active?(u(),o("div",{key:0,class:I("shipment-address-list-elem actions"+(t.delItem?" active":""))},[e("div",{onClick:s[1]||(s[1]=ue(a=>{t.delItem=!t.delItem,t.delAll=!1,t.useDraft=!1},["stop"]))},Ao)],2)):A("",!0)],10,po),t.delItem&&l.id==t.active?(u(),o("div",Do,[Eo,e("div",null,[e("a",{href:"#",onClick:a=>t.del(l.id)},"\u0414\u0430",8,$o),e("a",{href:"#",onClick:s[2]||(s[2]=a=>t.delItem=!1)},"\u041D\u0435\u0442")])])):A("",!0),e("div",{class:I("orders-list-info draft"+(!t.delItem&&l.id==t.active?" active":""))},[e("div",ko,[f(C,{data:l},null,8,["data"])])],2)]))),128))])]))])]),t.delAll?(u(),o("div",wo,[Oo,e("div",null,[e("a",{href:"#",onClick:s[3]||(s[3]=l=>t.del(-1))},"\u0414\u0430"),e("a",{href:"#",onClick:s[4]||(s[4]=l=>t.delAll=!1)},"\u041D\u0435\u0442")])])):A("",!0),t.useDraft?(u(),o("div",yo,[Ro,e("div",null,[e("a",{href:"#",onClick:s[5]||(s[5]=l=>t.draftToOrder(t.active))},"\u0414\u0430"),e("a",{href:"#",onClick:s[6]||(s[6]=l=>t.useDraft=!1)},"\u041D\u0435\u0442")])])):A("",!0),!t.delAll&&!t.useDraft?(u(),o("div",Io,[e("button",{onClick:s[7]||(s[7]=l=>{t.active=-1,t.delAll=!0}),class:"order-list-btn"},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438"),t.active!=-1?(u(),o("button",{key:0,onClick:s[8]||(s[8]=l=>t.useDraft=!0),class:"order-list-btn"},"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")):A("",!0)])):A("",!0)],2)])):A("",!0)}var To=X(ro,[["render",So]]);const Lo=F({components:{PersonalBar:ye,Notification:Re,CompanyBarTop:Ie,TopNav:Se,ProductHeaderCard:Ve,ProductSearchResultCard:be,OrderProductSearchInput:st,ProductOffersOrderCard:Vt,ProductSliderSmallCard:Ft,OrderHeaderCard:d0,OrderCard:Ou,OrderModal:lo,SnackBar:Ae,OrderDraftModal:To},props:["article"],setup(t){const s=Y(),r=de(),d=E({get:()=>s.getters.getLoader,set:L=>s.commit(Ce.SET_LOADER,L)}),m=_(""),p=_(""),v=_(!1),C=_(""),l=_(!1),D=_(!1),a=_(!1),c=_([]),h=()=>{let L={article:s.getters.getProduct.ARTICLE,guid:s.getters.getProduct.UID,product:s.getters.getProduct,characteristics:c.value};s.dispatch(Z.ADD_POSITION,L)},T=()=>{m.value==""?(v.value=!0,setTimeout(()=>{v.value=!1},5e3),C.value="\u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442\u0430"):(l.value=!0,s.commit($.ADD_ORDER_PARTNER_ID,m.value),setTimeout(()=>{s.dispatch(Z.ADD_ORDER,s.getters.getOrderToAdd).catch(()=>{l.value=!1,v.value=!0,setTimeout(()=>{v.value=!1},5e3),C.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3))},N=()=>{console.log(m.value),l.value=!0,s.commit($.ADD_ORDER_PARTNER_ID,m.value),setTimeout(()=>{s.dispatch(Z.EDIT_ORDER_ACTION,s.getters.getOrderToAdd).catch(()=>{l.value=!1,v.value=!0,setTimeout(()=>{v.value=!1},5e3),C.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3)};Q(()=>t.article,L=>{L!==""&&L!==void 0&&(d.value=!0,s.dispatch(W.SEARCH_PRODUCT,t.article).then(()=>{s.getters.getProduct.ID?p.value=s.getters.getProduct.ID:r.push({name:"Order"})}).finally(()=>{d.value=!1}))}),Q(m,()=>{s.getters.getOrder.edit||s.commit($.ADD_ORDER_PARTNER_ID,m.value),s.commit($.CALC_ORDER)}),J(()=>{s.commit($.ADD_ORDER_PARTNER_ID,m.value),s.getters.isCompanysLoad||s.dispatch(He.GET_COMPANYS).finally(()=>{setTimeout(()=>{m.value=s.getters.getCompanys===[]?"":s.getters.getCompanys[0].uid},500)}),p.value=s.getters.getProduct.ID,t.article!==""&&t.article!==void 0&&(d.value=!0,s.dispatch(W.SEARCH_PRODUCT,t.article).then(()=>{s.getters.getProduct.ID?p.value=s.getters.getProduct.ID:r.push({name:"Order"})}).finally(()=>{d.value=!1}))});const S=()=>{d.value=!0,s.dispatch(W.GET_PRODUCT_BY_ID,p.value).then(()=>{p.value=s.getters.getProduct.ID}).finally(()=>{d.value=!1})},b=E(()=>{const L=s.getters.getProduct.STATUS;return L=="Outlet"||L=="Discount"||L=="Activity"?0:s.getters.getCompanyDiscount(m.value,s.getters.getProductOffersORGGUID)});return{error:v,errorMsg:C,activeCompanyUid:m,activeProductId:p,showModal:l,showDraft:D,productItems:c,productSearch:a,isProduct:E(()=>s.getters.isProduct),companyBarTopData:E(()=>s.getters.getCompanysList),productOffers:E(()=>s.getters.getProductOffers),product:E(()=>s.getters.getProduct),productFound:E(()=>s.getters.getProductFound),productImages:E(()=>s.getters.getProductImages),productProtect:E(()=>s.getters.getProductProtect),isOrder:E(()=>s.getters.isOrder),order:E(()=>s.getters.getOrder),getOrderDraftCount:E(()=>s.getters.getOrderDraftCount),discount:b,addToOrder:h,addOrder:T,editOrder:N,loadProduct:S}}}),Vo={class:"top-line product-page"},bo={key:0,class:"order-info"},Po=V(" \u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043E\u0432\u0430\u0440 \u0432 "),Bo=V("\u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0435"),Mo=V(" \u0438\u043B\u0438 \u0432\u043E\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435\u0441\u044C "),Uo=V("\u043F\u043E\u0438\u0441\u043A\u043E\u043C"),Fo=V(". "),No={key:1},Ho={class:"content-wrap content-product-wrap"},qo={class:"content-wrap-elem"},Zo={class:"content-wrap-elem"},Go={key:3,class:"content-heading-wrap proudct-heading-wrap"},xo={key:0,class:"content-heading-wrap-elem"},Qo=e("div",{class:"order-info"},"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438 \u043A \u0437\u0430\u043A\u0430\u0437\u0443 \u0438 \u0442\u043E\u0433\u0434\u0430 \u043E\u043D \u0431\u0443\u0434\u0435\u0442 \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D",-1),zo=[Qo],Xo={class:"content-wrap content-order-wrap"},Yo={class:"content-wrap-elem"},jo={class:"content-wrap-elem"};function Ko(t,s,r,d,m,p){const v=R("CompanyBarTop"),C=R("Notification"),l=R("PersonalBar"),D=R("top-nav"),a=R("router-link"),c=R("OrderProductSearchInput"),h=R("ProductHeaderCard"),T=R("ProductSearchResultCard"),N=R("ProductOffersOrderCard"),S=R("OrderHeaderCard"),b=R("OrderCard"),L=R("ProductSliderSmallCard"),j=R("OrderModal"),B=R("SnackBar"),K=R("OrderDraftModal");return u(),o("div",null,[e("div",Vo,[f(v,{data:t.companyBarTopData,modelValue:t.activeCompanyUid,"onUpdate:modelValue":s[0]||(s[0]=y=>t.activeCompanyUid=y)},null,8,["data","modelValue"]),f(C),f(l)]),f(D,{toDraft:"",draft:t.getOrderDraftCount,onOnClick:s[1]||(s[1]=y=>t.showDraft=!0)},null,8,["draft"]),t.isProduct?(u(),o("div",No,[f(c,{modelValue:t.productSearch,"onUpdate:modelValue":s[2]||(s[2]=y=>t.productSearch=y)},null,8,["modelValue"]),f(h,{title:String(t.product.NAME),price:String(t.product.PRICE_OPT),discount:t.discount,status:String(t.product.STATUS),onShowSearch:s[3]||(s[3]=y=>t.productSearch=!t.productSearch)},null,8,["title","price","discount","status"]),e("div",Ho,[e("div",qo,[f(T,{data:t.productFound,cardType:"order",modelValue:t.activeProductId,"onUpdate:modelValue":s[4]||(s[4]=y=>t.activeProductId=y),onOnClick:s[5]||(s[5]=y=>t.loadProduct()),onShowSearch:s[6]||(s[6]=y=>t.productSearch=!t.productSearch)},null,8,["data","modelValue"])]),e("div",Zo,[f(N,{data:t.productOffers,discount:t.discount,modelValue:t.productItems,"onUpdate:modelValue":s[7]||(s[7]=y=>t.productItems=y),onOnClick:s[8]||(s[8]=y=>t.addToOrder())},null,8,["data","discount","modelValue"])])])])):(u(),o("div",bo,[Po,f(a,{tag:"a",to:"/catalog/catalog",class:"order-info-link"},{default:z(()=>[Bo]),_:1}),Mo,f(a,{tag:"a",to:"/product",class:"order-info-link"},{default:z(()=>[Uo]),_:1}),Fo])),t.isOrder?(u(),U(S,{key:2,discount:t.discount,data:t.order},null,8,["discount","data"])):(u(),o("div",Go,[t.isProduct?(u(),o("div",xo,zo)):A("",!0)])),e("div",Xo,[e("div",Yo,[t.isOrder?(u(),U(b,{key:0,data:t.order,companys:t.companyBarTopData,modelValue:t.activeCompanyUid,"onUpdate:modelValue":s[9]||(s[9]=y=>t.activeCompanyUid=y),onOnClickAdd:t.addOrder,onOnClickEdit:t.editOrder},null,8,["data","companys","modelValue","onOnClickAdd","onOnClickEdit"])):A("",!0)]),e("div",jo,[t.isProduct?(u(),U(L,{key:0,data:t.productImages},null,8,["data"])):A("",!0)])]),f(j,{modelValue:t.showModal,"onUpdate:modelValue":s[10]||(s[10]=y=>t.showModal=y)},null,8,["modelValue"]),f(B,{modelValue:t.error,"onUpdate:modelValue":s[11]||(s[11]=y=>t.error=y),message:t.errorMsg},null,8,["modelValue","message"]),f(K,{modelValue:t.showDraft,"onUpdate:modelValue":s[12]||(s[12]=y=>t.showDraft=y)},null,8,["modelValue"])])}var n4=X(Lo,[["render",Ko]]);export{n4 as default};
