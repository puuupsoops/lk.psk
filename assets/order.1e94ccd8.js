import{_ as ne,N as de}from"./PersonalBar.37b1a68e.js";import{_ as ae}from"./CompanyBarTop.730740c7.js";import{_ as ce}from"./TopNav.186fc368.js";import{P as me,c as he,a as ve,b as _e}from"./ProductInfoCard.d3a66d2e.js";import{P as pe}from"./PreloaderLocal.bc6a7cef.js";import{d as B,g as C,z as ee,I as j,i as E,_ as x,f as q,a8 as Q,a9 as fe,r as k,o as s,b as o,a as e,aa as Ae,ab as ge,c as H,j as A,x as I,F as L,e as S,l as p,w as Z,t as _,O as Ce,k as V,u as O,h as oe,V as De,Y as le,T as Ee,M as te,a1 as $e,ad as W,ae as re,af as w,ag as N,B as Y,p as ke}from"./index.60f7e3bc.js";import{A as X}from"./AmountInput.6ceb47a7.js";import{D as G}from"./DeleteButton.7fd214f8.js";import{S as Oe}from"./SelectInput.2e8cccc5.js";import{O as we}from"./OrderDraftCard.0d025998.js";const ye=B({props:{modelValue:{type:Boolean,required:!0}},components:{PreloaderLocal:pe},setup(t,{emit:u}){const l=q(),i=C(""),h=C(!1),v=C(),c=C(null),f=C(null),r=()=>{clearTimeout(v.value),h.value=!0,v.value=setTimeout(()=>{i.value.length>=2&&l.dispatch(Q.SEARCH_PRODUCT_ARTICLE,i.value).then(()=>{setTimeout(()=>{h.value=!1},500)})},500)},g=()=>{i.value="",l.commit(fe.SET_PRODUCT_ARTICLS,[]),u("update:modelValue",!1)};return ee(c,()=>{g()}),j(()=>t.modelValue,()=>{Ce(()=>{f.value.focus()})}),{search_str:i,loading:h,target:c,searchInput:f,articles:E(()=>l.getters.getProductArticles),doSearch:r,close:g}}}),Re={class:"product-search-input-container"},Ie={class:"product-search-input options"},Te={key:0},be={key:1},Ve={class:"article"},Pe=V(),Le={class:"name"},Se={key:0},Be={key:1};function Fe(t,u,l,i,h,v){const c=k("PreloaderLocal"),f=k("router-link");return s(),o("div",{class:I("product-search fullwidth"+(t.modelValue?"":" none")),ref:"target"},[e("div",Re,[e("div",Ie,[Ae(e("input",{type:"text",placeholder:"\u041F\u043E\u0438\u0441\u043A",autocomplete:"off",onKeyup:u[0]||(u[0]=r=>t.doSearch()),"onUpdate:modelValue":u[1]||(u[1]=r=>t.search_str=r),ref:"searchInput"},null,544),[[ge,t.search_str]]),t.loading?(s(),H(c,{key:0,small:""})):A("",!0),e("div",{class:"product-search-clear",onClick:u[2]||(u[2]=r=>t.close())})]),e("div",{class:I("product-search-input-options"+(t.search_str==""||t.articles.length==0?" default":""))},[t.search_str==""?(s(),o("span",Te,"\u0427\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u0430\u0437 \u043D\u043E\u0432\u044B\u0439 \u043F\u0440\u043E\u0434\u0443\u043A\u0442 - \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0432\u0432\u043E\u0434 \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0430")):(s(),o("div",be,[(s(!0),o(L,null,S(t.articles,(r,g)=>(s(),o("p",{key:g,class:I("product-search-input-options-item"+(t.loading?" loading":""))},[p(f,{tag:"a",onClick:u[3]||(u[3]=n=>t.close()),to:"/order/"+r.article},{default:Z(()=>[e("div",Ve,_(r.article),1),Pe,e("div",Le,_(r.name),1)]),_:2},1032,["to"])],2))),128)),t.loading&&t.articles.length==0?(s(),o("span",Se," \u041F\u043E\u0438\u0441\u043A...")):A("",!0),!t.loading&&t.articles.length==0?(s(),o("span",Be,"\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")):A("",!0)]))],2)])],2)}var Me=x(ye,[["render",Fe]]);const Ue=e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.7952 0.265077C13.4418 -0.0883587 12.8687 -0.0883589 12.5153 0.265076L5.41912 7.36126L1.54498 3.48711C1.19154 3.13368 0.618512 3.13368 0.265076 3.48711C-0.0883589 3.84055 -0.0883588 4.41358 0.265077 4.76702L4.75226 9.2542C4.88175 9.38369 5.04072 9.46574 5.20757 9.50034C5.50792 9.57832 5.84052 9.49967 6.0758 9.26438L13.7952 1.54498C14.1486 1.19154 14.1486 0.618512 13.7952 0.265077Z",fill:"#C4C4C4"},null,-1),Ne=[Ue],He=B({__name:"CheckButton",props:{disabled:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","onClick"],setup(t,{emit:u}){const l=t,i=()=>{u("update:modelValue",l.disabled?l.modelValue:!l.modelValue),u("onClick")},h=E(()=>({"check-btn":!0,disable:l.disabled,active:l.modelValue}));return(v,c)=>(s(),o("button",{class:I(O(h)),onClick:c[0]||(c[0]=f=>i())},[(s(),o("svg",{class:I(t.modelValue?"check-btn-img active":"check-btn-img"),viewBox:"0 0 15 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ne,2))],2))}}),xe={class:"content-elem"},Ge={class:"order-amount-table-wrap scroll-elem"},Ze={class:"table order-amount-table"},qe={class:"table-row table-heading"},ze=e("div",{class:"table-elem"},"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430",-1),Qe=e("div",{class:"table-elem"},"\u041E\u0441\u0442\u0430\u0442\u043E\u043A",-1),je={class:"table-elem"},Ye=V("\u0426\u0435\u043D\u0430"),Ke={key:0,style:{"font-size":"10px"}},Je=e("div",{class:"table-elem"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E",-1),We=e("div",{class:"table-elem"},"\u041F\u043F / \u0414\u0430\u0442\u0430",-1),Xe={class:"table-wrap"},et={class:"table-elem"},tt=["innerHTML"],ut={class:"table-elem"},st=["innerHTML"],ot={key:0,class:"table-elem"},lt=["innerHTML"],rt={key:1,class:"table-elem"},it=["innerHTML"],nt={class:"table-elem"},dt={class:"table-elem"},at={class:"order-amount-more"},ct=e("span",{class:"order-amount-more-text"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u0430\u0437 ",-1),mt={class:"order-amount-more-value"},ht={key:0,class:"order-amount-more-text presail"},vt={key:1,class:"order-amount-more-value"},_t=B({__name:"ProductOffersOrderCard",props:{data:{type:Array,required:!0},discount:{type:Number},modelValue:{type:Array}},emits:["update:modelValue","onClick"],setup(t,{emit:u}){const l=t,i=C([]),h=E(()=>i.value.filter(n=>n.count>0).length),v=E(()=>i.value.filter(n=>n.count>n.RESIDUE&&n.count!=0).length),c=n=>{if(n.check){let d=i.value.find(m=>m.ID==n.ID);d&&(d.count=1)}else{let d=i.value.find(m=>m.ID==n.ID);d&&(d.count=0)}},f=n=>{if(n.count>0){let d=i.value.find(m=>m.ID==n.ID);d&&(d.check=!0)}else{let d=i.value.find(m=>m.ID==n.ID);d&&(d.check=!1)}},r=()=>{if(h.value>0){let n=[];i.value.forEach(d=>{d.count>0&&n.push({ID:d.ID,CHARACTERISTIC:d.CHARACTERISTIC,count:d.count,PRICE:d.PRICE,RESIDUE:d.RESIDUE,GUID:d.GUID,guid:d.GUID,ORGGUID:d.ORGGUID})}),u("update:modelValue",n),u("onClick"),i.value.forEach(d=>{d.count=0,d.check=!1})}},g=()=>{i.value=l.data.map(n=>({ID:n.ID,CHARACTERISTIC:n.CHARACTERISTIC,RESIDUE:n.RESIDUE,PRICE:n.PRICE,PPDATA:n.PPDATA,GUID:n.GUID,guid:n.GUID,ORGGUID:n.ORGGUID,count:0,check:!1}))};return oe(()=>{g()}),j(()=>l.data,()=>{g()}),(n,d)=>(s(),o("div",xe,[e("div",Ge,[e("div",Ze,[e("div",qe,[ze,Qe,e("div",je,[Ye,t.discount?(s(),o("span",Ke," - "+_(t.discount)+"%",1)):A("",!0)]),Je,We]),e("div",Xe,[(s(!0),o(L,null,S(i.value,m=>(s(),o("div",{class:I("table-row"+(m.count>0?" active":"")+(m.count>m.RESIDUE&&m.count!=0?" presail":"")),key:m.ID},[e("div",et,[e("span",{innerHTML:m.CHARACTERISTIC},null,8,tt)]),e("div",ut,[e("span",{innerHTML:m.RESIDUE},null,8,st)]),t.discount?(s(),o("div",ot,[e("span",{innerHTML:Number(m.PRICE-m.PRICE/100*t.discount).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")+" \u20BD"},null,8,lt)])):(s(),o("div",rt,[e("span",{innerHTML:Number(m.PRICE).toLocaleString("ru")+" \u20BD"},null,8,it)])),e("div",nt,[p(X,{modelValue:m.count,"onUpdate:modelValue":T=>m.count=T,onOnInput:T=>f(m)},null,8,["modelValue","onUpdate:modelValue","onOnInput"]),p(He,{modelValue:m.check,"onUpdate:modelValue":T=>m.check=T,onOnClick:T=>c(m)},null,8,["modelValue","onUpdate:modelValue","onOnClick"])]),e("div",dt,[e("span",null,_(m.PPDATA.replaceAll("/","\xA0/\xA0")),1)])],2))),128))])])]),e("div",at,[e("div",{class:I(O(h)!=0||O(v)!=0?"order-amount-more-btn":"order-amount-more-btn disable"),onClick:d[0]||(d[0]=m=>r())},[ct,e("span",mt,"("+_(O(h))+")",1),O(v)>0?(s(),o("span",ht," + \u043F\u0440\u0435\u0434\u0437\u0430\u043A\u0430\u0437 ")):A("",!0),O(v)>0?(s(),o("span",vt,"("+_(O(v))+")",1)):A("",!0)],2)])]))}}),pt=B({props:{data:{type:Array}},emits:["toOrder"],components:{ProductSliderFullscreen:me,ProductInfoCard:he},setup(t){var f;let u=C([]),l=q();const i=E({get:()=>l.getters.getLoader,set:r=>l.commit(le.SET_LOADER,r)}),h=C(!1);(f=t.data)==null||f.forEach((r,g)=>u.value.push({id:g,src:r})),De(()=>{var r;u.value=[],(r=t.data)==null||r.forEach((g,n)=>u.value.push({id:n,src:g}))});let v=()=>{const r=u.value.shift();u.value=u.value.concat(r)},c=()=>{const r=u.value.pop();u.value=[r].concat(u.value)};return{loader:i,slides:u,fullscreen:h,product:E(()=>l.getters.getProduct),productProtect:E(()=>l.getters.getProductProtect),next:v,previous:c}}}),ft={class:"content-elem"},At={key:0,class:"product-slider-wrap"},gt=["src"];function Ct(t,u,l,i,h,v){const c=k("ProductInfoCard"),f=k("ProductSliderFullscreen");return s(),o("div",ft,[t.loader?A("",!0):(s(),o("div",At,[e("div",{class:"product-slider-arrow prev",onClick:u[0]||(u[0]=(...r)=>t.previous&&t.previous(...r))}),p(Ee,{name:"product-slider-horisont-trans",class:"product-slider-horisont",tag:"div"},{default:Z(()=>[(s(!0),o(L,null,S(t.slides,r=>(s(),o("div",{class:"product-slider-horisont-slide",key:r.id},[r.src?(s(),o("img",{key:0,src:r.src,onClick:u[1]||(u[1]=g=>t.fullscreen=!0)},null,8,gt)):A("",!0)]))),128))]),_:1}),e("div",{class:"product-slider-arrow next",onClick:u[2]||(u[2]=(...r)=>t.next&&t.next(...r))})])),p(c,{data:t.product,protect:t.productProtect},null,8,["data","protect"]),p(f,{modelValue:t.fullscreen,"onUpdate:modelValue":u[3]||(u[3]=r=>t.fullscreen=r),data:t.data},null,8,["modelValue","data"])])}var Dt=x(pt,[["render",Ct]]);const Et={props:{data:{type:Object},discount:{type:Number}},setup(){}},$t={class:"content-heading-wrap proudct-heading-wrap"},kt={class:"content-heading-wrap-elem"},Ot={key:0,class:"content-heading"},wt={key:1,class:"content-heading"},yt={class:"content-heading-wrap-elem"},Rt={class:"content-heading-price"},It=e("div",{class:"content-heading-price-text"},"\u0421\u0443\u043C\u043C\u0430 \u0437\u0430\u043A\u0430\u0437\u0430: ",-1),Tt={key:0,class:"content-heading-price-value"},bt={class:"strikethrough"},Vt={key:1,class:"content-heading-price-value"},Pt={class:"content-heading-info"},Lt={class:"content-heading-info-elem"},St=e("span",{class:"content-heading-info-text"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0435\u0434\u0438\u043D\u0438\u0446: ",-1),Bt={class:"content-heading-info-value"},Ft={key:0,class:"content-heading-info-elem"},Mt=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u0432\u0435\u0441: ",-1),Ut={class:"content-heading-info-value"},Nt={key:1,class:"content-heading-info-elem"},Ht=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1),xt={class:"content-heading-info-value"};function Gt(t,u,l,i,h,v){return s(),o("div",$t,[e("div",kt,[l.data.edit?(s(),o("div",Ot,"\u0417\u0430\u043A\u0430\u0437 \u2116 "+_(l.data.id)+" \u043E\u0442 "+_(l.data.date),1)):(s(),o("div",wt,"\u0417\u0430\u043A\u0430\u0437 \u2116 \u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437 \u043E\u0442 "+_(new Date(l.data.id).toLocaleDateString("ru-RU")),1))]),e("div",yt,[e("div",Rt,[It,l.data.total!=l.data.total_discount?(s(),o("div",Tt,[e("span",bt,_(Number(l.data.total).toLocaleString("ru"))+" \u20BD",1),V(" "+_(Number(l.data.total_discount).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1)])):(s(),o("div",Vt,_(Number(l.data.total).toLocaleString("ru"))+" \u20BD",1))])]),e("div",Pt,[e("div",Lt,[St,e("span",Bt,_(l.data.total_count),1)]),l.data.total_weight?(s(),o("div",Ft,[Mt,e("span",Ut,_(l.data.total_weight)+" \u043A\u0433.",1)])):A("",!0),l.data.total_valume?(s(),o("div",Nt,[Ht,e("span",xt,_(l.data.total_valume)+" \u043C.\u043A\u0443\u0431.",1)])):A("",!0)])])}var Zt=x(Et,[["render",Gt]]);const qt={emits:["onClick"],setup(){}},zt=e("svg",{class:"edit-btn-img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#000000"},[e("path",{d:"M0 0h24v24H0V0z",fill:"none"}),e("path",{class:"fill",fill:"#A5A7A9",d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})],-1),Qt=[zt];function jt(t,u,l,i,h,v){return s(),o("div",{class:"edit-btn",onClick:u[0]||(u[0]=c=>t.$emit("onClick"))},Qt)}var ue=x(qt,[["render",jt]]);const Yt={class:"order-list content-elem"},Kt={class:"order-list-top"},Jt={class:"order-list-top-elem"},Wt=e("div",{class:"product-search-text"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442:",-1),Xt={class:"order-list-top-elem"},eu=e("div",{class:"order-list-btn"},[e("svg",{class:"content-heading-btn-img active",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill stroke",fill:"#A5A7A9",d:"m 8.938 13 l 4.958 -4.938 L 12.833 7 l -3.895 3.875 l -1.771 -1.75 l -1.063 1.063 Z M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z m 0 -11 v 11 v -11 Z"})]),V(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0435\u0447\u0430\u0442\u043D\u044B\u0439 \u043A\u0430\u0442\u0430\u043B\u043E\u0433 ")],-1),tu=["tooltip"],uu=Y('<svg class="content-heading-btn-img" width="30" height="29" viewBox="0 0 30 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path class="fill stroke" d="M23.3935 26.1033L23.3938 26.1031C25.1061 24.6558 26.5848 23.406 27.6138 22.1745M23.3935 26.1033L20.9256 14.8664C21.2129 14.4998 21.5321 14.1811 21.8798 13.9144C22.6709 13.3077 23.5695 13 24.5508 13C25.8637 13 27.0713 13.5213 27.9513 14.4679C28.821 15.4035 29.2998 16.6816 29.2998 18.0669C29.2998 19.4928 28.7641 20.798 27.6138 22.1745M23.3935 26.1033C22.8083 26.5978 22.1452 27.1584 21.4569 27.7553C21.2752 27.913 21.0417 28 20.7998 28C20.5578 28 20.3245 27.913 20.1426 27.7551M23.3935 26.1033L20.1426 27.7551M27.6138 22.1745L27.7673 22.3028C27.7673 22.3028 27.7673 22.3028 27.7673 22.3028M27.6138 22.1745L27.7673 22.3028M27.7673 22.3028C26.7272 23.5475 25.2376 24.8066 23.5348 26.2458L23.5226 26.2561L23.5226 26.2561C22.9374 26.7506 22.2752 27.3104 21.588 27.9064L21.4575 27.7561L21.5879 27.9064C21.3696 28.0958 21.0896 28.2 20.7998 28.2C20.5099 28.2 20.2299 28.0958 20.0115 27.9061C19.3259 27.3115 18.6647 26.7527 18.0805 26.2589L18.0789 26.2576L18.079 26.2576L18.0775 26.2563L18.076 26.255L18.0667 26.2472C16.3631 24.8074 14.8728 23.5479 13.8324 22.3029L13.8324 22.3029C12.66 20.8998 12.0998 19.5508 12.0998 18.0669C12.0998 16.6357 12.5949 15.3076 13.5019 14.3318L13.5019 14.3318C14.4205 13.3437 15.6814 12.8 17.0489 12.8C18.075 12.8 19.0163 13.1227 19.8416 13.7557L19.8417 13.7558C20.1907 14.0235 20.5111 14.3407 20.7998 14.703C21.0886 14.3408 21.409 14.0235 21.7581 13.7557C22.5834 13.1227 23.5248 12.8 24.5508 12.8C25.9183 12.8 27.1793 13.3437 28.0978 14.3318L28.0978 14.3318C29.0049 15.3076 29.4998 16.6357 29.4998 18.0669C29.4998 19.5508 28.9397 20.8998 27.7673 22.3028ZM14.906 21.4162L14.906 21.4162C15.8662 22.5653 17.2989 23.7771 18.9807 25.1986C18.9809 25.1988 18.9812 25.199 18.9815 25.1992L18.9829 25.2004L18.9846 25.2018C19.5339 25.6661 20.1528 26.1893 20.7986 26.7476C21.448 26.1882 22.068 25.6641 22.6186 25.199C24.3006 23.7772 25.7334 22.5655 26.6937 21.4162C27.6806 20.2351 28.1041 19.2064 28.1041 18.0669C28.1041 16.9751 27.7341 15.9851 27.0727 15.2735C26.4221 14.5737 25.5279 14.1876 24.5508 14.1876C23.8402 14.1876 23.1891 14.4107 22.6106 14.8543C22.0919 15.2523 21.7269 15.7588 21.5111 16.1175C21.36 16.3685 21.093 16.5186 20.7998 16.5186C20.5066 16.5186 20.2396 16.3685 20.0885 16.1175L20.0885 16.1174C19.8728 15.7588 19.5078 15.2523 18.989 14.8543C18.4105 14.4107 17.7594 14.1876 17.0489 14.1876C16.0718 14.1876 15.1776 14.5736 14.5269 15.2735L14.906 21.4162ZM14.906 21.4162C13.919 20.2351 13.4955 19.2064 13.4955 18.0669C13.4955 16.9751 13.8655 15.9851 14.5269 15.2735L14.906 21.4162ZM20.1426 27.7551C19.4559 27.1595 18.7937 26.5998 18.2096 26.1062L20.1426 27.7551Z" fill="#A5A7A9" stroke="#A5A7A9" stroke-width="0.4"></path><path class="fill" fill-rule="evenodd" clip-rule="evenodd" d="M3 2H18.75C19.3023 2 19.75 2.44772 19.75 3V15H21.75V3C21.75 1.34315 20.4069 0 18.75 0H3C1.34315 0 0 1.34315 0 3V21.8571C0 23.514 1.34315 24.8571 3 24.8571H16.4846C16.1942 24.6822 16 24.3638 16 24V22.8571H3C2.44772 22.8571 2 22.4094 2 21.8571V3C2 2.44772 2.44772 2 3 2Z" fill="#A5A7A9"></path><rect class="fill" x="17.6074" y="5.17871" width="1.7" height="13.4643" rx="0.85" transform="rotate(90 17.6074 5.17871)" fill="#A5A7A9"></rect><rect class="fill" x="10" y="13" width="1.7" height="6" rx="0.85" transform="rotate(90 10 13)" fill="#A5A7A9"></rect><rect class="fill" x="14" y="9" width="1.7" height="10" rx="0.85" transform="rotate(90 14 9)" fill="#A5A7A9"></rect></svg>',1),su=[uu],ou={class:"scroll-elem"},lu={class:"order-list-bottom-wrap"},ru={key:0,class:"order-list-row order-list-heading"},iu=e("div",{class:"order-list-elem"},"\u2116",-1),nu=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),du=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),au={class:"order-list-elem"},cu=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),mu=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),hu=e("div",{class:"order-list-elem"},null,-1),vu=["onClick"],_u={class:"order-list-elem"},pu=e("div",{class:"table-arrow"},null,-1),fu={class:"order-list-elem"},Au=["innerHTML"],gu={class:"order-list-elem"},Cu=["innerHTML"],Du=e("div",{class:"order-list-elem"},null,-1),Eu={class:"order-list-elem"},$u={class:"order-list-elem"},ku={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},Ou={class:"order-list-elem-delete"},wu=e("div",{class:"order-list-elem"},null,-1),yu=e("div",{class:"order-list-elem"},null,-1),Ru={class:"order-list-elem"},Iu={class:"order-list-elem"},Tu={key:0,class:"order-list-elem-text"},bu={class:"order-list-elem"},Vu={class:"order-list-elem"},Pu={class:"order-list-elem-delete"},Lu={key:0,class:"order-list-bottom-wrap"},Su=e("div",{class:"order-list-row order-list-subheading"},[e("div",null,"\u041F\u043E\u0437\u0438\u0446\u0438\u0438 \u0434\u043B\u044F \u043F\u0440\u0435\u0434\u0437\u0430\u043A\u0430\u0437\u0430")],-1),Bu={class:"order-list-row order-list-heading"},Fu=e("div",{class:"order-list-elem"},"\u2116",-1),Mu=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),Uu=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),Nu={class:"order-list-elem"},Hu=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),xu=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),Gu=e("div",{class:"order-list-elem"},null,-1),Zu=["onClick"],qu={class:"order-list-elem"},zu=e("div",{class:"table-arrow"},null,-1),Qu={class:"order-list-elem"},ju=["innerHTML"],Yu={class:"order-list-elem"},Ku=["innerHTML"],Ju=e("div",{class:"order-list-elem"},null,-1),Wu={class:"order-list-elem"},Xu={class:"order-list-elem"},e0={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},t0={class:"order-list-elem-delete"},u0=e("div",{class:"order-list-elem"},null,-1),s0=e("div",{class:"order-list-elem"},null,-1),o0={class:"order-list-elem"},l0={class:"order-list-elem"},r0={key:0,class:"order-list-elem-text"},i0={class:"order-list-elem"},n0={class:"order-list-elem"},d0={class:"order-list-elem-delete"},a0={class:"order-list-buttons"},c0=e("div",{class:"gradient-btn-text"},"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",-1),m0=[c0],h0=e("div",{class:"gradient-btn-text"},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),v0=[h0],_0=e("div",{class:"gradient-btn-text"},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),p0=[_0],f0=B({__name:"OrderCard",props:{data:{type:Object,required:!0},companys:{type:Array},modelValue:{type:String,required:!0}},emits:["update:modelValue","update:data","onClickAdd","onClickEdit"],setup(t,{emit:u}){const l=t,i=q(),h=te(),v=C([]),c=C([]),f=C(!1),r=C(!1),g=C(""),n=E({get:()=>{var b;return(b=l.data)!=null&&b.edit?l.data.partner_id:l.modelValue},set:b=>u("update:modelValue",b)}),d=E(()=>i.getters.isOrderInDraft),m=()=>{i.commit(w.CALC_ORDER)},T=(b,a)=>{b?i.dispatch(N.REMOVE_POSITION_PRESAIL,a):i.dispatch(N.REMOVE_POSITION,a)},F=(b,a)=>{b?i.dispatch(N.REMOVE_CHARACTERISTIC_PRESAIL,a):i.dispatch(N.REMOVE_CHARACTERISTIC,a)},R=()=>{l.modelValue==""&&(f.value=!0,setTimeout(()=>{f.value=!1},5e3)),u("onClickAdd")},M=()=>{u("onClickEdit")},y=()=>{i.commit(w.CLEAN_ORDER)},K=()=>{var b;i.getters.isOrderInDraft?(i.commit(w.DEL_ORDER_FROM_DRAFT,(b=l.data)==null?void 0:b.id),r.value=!0,g.value="\u0417\u0430\u043A\u0430\u0437 \u0443\u0434\u0430\u043B\u0435\u043D \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430"):(i.commit(w.ADD_ORDER_TO_DRAFT),r.value=!0,g.value="\u0417\u0430\u043A\u0430\u0437 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")},z=b=>{h.push("/order/"+b)};return(b,a)=>{const ie=k("router-link");return s(),o(L,null,[e("div",Yt,[e("div",Kt,[e("div",Jt,[Wt,p(Oe,{data:t.companys,error:f.value,"read-only":t.data.edit,modelValue:O(n),"onUpdate:modelValue":a[0]||(a[0]=$=>$e(n)?n.value=$:null)},null,8,["data","error","read-only","modelValue"])]),e("div",Xt,[eu,e("div",{to:"#",class:I("content-heading-btn"+(O(d)?" active":"")),onClick:a[1]||(a[1]=$=>K()),tooltip:O(d)?"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A",flow:"up"},su,10,tu)])]),e("div",ou,[e("div",lu,[t.data.position.length>0?(s(),o("div",ru,[iu,nu,du,e("div",au,_(v.value.length!=0?"\u0426\u0435\u043D\u0430":""),1),cu,mu,hu])):A("",!0),(s(!0),o(L,null,S(t.data.position,($,P)=>(s(),o("div",{class:I(v.value.indexOf(P)!==-1?"order-list-item active":"order-list-item"),key:P},[e("div",{class:"order-list-row order-list-main-row",onClick:D=>v.value.indexOf(P)===-1?v.value.push(P):v.value.splice(v.value.indexOf(P),1)},[e("div",_u,[V(_(P+1)+" ",1),pu]),e("div",fu,[p(ie,{tag:"a",class:"order-list-elem",to:"/order/"+$.article,title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},{default:Z(()=>[e("span",{innerHTML:$.article},null,8,Au)]),_:2},1032,["to"])]),e("div",gu,[e("span",{innerHTML:$.product.NAME},null,8,Cu)]),Du,e("div",Eu,_($.count),1),e("div",$u,_(Number($.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",ku,[p(ue,{onClick:W(D=>z($.article),["stop"])},null,8,["onClick"])]),e("div",Ou,[p(G,{onOnClick:D=>T(!1,$.guid)},null,8,["onOnClick"])])],8,vu),e("div",{class:I(v.value.indexOf(P)!==-1?"order-list-sublist active":"order-list-sublist")},[(s(!0),o(L,null,S($.characteristics,(D,J)=>(s(),o("div",{key:J,class:"order-list-row"},[wu,yu,e("div",Ru,_(D.CHARACTERISTIC),1),e("div",Iu,[V(_(Number(D.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),D.discount>0?(s(),o("div",Tu,"\u0441\u043A\u0438\u0434\u043A\u0430 "+_(D.discount)+"% ",1)):A("",!0)]),e("div",bu,[p(X,{modelValue:D.count,"onUpdate:modelValue":U=>D.count=U,min:1,max:D.RESIDUE,onOnInput:a[2]||(a[2]=U=>m())},null,8,["modelValue","onUpdate:modelValue","max"])]),e("div",Vu,_(Number(D.price_discount*D.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",Pu,[p(G,{onOnClick:U=>F(!1,{guid:$.guid,characteristics:[D]})},null,8,["onOnClick"])])]))),128))],2)],2))),128))]),t.data.position_presail.length>0?(s(),o("div",Lu,[Su,e("div",Bu,[Fu,Mu,Uu,e("div",Nu,_(c.value.length!=0?"\u0426\u0435\u043D\u0430":""),1),Hu,xu,Gu]),(s(!0),o(L,null,S(t.data.position_presail,($,P)=>(s(),o("div",{class:I(c.value.indexOf(P)!==-1?"order-list-item active":"order-list-item"),key:P},[e("div",{class:"order-list-row order-list-main-row",onClick:D=>c.value.indexOf(P)===-1?c.value.push(P):c.value.splice(c.value.indexOf(P),1)},[e("div",qu,[V(_(P+1)+" ",1),zu]),e("div",Qu,[e("span",{innerHTML:$.article},null,8,ju)]),e("div",Yu,[e("span",{innerHTML:$.product.NAME},null,8,Ku)]),Ju,e("div",Wu,_($.count),1),e("div",Xu,_(Number($.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",e0,[p(ue,{onClick:W(D=>z($.article),["stop"])},null,8,["onClick"])]),e("div",t0,[p(G,{onOnClick:D=>T(!0,$.guid)},null,8,["onOnClick"])])],8,Zu),e("div",{class:I(c.value.indexOf(P)!==-1?"order-list-sublist active":"order-list-sublist")},[(s(!0),o(L,null,S($.characteristics,(D,J)=>(s(),o("div",{key:J,class:"order-list-row"},[u0,s0,e("div",o0,_(D.CHARACTERISTIC),1),e("div",l0,[V(_(Number(D.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),D.discount>0?(s(),o("div",r0,"\u0441\u043A\u0438\u0434\u043A\u0430 "+_(D.discount)+"% ",1)):A("",!0)]),e("div",i0,[p(X,{modelValue:D.count,"onUpdate:modelValue":U=>D.count=U,min:D.RESIDUE+1,onOnInput:a[3]||(a[3]=U=>m())},null,8,["modelValue","onUpdate:modelValue","min"])]),e("div",n0,_(Number(D.price_discount*D.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",d0,[p(G,{onOnClick:U=>F(!0,{guid:$.guid,characteristics:[D]})},null,8,["onOnClick"])])]))),128))],2)],2))),128))])):A("",!0)])]),e("div",a0,[e("button",{class:"order-list-submit gradient-btn disabled",onClick:a[4]||(a[4]=$=>y())},m0),t.data.edit?(s(),o("button",{key:0,class:"order-list-submit gradient-btn",onClick:a[5]||(a[5]=$=>M())},v0)):(s(),o("button",{key:1,class:"order-list-submit gradient-btn",onClick:a[6]||(a[6]=$=>R())},p0))]),p(re,{modelValue:r.value,"onUpdate:modelValue":a[7]||(a[7]=$=>r.value=$),message:g.value,timeout:2e3,notification:""},null,8,["modelValue","message"])],64)}}}),A0={props:{name:{type:String}},emits:["onClick"],setup(){}},g0={class:""};function C0(t,u,l,i,h,v){return s(),o("button",{class:"default-btn",onClick:u[0]||(u[0]=c=>t.$emit("onClick"))},[e("div",g0,_(l.name),1)])}var se=x(A0,[["render",C0]]);const D0={key:0,class:"order-modal"},E0={class:"order-modal-content"},$0={class:"order-modal-header"},k0={class:"order-modal-header-title"},O0={class:"order-modal-body"},w0={key:0},y0={key:0},R0={key:0,class:"loading"},I0=V(" \u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044F! "),T0=e("br",null,null,-1),b0=V(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),V0=e("span",null,".",-1),P0=e("span",null,".",-1),L0=e("span",null,".",-1),S0=[I0,T0,b0,V0,P0,L0],B0={key:1,class:"loading"},F0=V(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),M0=e("span",null,".",-1),U0=e("span",null,".",-1),N0=e("span",null,".",-1),H0=[F0,M0,U0,N0],x0=Y('<svg width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><animateTransform attributeName="transform" dur="1s" type="translate" values="0 0; 1 -1; 1 1; 0 0;" repeatCount="indefinite" begin="0.1"></animateTransform></svg>',1),G0={key:1},Z0={key:1},q0={class:"order-modal-action"},z0=Y('<svg class="order-list-buttons-item-img" width="31" height="29" viewBox="0 0 31 29" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="stroke" x="1" y="1" width="19.75" height="22.8571" rx="2" stroke="#A5A7A9" stroke-width="2"></rect><circle cx="21.2322" cy="20.1964" r="8.80357" fill="#53565B"></circle><circle class="stroke" cx="21.2322" cy="20.1964" r="7.80357" stroke="#A5A7A9" stroke-width="2"></circle><rect class="fill" x="19.6786" y="15.5358" width="1.7" height="6.21429" rx="0.85" fill="#A5A7A9"></rect><rect class="fill" x="24.8571" y="20.1" width="1.7" height="5.17857" rx="0.85" transform="rotate(90 24.8571 20.1)" fill="#A5A7A9"></rect><rect class="fill" x="17.6071" y="5.17859" width="1.7" height="13.4643" rx="0.85" transform="rotate(90 17.6071 5.17859)" fill="#A5A7A9"></rect><rect class="fill" x="11.3929" y="13" width="1.7" height="7.25" rx="0.85" transform="rotate(90 11.3929 13)" fill="#A5A7A9"></rect><rect class="fill" x="14.5" y="9" width="1.7" height="10.3571" rx="0.85" transform="rotate(90 14.5 9)" fill="#A5A7A9"></rect></svg><div class="order-modal-action-btn-text">\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u043A\u0430\u0437\u043E\u0432</div>',2),Q0=[z0],j0=Y('<svg class="order-list-buttons-item-img" width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="24" y="3" width="8" height="2" rx="1" fill="#A5A7A9"></rect><rect class="fill" x="29" width="8" height="2" rx="1" transform="rotate(90 29 0)" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle></svg><div class="order-modal-action-btn-text">\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437</div>',2),Y0=[j0],K0={key:0,class:"order-list-buttons-wrap"},J0=e("svg",{class:"order-list-buttons-item-img",width:"32",height:"21",viewBox:"0 0 32 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"2.06573",y:"4.13147",width:"10.3286",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("rect",{class:"fill",y:"7.74646",width:"10.3286",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"2.06573",y:"11.3615",width:"7.23",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"3.09857",width:"18.5914",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"27.3458",y:"10.0944",width:"8.32268",height:"2.14434",rx:"1.07217",transform:"rotate(-116.966 27.3458 10.0944)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"29.761",y:"12.6008",width:"6.17839",height:"2.14434",rx:"1.07217",transform:"rotate(-128.694 29.761 12.6008)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"19.6243",y:"8.26282",width:"9.29572",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"21.69",width:"10.3286",height:"2.06571",rx:"1.03286",transform:"rotate(90 21.69 0)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"25.8214",y:"4.13147",width:"5.16429",height:"2.06571",rx:"1.03286",transform:"rotate(-180 25.8214 4.13147)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"30.9857",y:"18.5914",width:"5.16429",height:"2.06571",rx:"1.03286",transform:"rotate(-180 30.9857 18.5914)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"28.92",y:"18.5914",width:"8.26286",height:"2.06571",rx:"1.03286",transform:"rotate(-90 28.92 18.5914)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"12.3943",y:"16.5258",width:"9.64955",height:"2.14434",rx:"1.07217",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"4.13141",y:"16.5258",width:"5.16429",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("circle",{class:"stroke",cx:"10.6824",cy:"17.4406",r:"2.21652",stroke:"#A5A7A9","stroke-width":"2"}),e("circle",{class:"stroke",cx:"23.8737",cy:"17.4406",r:"2.21652",stroke:"#A5A7A9","stroke-width":"2"})],-1),W0=e("div",{class:"order-modal-action-btn-text"},"\u0421\u043F\u043E\u0441\u043E\u0431 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0442\u043E\u0432\u0430\u0440\u0430",-1),X0=B({__name:"OrderModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:u}){const l=q(),i=te(),h=C(!1),v=C(null);ee(v,()=>{h.value=!0,setTimeout(()=>{h.value=!1},500)});const c=()=>{l.commit(w.CLEAN_ORDER),l.commit(w.CLEAN_ORDER_ERROR),l.commit(w.CLEAN_ADD_ORDER),u("update:modelValue",!1)},f=()=>{l.commit(w.CLEAN_ORDER),l.commit(w.CLEAN_ORDER_ERROR),l.commit(w.CLEAN_ADD_ORDER),u("update:modelValue",!1)},r=()=>{l.commit(w.CLEAN_ORDER),l.commit(w.CLEAN_ADD_ORDER),u("update:modelValue",!1),i.push({name:"Orders"})},g=E(()=>l.getters.getOrderError),n=E(()=>l.getters.getOrderErrorMsg),d=E(()=>l.getters.isOrderAddNew),m=E(()=>l.getters.getOrderAddNew),T=E(()=>l.getters.getOrder);return(F,R)=>{const M=k("router-link");return t.modelValue?(s(),o("div",D0,[e("div",{class:I(h.value?"order-modal-dialog shake":"order-modal-dialog"),ref_key:"target_modal",ref:v},[e("div",E0,[e("div",$0,[e("h3",k0,_(O(T).edit?"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430 \u2116"+O(T).id:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430"),1),O(d)?(s(),H(G,{key:0,onOnClick:R[0]||(R[0]=y=>c())})):A("",!0)]),e("div",O0,[O(g)?(s(),o("div",Z0,_(O(n)),1)):(s(),o("div",w0,[O(d)?(s(),o("div",G0,_(O(m).message),1)):(s(),o("div",y0,[O(T).edit?(s(),o("span",B0,H0)):(s(),o("span",R0,S0)),x0]))]))]),e("div",q0,[O(g)?(s(),H(se,{key:0,name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",onOnClick:R[1]||(R[1]=y=>c())})):A("",!0),O(g)?(s(),H(se,{key:1,name:"\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437",onOnClick:R[2]||(R[2]=y=>f())})):A("",!0),O(d)?(s(),o("button",{key:2,class:"order-modal-action-btn",onClick:R[3]||(R[3]=y=>r())},Q0)):A("",!0),O(d)?(s(),o("button",{key:3,class:"order-modal-action-btn",onClick:R[4]||(R[4]=y=>f())},Y0)):A("",!0)]),O(d)?(s(),o("div",K0,[p(M,{tag:"div",to:"/shipments/request",class:"order-modal-action-btn",title:"\u0417\u0430\u044F\u0432\u043A\u0430 \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442",onClick:R[5]||(R[5]=y=>f())},{default:Z(()=>[J0,W0]),_:1})])):A("",!0)])],2)])):A("",!0)}}}),es=B({name:"OrderDraftModal",components:{DeleteButton:G,OrderDraftCard:we},props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:u}){const l=q(),i=C(!1),h=C(!1),v=C(!1),c=C(!1),f=C(null),r=C(-1);ee(f,()=>{c.value=!0,setTimeout(()=>{c.value=!1},500)});const g=()=>{l.commit(w.CLEAN_ORDER_ERROR),l.commit(w.CLEAN_ADD_ORDER),u("update:modelValue",!1)},n=m=>{m!=-1?(l.commit(w.DEL_ORDER_FROM_DRAFT,m),i.value=!1,r.value=-1):(l.commit(w.DEL_ALL_DRAFT),h.value=!1)},d=m=>{l.commit(w.USE_DRAFT,m),h.value=!1,v.value=!1,i.value=!1,r.value=-1,u("update:modelValue",!1)};return{shake:c,targetModal:f,active:r,delItem:i,delAll:h,useDraft:v,orderDraft:E(()=>l.getters.getOrderDraft),close:g,del:n,draftToOrder:d}}}),ts={key:0,class:"order-modal"},us={class:"order-modal-content draft"},ss={class:"order-modal-header"},os=e("h3",{class:"order-modal-header-title"},"\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438",-1),ls={class:"order-modal-body draft"},rs={key:0},is={key:1,class:"order-draft-list"},ns={class:"shipment-address-list-wrap"},ds=["onClick"],as={class:"shipment-address-list-elem"},cs={class:"shipment-address-list-elem"},ms=e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",viewBox:"0 0 24 24",width:"30px",fill:"#8D8D8D"},[e("path",{d:"M0 0h24v24H0V0z",fill:"none"}),e("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})],-1),hs=[ms],vs={key:0,class:"shipment-address-list-row-info"},_s=e("div",null,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A?",-1),ps=["onClick"],fs={class:"orders-list-info-row draft"},As={key:0,class:"shipment-address-list-row-info"},gs=e("div",null,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438?",-1),Cs={key:1,class:"shipment-address-list-row-info"},Ds=e("div",null,"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0434\u043B\u044F \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430?",-1),Es={key:2,class:"order-modal-action"};function $s(t,u,l,i,h,v){const c=k("DeleteButton"),f=k("OrderDraftCard");return t.modelValue?(s(),o("div",ts,[e("div",{class:I("order-modal-dialog draft"+(t.shake?" shake":"")),ref:"targetModal"},[e("div",us,[e("div",ss,[os,p(c,{onOnClick:u[0]||(u[0]=r=>t.close())})]),e("div",ls,[t.orderDraft.length==0?(s(),o("div",rs," \u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438 \u043E\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044E\u0442 ")):(s(),o("div",is,[e("div",ns,[(s(!0),o(L,null,S(t.orderDraft,(r,g)=>(s(),o("div",{key:g},[e("div",{class:I("shipment-address-list-row"+(r.id==t.active?" active":"")),onClick:n=>{r.id===t.active?t.active=-1:t.active=r.id,t.delAll=!1,t.useDraft=!1}},[e("div",as,_(g+1),1),e("div",cs," \u0421\u043E\u0437\u0434\u0430\u043D "+_(new Date(r.id).toLocaleString("ru")),1),r.id==t.active?(s(),o("div",{key:0,class:I("shipment-address-list-elem actions"+(t.delItem?" active":""))},[e("div",{onClick:u[1]||(u[1]=W(n=>{t.delItem=!t.delItem,t.delAll=!1,t.useDraft=!1},["stop"]))},hs)],2)):A("",!0)],10,ds),t.delItem&&r.id==t.active?(s(),o("div",vs,[_s,e("div",null,[e("a",{href:"#",onClick:n=>t.del(r.id)},"\u0414\u0430",8,ps),e("a",{href:"#",onClick:u[2]||(u[2]=n=>t.delItem=!1)},"\u041D\u0435\u0442")])])):A("",!0),e("div",{class:I("orders-list-info draft"+(!t.delItem&&r.id==t.active?" active":""))},[e("div",fs,[p(f,{data:r},null,8,["data"])])],2)]))),128))])]))])]),t.delAll?(s(),o("div",As,[gs,e("div",null,[e("a",{href:"#",onClick:u[3]||(u[3]=r=>t.del(-1))},"\u0414\u0430"),e("a",{href:"#",onClick:u[4]||(u[4]=r=>t.delAll=!1)},"\u041D\u0435\u0442")])])):A("",!0),t.useDraft?(s(),o("div",Cs,[Ds,e("div",null,[e("a",{href:"#",onClick:u[5]||(u[5]=r=>t.draftToOrder(t.active))},"\u0414\u0430"),e("a",{href:"#",onClick:u[6]||(u[6]=r=>t.useDraft=!1)},"\u041D\u0435\u0442")])])):A("",!0),!t.delAll&&!t.useDraft?(s(),o("div",Es,[e("button",{onClick:u[7]||(u[7]=r=>{t.active=-1,t.delAll=!0}),class:"order-list-btn"},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438"),t.active!=-1?(s(),o("button",{key:0,onClick:u[8]||(u[8]=r=>t.useDraft=!0),class:"order-list-btn"},"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")):A("",!0)])):A("",!0)],2)])):A("",!0)}var ks=x(es,[["render",$s]]);const Os=B({components:{PersonalBar:ne,Notification:de,CompanyBarTop:ae,TopNav:ce,ProductHeaderCard:ve,ProductSearchResultCard:_e,OrderProductSearchInput:Me,ProductOffersOrderCard:_t,ProductSliderSmallCard:Dt,OrderHeaderCard:Zt,OrderCard:f0,OrderModal:X0,SnackBar:re,OrderDraftModal:ks},props:["article"],setup(t){const u=q(),l=te(),i=E({get:()=>u.getters.getLoader,set:y=>u.commit(le.SET_LOADER,y)}),h=C(""),v=C(""),c=C(!1),f=C(""),r=C(!1),g=C(!1),n=C(!1),d=C([]),m=()=>{let y={article:u.getters.getProduct.ARTICLE,guid:u.getters.getProduct.UID,product:u.getters.getProduct,characteristics:d.value};u.dispatch(N.ADD_POSITION,y)},T=()=>{h.value==""?(c.value=!0,setTimeout(()=>{c.value=!1},5e3),f.value="\u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442\u0430"):(r.value=!0,u.commit(w.ADD_ORDER_PARTNER_ID,h.value),setTimeout(()=>{u.dispatch(N.ADD_ORDER,u.getters.getOrderToAdd).catch(()=>{r.value=!1,c.value=!0,setTimeout(()=>{c.value=!1},5e3),f.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3))},F=()=>{console.log(h.value),r.value=!0,u.commit(w.ADD_ORDER_PARTNER_ID,h.value),setTimeout(()=>{u.dispatch(N.EDIT_ORDER_ACTION,u.getters.getOrderToAdd).catch(()=>{r.value=!1,c.value=!0,setTimeout(()=>{c.value=!1},5e3),f.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3)};j(()=>t.article,y=>{y!==""&&y!==void 0&&(i.value=!0,u.dispatch(Q.SEARCH_PRODUCT,t.article).then(()=>{u.getters.getProduct.ID?v.value=u.getters.getProduct.ID:l.push({name:"Order"})}).finally(()=>{i.value=!1}))}),j(h,()=>{u.getters.getOrder.edit||u.commit(w.ADD_ORDER_PARTNER_ID,h.value),u.commit(w.CALC_ORDER)}),oe(()=>{u.commit(w.ADD_ORDER_PARTNER_ID,h.value),u.getters.isCompanysLoad||u.dispatch(ke.GET_COMPANYS).finally(()=>{setTimeout(()=>{h.value=u.getters.getCompanys===[]?"":u.getters.getCompanys[0].uid},500)}),v.value=u.getters.getProduct.ID,t.article!==""&&t.article!==void 0&&(i.value=!0,u.dispatch(Q.SEARCH_PRODUCT,t.article).then(()=>{u.getters.getProduct.ID?v.value=u.getters.getProduct.ID:l.push({name:"Order"})}).finally(()=>{i.value=!1}))});const R=()=>{i.value=!0,u.dispatch(Q.GET_PRODUCT_BY_ID,v.value).then(()=>{v.value=u.getters.getProduct.ID}).finally(()=>{i.value=!1})},M=E(()=>{const y=u.getters.getProduct.STATUS;return y=="Outlet"||y=="Discount"||y=="Activity"?0:u.getters.getCompanyDiscount(h.value,u.getters.getProductOffersORGGUID)});return{error:c,errorMsg:f,activeCompanyUid:h,activeProductId:v,showModal:r,showDraft:g,productItems:d,productSearch:n,isProduct:E(()=>u.getters.isProduct),companyBarTopData:E(()=>u.getters.getCompanysList),productOffers:E(()=>u.getters.getProductOffers),product:E(()=>u.getters.getProduct),productFound:E(()=>u.getters.getProductFound),productImages:E(()=>u.getters.getProductImages),productProtect:E(()=>u.getters.getProductProtect),isOrder:E(()=>u.getters.isOrder),order:E(()=>u.getters.getOrder),getOrderDraftCount:E(()=>u.getters.getOrderDraftCount),discount:M,addToOrder:m,addOrder:T,editOrder:F,loadProduct:R}}}),ws={class:"top-line product-page"},ys={key:0,class:"order-info"},Rs=V(" \u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043E\u0432\u0430\u0440 \u0432 "),Is=V("\u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0435"),Ts=V(" \u0438\u043B\u0438 \u0432\u043E\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435\u0441\u044C "),bs=V("\u043F\u043E\u0438\u0441\u043A\u043E\u043C"),Vs=V(". "),Ps={key:1},Ls={class:"content-wrap content-product-wrap"},Ss={class:"content-wrap-elem"},Bs={class:"content-wrap-elem"},Fs={key:3,class:"content-heading-wrap proudct-heading-wrap"},Ms={key:0,class:"content-heading-wrap-elem"},Us=e("div",{class:"order-info"},"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438 \u043A \u0437\u0430\u043A\u0430\u0437\u0443 \u0438 \u0442\u043E\u0433\u0434\u0430 \u043E\u043D \u0431\u0443\u0434\u0435\u0442 \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D",-1),Ns=[Us],Hs={class:"content-wrap content-order-wrap"},xs={class:"content-wrap-elem"},Gs={class:"content-wrap-elem"};function Zs(t,u,l,i,h,v){const c=k("CompanyBarTop"),f=k("Notification"),r=k("PersonalBar"),g=k("top-nav"),n=k("router-link"),d=k("OrderProductSearchInput"),m=k("ProductHeaderCard"),T=k("ProductSearchResultCard"),F=k("ProductOffersOrderCard"),R=k("OrderHeaderCard"),M=k("OrderCard"),y=k("ProductSliderSmallCard"),K=k("OrderModal"),z=k("SnackBar"),b=k("OrderDraftModal");return s(),o("div",null,[e("div",ws,[p(c,{data:t.companyBarTopData,modelValue:t.activeCompanyUid,"onUpdate:modelValue":u[0]||(u[0]=a=>t.activeCompanyUid=a)},null,8,["data","modelValue"]),p(f),p(r)]),p(g,{toDraft:"",draft:t.getOrderDraftCount,onOnClick:u[1]||(u[1]=a=>t.showDraft=!0)},null,8,["draft"]),t.isProduct?(s(),o("div",Ps,[p(d,{modelValue:t.productSearch,"onUpdate:modelValue":u[2]||(u[2]=a=>t.productSearch=a)},null,8,["modelValue"]),p(m,{title:String(t.product.NAME),price:String(t.product.PRICE_OPT),discount:t.discount,status:String(t.product.STATUS),onShowSearch:u[3]||(u[3]=a=>t.productSearch=!t.productSearch)},null,8,["title","price","discount","status"]),e("div",Ls,[e("div",Ss,[p(T,{data:t.productFound,cardType:"order",modelValue:t.activeProductId,"onUpdate:modelValue":u[4]||(u[4]=a=>t.activeProductId=a),onOnClick:u[5]||(u[5]=a=>t.loadProduct()),onShowSearch:u[6]||(u[6]=a=>t.productSearch=!t.productSearch)},null,8,["data","modelValue"])]),e("div",Bs,[p(F,{data:t.productOffers,discount:t.discount,modelValue:t.productItems,"onUpdate:modelValue":u[7]||(u[7]=a=>t.productItems=a),onOnClick:u[8]||(u[8]=a=>t.addToOrder())},null,8,["data","discount","modelValue"])])])])):(s(),o("div",ys,[Rs,p(n,{tag:"a",to:"/catalog/catalog",class:"order-info-link"},{default:Z(()=>[Is]),_:1}),Ts,p(n,{tag:"a",to:"/product",class:"order-info-link"},{default:Z(()=>[bs]),_:1}),Vs])),t.isOrder?(s(),H(R,{key:2,discount:t.discount,data:t.order},null,8,["discount","data"])):(s(),o("div",Fs,[t.isProduct?(s(),o("div",Ms,Ns)):A("",!0)])),e("div",Hs,[e("div",xs,[t.isOrder?(s(),H(M,{key:0,data:t.order,companys:t.companyBarTopData,modelValue:t.activeCompanyUid,"onUpdate:modelValue":u[9]||(u[9]=a=>t.activeCompanyUid=a),onOnClickAdd:t.addOrder,onOnClickEdit:t.editOrder},null,8,["data","companys","modelValue","onOnClickAdd","onOnClickEdit"])):A("",!0)]),e("div",Gs,[t.isProduct?(s(),H(y,{key:0,data:t.productImages},null,8,["data"])):A("",!0)])]),p(K,{modelValue:t.showModal,"onUpdate:modelValue":u[10]||(u[10]=a=>t.showModal=a)},null,8,["modelValue"]),p(z,{modelValue:t.error,"onUpdate:modelValue":u[11]||(u[11]=a=>t.error=a),message:t.errorMsg},null,8,["modelValue","message"]),p(b,{modelValue:t.showDraft,"onUpdate:modelValue":u[12]||(u[12]=a=>t.showDraft=a)},null,8,["modelValue"])])}var t4=x(Os,[["render",Zs]]);export{t4 as default};
