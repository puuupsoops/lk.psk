import{d as ue,h as d,J as R,Q as ye,g as Ee,O as Ue,A as pe,B as _e,j,at as Fe,i as be,r as qe,o as a,b as i,a as s,p as E,u as r,R as y,t as w,z as p,F as Z,f as Q,au as Ne,m as A,k as n,n as ze,am as V,w as ge,c as G,e as K,ag as we,X as Ge,av as Ke,as as Ce,ap as je,aw as Je,ax as We,ay as F,ai as Ze,l as Qe,s as Xe}from"./index.8da950ad.js";import{N as Ye}from"./Notification.cc6a6a52.js";import{_ as He}from"./PersonalBar.435b861c.js";import"./Debug.4fe710be.js";import{_ as et}from"./TopNav.741bd3d6.js";import"./CompanyCalendar.vue_vue_type_style_index_0_lang.aa00760a.js";import{_ as tt}from"./CompanyBarTop.5c181ee1.js";import"./ButtonWithIcon.ff84e438.js";import"./DatePicker.ddc6d90e.js";import{M as ut}from"./ModalDatePicker.e911c77d.js";import{M as st}from"./ModalInput.7e5248d6.js";import{S as X}from"./SelectInput.7668cdf1.js";/* empty css                                                     */import{O as te,a as S,_ as lt}from"./types.bf7a6549.js";import{_ as at}from"./CatalogPagination.ac4268ed.js";import"./vee-validate.esm.89168dbd.js";import"./object.3b9f4e66.js";ue({props:{data:{type:Array,require:!0},modelValue:{type:Object}},components:{SelectInput:X},emits:["update:modelValue"],setup($,{emit:v}){const f=d(1),P=d(null),b=d("");return R(()=>f.value,()=>{ye(()=>{P.value.focus()}),b.value="",v("update:modelValue",{id:f.value,search:""})}),{leftInput:f,searchInput:P,search_str:b,doSearch:()=>{v("update:modelValue",{id:f,search:b.value})}}}});const it={class:"orders-heading-info"},ot={class:"orders-heading-pagination"},rt=s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[s("path",{fill:"#A5A7A9",d:"m9.8 21.3-.375-3q-.175-.025-.625-.275T7.775 17.4l-2.75 1.15-2.2-3.825 2.4-1.825q-.05-.2-.062-.413-.013-.212-.013-.487 0-.175.025-.413.025-.237.05-.537l-2.4-1.8 2.2-3.8L7.8 6.625q.35-.275.762-.525.413-.25.863-.4L9.8 2.675h4.4l.375 3q.475.175.838.4.362.225.737.55l2.825-1.175 2.2 3.8-2.5 1.875q.05.25.063.437.012.188.012.438 0 .225-.012.438-.013.212-.063.462l2.475 1.825-2.225 3.825-2.775-1.175q-.325.275-.7.5-.375.225-.875.425l-.375 3Zm2.175-6.4q1.2 0 2.038-.85.837-.85.837-2.05 0-1.2-.837-2.05-.838-.85-2.038-.85-1.225 0-2.062.85-.838.85-.838 2.05 0 1.2.838 2.05.837.85 2.062.85Zm0-1.4q-.625 0-1.062-.438-.438-.437-.438-1.062t.438-1.062q.437-.438 1.062-.438.6 0 1.05.438.45.437.45 1.062t-.45 1.062q-.45.438-1.05.438ZM12 11.975ZM11 19.9h1.95l.375-2.7q.75-.2 1.35-.55.6-.35 1.175-.925l2.5 1.075.975-1.7-2.2-1.625q.125-.4.163-.75.037-.35.037-.725t-.037-.713q-.038-.337-.163-.737l2.2-1.675-.95-1.675-2.55 1.075q-.45-.5-1.15-.913-.7-.412-1.375-.587l-.3-2.7h-1.975l-.325 2.7q-.8.2-1.4.525-.6.325-1.2.95L5.625 7.2 4.65 8.875l2.15 1.6q-.125.375-.175.75-.05.375-.05.775 0 .375.038.738.037.362.162.762L4.65 15.1l.975 1.7 2.45-1.05q.6.575 1.225.938.625.362 1.375.537Z"})],-1),nt=[rt],dt=["onClick"],vt=s("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("rect",{x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),s("rect",{width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),ct=s("span",null,"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C",-1),mt=[vt,ct],ft={class:"orders-list"},ht=s("div",null,"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),pt=s("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),_t=[pt],gt=s("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),s("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),wt=[gt],Ct={class:"orders-list-elem-center"},yt=s("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),Et=[yt],bt=s("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),s("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),At=[bt],kt=["onClick"],$t=s("div",{class:"table-arrow"},null,-1),Ot=["tooltip"],Dt=["onClick"],St=["onClick"],xt=["onClick"],Pt=["onClick"],It=["onClick"],Lt=["onClick"],Bt=A("\u0417\u0430\u044F\u0432\u043A\u0430 \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442"),Tt=["onClick"],Vt={key:0},Rt={class:"orders-list-info-elem"},Mt={class:"orders-list-info-elem"},Ut={key:0,class:"orders-list-info-about tooltip"},Ft=["onClick"],qt=s("span",{class:"tooltiptext"},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442",-1),Nt={key:1,class:"orders-list-info-about tooltip"},zt={class:"orders-list-info-download disable"},Gt=s("span",{class:"tooltiptext"},[A("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442 \u043C\u043E\u0436\u043D\u043E \u0442\u043E\u043B\u044C\u043A\u043E "),s("br"),A(" \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430")],-1),Kt={key:0,class:"orders-list-info-elem orders-list-info-doc-wrap"},jt={key:1,class:"orders-list-info-elem orders-list-info-doc-wrap"},Jt=["href"],Wt=["href"],Zt=["href"],Qt=["href"],Xt={class:"orders-list-info-elem"},Yt={class:"orders-list-info-elem"},Ht={key:0,class:"orders-list-elem-request-bill"},eu=["onClick"],tu={class:"orders-list-elem-request-bill"},uu=["onClick"],su={key:1,class:"orders-list-info-row"},lu=Qe('<div class="orders-list-info-elem"></div><div class="orders-list-info-elem"> \u0421\u0447\u0435\u0442 \u043E\u0442\u0441\u0443\u0442\u0432\u0443\u0435\u0442 </div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div>',6),au=[lu],iu={key:0,class:"orders-list-row orders-list-main-row"},ou={class:"order-info"},ru=A(" \u0417\u0430\u043A\u0430\u0437\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 "),nu=A("\u043D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437"),du=A(" \u0438 \u043E\u043D \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0432 \u0441\u043F\u0438\u0441\u043A\u0435. "),vu=ue({__name:"OrdersListCard",props:{contrAgent:{type:String},period:{type:String},status:{type:String},loading:{type:Boolean,default:!1},search:{type:Object,required:!0},refresh:{type:Boolean,default:!1}},setup($){var ne;const v=$,f=Ee(),P=Ue(),b=d(!1),_=d(-1),M=d(-1),O=d(null),x=d(!1),D=d([]),k=d(-1),h=d([{name:"id",value:"",show:!1},{name:"name",value:"",show:!1},{name:"date",value:"",show:!1}]),q=d(!1),C=d(!1),I="http://91.232.12.198:82",c=d({maxItemOnPage:10,currentPage:1}),N=d(-1),Ae=d(pe("tempOrderId")),ke=d((ne=pe("tempKPType"))!=null?ne:"");_e(O,()=>{M.value=-1});let J=j(()=>f.getters.getOrders);const se=()=>{var l;if(_.value!=-1&&L.value&&Array.isArray(L.value[_.value].checks)){let e=(l=L.value[_.value].checks)==null?void 0:l.map(m=>m.doc_status?null:f.dispatch(F.GET_ORDERS_DOCSTATUS,m.guid));e&&Promise.all(e).finally(()=>{})}};R(_,()=>{se()}),R(()=>v.status,()=>{c.value.currentPage=1,_.value=-1}),R(()=>v.contrAgent,()=>{c.value.currentPage=1,_.value=-1}),R(()=>v.search,()=>{c.value.currentPage=1,_.value=-1}),R(()=>v.period,()=>{c.value.currentPage=1,_.value=-1}),R(()=>v.refresh,(l,e)=>{e==!0&&l==!1&&se()});const L=j(()=>{let l=J.value.filter(e=>v.contrAgent==""||e.partner_guid==v.contrAgent);return l=l.filter(e=>$e(e.date)),l=l.filter(e=>Oe(e)),l=l.filter(e=>B(e)),h.value[1].value!=""&&(l=l.filter(e=>e.name.indexOf(h.value[1].value)!=-1)),h.value[2].value!=""&&(l=l.filter(e=>e.date.indexOf(h.value[2].value)!=-1)),l}),le=l=>c.value.maxItemOnPage!=-1?l>=(c.value.currentPage-1)*c.value.maxItemOnPage&&l<c.value.currentPage*c.value.maxItemOnPage:!0,B=l=>{if(v.search.search=="")return!0;switch(v.search.id){case 1:return l.name.toUpperCase().indexOf(v.search.search.toUpperCase())!=-1;case 2:return String(l.n).toUpperCase().indexOf(v.search.search.toUpperCase())!=-1;case 3:return l.date.toUpperCase().indexOf(v.search.search.toUpperCase())!=-1;default:return!0}},$e=l=>{var e;if(v.period=="\u0412\u0441\u0435")return!0;{const m=(e=v.period)==null?void 0:e.split(" - ")[0],t=m==null?void 0:m.substring(6,10),g=m==null?void 0:m.substring(3,5);return t==l.substring(6,10)&&g==l.substring(3,5)}},Oe=l=>v.status=="\u0412\u0441\u0435"?!0:Array.isArray(l.checks)?l.checks.findIndex(e=>{var t;const m=(t=te.find(g=>g.name==v.status))==null?void 0:t.id;return m&&m-1==e.status})!=-1:!1,De=l=>{D.value.push(l),f.dispatch(we.GET_BILL_FILE_SAVE,l).finally(()=>{D.value=D.value.filter(e=>e!==l)})},Se=(l,e)=>{const t=f.getters.getCompanyStoragesData(l).find(g=>g.guid==e);return t?t.name.replace(/(^|\s)\S/g,g=>g.toUpperCase()).replace(/(ООО)|(")|(\s)|([а-я])/g,""):"\u0421\u043A\u043B\u0430\u0434"},xe=l=>{f.commit(Ge.SET_CURRENT_ORDER,l),Ae.value=l,ke.value=Ke.ORDER},Pe=async l=>{b.value=!0,await f.dispatch(we.GET_ORDER_DETAIL,l),f.commit(Ce.SET_KP_OFFER_POSITION,f.getters.getOrderDetail.position),f.commit(Ce.SET_KP_STEP,2),b.value=!1,await P.push("/kp")},Ie=l=>{b.value=!0,f.commit(je.CLEAN_ORDER_DETAIL),f.commit(Je.CLEAR_CLAIMS_NEW),f.dispatch(We.ADD_CLAIMS_NEW,l).then(()=>{b.value=!1,P.push("/claims/request")})},Le=(l,e)=>{if(N.value==-1){N.value=e.id;const m=Object.assign({},{guid:e.guid,id:e.id,n:e.n,organization_id:e.organization_id,status:e.status});f.dispatch(F.GET_ORDERS_BILL_REQUEST,{id:l,check:m}).then(()=>{N.value=-1}).catch(()=>{N.value=-1})}},Be=l=>{b.value=!0;let e=l.guid;f.dispatch(F.GET_ORDERS_DOWNLOAD_CERTIFICATED,e).then(()=>{b.value=!1})},Te=l=>{var m;b.value=!0;let e=[];(m=l.checks)==null||m.forEach(t=>{e.push(t.guid)}),f.dispatch(F.GET_ORDERS_DOWNLOAD_CERTIFICATED_ALL,e).then(()=>{b.value=!1})},ae=d(),ie=d(0),U=d(""),W=d(!1),oe=d();_e(oe,()=>{W.value=!1});const Y={id:{name:"\u2116",width:3,unit:"%",min:10,visible:!0,disabled:!0},name:{name:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",width:20,unit:"%",min:10,visible:!0,disabled:!1},partner_name:{name:"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",width:20,unit:"%",min:10,visible:!0,disabled:!1},n:{name:"\u041D\u043E\u043C\u0435\u0440",width:15,unit:"%",min:5,visible:!0,disabled:!1},date:{name:"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F",width:15,unit:"%",min:10,visible:!0,disabled:!1},status:{name:"\u0421\u0442\u0430\u0442\u0443\u0441",width:10,unit:"%",min:10,visible:!0,disabled:!1},comment:{name:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438",width:15,unit:"%",min:10,visible:!0,disabled:!1},info:{name:"\u0418\u043D\u0444\u043E",width:10,unit:"%",min:10,visible:!0,disabled:!0}},u=d(Fe.cloneDeep(Y)),re=l=>{const e=l.movementX/ie.value*100;Object.keys(u.value).reduce((m,t)=>u.value[t].visible?m+u.value[t].width:m,0)+e<100&&u.value[U.value].width+e>u.value[U.value].min&&(u.value[U.value].width=u.value[U.value].width+e)},T=(l,e)=>{U.value=e,document.addEventListener("mousemove",re)},Ve=()=>{document.removeEventListener("mousemove",re),U.value="",H()},Re=()=>{const l=Object.keys(u.value).reduce((e,m)=>u.value[m].visible?e+u.value[m].width:e,0);l>100&&Object.keys(u.value).forEach(e=>{e!="id"&&(u.value[e].width=u.value[e].width-(l-100)/6)})},Me=()=>{u.value=JSON.parse(JSON.stringify(Y)),H()},H=()=>{Re(),localStorage.setItem("orders_list_table",JSON.stringify(u.value))};return be(()=>{ye(()=>{ie.value=ae.value.getBoundingClientRect().width;const l=localStorage.getItem("orders_list_table");l&&(u.value=JSON.parse(l)),u.value.comment||(u.value=JSON.parse(JSON.stringify(Y)),localStorage.setItem("orders_list_table",JSON.stringify(u.value)))})}),(l,e)=>{const m=qe("router-link");return a(),i("div",{class:"orders-list-wrap",onMouseup:e[23]||(e[23]=t=>Ve())},[s("div",it,[s("div",ot,[E(at,{maxPage:c.value.maxItemOnPage!==-1?Math.ceil(r(L).length/c.value.maxItemOnPage):1,currentPage:c.value.currentPage,"onUpdate:currentPage":e[0]||(e[0]=t=>c.value.currentPage=t),maxItemOnPage:c.value.maxItemOnPage,"onUpdate:maxItemOnPage":e[1]||(e[1]=t=>c.value.maxItemOnPage=t)},null,8,["maxPage","currentPage","maxItemOnPage"])]),s("div",{class:"orders-heading-info-text",style:y(r(L).length!==r(J).length?"visibility: visible":"visibility: hidden")}," \u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E "+w(r(L).length)+" \u0438\u0437 "+w(r(J).length),5),s("div",{class:p(["orders-heading-info-settings",{active:W.value}]),onClick:e[2]||(e[2]=t=>W.value=!0)},nt,2),s("div",{class:p(["orders-heading-info-settings-dropdown",{active:W.value}]),ref_key:"tableMenu",ref:oe},[(a(!0),i(Z,null,Q(u.value,(t,g)=>(a(),i("a",{class:"orders-list-more-dropdown-link",key:g,onClick:H},[E(Ne,{modelValue:t.visible,"onUpdate:modelValue":z=>t.visible=z,disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"]),s("span",{onClick:z=>t.disabled?null:t.visible=!t.visible},w(t.name),9,dt)]))),128)),s("a",{class:"orders-list-more-dropdown-link clear",onClick:e[3]||(e[3]=t=>Me())},mt)],2)]),s("div",ft,[s("div",{class:"orders-list-row orders-list-heading",ref_key:"table",ref:ae},[u.value.id.visible?(a(),i("div",{key:0,class:p(["orders-list-elem",{id:!0}]),style:y(`width: ${u.value.id.width}${u.value.id.unit}`)},[A(w(u.value.id.name)+" ",1),s("div",{class:"orders-list-elem-resize",onMousedown:e[4]||(e[4]=t=>T(t,"id"))},null,32)],4)):n("",!0),u.value.name.visible?(a(),i("div",{key:1,class:p(["orders-list-elem",{name:!0,active:B.search!==""&&B.id===1||h.value[1].value!==""}]),style:y(`width: ${u.value.name.width}${u.value.name.unit}`)},[E(st,{modelValue:h.value[1].value,"onUpdate:modelValue":e[5]||(e[5]=t=>h.value[1].value=t),show:h.value[1].show,"onUpdate:show":e[6]||(e[6]=t=>h.value[1].show=t)},null,8,["modelValue","show"]),ht,s("div",{class:p(["orders-list-elem-filter",{active:h.value[1].show||h.value[1].value!==""}]),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:e[7]||(e[7]=t=>h.value[1].show=!0)},_t,2),h.value[1].value!==""?(a(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:e[8]||(e[8]=t=>{h.value[1].value="",_.value=-1})},wt)):n("",!0),s("div",{class:"orders-list-elem-resize",onMousedown:e[9]||(e[9]=t=>T(t,"name"))},null,32)],6)):n("",!0),u.value.partner_name.visible?(a(),i("div",{key:2,class:p(["orders-list-elem",{partner_name:!0,active:$.contrAgent!==""}]),style:y(`width: ${u.value.partner_name.width}${u.value.partner_name.unit}`)},[A(w(u.value.partner_name.name)+" ",1),s("div",{class:"orders-list-elem-resize",onMousedown:e[10]||(e[10]=t=>T(t,"partner_name"))},null,32)],6)):n("",!0),u.value.n.visible?(a(),i("div",{key:3,class:p(["orders-list-elem",{n:!0,active:B.search!==""&&B.id===2}]),style:y(`width: ${u.value.n.width}${u.value.n.unit}`)},[s("div",Ct,w(u.value.n.name),1),s("div",{class:"orders-list-elem-resize",onMousedown:e[11]||(e[11]=t=>T(t,"n"))},null,32)],6)):n("",!0),u.value.date.visible?(a(),i("div",{key:4,class:p(["orders-list-elem",{date:!0,active:B.search!==""&&B.id===3||$.period!=="\u0412\u0441\u0435"||h.value[2].value!==""}]),style:y(`width: ${u.value.date.width}${u.value.date.unit}`)},[E(ut,{modelValue:h.value[2].value,"onUpdate:modelValue":e[12]||(e[12]=t=>h.value[2].value=t),show:h.value[2].show,"onUpdate:show":e[13]||(e[13]=t=>h.value[2].show=t)},null,8,["modelValue","show"]),s("div",null,w(u.value.date.name),1),s("div",{class:p("orders-list-elem-filter"+(h.value[2].show||h.value[2].value!==""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:e[14]||(e[14]=t=>h.value[2].show=!0)},Et,2),h.value[2].value!==""?(a(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:e[15]||(e[15]=t=>{h.value[2].value="",_.value=-1})},At)):n("",!0),s("div",{class:"orders-list-elem-resize",onMousedown:e[16]||(e[16]=t=>T(t,"date"))},null,32)],6)):n("",!0),u.value.status.visible?(a(),i("div",{key:5,class:p(["orders-list-elem",{status:!0,active:$.status!=="\u0412\u0441\u0435"}]),style:y(`width: ${u.value.status.width}${u.value.status.unit}`)},[A(w(u.value.status.name)+" ",1),s("div",{class:"orders-list-elem-resize",onMousedown:e[17]||(e[17]=t=>T(t,"status"))},null,32)],6)):n("",!0),u.value.comment.visible?(a(),i("div",{key:6,class:p(["orders-list-elem",{comment:!0,active:$.status!=="\u0412\u0441\u0435"}]),style:y(`width: ${u.value.comment.width}${u.value.comment.unit}`)},[A(w(u.value.comment.name)+" ",1),s("div",{class:"orders-list-elem-resize",onMousedown:e[18]||(e[18]=t=>T(t,"comment"))},null,32)],6)):n("",!0),u.value.info.visible?(a(),i("div",{key:7,class:p(["orders-list-elem",{info:!0}]),style:y(`width: ${u.value.info.width}${u.value.info.unit}`)},w(u.value.info.name),5)):n("",!0)],512),(a(!0),i(Z,null,Q(r(L),(t,g)=>{var z;return a(),i("div",{class:p(["orders-list-item",{active:g===_.value,reserved:t.reserved}]),key:g},[le(g)?(a(),i("div",{key:0,class:"orders-list-row orders-list-main-row",onClick:o=>g===_.value?_.value=-1:_.value=g},[u.value.id.visible?(a(),i("div",{key:0,class:p(["orders-list-elem",{id:!0}]),style:y(`width: ${u.value.id.width}${u.value.id.unit}`)},[A(w(g+1)+" ",1),$t],4)):n("",!0),u.value.name.visible?(a(),i("div",{key:1,class:p(["orders-list-elem",{name:!0}]),style:y(`width: ${u.value.name.width}${u.value.name.unit}`)},w(t.name),5)):n("",!0),u.value.partner_name.visible?(a(),i("div",{key:2,class:p(["orders-list-elem",{partner_name:!0}]),style:y(`width: ${u.value.partner_name.width}${u.value.partner_name.unit}`)},w(r(ze)(t.partner_name)),5)):n("",!0),u.value.n.visible?(a(),i("div",{key:3,class:p(["orders-list-elem",{n:!0}]),style:y(`width: ${u.value.n.width}${u.value.n.unit}`)},w(t.n),5)):n("",!0),u.value.date.visible?(a(),i("div",{key:4,class:p(["orders-list-elem",{date:!0}]),style:y(`width: ${u.value.date.width}${u.value.date.unit}`)},w(t.date),5)):n("",!0),u.value.status.visible?(a(),i("div",{key:5,class:p(["orders-list-elem",{status:!0}]),style:y(`width: ${u.value.status.width}${u.value.status.unit}`)},[(a(!0),i(Z,null,Q(t.checks,(o,ee)=>(a(),i("div",{class:p("orders-list-elem-status "+(o.status>=0&&o.status<r(S).length?r(S)[o.status].class:"")),tooltip:o.status>=0&&o.status<r(S).length?r(S)[o.status].name:"",flow:"up",key:ee},null,10,Ot))),128))],4)):n("",!0),u.value.comment.visible?(a(),i("div",{key:6,class:p(["orders-list-elem",{comment:!0}]),style:y(`width: ${u.value.comment.width}${u.value.comment.unit}`)},w(t.comment),5)):n("",!0),u.value.info.visible?(a(),i("div",{key:7,class:p(["orders-list-elem",{info:!0}]),style:y(`width: ${u.value.info.width}${u.value.info.unit}`)},[s("button",{class:"orders-list-more",onClick:V(o=>M.value=g,["stop"])},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E",8,Dt),s("div",{class:p("orders-list-more-dropdown"+(g===M.value?" active":"")),ref_for:!0,ref_key:"target",ref:O},[s("a",{class:"orders-list-more-dropdown-link",onClick:V(o=>{k.value=t.n,x.value=!0},["stop"])},"\u0414\u0435\u0442\u0430\u043B\u0438 \u0437\u0430\u043A\u0430\u0437\u0430",8,St),s("a",{class:"orders-list-more-dropdown-link",onClick:V(o=>{k.value=t.n,x.value=!0,C.value=!1,q.value=!0},["stop"])},"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,xt),t.reserved?(a(),i("a",{key:0,class:"orders-list-more-dropdown-link",onClick:V(o=>{k.value=t.n,x.value=!0,C.value=!0,q.value=!1},["stop"])},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,Pt)):n("",!0),s("a",{class:"orders-list-more-dropdown-link",onClick:V(o=>Te(t),["stop"])},"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0443",8,It),t.checks.filter(o=>o.status===5||o.status===9)&&((z=t.checks)==null?void 0:z.filter(o=>o.status===5||o.status===9).length)>0?(a(),i("a",{key:1,class:"orders-list-more-dropdown-link",onClick:V(o=>Ie(t.n),["stop"])}," \u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u043F\u0440\u0435\u0442\u0435\u043D\u0437\u0438\u044E ",8,Lt)):n("",!0),E(m,{class:"orders-list-more-dropdown-link",to:"/shipments/request",onClick:o=>xe(t.n)},{default:ge(()=>[Bt]),_:2},1032,["onClick"]),s("a",{class:"orders-list-more-dropdown-link",onClick:V(o=>Pe(t.n),["stop"])},"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u041A\u041F",8,Tt)],2)],4)):n("",!0)],8,kt)):n("",!0),le(g)?(a(),i("div",{key:1,class:p(["orders-list-info",{active:g===_.value}]),onClick:e[19]||(e[19]=o=>M.value=-1)},[Array.isArray(t.checks)&&t.checks.length>0&&t.status_code!==7&&t.status_code!==9?(a(),i("div",Vt,[(a(!0),i(Z,null,Q(t.checks,(o,ee)=>{var de,ve,ce,me,fe;return a(),i("div",{class:"orders-list-info-row",key:ee},[s("div",Rt,w(Se(t.partner_guid,o.organization_id)),1),s("div",Mt,[(de=o.doc_status)!=null&&de.StatusSchet?(a(),i("div",Ut,[s("div",{class:"orders-list-info-download",onClick:he=>De(o.guid)},[s("span",null," \u0421\u0447\u0451\u0442 \u043E\u0442 "+w(t.date.substring(0,10)),1),D.value.includes(o.guid)?(a(),G(K,{key:0,small:""})):n("",!0)],8,Ft),qt])):(a(),i("div",Nt,[s("div",zt," \u0421\u0447\u0451\u0442 \u043E\u0442 "+w(t.date.substring(0,10)),1),Gt]))]),o.doc_status?(a(),i("div",jt,[(ve=o.doc_status)!=null&&ve.StatusSchet?(a(),i("a",{key:0,class:"orders-list-info-doc sc",href:`${r(I)}/api/order/print?id=${o.guid}&name=\u0421\u0447\u0435\u0442`,target:"_blank",title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0447\u0435\u0442"},null,8,Jt)):n("",!0),(ce=o.doc_status)!=null&&ce.StatusUPD?(a(),i("a",{key:1,class:"orders-list-info-doc upd",href:`${r(I)}/api/order/print?id=${o.guid}&name=\u0423\u041F\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0435\u0440\u0435\u0434\u0430\u0442\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,Wt)):n("",!0),(me=o.doc_status)!=null&&me.StatusSF?(a(),i("a",{key:2,class:"orders-list-info-doc sf",href:`${r(I)}/api/order/print?id=${o.guid}&name=\u0421\u0424`,target:"_blank",title:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043A\u0442\u0443\u0440\u0430"},null,8,Zt)):n("",!0),(fe=o.doc_status)!=null&&fe.StatusUPK?(a(),i("a",{key:3,class:"orders-list-info-doc kor",href:`${r(I)}/api/order/print?id=${o.guid}&name=\u0423\u041A\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,Qt)):n("",!0)])):(a(),i("div",Kt,[E(K,{small:""})])),s("div",Xt,[A(w(r(S)[o.status]?r(S)[o.status].name:"")+" ",1),r(S)[o.status]?(a(),i("div",{key:0,class:p("orders-list-elem-status small "+(o.status>=0&&o.status<r(S).length?r(S)[o.status].class:"")),flow:"up"},null,2)):n("",!0)]),s("div",Yt,[o.status!==10?(a(),i("div",Ht,[N.value===o.id?(a(),G(K,{key:0,small:""})):(a(),i("span",{key:1,onClick:he=>Le(t.n,o)},"\u0417\u0430\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u0441\u0447\u0435\u0442",8,eu))])):n("",!0),s("div",tu,[s("span",{onClick:he=>Be(o)},"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B",8,uu)])])])}),128))])):(a(),i("div",su,au))],2)):n("",!0)],2)}),128)),r(J).length===0&&!$.loading?(a(),i("div",iu,[s("div",ou,[ru,E(m,{class:"order-info-link",to:"/order"},{default:ge(()=>[nu]),_:1}),du])])):n("",!0)]),$.loading?(a(),G(K,{key:0,style:{width:"100%"}})):n("",!0),b.value?(a(),G(Ze,{key:1})):n("",!0),E(lt,{modelValue:x.value,"onUpdate:modelValue":e[20]||(e[20]=t=>x.value=t),orderId:k.value,repeatOrder:q.value,"onUpdate:repeatOrder":e[21]||(e[21]=t=>q.value=t),editOrder:C.value,"onUpdate:editOrder":e[22]||(e[22]=t=>C.value=t)},null,8,["modelValue","orderId","repeatOrder","editOrder"])],32)}}}),cu={class:"top-line product-page"},mu={class:"orders-heading"},fu={class:"orders-heading-elem"},hu={class:"orders-heading-item"},pu=s("div",{class:"orders-heading-text"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442:",-1),_u={class:"orders-heading-item"},gu=s("div",{class:"orders-heading-text"},"\u0421\u0442\u0430\u0442\u0443\u0441:",-1),wu={class:"orders-heading-item"},Cu=s("div",{class:"orders-heading-text"},"\u041F\u0435\u0440\u0438\u043E\u0434:",-1),yu={key:0,class:"orders-heading-elem"},Eu={key:1},Fu=ue({__name:"OrdersPage",setup($){const v=Ee(),f=d(!0),P=d({id:1,search:""}),b=j(()=>v.getters.getCompanysList),_=d(0),M=j(()=>v.getters.getCompanyFromOrders()),O=d(""),x=j(()=>v.getters.getOrdersDataPeriodArray),D=d(0),k=d(!1),h=()=>{k.value==!1&&(k.value=!0,v.dispatch(F.GET_ORDERS).finally(()=>{k.value=!1,f.value=!0,f.value=!1}))};return be(()=>{v.dispatch(F.GET_ORDERS).finally(()=>{f.value=!1}),v.getters.isCompanysLoad||v.dispatch(Xe.GET_COMPANYS).then(()=>{})}),(q,C)=>{var I;return a(),i("div",null,[s("div",cu,[E(r(tt),{data:r(b),modelValue:O.value,"onUpdate:modelValue":C[0]||(C[0]=c=>O.value=c)},null,8,["data","modelValue"]),E(r(Ye)),E(r(He))]),E(r(et),{newOrder:""}),s("div",mu,[s("div",fu,[s("div",hu,[pu,E(r(X),{data:r(M),modelValue:O.value,"onUpdate:modelValue":C[1]||(C[1]=c=>O.value=c)},null,8,["data","modelValue"])]),s("div",_u,[gu,E(r(X),{data:r(te),modelValue:_.value,"onUpdate:modelValue":C[2]||(C[2]=c=>_.value=c)},null,8,["data","modelValue"])]),s("div",wu,[Cu,E(r(X),{data:r(x),modelValue:D.value,"onUpdate:modelValue":C[3]||(C[3]=c=>D.value=c)},null,8,["data","modelValue"])]),s("div",{class:"orders-heading-clean",title:"\u0423\u0431\u0440\u0430\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B",onClick:C[4]||(C[4]=c=>{O.value="",D.value=0,_.value=0})})]),f.value?n("",!0):(a(),i("div",yu,[s("button",{class:"product-search-btn gradient-btn",onClick:C[5]||(C[5]=c=>h())},[k.value?(a(),G(r(K),{key:0,small:""})):(a(),i("div",Eu,"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"))])]))]),E(r(vu),{loading:f.value,contrAgent:O.value,period:r(x)[D.value].name,status:(I=r(te).find(c=>c.id===_.value))==null?void 0:I.name,search:P.value,refresh:k.value},null,8,["loading","contrAgent","period","status","search","refresh"])])}}});export{Fu as default};
