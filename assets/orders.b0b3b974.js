import{N as ne,_ as de}from"./PersonalBar.37b1a68e.js";import{_ as ce}from"./CompanyBarTop.730740c7.js";import{_ as ve}from"./TopNav.186fc368.js";import{S as z}from"./SelectInput.2e8cccc5.js";import{d as j,g as p,z as ee,i as I,_ as he,o as r,b as i,a as e,x as E,t as A,F as R,e as Y,k as F,f as te,M as me,I as L,r as pe,l as k,u as h,Q as _e,j as y,n as fe,ad as M,w as X,c as T,ag as ge,Y as we,af as Ce,ah as De,ai as Ae,aj as ke,B as ye,ak as G,h as Ee,p as $e}from"./index.60f7e3bc.js";import{P as N}from"./PreloaderLocal.bc6a7cef.js";import{O as U,M as xe,a as Oe}from"./types.77a00c0b.js";import{_ as Be}from"./CatalogPagination.12fc8655.js";import"./DeleteButton.7fd214f8.js";import"./OrderDraftCard.0d025998.js";const Ve=j({props:{show:{type:Boolean,default:!0},modelValue:{type:String,default:""},error:{type:Boolean,default:!1}},emits:["update:modelValue","update:show","onInput"],setup(o,{emit:l}){const m=p(0),V=p(null);ee(V,()=>l("update:show",!1));const O=I(()=>o.modelValue?o.modelValue:""),d=I(()=>{let _=new Date;_.setHours(0,0,0,0);let s=new Date;o.modelValue!=""&&(s=new Date(parseInt(o.modelValue.substr(6,4)),parseInt(o.modelValue.substr(3,2))-1,parseInt(o.modelValue.substr(0,2)))),s.setMonth(s.getMonth()+m.value),s=new Date(s.toISOString().substr(0,7)+"-01");let f=s.toLocaleString("default",{month:"long"});f=f.charAt(0).toUpperCase()+f.slice(1);let C=s.getMonth(),n=s.getFullYear(),B=[],v=[];s=new Date(s.getFullYear(),s.getMonth(),s.getDay()==1?-6:2-s.getDay());for(let g=1;g<=42;g++){let w=s.getDate(),S=!1;o.modelValue!=""&&(S=s.getTime()===new Date(parseInt(o.modelValue.substr(6,4)),parseInt(o.modelValue.substr(3,2))-1,parseInt(o.modelValue.substr(0,2))).getTime()),v.push({day:w,disable:s.getMonth()!=C,today:s.getMonth()==_.getMonth()&&s.getDate()==_.getDate()&&s.getFullYear()==_.getFullYear(),select:S}),s=new Date(s.getFullYear(),s.getMonth(),w+1),g%7==0&&(B.push(v),v=[])}return{year:n,month:{month:f,month_int:C},dateArr:B}});return{select_date:(_,s,f)=>{let C=new Date(_,s,f);m.value=0,l("update:modelValue",C.toLocaleString("ru").substr(0,10)),l("onInput"),l("update:show",!1)},dateText:O,genDay:d,target:V,delta:m}}}),Se={class:"modal-datepicker",ref:"target"},be={class:"ui-datepicker-date"},Pe=["value"],Ie={class:E("ui-datepicker active")},Fe={class:"ui-datepicker-header"},Le=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 0.71186 -0.702321 0.71186 11.8181 0)",fill:"#53565B"},null,-1),Ue=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 -0.71186 -0.702321 -0.71186 11.8181 24)",fill:"#53565B"},null,-1),Me=[Le,Ue],Te={class:"ui-datepicker-title"},Ne={class:"ui-datepicker-month"},Re=F("\xA0"),Ye={class:"ui-datepicker-year"},ze=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 0.71186 0.702322 0.71186 1.73828 0)",fill:"#53565B"},null,-1),Ge=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 -0.71186 0.702322 -0.71186 1.73828 24)",fill:"#53565B"},null,-1),je=[ze,Ge],qe={class:"ui-datepicker-calendar"},Ke=e("thead",null,[e("tr",null,[e("th",{scope:"col"},[e("span",{title:"\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A"},"\u041F\u043D")]),e("th",{scope:"col"},[e("span",{title:"\u0432\u0442\u043E\u0440\u043D\u0438\u043A"},"\u0412\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0440\u0435\u0434\u0430"},"\u0421\u0440")]),e("th",{scope:"col"},[e("span",{title:"\u0447\u0435\u0442\u0432\u0435\u0440\u0433"},"\u0427\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u043F\u044F\u0442\u043D\u0438\u0446\u0430"},"\u041F\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0443\u0431\u0431\u043E\u0442\u0430"},"\u0421\u0431")]),e("th",{scope:"col",class:"ui-datepicker-week-end"},[e("span",{title:"\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435"},"\u0412\u0441")])])],-1),We=["onClick"];function Ze(o,l,m,V,O,d){return r(),i("div",{class:E("modal-datepicker-wrap"+(o.show?" show":"")),ref:"target"},[e("div",Se,[e("div",be,[e("input",{class:E("active"),type:"text",placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",name:"date",autocomplete:"off",readonly:"",value:o.dateText,onFocus:l[0]||(l[0]=$=>o.active=!0)},null,40,Pe),e("div",{class:"ui-datepicker-date-clear",onClick:l[1]||(l[1]=$=>o.modelValue==""?o.$emit("update:show",!1):o.$emit("update:modelValue",""))}),e("div",Ie,[e("div",Fe,[(r(),i("svg",{class:"ui-datepicker-prev",title:"<\u041F\u0440\u0435\u0434",onClick:l[2]||(l[2]=$=>o.delta=o.delta-1),width:"13",height:"24",viewBox:"0 0 13 24",xmlns:"http://www.w3.org/2000/svg"},Me)),e("div",Te,[e("span",Ne,A(o.genDay.month.month),1),Re,e("span",Ye,A(o.genDay.year),1)]),(r(),i("svg",{class:"ui-datepicker-next",title:"\u0421\u043B\u0435\u0434>",onClick:l[3]||(l[3]=$=>o.delta=o.delta+1),width:"14",height:"24",viewBox:"0 0 14 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},je))]),e("table",qe,[Ke,e("tbody",null,[(r(!0),i(R,null,Y(o.genDay.dateArr,($,_)=>(r(),i("tr",{key:_},[(r(!0),i(R,null,Y($,(s,f)=>(r(),i("td",{key:f,class:E((s.disable?" disable":"")+(s.today?" today":"")+(s.select?" select":"")),onClick:C=>s.disable?"":o.select_date(o.genDay.year,o.genDay.month.month_int,s.day)},[e("span",null,A(s.day),1)],10,We))),128))]))),128))])])])])],512)],2)}var He=he(Ve,[["render",Ze]]);const Qe={class:"orders-list-wrap"},Je={class:"orders-heading-info"},Xe={class:"orders-heading-pagination"},et={class:"orders-list"},tt={class:"orders-list-row orders-list-heading"},ut=e("div",{class:"orders-list-elem"},"\u2116",-1),st=e("div",null,"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),at=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),lt=[at],ot=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),rt=[ot],it=e("div",null,"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F",-1),nt=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),dt=[nt],ct=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),vt=[ct],ht=e("div",{class:"orders-list-elem"},"\u0418\u043D\u0444\u043E",-1),mt=["onClick"],pt={class:"orders-list-elem"},_t=e("div",{class:"table-arrow"},null,-1),ft={class:"orders-list-elem"},gt={class:"orders-list-elem"},wt={class:"orders-list-elem"},Ct={class:"orders-list-elem"},Dt={class:"orders-list-elem"},At={class:"orders-list-elem"},kt=["onClick"],yt=["onClick"],Et=["onClick"],$t=["onClick"],xt=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B",-1),Ot=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B",-1),Bt=["onClick"],Vt=e("span",null,"\u0417\u0430\u044F\u0432\u043A\u0430 \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442",-1),St={key:0},bt={class:"orders-list-info-elem"},Pt={class:"orders-list-info-elem"},It={key:0,class:"orders-list-info-about tooltip"},Ft=["onClick"],Lt=e("span",{class:"tooltiptext"},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442",-1),Ut={key:1,class:"orders-list-info-about tooltip"},Mt={class:"orders-list-info-download disable"},Tt=e("span",{class:"tooltiptext"},[F("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442 \u043C\u043E\u0436\u043D\u043E \u0442\u043E\u043B\u044C\u043A\u043E "),e("br"),F(" \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430")],-1),Nt={key:0,class:"orders-list-info-elem orders-list-info-doc-wrap"},Rt={key:1,class:"orders-list-info-elem orders-list-info-doc-wrap"},Yt=["href"],zt=["href"],Gt=["href"],jt=["href"],qt={class:"orders-list-info-elem"},Kt=e("div",{class:"orders-list-info-elem"},null,-1),Wt={key:1,class:"orders-list-info-row"},Zt=ye('<div class="orders-list-info-elem"></div><div class="orders-list-info-elem"> \u0421\u0447\u0435\u0442 \u043E\u0442\u0441\u0443\u0442\u0432\u0443\u0435\u0442 </div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div>',6),Ht=[Zt],Qt={key:0,class:"orders-list-row orders-list-main-row"},Jt={class:"order-info"},Xt=F(" \u0417\u0430\u043A\u0430\u0437\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 "),eu=F("\u043D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437"),tu=F(" \u0438 \u043E\u043D \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0432 \u0441\u043F\u0438\u0441\u043A\u0435. "),uu=j({__name:"OrdersListCard",props:{contrAgent:{type:String},period:{type:String},status:{type:String},loading:{type:Boolean,default:!1},search:{type:Object,required:!0},refresh:{type:Boolean,default:!1}},setup(o){const l=o,m=te(),V=me(),O=p(!1),d=p(-1),$=p(-1),_=p(null),s=p(!1),f=p([]),C=p(-1),n=p([{name:"id",value:"",show:!1},{name:"name",value:"",show:!1},{name:"date",value:"",show:!1}]),B=p(!1),v=p(!1),g="http://91.232.12.198:82",w=p({maxItemOnPage:10,currentPage:1});ee(_,()=>{$.value=-1});let S=I(()=>m.getters.getOrders);const q=()=>{var a;if(d.value!=-1&&b.value&&Array.isArray(b.value[d.value].checks)){let t=(a=b.value[d.value].checks)==null?void 0:a.map(x=>x.doc_status?null:m.dispatch(G.GET_ORDERS_DOCSTATUS,x.guid));t&&Promise.all(t).finally(()=>{})}};L(d,()=>{q()}),L(()=>l.status,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.contrAgent,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.search,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.period,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.refresh,(a,t)=>{t==!0&&a==!1&&q()});const b=I(()=>{let a=S.value.filter(t=>l.contrAgent==""||t.partner_guid==l.contrAgent);return a=a.filter(t=>ue(t.date)),a=a.filter(t=>se(t)),a=a.filter(t=>P(t)),n.value[1].value!=""&&(a=a.filter(t=>t.name.indexOf(n.value[1].value)!=-1)),n.value[2].value!=""&&(a=a.filter(t=>t.date.indexOf(n.value[2].value)!=-1)),a}),K=a=>w.value.maxItemOnPage!=-1?a>=(w.value.currentPage-1)*w.value.maxItemOnPage&&a<w.value.currentPage*w.value.maxItemOnPage:!0,P=a=>{if(l.search.search=="")return!0;switch(l.search.id){case 1:return a.name.toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;case 2:return String(a.n).toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;case 3:return a.date.toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;default:return!0}},ue=a=>{var t;if(l.period=="\u0412\u0441\u0435")return!0;{const x=(t=l.period)==null?void 0:t.split(" - ")[0],u=x==null?void 0:x.substring(6,10),D=x==null?void 0:x.substring(3,5);return u==a.substring(6,10)&&D==a.substring(3,5)}},se=a=>l.status=="\u0412\u0441\u0435"?!0:Array.isArray(a.checks)?a.checks.findIndex(t=>U[parseInt(t.status+1)]?l.status==U[parseInt(t.status+1)].name:!1)!=-1:!1,ae=a=>{f.value.push(a),m.dispatch(ge.GET_BILL_FILE_SAVE,a).finally(()=>{f.value=f.value.filter(t=>t!==a)})},le=(a,t)=>{const u=m.getters.getCompanyStoragesData(a).find(D=>D.guid==t);return u?u.name.replace(/(^|\s)\S/g,D=>D.toUpperCase()).replace(/(ООО)|(")|(\s)|([а-я])/g,""):"\u0421\u043A\u043B\u0430\u0434"},oe=a=>{m.commit(we.SET_CURRENT_ORDER,a)},re=a=>{O.value=!0,m.commit(Ce.CLEAN_ORDER_DETAIL),m.commit(De.CLEAR_CLAIMS_NEW),m.dispatch(Ae.ADD_CLAIMS_NEW,a).then(()=>{O.value=!1,V.push("/claims/request")})};return(a,t)=>{const x=pe("router-link");return r(),i("div",Qe,[e("div",Je,[e("div",Xe,[k(Be,{maxPage:w.value.maxItemOnPage!=-1?Math.ceil(h(b).length/w.value.maxItemOnPage):1,currentPage:w.value.currentPage,"onUpdate:currentPage":t[0]||(t[0]=u=>w.value.currentPage=u),maxItemOnPage:w.value.maxItemOnPage,"onUpdate:maxItemOnPage":t[1]||(t[1]=u=>w.value.maxItemOnPage=u)},null,8,["maxPage","currentPage","maxItemOnPage"])]),e("div",{class:"orders-heading-info-text",style:_e(h(b).length!=h(S).length?"visibility: visible":"visibility: hidden")}," \u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E "+A(h(b).length)+" \u0438\u0437 "+A(h(S).length),5)]),e("div",et,[e("div",tt,[ut,e("div",{class:E("orders-list-elem"+(P.search!=""&&P.id==1?" active":"")+(n.value[1].value!=""?" active":""))},[k(xe,{modelValue:n.value[1].value,"onUpdate:modelValue":t[2]||(t[2]=u=>n.value[1].value=u),show:n.value[1].show,"onUpdate:show":t[3]||(t[3]=u=>n.value[1].show=u)},null,8,["modelValue","show"]),st,e("div",{class:E("orders-list-elem-filter"+(n.value[1].show||n.value[1].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:t[4]||(t[4]=u=>n.value[1].show=!0)},lt,2),n.value[1].value!=""?(r(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:t[5]||(t[5]=u=>{n.value[1].value="",d.value=-1})},rt)):y("",!0)],2),e("div",{class:E("orders-list-elem"+(o.contrAgent!=""?" active":""))},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",2),e("div",{class:E("orders-list-elem"+(P.search!=""&&P.id==2?" active":""))},"\u041D\u043E\u043C\u0435\u0440",2),e("div",{class:E("orders-list-elem"+(P.search!=""&&P.id==3?" active":"")+(o.period!="\u0412\u0441\u0435"?" active":"")+(n.value[2].value!=""?" active":""))},[k(He,{modelValue:n.value[2].value,"onUpdate:modelValue":t[6]||(t[6]=u=>n.value[2].value=u),show:n.value[2].show,"onUpdate:show":t[7]||(t[7]=u=>n.value[2].show=u)},null,8,["modelValue","show"]),it,e("div",{class:E("orders-list-elem-filter"+(n.value[2].show||n.value[2].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:t[8]||(t[8]=u=>n.value[2].show=!0)},dt,2),n.value[2].value!=""?(r(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:t[9]||(t[9]=u=>{n.value[2].value="",d.value=-1})},vt)):y("",!0)],2),e("div",{class:E("orders-list-elem"+(o.status!="\u0412\u0441\u0435"?" active":""))},"\u0421\u0442\u0430\u0442\u0443\u0441",2),ht]),(r(!0),i(R,null,Y(h(b),(u,D)=>(r(),i("div",{class:E(["orders-list-item",{active:D==d.value,reserved:u.reserved}]),key:D},[K(D)?(r(),i("div",{key:0,class:"orders-list-row orders-list-main-row",onClick:c=>D==d.value?d.value=-1:d.value=D},[e("div",pt,[F(A(D+1)+" ",1),_t]),e("div",ft,A(u.name),1),e("div",gt,A(h(fe)(u.partner_name)),1),e("div",wt,A(u.n),1),e("div",Ct,A(u.date),1),e("div",Dt,A(u.status),1),e("div",At,[e("button",{class:"orders-list-more",onClick:M(c=>$.value=D,["stop"])},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E",8,kt),e("div",{class:E("orders-list-more-dropdown"+(D==$.value?" active":"")),ref_for:!0,ref_key:"target",ref:_},[e("a",{class:"orders-list-more-dropdown-link",onClick:M(c=>{C.value=u.n,s.value=!0},["stop"])},"\u0414\u0435\u0442\u0430\u043B\u0438 \u0437\u0430\u043A\u0430\u0437\u0430",8,yt),e("a",{class:"orders-list-more-dropdown-link",onClick:M(c=>{C.value=u.n,s.value=!0,v.value=!1,B.value=!0},["stop"])},"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,Et),u.reserved?(r(),i("a",{key:0,class:"orders-list-more-dropdown-link",onClick:M(c=>{C.value=u.n,s.value=!0,v.value=!0,B.value=!1},["stop"])},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,$t)):y("",!0),xt,Ot,e("a",{class:"orders-list-more-dropdown-link",onClick:M(c=>re(u.n),["stop"])},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u043F\u0440\u0435\u0442\u0435\u043D\u0437\u0438\u044E",8,Bt),k(x,{class:"orders-list-more-dropdown-link",tag:"a",to:"/shipments/request",onClick:c=>oe(u.n)},{default:X(()=>[Vt]),_:2},1032,["onClick"])],2)])],8,mt)):y("",!0),K(D)?(r(),i("div",{key:1,class:E(["orders-list-info",{active:D==d.value}]),onClick:t[10]||(t[10]=c=>$.value=-1)},[Array.isArray(u.checks)&&u.checks.length>0&&u.status_code!="7"&&u.status_code!="9"?(r(),i("div",St,[(r(!0),i(R,null,Y(u.checks,(c,ie)=>{var W,Z,H,Q,J;return r(),i("div",{class:"orders-list-info-row",key:ie},[e("div",bt,A(le(u.partner_guid,c.organization_id)),1),e("div",Pt,[(W=c.doc_status)!=null&&W.StatusSchet?(r(),i("div",It,[e("div",{class:"orders-list-info-download",onClick:mu=>ae(c.guid)},[e("span",null," \u0421\u0447\u0451\u0442 \u043E\u0442 "+A(u.date.substring(0,10)),1),f.value.includes(u.guid)?(r(),T(N,{key:0,small:""})):y("",!0)],8,Ft),Lt])):(r(),i("div",Ut,[e("div",Mt," \u0421\u0447\u0451\u0442 \u043E\u0442 "+A(u.date.substring(0,10)),1),Tt]))]),c.doc_status?(r(),i("div",Rt,[(Z=c.doc_status)!=null&&Z.StatusSchet?(r(),i("a",{key:0,class:"orders-list-info-doc sc",href:`${h(g)}/api/order/print?id=${c.guid}&name=\u0421\u0447\u0435\u0442`,target:"_blank",title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0447\u0435\u0442"},null,8,Yt)):y("",!0),(H=c.doc_status)!=null&&H.StatusUPD?(r(),i("a",{key:1,class:"orders-list-info-doc upd",href:`${h(g)}/api/order/print?id=${c.guid}&name=\u0423\u041F\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0435\u0440\u0435\u0434\u0430\u0442\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,zt)):y("",!0),(Q=c.doc_status)!=null&&Q.StatusSF?(r(),i("a",{key:2,class:"orders-list-info-doc sf",href:`${h(g)}/api/order/print?id=${c.guid}&name=\u0421\u0424`,target:"_blank",title:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043A\u0442\u0443\u0440\u0430"},null,8,Gt)):y("",!0),(J=c.doc_status)!=null&&J.StatusUPK?(r(),i("a",{key:3,class:"orders-list-info-doc kor",href:`${h(g)}/api/order/print?id=${c.guid}&name=\u0423\u041A\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,jt)):y("",!0)])):(r(),i("div",Nt,[k(N,{small:""})])),e("div",qt,A(h(U)[c.status+1]?h(U)[c.status+1].name:""),1),Kt])}),128))])):(r(),i("div",Wt,Ht))],2)):y("",!0)],2))),128)),h(S).length==0&&!o.loading?(r(),i("div",Qt,[e("div",Jt,[Xt,k(x,{tag:"a",class:"order-info-link",to:"/order"},{default:X(()=>[eu]),_:1}),tu])])):y("",!0)]),o.loading?(r(),T(N,{key:0,style:{width:"100%"}})):y("",!0),O.value?(r(),T(ke,{key:1})):y("",!0),k(Oe,{modelValue:s.value,"onUpdate:modelValue":t[11]||(t[11]=u=>s.value=u),orderId:C.value,repeatOrder:B.value,"onUpdate:repeatOrder":t[12]||(t[12]=u=>B.value=u),editOrder:v.value,"onUpdate:editOrder":t[13]||(t[13]=u=>v.value=u)},null,8,["modelValue","orderId","repeatOrder","editOrder"])])}}}),su={class:"top-line product-page"},au={class:"orders-heading"},lu={class:"orders-heading-elem"},ou={class:"orders-heading-item"},ru=e("div",{class:"orders-heading-text"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442:",-1),iu={class:"orders-heading-item"},nu=e("div",{class:"orders-heading-text"},"\u0421\u0442\u0430\u0442\u0443\u0441:",-1),du={class:"orders-heading-item"},cu=e("div",{class:"orders-heading-text"},"\u041F\u0435\u0440\u0438\u043E\u0434:",-1),vu={key:0,class:"orders-heading-elem"},hu={key:1},Eu=j({__name:"orders",setup(o){const l=te(),m=p(!0),V=p({id:1,search:""}),O=I(()=>l.getters.getCompanysList),d=p(0),$=I(()=>l.getters.getCompanyFromOrders),_=p(""),s=I(()=>l.getters.getOrdersDataPeriodArray),f=p(0),C=p(!1),n=()=>{C.value==!1&&(C.value=!0,l.dispatch(G.GET_ORDERS).finally(()=>{C.value=!1,m.value=!0,m.value=!1}))};return Ee(()=>{l.dispatch(G.GET_ORDERS).finally(()=>{m.value=!1}),l.getters.isCompanysLoad||l.dispatch($e.GET_COMPANYS).then(()=>{})}),(B,v)=>(r(),i("div",null,[e("div",su,[k(ce,{data:h(O),modelValue:_.value,"onUpdate:modelValue":v[0]||(v[0]=g=>_.value=g)},null,8,["data","modelValue"]),k(ne),k(de)]),k(ve,{newOrder:""}),e("div",au,[e("div",lu,[e("div",ou,[ru,k(z,{data:h($),modelValue:_.value,"onUpdate:modelValue":v[1]||(v[1]=g=>_.value=g)},null,8,["data","modelValue"])]),e("div",iu,[nu,k(z,{data:h(U),modelValue:d.value,"onUpdate:modelValue":v[2]||(v[2]=g=>d.value=g)},null,8,["data","modelValue"])]),e("div",du,[cu,k(z,{data:h(s),modelValue:f.value,"onUpdate:modelValue":v[3]||(v[3]=g=>f.value=g)},null,8,["data","modelValue"])]),e("div",{class:"orders-heading-clean",title:"\u0423\u0431\u0440\u0430\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B",onClick:v[4]||(v[4]=g=>{_.value="",f.value=0,d.value=0})})]),m.value?y("",!0):(r(),i("div",vu,[e("button",{class:"product-search-btn gradient-btn",onClick:v[5]||(v[5]=g=>n())},[C.value?(r(),T(N,{key:0,small:""})):(r(),i("div",hu,"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"))])]))]),k(uu,{loading:m.value,contrAgent:_.value,period:h(s)[f.value].name,status:h(U)[d.value].name,search:V.value,refresh:C.value},null,8,["loading","contrAgent","period","status","search","refresh"])]))}});export{Eu as default};
