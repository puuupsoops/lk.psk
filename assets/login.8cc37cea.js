import{d as A,h as p,j as d,b as h,u as s,a as o,p as i,w as L,k as V,U as w,ag as k,g as T,O as F,Y as S,a$ as m,H as y,s as z,P as B,b0 as M,o as g,av as R,aM as x}from"./index.586a5fbf.js";import{d as _,F as D,a as E,E as O}from"./vee-validate.esm.942bf727.js";var U="/assets/logo.a8cca4dc.png";const N={key:0,class:"authorization"},P={class:"authorization-body"},G=o("div",{class:"authorization-logo"},[o("img",{src:U,alt:"\u043B\u043E\u0433\u043E\u0442\u0438\u043F"})],-1),H={class:"authorization-check"},I=o("span",{class:"checkbox-custom"},null,-1),q=o("span",{class:"check-txt"},"\u0417\u0430\u043F\u043E\u043C\u043D\u0438\u0442\u044C \u043C\u0435\u043D\u044F",-1),W=["disabled"],Y=o("div",{class:"authorization-bottom"}," Produced by Expert Workwear ",-1),J=A({__name:"login",setup($){const e=T(),f=F(),a=p({login:"",password:""}),c=p(!1),l=d({get:()=>e.getters.getLoader,set:u=>e.commit(S.SET_LOADER,u)}),v=d(()=>e.getters.isAuthenticated),b=d(()=>e.getters.getLoginErrorMsg);_("required",u=>!u||!u.length?"\u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043F\u043E\u043B\u0435":!0),_("minLength",(u,[t])=>!u||!u.length?!0:u.length<t?`\u041C\u0438\u043D\u0438\u043C\u0443\u043C ${t} \u0441\u0438\u043C\u0432\u043E\u043B\u0430`:!0);let r=d({get:()=>e.getters.getLoginError,set:()=>e.commit(m.CLEAR_LOGIN_ERROR)}),C=()=>{l.value=!0,setTimeout(()=>{e.dispatch(y.LOGIN,a.value).then(()=>{c.value&&e.commit(m.SET_SAVE_AUTH),e.commit(m.SET_AUTH_LOGIN,a.value.login),Promise.all([e.dispatch(z.GET_COMPANYS),e.dispatch(B.GET_PROFILE)]).catch(()=>{a.value.password="",setTimeout(()=>{l.value=!1},3e3)}).finally(()=>{l.value=!1,e.dispatch(M.AUTH_WS),f.push({name:"Main"})})}).catch(()=>{a.value.password="",setTimeout(()=>{l.value=!1},3e3)})},500)};return(u,t)=>(g(),h("div",null,[s(v)?V("",!0):(g(),h("div",N,[o("div",P,[G,i(s(D),{onSubmit:s(C),class:"authorization-form"},{default:L(()=>[i(s(E),{as:"input",modelValue:a.value.login,"onUpdate:modelValue":t[0]||(t[0]=n=>a.value.login=n),class:"authorization-input",name:"Login",placeholder:"\u041B\u043E\u0433\u0438\u043D",autocomplete:"off",rules:"required|minLength:3"},null,8,["modelValue"]),i(s(O),{name:"Login"}),i(s(E),{as:"input",type:"password",modelValue:a.value.password,"onUpdate:modelValue":t[1]||(t[1]=n=>a.value.password=n),class:"authorization-input",name:"password",placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C",autocomplete:"off",rules:"required|minLength:3"},null,8,["modelValue"]),o("label",H,[R(o("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>c.value=n),class:"check-input",type:"checkbox",name:"remember"},null,512),[[x,c.value]]),I,q]),o("button",{class:"authorization-btn",type:"submit",disabled:s(l)},"\u0412\u043E\u0439\u0442\u0438",8,W)]),_:1},8,["onSubmit"])]),Y])),i(k,{modelValue:s(r),"onUpdate:modelValue":t[3]||(t[3]=n=>w(r)?r.value=n:r=n),message:s(b)},null,8,["modelValue","message"])]))}});export{J as default};
