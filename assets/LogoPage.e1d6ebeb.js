import{d as ne,h as i,V as be,J as le,i as Fe,o as O,b as D,a as u,R as ae,p as c,w as I,a_ as E,z as M,aR as Re,F as ue,f as Be,k as se,u as Oe,T as De,m as L,l as $e,_ as Se,j as Ve,ad as Ae,x as Pe,y as Ue,g as Ne,Y as Ye,ac as ze}from"./index.dcb9c74e.js";import{_ as oe}from"./BaseInput.6d65fea9.js";import{_ as He}from"./PersonalBar.effa6829.js";const Me={style:"display: flex; flex-direction: column;"},Te={xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 123.14 123.54"},Xe=u("title",null,"\u041E\u0442\u043A\u0440\u0435\u043F\u0438\u0442\u044C/\u0417\u0430\u043A\u0440\u0435\u043F\u0438\u0442\u044C \u043F\u0430\u043D\u0435\u043B\u044C",-1),We=L("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043B\u043E\u0433\u043E\u0442\u0438\u043F"),je={style:"display: flex; align-items: flex-end;"},Ze=L("\u{1F814}"),qe={style:{"max-width":"46px"}},Ge=L("\u{1F815}"),Je=L("\u{1F817}"),Ke=L("\u279D"),Qe=u("span",{style:"margin-bottom: 10px;"},"\u041C\u0430\u0441\u0448\u0442\u0430\u0431 \u043D\u0430\u043D\u0435\u0441\u0435\u043D\u0438\u044F",-1),et={style:"display: flex;"},tt=L("-"),lt=L("+"),at={style:{display:"flex","align-items":"center"}},ut=L("?"),ot=u("span",{style:"margin-bottom: 10px;"},"\u0423\u0433\u043E\u043B \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u0430",-1),nt={style:"display: flex;"},st=L("L"),vt=L("R"),it=L("\u0421\u043A\u0430\u0447\u0430\u0442\u044C"),dt={style:{display:"flex","margin-top":"105px"}},rt={class:"product-slider-wrap",style:{display:"block"}},ct=["src"],gt=$e('<div style="margin:auto;"><div style="position:relative;" width="720" height="1080"><canvas width="720" height="1080" style="z-index:-1;"></canvas><canvas id="canvas-back" width="720" height="1080" style="position:absolute;left:0;top:0;z-index:0;"></canvas><canvas id="canvas-front" width="720" height="1080" style="position:absolute;left:0;top:0;z-index:1;"></canvas></div></div><span style="display:none;"><canvas id="c1" width="720" height="1080"></canvas></span>',2),pt=ne({__name:"LogoApplicationSinglePage",props:{active:{type:Boolean,default:!1},images:{type:Array,require:!0}},setup($){const b=$,F=i(!1);let h=i([]);const N=()=>{const l=h.value.shift();h.value=h.value.concat(l)},Y=()=>{const l=h.value.pop();h.value=[l].concat(h.value)};be(()=>{var l;h.value=[],(l=b.images)==null||l.forEach((t,a)=>h.value.push({id:a,src:t.src}))});const A=i(),o=i(),e=i(),B=i(),_=i(),f=i(),k=i(),n=i(),s=i(),T=100,X=100,x=i(T),w=i(X),d=i(T),r=i(X),P=i(!1),g=i("50%"),v=i(0),ve=()=>{console.log("click")},ie=l=>{let t=l.target.value;(t>=360||t<=-360)&&(t=0),C.value=t,U.value=C.value.toString();let a=n.value+d.value/2,p=s.value+r.value/2;e.value.getContext("2d").translate(a,p),e.value.getContext("2d").rotate(C.value*Math.PI/180),e.value.getContext("2d").translate(-a,-p),e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value,r.value),e.value.getContext("2d").resetTransform()},de=l=>{console.log(l),g.value=g.value.replace("%","")},re=()=>{console.log("scaleFocusOutHandler"),console.log(g.value);let l=Number(g.value);if(l>100){v.value=1,g.value="100%",e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value=x.value+x.value*v.value,r.value=w.value+w.value*v.value);return}if(l<.01){v.value=-.99,g.value="0.01%",e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value=x.value+x.value*v.value,r.value=w.value+w.value*v.value);return}if(l==50){g.value="50%",v.value=0,e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value=x.value,r.value=w.value);return}let t=(l-50)/100;if(g.value+="%",console.log(t),l>50){v.value=Number(t.toFixed(2)),console.log(v.value),e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value=x.value+x.value*v.value,r.value=w.value+w.value*v.value),R();return}if(l<50){v.value=Number(t.toFixed(2)),console.log(v.value),e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value=x.value+x.value*v.value,r.value=w.value+w.value*v.value),R();return}g.value+="%"},W=l=>{console.log("scaleInputChange"),console.log(l);let t=g.value.replace("%",""),a=Number(t);console.log(a),a+=l*100/2,console.log(a),a%2==0?g.value=a.toString()+"%":g.value=a.toFixed(1)+"%"};le(g,()=>{console.log(g.value)});const S=i(),ce=l=>{console.log(l),ge(l)},ge=l=>{let t=new Image(f.value.width,f.value.height);t.onload=function(){f.value.getContext("2d").drawImage(t,0,0,f.value.width,f.value.height),f.value.getContext("2d").save()},t.crossOrigin="Anonymous",t.src=l+"?no-cache-please"},pe=l=>new Promise((t,a)=>{const p=new FileReader;p.readAsDataURL(l),p.onload=()=>t(p.result),p.onerror=H=>a(H)}),me=()=>{console.log("Image download"),k.value.getContext("2d").clearRect(0,0,k.value.width,k.value.height),k.value.getContext("2d").drawImage(f.value,0,0),k.value.getContext("2d").drawImage(e.value,0,0),k.value.toBlob(l=>{console.log(l);const t=window.URL.createObjectURL(l),a=document.createElement("a");a.href=t,a.setAttribute("download","image.png"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)})},fe=async()=>{if(S.value&&S.value.files){let l=await pe(S.value.files[0]);o.value=new Image,o.value.src=l,o.value.onload=()=>{let t=o.value.width,a=o.value.height;x.value=t,w.value=a,d.value=t,r.value=a,g.value="50%",v.value=0,console.log("Logo load",o.value),e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value,r.value),e.value.getContext("2d").save(),K()}}},he=()=>{S.value.click()},R=()=>{let l=n.value+d.value/2,t=s.value+r.value/2;e.value.getContext("2d").translate(l,t),e.value.getContext("2d").rotate(C.value*Math.PI/180),e.value.getContext("2d").translate(-l,-t),e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value,r.value),e.value.getContext("2d").resetTransform()},C=i(0),U=i(C.value.toString());le(C,()=>{(C.value>359||C.value<-359)&&(C.value=0),U.value=C.value.toString()});const j=l=>{l>0&&(l*=-1),q(l)},Z=l=>{q(l)},q=l=>{if(l==0)return;C.value=Number(C.value)+Number(l);let t=n.value+d.value/2,a=s.value+r.value/2;e.value.getContext("2d").translate(t,a),e.value.getContext("2d").rotate(C.value*Math.PI/180),e.value.getContext("2d").translate(-t,-a),e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value,r.value),e.value.getContext("2d").resetTransform()},G=l=>{console.log("zoomUp"),!(v.value>=1)&&(v.value=Number((v.value+l).toFixed(2)),console.log(v.value),e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value=x.value+x.value*v.value,r.value=w.value+w.value*v.value),R(),W(l))},J=l=>{console.log("zoomDown"),!(v.value<=-1)&&(v.value=Number((v.value-l).toFixed(2)),e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value=x.value+x.value*v.value,r.value=w.value+w.value*v.value),R(),W(l*-1))},K=()=>{e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),n.value++,e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value,r.value),R()},xe=()=>{e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),n.value--,e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value,r.value),R()},we=()=>{e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),s.value--,e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value,r.value),R()},Ce=()=>{e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),s.value++,e.value.getContext("2d").drawImage(o.value,n.value,s.value,d.value,r.value),R()},ye=()=>{let l=e.value.getBoundingClientRect();B.value=l.x,_.value=l.y,console.log("getFrontCanvasOffset X: ",B.value," Y: ",_.value)},z=l=>{l.preventDefault()};return Fe(async()=>{var te;(te=b.images)==null||te.forEach((m,y)=>h.value.push({id:y,src:m.src})),e.value=window.document.getElementById("canvas-front"),f.value=window.document.getElementById("canvas-back"),k.value=window.document.getElementById("c1");let l=window.document.getElementById("canvas-back"),t=window.document.getElementById("canvas-front");A.value=l.getContext("2d");const a=new Image(720,1080);a.onload=function(){var m,y;(m=l.getContext("2d"))==null||m.drawImage(a,0,0,720,1080),(y=l.getContext("2d"))==null||y.save()},a.crossOrigin="Anonymous",a.src=h.value[0].src;let p=!1,H=t.width/2,_e=t.height/2,Q=d.value,ee=r.value;n.value=H-Q/2,s.value=_e-ee/2,o.value=new Image,o.value.src="https://psk.expert/upload/lk-kp-logo-NOT-REMOVE.png",o.value.crossOrigin="Anonymous",o.value.onload=()=>{var m,y;(m=t.getContext("2d"))==null||m.drawImage(o.value,n.value,s.value,Q,ee),(y=t.getContext("2d"))==null||y.save()},t.onmousedown=m=>{ye();let y=m.clientX-B.value,V=m.clientY-_.value,ke=n.value,Ie=n.value+d.value,Ee=s.value,Le=s.value+r.value;y>ke&&y<Ie&&V>Ee&&V<Le?(p=!0,console.log("click Image"),window.addEventListener("wheel",z,{passive:!1})):console.log("didnt click Image"),console.log("isDraggable",p)},t.onmouseup=()=>{p=!1,window.removeEventListener("wheel",z,!1)},t.onmouseout=()=>{!p||(p=!1,window.removeEventListener("wheel",z,!1))},t.onmousemove=m=>{if(!p)return;let y=m.clientX-B.value-n.value-d.value/2,V=m.clientY-_.value-s.value-r.value/2;console.log("move x:",y," y: ",V),e.value.getContext("2d").clearRect(0,0,e.value.width,e.value.height),e.value.getContext("2d").drawImage(o.value,n.value+=y,s.value+=V,d.value,r.value),R()},t.onwheel=m=>{if(!!p)if(m.deltaY>0){if(console.log("wheel down",m.deltaY),P.value){j(-5);return}if(d.value<=10||r.value<=10)return;J(.05)}else{if(console.log("wheel up",m.deltaY),P.value){Z(5);return}if(d.value>=700||r.value>=800)return;G(.05)}}}),(l,t)=>(O(),D(ue,null,[u("div",{style:ae([F.value?"position: fixed; left: 50%; top: 28%; transform: translate(-50%, -50%);":"position: relative;"]),class:M("kp-canvas-controller")},[u("div",Me,[u("div",{style:"width: 24px; padding-bottom: 15px; cursor: pointer;",onClick:t[0]||(t[0]=a=>F.value=!F.value)},[(O(),D("svg",Te,[Xe,u("path",{style:ae([F.value?"fill: honeydew;":"fill: honeydew; opacity: 0.3;"]),class:"cls-1",d:"M121.59,36.81,86.3,1.52c-3-3-7.77.09-9.2,2.74-.24.45.19.86-.2,3.91a46.16,46.16,0,0,1-2.72,11.32l-15.7,15.7c-6.26,6.27-15.22,3.48-22.87-.32-1.61-.8-3.68-2.57-5.47-.78l-6.65,6.65a2.5,2.5,0,0,0,0,3.53l55.79,55.78a2.5,2.5,0,0,0,3.53,0l6.64-6.65c1.77-1.77-.49-4.06-1.41-6-3.4-7-6.45-16.42-.78-22.09L103.65,49A84.08,84.08,0,0,1,115,46.38c3.09-.49,3.47-.1,3.91-.39,2.7-1.75,5.7-6.16,2.68-9.18ZM53.86,82.39,41.15,69.69.38,121.25l1.92,1.91L53.86,82.39Z"},null,4)]))]),u("input",{ref_key:"file",ref:S,id:"myfile",type:"file",onChange:t[1]||(t[1]=a=>fe()),style:{display:"none"}},null,544),u("div",null,[c(E,{style:{width:"154px"},tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u0430\u0439\u043B \u0441 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C \u043D\u0430 \u0445\u043E\u043B\u0441\u0442",tooltipFlow:"up",onOnClick:t[2]||(t[2]=a=>he())},{default:I(()=>[We]),_:1})])]),u("div",je,[u("div",null,[c(E,{onOnClick:t[3]||(t[3]=a=>xe())},{default:I(()=>[Ze]),_:1})]),u("div",qe,[c(E,{onMousedown:t[4]||(t[4]=a=>we())},{default:I(()=>[Ge]),_:1}),c(E,{style:{"margin-top":"5px"},onOnClick:t[5]||(t[5]=a=>Ce())},{default:I(()=>[Je]),_:1})]),u("div",null,[c(E,{onOnClick:t[6]||(t[6]=a=>K())},{default:I(()=>[Ke]),_:1})])]),u("div",null,[Qe,u("div",et,[u("div",null,[c(E,{onOnClick:t[7]||(t[7]=a=>J(.01))},{default:I(()=>[tt]),_:1})]),u("div",null,[c(oe,{onClick:t[8]||(t[8]=a=>de(a)),onFocusout:t[9]||(t[9]=a=>re()),modelValue:g.value,"onUpdate:modelValue":t[10]||(t[10]=a=>g.value=a),class:M("input-text-field-modify")},null,8,["modelValue"])]),u("div",null,[c(E,{onOnClick:t[11]||(t[11]=a=>G(.01))},{default:I(()=>[lt]),_:1})])])]),u("div",at,[c(E,{style:{margin:"0","border-radius":"100px",width:"30px","min-width":"30px","min-height":"30px",height:"30px",cursor:"help"},active:!1,tooltip:"\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u0430 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043A\u043E\u043B\u0435\u0441\u043E\u043C \u043C\u044B\u0448\u0438",tooltipFlow:"up"},{default:I(()=>[ut]),_:1}),c(Re,{modelValue:P.value,"onUpdate:modelValue":t[12]||(t[12]=a=>P.value=a)},null,8,["modelValue"])]),u("div",null,[ot,u("div",nt,[u("div",null,[c(E,{onOnClick:t[13]||(t[13]=a=>j(-1))},{default:I(()=>[st]),_:1})]),u("div",null,[c(oe,{onClick:t[14]||(t[14]=a=>ve()),onFocusout:t[15]||(t[15]=a=>ie(a)),modelValue:U.value,"onUpdate:modelValue":t[16]||(t[16]=a=>U.value=a),class:M("input-text-field-modify")},null,8,["modelValue"])]),u("div",null,[c(E,{onOnClick:t[17]||(t[17]=a=>Z(1))},{default:I(()=>[vt]),_:1})])])]),u("div",null,[c(E,{onOnClick:t[18]||(t[18]=a=>me()),tooltip:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u043D\u0430 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E","tooltip-flow":"up",style:"background-color: oldlace;"},{default:I(()=>[it]),_:1})])],4),u("div",dt,[u("div",rt,[u("div",{style:{display:"flex"}},[u("button",{style:{margin:"10px auto","background-image":"url(/src/assets/img/icon/arrow-i-up.svg)"},class:"product-slider-arrow prev",onClick:N})]),c(De,{name:"product-slider-trans",class:"product-slider-small",tag:"div",style:{"flex-flow":"column","max-height":"960px",flex:"0 0 100%"}},{default:I(()=>[(O(!0),D(ue,null,Be(Oe(h),a=>(O(),D("div",{class:"product-slider-small-slide",style:{opacity:"1.0"},key:a.id},[a.src?(O(),D("img",{key:0,style:{"max-width":"146px"},src:a.src,onClick:t[19]||(t[19]=p=>ce(p.target.src))},null,8,ct)):se("",!0)]))),128))]),_:1}),u("div",{style:{display:"flex"}},[u("button",{style:{margin:"10px auto","background-image":"url(/src/assets/img/icon/arrow-i-down.svg)"},class:"product-slider-arrow next",onClick:Y})])]),gt])],64))}});const mt=$=>(Pe("data-v-42fff3a1"),$=$(),Ue(),$),ft={class:"top-line product-page"},ht=mt(()=>u("div",{class:"top-line-card-wrap header-lable"}," \u041C\u0430\u043A\u0435\u0442 \u043D\u0430\u043D\u0435\u0441\u0435\u043D\u0438\u044F \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u0430 ",-1)),xt={style:{position:"relative","z-index":"100"}},wt={key:0},Ct=ne({__name:"LogoPage",setup($){var B;const b=Ne(),F=i([]);(B=b.getters.getProductImages)==null||B.forEach((_,f)=>F.value.push({id:f,src:_}));const h=i(""),N=i("0"),Y=i("\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0430"),A=Ve({get:()=>b.getters.getLoader,set:_=>b.commit(Ye.SET_LOADER,_)}),o=i(""),e=_=>{console.log("search",_),A.value=!0,h.value=_,F.value=[],b.dispatch(ze.SEARCH_PRODUCT,h.value).then(()=>{var k;console.log(b.getters.getProduct);let f=b.getters.getProduct;Y.value=f.NAME,N.value=f.UID,(k=b.getters.getProductImages)==null||k.forEach((n,s)=>F.value.push({id:s,src:n}))}).finally(()=>{A.value=!1})};return(_,f)=>(O(),D("div",null,[u("div",ft,[ht,c(He)]),u("div",xt,[c(Ae,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=k=>o.value=k),onCatch:e},null,8,["modelValue"])]),F.value.length>0?(O(),D("div",wt,[c(pt,{images:F.value},null,8,["images"])])):se("",!0)]))}});var It=Se(Ct,[["__scopeId","data-v-42fff3a1"]]);export{It as default};
