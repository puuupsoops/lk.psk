import{N as de,_ as ce}from"./PersonalBar.09c57ab4.js";import{_ as ve}from"./CompanyBarTop.7b57c29d.js";import{T as he}from"./TopNav.3f495362.js";import{S as z}from"./SelectInput.28c5b3d3.js";import{d as q,g as p,z as ee,i as I,_ as me,o as r,b as i,a as e,y as E,t as y,F as R,e as Y,l as F,f as ue,O as pe,J as L,r as fe,m as k,u as h,Q as ge,j as A,n as _e,ab as M,w as X,c as T,k as te,ae as we,V as Ce,ad as De,af as ye,ag as ke,ah as Ae,B as Ee,ai as G,h as $e,q as Oe}from"./index.f5ab21cf.js";import{P as N}from"./PreloaderLocal.33fc7e63.js";import{O as U,M as xe,a as Be}from"./types.5cbef153.js";import{_ as Ve}from"./CatalogPagination.42082bc9.js";import"./DeleteButton.90f07585.js";import"./OrderDraftCard.6dcdc72e.js";const be=q({props:{show:{type:Boolean,default:!0},modelValue:{type:String,default:""},error:{type:Boolean,default:!1}},emits:["update:modelValue","update:show","onInput"],setup(o,{emit:l}){const m=p(0),V=p(null);ee(V,()=>l("update:show",!1));const x=I(()=>o.modelValue?o.modelValue:""),d=I(()=>{let f=new Date;f.setHours(0,0,0,0);let s=new Date;o.modelValue!=""&&(s=new Date(parseInt(o.modelValue.substr(6,4)),parseInt(o.modelValue.substr(3,2))-1,parseInt(o.modelValue.substr(0,2)))),s.setMonth(s.getMonth()+m.value),s=new Date(s.toISOString().substr(0,7)+"-01");let g=s.toLocaleString("default",{month:"long"});g=g.charAt(0).toUpperCase()+g.slice(1);let C=s.getMonth(),n=s.getFullYear(),B=[],v=[];s=new Date(s.getFullYear(),s.getMonth(),s.getDay()==1?-6:2-s.getDay());for(let _=1;_<=42;_++){let w=s.getDate(),b=!1;o.modelValue!=""&&(b=s.getTime()===new Date(parseInt(o.modelValue.substr(6,4)),parseInt(o.modelValue.substr(3,2))-1,parseInt(o.modelValue.substr(0,2))).getTime()),v.push({day:w,disable:s.getMonth()!=C,today:s.getMonth()==f.getMonth()&&s.getDate()==f.getDate()&&s.getFullYear()==f.getFullYear(),select:b}),s=new Date(s.getFullYear(),s.getMonth(),w+1),_%7==0&&(B.push(v),v=[])}return{year:n,month:{month:g,month_int:C},dateArr:B}});return{select_date:(f,s,g)=>{let C=new Date(f,s,g);m.value=0,l("update:modelValue",C.toLocaleString("ru").substr(0,10)),l("onInput"),l("update:show",!1)},dateText:x,genDay:d,target:V,delta:m}}}),Se={class:"modal-datepicker",ref:"target"},Pe={class:"ui-datepicker-date"},Ie=["value"],Fe={class:E("ui-datepicker active")},Le={class:"ui-datepicker-header"},Ue=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 0.71186 -0.702321 0.71186 11.8181 0)",fill:"#53565B"},null,-1),Me=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(0.702321 -0.71186 -0.702321 -0.71186 11.8181 24)",fill:"#53565B"},null,-1),Te=[Ue,Me],Ne={class:"ui-datepicker-title"},Re={class:"ui-datepicker-month"},Ye=F("\xA0"),ze={class:"ui-datepicker-year"},Ge=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 0.71186 0.702322 0.71186 1.73828 0)",fill:"#53565B"},null,-1),qe=e("rect",{width:"1.68273",height:"16.8273",rx:"0.841366",transform:"matrix(-0.702322 -0.71186 0.702322 -0.71186 1.73828 24)",fill:"#53565B"},null,-1),je=[Ge,qe],Ke={class:"ui-datepicker-calendar"},We=e("thead",null,[e("tr",null,[e("th",{scope:"col"},[e("span",{title:"\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A"},"\u041F\u043D")]),e("th",{scope:"col"},[e("span",{title:"\u0432\u0442\u043E\u0440\u043D\u0438\u043A"},"\u0412\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0440\u0435\u0434\u0430"},"\u0421\u0440")]),e("th",{scope:"col"},[e("span",{title:"\u0447\u0435\u0442\u0432\u0435\u0440\u0433"},"\u0427\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u043F\u044F\u0442\u043D\u0438\u0446\u0430"},"\u041F\u0442")]),e("th",{scope:"col"},[e("span",{title:"\u0441\u0443\u0431\u0431\u043E\u0442\u0430"},"\u0421\u0431")]),e("th",{scope:"col",class:"ui-datepicker-week-end"},[e("span",{title:"\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435"},"\u0412\u0441")])])],-1),Ze=["onClick"];function He(o,l,m,V,x,d){return r(),i("div",{class:E("modal-datepicker-wrap"+(o.show?" show":"")),ref:"target"},[e("div",Se,[e("div",Pe,[e("input",{class:E("active"),type:"text",placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",name:"date",autocomplete:"off",readonly:"",value:o.dateText,onFocus:l[0]||(l[0]=$=>o.active=!0)},null,40,Ie),e("div",{class:"ui-datepicker-date-clear",onClick:l[1]||(l[1]=$=>o.modelValue==""?o.$emit("update:show",!1):o.$emit("update:modelValue",""))}),e("div",Fe,[e("div",Le,[(r(),i("svg",{class:"ui-datepicker-prev",title:"<\u041F\u0440\u0435\u0434",onClick:l[2]||(l[2]=$=>o.delta=o.delta-1),width:"13",height:"24",viewBox:"0 0 13 24",xmlns:"http://www.w3.org/2000/svg"},Te)),e("div",Ne,[e("span",Re,y(o.genDay.month.month),1),Ye,e("span",ze,y(o.genDay.year),1)]),(r(),i("svg",{class:"ui-datepicker-next",title:"\u0421\u043B\u0435\u0434>",onClick:l[3]||(l[3]=$=>o.delta=o.delta+1),width:"14",height:"24",viewBox:"0 0 14 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},je))]),e("table",Ke,[We,e("tbody",null,[(r(!0),i(R,null,Y(o.genDay.dateArr,($,f)=>(r(),i("tr",{key:f},[(r(!0),i(R,null,Y($,(s,g)=>(r(),i("td",{key:g,class:E((s.disable?" disable":"")+(s.today?" today":"")+(s.select?" select":"")),onClick:C=>s.disable?"":o.select_date(o.genDay.year,o.genDay.month.month_int,s.day)},[e("span",null,y(s.day),1)],10,Ze))),128))]))),128))])])])])],512)],2)}var Je=me(be,[["render",He]]);const Qe={class:"orders-list-wrap"},Xe={class:"orders-heading-info"},eu={class:"orders-heading-pagination"},uu={class:"orders-list"},tu={class:"orders-list-row orders-list-heading"},su=e("div",{class:"orders-list-elem"},"\u2116",-1),au=e("div",null,"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),lu=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),ou=[lu],ru=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),iu=[ru],nu=e("div",null,"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F",-1),du=e("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),cu=[du],vu=e("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),e("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),hu=[vu],mu=e("div",{class:"orders-list-elem"},"\u0418\u043D\u0444\u043E",-1),pu=["onClick"],fu={class:"orders-list-elem"},gu=e("div",{class:"table-arrow"},null,-1),_u={class:"orders-list-elem"},wu={class:"orders-list-elem"},Cu={class:"orders-list-elem"},Du={class:"orders-list-elem"},yu={class:"orders-list-elem"},ku={class:"orders-list-elem"},Au=["onClick"],Eu=["onClick"],$u=["onClick"],Ou=["onClick"],xu=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B",-1),Bu=e("a",{class:"orders-list-more-dropdown-link"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B",-1),Vu=["onClick"],bu=e("span",null,"\u0417\u0430\u044F\u0432\u043A\u0430 \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442",-1),Su={key:0},Pu={class:"orders-list-info-elem"},Iu={class:"orders-list-info-elem"},Fu={key:0,class:"orders-list-info-about tooltip"},Lu=["onClick"],Uu=e("span",{class:"tooltiptext"},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442",-1),Mu={key:1,class:"orders-list-info-about tooltip"},Tu={class:"orders-list-info-download disable"},Nu=e("span",{class:"tooltiptext"},[F("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442 \u043C\u043E\u0436\u043D\u043E \u0442\u043E\u043B\u044C\u043A\u043E "),e("br"),F(" \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430")],-1),Ru={key:0,class:"orders-list-info-elem orders-list-info-doc-wrap"},Yu={key:1,class:"orders-list-info-elem orders-list-info-doc-wrap"},zu=["href"],Gu=["href"],qu=["href"],ju=["href"],Ku={class:"orders-list-info-elem"},Wu=e("div",{class:"orders-list-info-elem"},null,-1),Zu={key:1,class:"orders-list-info-row"},Hu=Ee('<div class="orders-list-info-elem"></div><div class="orders-list-info-elem"> \u0421\u0447\u0435\u0442 \u043E\u0442\u0441\u0443\u0442\u0432\u0443\u0435\u0442 </div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div>',6),Ju=[Hu],Qu={key:0,class:"orders-list-row orders-list-main-row"},Xu={class:"order-info"},et=F(" \u0417\u0430\u043A\u0430\u0437\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 "),ut=F("\u043D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437"),tt=F(" \u0438 \u043E\u043D \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0432 \u0441\u043F\u0438\u0441\u043A\u0435. "),st=q({__name:"OrdersListCard",props:{contrAgent:{type:String},period:{type:String},status:{type:String},loading:{type:Boolean,default:!1},search:{type:Object,required:!0},refresh:{type:Boolean,default:!1}},setup(o){const l=o,m=ue(te),V=pe(),x=p(!1),d=p(-1),$=p(-1),f=p(null),s=p(!1),g=p([]),C=p(-1),n=p([{name:"id",value:"",show:!1},{name:"name",value:"",show:!1},{name:"date",value:"",show:!1}]),B=p(!1),v=p(!1),_="http://91.232.12.198:82",w=p({maxItemOnPage:10,currentPage:1});ee(f,()=>{$.value=-1});let b=I(()=>m.getters.getOrders);const j=()=>{var a;if(d.value!=-1&&S.value&&Array.isArray(S.value[d.value].checks)){let u=(a=S.value[d.value].checks)==null?void 0:a.map(O=>O.doc_status?null:m.dispatch(G.GET_ORDERS_DOCSTATUS,O.guid));u&&Promise.all(u).finally(()=>{})}};L(d,()=>{j()}),L(()=>l.status,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.contrAgent,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.search,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.period,()=>{w.value.currentPage=1,d.value=-1}),L(()=>l.refresh,(a,u)=>{u==!0&&a==!1&&j()});const S=I(()=>{let a=b.value.filter(u=>l.contrAgent==""||u.partner_guid==l.contrAgent);return a=a.filter(u=>se(u.date)),a=a.filter(u=>ae(u)),a=a.filter(u=>P(u)),n.value[1].value!=""&&(a=a.filter(u=>u.name.indexOf(n.value[1].value)!=-1)),n.value[2].value!=""&&(a=a.filter(u=>u.date.indexOf(n.value[2].value)!=-1)),a}),K=a=>w.value.maxItemOnPage!=-1?a>=(w.value.currentPage-1)*w.value.maxItemOnPage&&a<w.value.currentPage*w.value.maxItemOnPage:!0,P=a=>{if(l.search.search=="")return!0;switch(l.search.id){case 1:return a.name.toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;case 2:return String(a.n).toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;case 3:return a.date.toUpperCase().indexOf(l.search.search.toUpperCase())!=-1;default:return!0}},se=a=>{var u;if(l.period=="\u0412\u0441\u0435")return!0;{const O=(u=l.period)==null?void 0:u.split(" - ")[0],t=O==null?void 0:O.substring(6,10),D=O==null?void 0:O.substring(3,5);return t==a.substring(6,10)&&D==a.substring(3,5)}},ae=a=>l.status=="\u0412\u0441\u0435"?!0:Array.isArray(a.checks)?a.checks.findIndex(u=>U[parseInt(u.status+1)]?l.status==U[parseInt(u.status+1)].name:!1)!=-1:!1,le=a=>{g.value.push(a),m.dispatch(we.GET_BILL_FILE_SAVE,a).finally(()=>{g.value=g.value.filter(u=>u!==a)})},oe=(a,u)=>{const t=m.getters.getCompanyStoragesData(a).find(D=>D.guid==u);return t?t.name.replace(/(^|\s)\S/g,D=>D.toUpperCase()).replace(/(ООО)|(")|(\s)|([а-я])/g,""):"\u0421\u043A\u043B\u0430\u0434"},re=a=>{m.commit(Ce.SET_CURRENT_ORDER,a)},ie=a=>{x.value=!0,m.commit(De.CLEAN_ORDER_DETAIL),m.commit(ye.CLEAR_CLAIMS_NEW),m.dispatch(ke.ADD_CLAIMS_NEW,a).then(()=>{x.value=!1,V.push("/claims/request")})};return(a,u)=>{const O=fe("router-link");return r(),i("div",Qe,[e("div",Xe,[e("div",eu,[k(Ve,{maxPage:w.value.maxItemOnPage!=-1?Math.ceil(h(S).length/w.value.maxItemOnPage):1,currentPage:w.value.currentPage,"onUpdate:currentPage":u[0]||(u[0]=t=>w.value.currentPage=t),maxItemOnPage:w.value.maxItemOnPage,"onUpdate:maxItemOnPage":u[1]||(u[1]=t=>w.value.maxItemOnPage=t)},null,8,["maxPage","currentPage","maxItemOnPage"])]),e("div",{class:"orders-heading-info-text",style:ge(h(S).length!=h(b).length?"visibility: visible":"visibility: hidden")}," \u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E "+y(h(S).length)+" \u0438\u0437 "+y(h(b).length),5)]),e("div",uu,[e("div",tu,[su,e("div",{class:E("orders-list-elem"+(P.search!=""&&P.id==1?" active":"")+(n.value[1].value!=""?" active":""))},[k(xe,{modelValue:n.value[1].value,"onUpdate:modelValue":u[2]||(u[2]=t=>n.value[1].value=t),show:n.value[1].show,"onUpdate:show":u[3]||(u[3]=t=>n.value[1].show=t)},null,8,["modelValue","show"]),au,e("div",{class:E("orders-list-elem-filter"+(n.value[1].show||n.value[1].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:u[4]||(u[4]=t=>n.value[1].show=!0)},ou,2),n.value[1].value!=""?(r(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:u[5]||(u[5]=t=>{n.value[1].value="",d.value=-1})},iu)):A("",!0)],2),e("div",{class:E("orders-list-elem"+(o.contrAgent!=""?" active":""))},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",2),e("div",{class:E("orders-list-elem"+(P.search!=""&&P.id==2?" active":""))},"\u041D\u043E\u043C\u0435\u0440",2),e("div",{class:E("orders-list-elem"+(P.search!=""&&P.id==3?" active":"")+(o.period!="\u0412\u0441\u0435"?" active":"")+(n.value[2].value!=""?" active":""))},[k(Je,{modelValue:n.value[2].value,"onUpdate:modelValue":u[6]||(u[6]=t=>n.value[2].value=t),show:n.value[2].show,"onUpdate:show":u[7]||(u[7]=t=>n.value[2].show=t)},null,8,["modelValue","show"]),nu,e("div",{class:E("orders-list-elem-filter"+(n.value[2].show||n.value[2].value!=""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:u[8]||(u[8]=t=>n.value[2].show=!0)},cu,2),n.value[2].value!=""?(r(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:u[9]||(u[9]=t=>{n.value[2].value="",d.value=-1})},hu)):A("",!0)],2),e("div",{class:E("orders-list-elem"+(o.status!="\u0412\u0441\u0435"?" active":""))},"\u0421\u0442\u0430\u0442\u0443\u0441",2),mu]),(r(!0),i(R,null,Y(h(S),(t,D)=>(r(),i("div",{class:E(["orders-list-item",{active:D==d.value,reserved:t.reserved}]),key:D},[K(D)?(r(),i("div",{key:0,class:"orders-list-row orders-list-main-row",onClick:c=>D==d.value?d.value=-1:d.value=D},[e("div",fu,[F(y(D+1)+" ",1),gu]),e("div",_u,y(t.name),1),e("div",wu,y(h(_e)(t.partner_name)),1),e("div",Cu,y(t.n),1),e("div",Du,y(t.date),1),e("div",yu,y(t.reserved?"\u0420\u0435\u0437\u0435\u0440\u0432":""),1),e("div",ku,[e("button",{class:"orders-list-more",onClick:M(c=>$.value=D,["stop"])},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E",8,Au),e("div",{class:E("orders-list-more-dropdown"+(D==$.value?" active":"")),ref_for:!0,ref_key:"target",ref:f},[e("a",{class:"orders-list-more-dropdown-link",onClick:M(c=>{C.value=t.n,s.value=!0},["stop"])},"\u0414\u0435\u0442\u0430\u043B\u0438 \u0437\u0430\u043A\u0430\u0437\u0430",8,Eu),e("a",{class:"orders-list-more-dropdown-link",onClick:M(c=>{C.value=t.n,s.value=!0,v.value=!1,B.value=!0},["stop"])},"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,$u),t.reserved?(r(),i("a",{key:0,class:"orders-list-more-dropdown-link",onClick:M(c=>{C.value=t.n,s.value=!0,v.value=!0,B.value=!1},["stop"])},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,Ou)):A("",!0),xu,Bu,e("a",{class:"orders-list-more-dropdown-link",onClick:M(c=>ie(t.n),["stop"])},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u043F\u0440\u0435\u0442\u0435\u043D\u0437\u0438\u044E",8,Vu),k(O,{class:"orders-list-more-dropdown-link",tag:"a",to:"/shipments/request",onClick:c=>re(t.n)},{default:X(()=>[bu]),_:2},1032,["onClick"])],2)])],8,pu)):A("",!0),K(D)?(r(),i("div",{key:1,class:E(["orders-list-info",{active:D==d.value}]),onClick:u[10]||(u[10]=c=>$.value=-1)},[Array.isArray(t.checks)&&t.checks.length>0?(r(),i("div",Su,[(r(!0),i(R,null,Y(t.checks,(c,ne)=>{var W,Z,H,J,Q;return r(),i("div",{class:"orders-list-info-row",key:ne},[e("div",Pu,y(oe(t.partner_guid,c.organization_id)),1),e("div",Iu,[(W=c.doc_status)!=null&&W.StatusSchet?(r(),i("div",Fu,[e("div",{class:"orders-list-info-download",onClick:pt=>le(c.guid)},[e("span",null," \u0421\u0447\u0451\u0442 \u043E\u0442 "+y(t.date.substring(0,10)),1),g.value.includes(t.guid)?(r(),T(N,{key:0,small:""})):A("",!0)],8,Lu),Uu])):(r(),i("div",Mu,[e("div",Tu," \u0421\u0447\u0451\u0442 \u043E\u0442 "+y(t.date.substring(0,10)),1),Nu]))]),c.doc_status?(r(),i("div",Yu,[(Z=c.doc_status)!=null&&Z.StatusSchet?(r(),i("a",{key:0,class:"orders-list-info-doc sc",href:`${h(_)}/api/order/print?id=${c.guid}&name=\u0421\u0447\u0435\u0442`,target:"_blank",title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0447\u0435\u0442"},null,8,zu)):A("",!0),(H=c.doc_status)!=null&&H.StatusUPD?(r(),i("a",{key:1,class:"orders-list-info-doc upd",href:`${h(_)}/api/order/print?id=${c.guid}&name=\u0423\u041F\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0435\u0440\u0435\u0434\u0430\u0442\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,Gu)):A("",!0),(J=c.doc_status)!=null&&J.StatusSF?(r(),i("a",{key:2,class:"orders-list-info-doc sf",href:`${h(_)}/api/order/print?id=${c.guid}&name=\u0421\u0424`,target:"_blank",title:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043A\u0442\u0443\u0440\u0430"},null,8,qu)):A("",!0),(Q=c.doc_status)!=null&&Q.StatusUPK?(r(),i("a",{key:3,class:"orders-list-info-doc kor",href:`${h(_)}/api/order/print?id=${c.guid}&name=\u0423\u041A\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,ju)):A("",!0)])):(r(),i("div",Ru,[k(N,{small:""})])),e("div",Ku,y(h(U)[c.status+1]?h(U)[c.status+1].name:""),1),Wu])}),128))])):(r(),i("div",Zu,Ju))],2)):A("",!0)],2))),128)),h(b).length==0&&!o.loading?(r(),i("div",Qu,[e("div",Xu,[et,k(O,{tag:"a",class:"order-info-link",to:"/order"},{default:X(()=>[ut]),_:1}),tt])])):A("",!0)]),o.loading?(r(),T(N,{key:0,style:{width:"100%"}})):A("",!0),x.value?(r(),T(Ae,{key:1})):A("",!0),k(Be,{modelValue:s.value,"onUpdate:modelValue":u[11]||(u[11]=t=>s.value=t),orderId:C.value,repeatOrder:B.value,"onUpdate:repeatOrder":u[12]||(u[12]=t=>B.value=t),editOrder:v.value,"onUpdate:editOrder":u[13]||(u[13]=t=>v.value=t)},null,8,["modelValue","orderId","repeatOrder","editOrder"])])}}}),at={class:"top-line product-page"},lt={class:"orders-heading"},ot={class:"orders-heading-elem"},rt={class:"orders-heading-item"},it=e("div",{class:"orders-heading-text"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442:",-1),nt={class:"orders-heading-item"},dt=e("div",{class:"orders-heading-text"},"\u0421\u0442\u0430\u0442\u0443\u0441:",-1),ct={class:"orders-heading-item"},vt=e("div",{class:"orders-heading-text"},"\u041F\u0435\u0440\u0438\u043E\u0434:",-1),ht={key:0,class:"orders-heading-elem"},mt={key:1},$t=q({__name:"orders",setup(o){const l=ue(te),m=p(!0),V=p({id:1,search:""}),x=I(()=>l.getters.getCompanysList),d=p(0),$=I(()=>l.getters.getCompanyFromOrders),f=p(""),s=I(()=>l.getters.getOrdersDataPeriodArray),g=p(0),C=p(!1),n=()=>{C.value==!1&&(C.value=!0,l.dispatch(G.GET_ORDERS).finally(()=>{C.value=!1,m.value=!0,m.value=!1}))};return $e(()=>{l.dispatch(G.GET_ORDERS).finally(()=>{m.value=!1}),l.getters.isCompanysLoad||l.dispatch(Oe.GET_COMPANYS).then(()=>{})}),(B,v)=>(r(),i("div",null,[e("div",at,[k(ve,{data:h(x),modelValue:f.value,"onUpdate:modelValue":v[0]||(v[0]=_=>f.value=_)},null,8,["data","modelValue"]),k(de),k(ce)]),k(he,{newOrder:""}),e("div",lt,[e("div",ot,[e("div",rt,[it,k(z,{data:h($),modelValue:f.value,"onUpdate:modelValue":v[1]||(v[1]=_=>f.value=_)},null,8,["data","modelValue"])]),e("div",nt,[dt,k(z,{data:h(U),modelValue:d.value,"onUpdate:modelValue":v[2]||(v[2]=_=>d.value=_)},null,8,["data","modelValue"])]),e("div",ct,[vt,k(z,{data:h(s),modelValue:g.value,"onUpdate:modelValue":v[3]||(v[3]=_=>g.value=_)},null,8,["data","modelValue"])]),e("div",{class:"orders-heading-clean",title:"\u0423\u0431\u0440\u0430\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B",onClick:v[4]||(v[4]=_=>{f.value="",g.value=0,d.value=0})})]),m.value?A("",!0):(r(),i("div",ht,[e("button",{class:"product-search-btn gradient-btn",onClick:v[5]||(v[5]=_=>n())},[C.value?(r(),T(N,{key:0,small:""})):(r(),i("div",mt,"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"))])]))]),k(st,{loading:m.value,contrAgent:f.value,period:h(s)[g.value].name,status:h(U)[d.value].name,search:V.value,refresh:C.value},null,8,["loading","contrAgent","period","status","search","refresh"])]))}});export{$t as default};
