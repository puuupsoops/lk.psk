import{_ as R,d as V,h as _,o as c,b as m,a as e,p as s,w as A,z as $,v as S,t as y,k as E,m as j,j as h,ab as x,u,x as Y,y as z,i as W,s as J,ac as I,J as K,ad as q,c as Q,ae as X,af as Z,ag as tt,g as et,O as ut,Y as at,ah as ot,ai as st}from"./index.dcb9c74e.js";import{N as dt}from"./Notification.0d4c93fb.js";import{_ as rt}from"./PersonalBar.effa6829.js";import{P as ct}from"./ProductSliderCard.ae679a2b.js";import{P as lt,a as nt}from"./ProductPropertiesCard.da0322cf.js";import"./CompanyCalendar.vue_vue_type_style_index_0_lang.ddf46665.js";import{_ as it}from"./CompanyBarTop.f446bf94.js";/* empty css                                                          */import{_ as pt}from"./TopNav.69bd43c5.js";import"./vee-validate.esm.0db74474.js";import"./object.ff72ba9f.js";const mt={class:"product-add-info content-elem content-elem-info"},vt={class:"content-elem-heading"},_t={key:0,class:"content-elem-bottom content-elem-desc content-hide"},gt=j(" \u0421\u043E\u043E\u0431\u0449\u0430\u0435\u043C \u0432\u0430\u043C \u0447\u0442\u043E \u0441\u043E\u0433\u043B\u0430\u0441\u043D\u043E \u041F\u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044E \u041F\u0440\u0430\u0432\u0438\u0442\u0435\u043B\u044C\u0441\u0442\u0432\u0430 \u0420\u043E\u0441\u0441\u0438\u0439\u0441\u043A\u043E\u0439 \u0424\u0435\u0434\u0435\u0440\u0430\u0446\u0438\u0438 \u2116 216 \u043E\u0442 29.02.2020 \u0434\u0430\u0442\u0430 \u0437\u0430\u043F\u0440\u0435\u0442\u0430 \u043E\u0431\u043E\u0440\u043E\u0442\u0430 \u043D\u0435\u043C\u0430\u0440\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0439 \u043E\u0431\u0443\u0432\u0438 \u043F\u0435\u0440\u0435\u043D\u0435\u0441\u0435\u043D\u0430 \u043D\u0430 1 \u0438\u044E\u043B\u044F 2020 \u0433\u043E\u0434\u0430. "),ft=["innerHTML"],ht=V({__name:"ProductAddInfoCard",props:{data:{type:Object}},setup(l){const a=_(!0);return(t,n)=>(c(),m("div",mt,[e("div",vt,[s(S,{name:"text",mode:"out-in"},{default:A(()=>[(c(),m("div",{key:a.value,class:$(a.value?"content-elem-heading-text":"hide-text")},"\u0414\u043E\u043F. \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B",2))]),_:1}),e("div",{class:"content-elem-heading-btn content-hide-btn",onClick:n[0]||(n[0]=r=>a.value=!a.value)},y(a.value?"\u0421\u043A\u0440\u044B\u0442\u044C \u2014":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C +"),1)]),s(S,{name:"fade"},{default:A(()=>[a.value?(c(),m("div",_t,[gt,e("div",{class:"video-area",innerHTML:l.data.VIDEO,style:"padding-top: 10px;"},null,8,ft)])):E("",!0)]),_:1})]))}});var Pt=R(ht,[["__scopeId","data-v-d90fad72"]]);const D=l=>(Y("data-v-68b8d31a"),l=l(),z(),l),Et={class:"product-parcel"},Ct={class:"product-parcel-wrap"},Dt={class:"product-parcel-elem content-elem"},yt={key:0,class:"content-hide"},It={class:"product-parcel-row"},At=D(()=>e("div",{class:"product-parcel-text"},"\u041D\u0430\u0446\u0435\u043D\u043A\u0430: ",-1)),St={class:"product-parcel-value"},Tt={class:"product-parcel-value-block"},Ot={class:"product-parcel-row"},$t=D(()=>e("div",{class:"product-parcel-text"},"\u0426\u0435\u043D\u0430 \u0441 \u043D\u0430\u0446\u0435\u043D\u043A\u043E\u0439: ",-1)),Vt={class:"product-parcel-value"},bt={key:0,class:"product-parcel-text"},kt={class:"product-parcel-elem content-elem"},xt={key:0,class:"content-hide"},Rt={class:"product-parcel-row"},Nt=D(()=>e("div",{class:"product-parcel-text"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E: ",-1)),Ut={class:"product-parcel-row"},wt=D(()=>e("div",{class:"product-parcel-text"},"\u0421\u0443\u043C\u043C\u0430: ",-1)),Bt={class:"product-parcel-value"},Ft={class:"product-parcel-row"},Lt=D(()=>e("div",{class:"product-parcel-text"},"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0432\u0435\u0441: ",-1)),Mt={class:"product-parcel-value"},Ht={class:"product-parcel-row"},Gt=D(()=>e("div",{class:"product-parcel-text"},"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1)),jt={class:"product-parcel-value"},Yt={key:0,class:"product-parcel-text"},zt=V({__name:"ProductParcelCard",props:{data:{type:Object},discount:{type:Number}},setup(l){const a=l,t=_(!0),n=_(1),r=_(0),g=_("percent"),P=h(()=>{var v;if((v=a.data)!=null&&v.PRICE_OPT){let d=a.discount?Number(a.data.PRICE_OPT)-Number(a.data.PRICE_OPT/100)*a.discount:a.data.PRICE_OPT;return g.value==="add"?Number(d)+Number(r.value):Number(d)+Number(d)/100*Number(r.value)}else return 0});return(v,d)=>(c(),m("div",Et,[e("div",Ct,[e("div",Dt,[s(S,{name:"fade1",mode:"out-in"},{default:A(()=>[t.value?(c(),m("div",yt,[e("div",It,[At,e("div",St,[e("div",Tt,[s(x,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=i=>r.value=i)},null,8,["modelValue"]),e("button",{class:$("product-parcel-btn"+(g.value==="percent"?" active":"")),onClick:d[1]||(d[1]=i=>g.value="percent")},"%",2),e("button",{class:$("product-parcel-btn"+(g.value==="add"?" active":"")),onClick:d[2]||(d[2]=i=>g.value="add")},"\u20BD",2)])])]),e("div",Ot,[$t,e("div",Vt,y(Number(u(P)).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1)])])):E("",!0)]),_:1}),t.value?E("",!0):(c(),m("div",bt,"\u041D\u0430\u0446\u0435\u043D\u043A\u0430"))]),e("div",kt,[s(S,{name:"fade2"},{default:A(()=>[t.value?(c(),m("div",xt,[e("div",Rt,[Nt,s(x,{modelValue:n.value,"onUpdate:modelValue":d[3]||(d[3]=i=>n.value=i)},null,8,["modelValue"])]),e("div",Ut,[wt,e("div",Bt,y(Number(u(P)*n.value).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1)]),e("div",Ft,[Lt,e("div",Mt,y((Number(l.data.WEIGHT?l.data.WEIGHT:0)*n.value).toFixed(3)),1)]),e("div",Ht,[Gt,e("div",jt,y((Number(l.data.VALUME?l.data.VALUME:0)*n.value).toFixed(3)),1)])])):E("",!0)]),_:1}),t.value?E("",!0):(c(),m("div",Yt,"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E"))])])]))}});var Wt=R(zt,[["__scopeId","data-v-68b8d31a"]]);const Jt={class:"top-line product-page"},Kt={key:0},qt=e("br",null,null,-1),Qt={key:1,class:"content-wrap content-product-wrap"},Xt={class:"content-wrap-elem"},Zt={class:"content-elem-desc"},te={class:"content-wrap-elem"},ee={key:1},ue={key:0},ve=V({__name:"ProductPage",props:{article:{type:String}},setup(l){const a=l,t=et(),n=ut(),r=h({get:()=>t.getters.getLoader,set:f=>t.commit(at.SET_LOADER,f)}),g=_(""),P=_(""),v=_(!1),d=_(!1),i=_(""),T=_([]),N=()=>{n.push({name:"Order"})};W(()=>{(!t.getters.isCompanysLoad||!t.getters.isManagerLoad)&&Promise.all([t.dispatch(J.GET_COMPANYS)]).finally(()=>{setTimeout(()=>{g.value=t.getters.getCompanys.length==0?"":t.getters.getCompanys[0].uid},500)}),a.article&&(r.value=!0,t.dispatch(I.SEARCH_PRODUCT,a.article).then(()=>{v.value=!0,t.getters.getProduct.ID?i.value=t.getters.getProduct.ID:n.push({name:"Product"})}).finally(()=>{r.value=!1}))}),K(()=>a.article,f=>{f&&(r.value=!0,t.dispatch(I.SEARCH_PRODUCT,a.article).then(()=>{v.value=!0,t.getters.getProduct.ID?i.value=t.getters.getProduct.ID:n.push({name:"Product"})}).finally(()=>{r.value=!1}))});const U=()=>{r.value=!0,t.dispatch(I.GET_PRODUCT_BY_ID,i.value).then(()=>{i.value=t.getters.getProduct.ID}).finally(()=>{r.value=!1})},b=()=>{v.value=!1,t.commit(st.SET_SEARCH_PRODUCT_CLEAR)},w=()=>{P.value.trim()!==""&&(b(),r.value=!0,t.dispatch(I.SEARCH_PRODUCT,P.value).then(()=>{v.value=!0,i.value=t.getters.getProduct.ID}).finally(()=>{r.value=!1}))},B=()=>{b(),P.value="",n.push("/product")},F=()=>{const f={article:t.getters.getProduct.ARTICLE,guid:t.getters.getProduct.UID,product:t.getters.getProduct,characteristics:T.value};t.dispatch(ot.ADD_POSITION,f),d.value=!0},L=h(()=>t.getters.getCompanysList),M=h(()=>t.getters.getProductOffers),C=h(()=>t.getters.getProduct),k=h(()=>t.getters.getProductFound),H=h(()=>t.getters.getProductImages),G=h(()=>t.getters.getProductProtect),O=h(()=>{let f=t.getters.getProduct.STATUS;return f=="Outlet"||f=="Discount"||f=="Activity"?0:t.getters.getCompanyDiscount(g.value,t.getters.getProductOffersORGGUID)});return(f,o)=>(c(),m("div",null,[e("div",Jt,[s(u(it),{data:u(L),modelValue:g.value,"onUpdate:modelValue":o[0]||(o[0]=p=>g.value=p)},null,8,["data","modelValue"]),s(u(dt)),s(u(rt))]),s(u(pt),{catalog:""}),s(u(q),{modelValue:P.value,"onUpdate:modelValue":o[1]||(o[1]=p=>P.value=p),to:"product",onSearch:o[2]||(o[2]=p=>w())},null,8,["modelValue"]),u(k).length>0?(c(),m("div",Kt,[v.value?(c(),Q(u(lt),{key:0,title:String(u(C).NAME),price:String(u(C).PRICE_OPT),status:String(u(C).STATUS),discount:u(O),onShowSearch:o[3]||(o[3]=p=>B())},null,8,["title","price","status","discount"])):E("",!0),qt,v.value?(c(),m("div",Qt,[e("div",Xt,[s(u(X),{data:u(k),cardType:"search",modelValue:i.value,"onUpdate:modelValue":o[4]||(o[4]=p=>i.value=p),onOnClick:o[5]||(o[5]=p=>U())},null,8,["data","modelValue"]),e("div",Zt,[s(u(Z),{modelValue:T.value,"onUpdate:modelValue":o[6]||(o[6]=p=>T.value=p),data:u(M),discount:u(O),onOnClick:o[7]||(o[7]=p=>F())},null,8,["modelValue","data","discount"])]),s(u(Pt),{data:u(C)},null,8,["data"])]),e("div",te,[s(u(ct),{data:u(H),onToOrder:N},null,8,["data"]),s(u(Wt),{data:u(C),discount:u(O)},null,8,["data","discount"]),s(u(nt),{data:u(C),protect:u(G)},null,8,["data","protect"])])])):E("",!0)])):(c(),m("div",ee,[v.value?(c(),m("div",ue,"\u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")):E("",!0)])),s(u(tt),{modelValue:d.value,"onUpdate:modelValue":o[8]||(o[8]=p=>d.value=p),message:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0432 \u0437\u0430\u043A\u0430\u0437",timeout:5e3,notification:""},null,8,["modelValue"])]))}});export{ve as default};
