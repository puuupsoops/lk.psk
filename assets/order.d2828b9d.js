import{_ as de,N as ae}from"./PersonalBar.9b84b0fc.js";import{_ as ce}from"./CompanyBarTop.48f64128.js";import{_ as me}from"./TopNav.c2e2c6d8.js";import{P as he,c as ve,a as _e,b as pe}from"./ProductInfoCard.7270c383.js";import{P as fe}from"./PreloaderLocal.0fdb54b9.js";import{d as B,g as C,z as te,J as Y,i as E,_ as x,f as Z,a8 as j,a9 as Ae,r as k,o as s,b as o,a as e,aa as ge,ab as Ce,c as H,j as A,y as I,F as L,e as S,m as p,w as q,t as _,k as z,P as De,l as V,u as O,h as le,V as Ee,Y as re,T as $e,O as ue,a1 as ke,ad as X,ae as ie,af as w,ag as N,B as K,q as Oe}from"./index.dd5c42dc.js";import{A as ee}from"./AmountInput.12d8584a.js";import{D as G}from"./DeleteButton.f5aacfdc.js";import{S as we}from"./SelectInput.d490096b.js";import{O as ye}from"./OrderDraftCard.41d10b78.js";const Re=B({props:{modelValue:{type:Boolean,required:!0}},components:{PreloaderLocal:fe},setup(t,{emit:u}){const l=Z(z),i=C(""),h=C(!1),v=C(),c=C(null),f=C(null),r=()=>{clearTimeout(v.value),h.value=!0,v.value=setTimeout(()=>{i.value.length>=2&&l.dispatch(j.SEARCH_PRODUCT_ARTICLE,i.value).then(()=>{setTimeout(()=>{h.value=!1},500)})},500)},g=()=>{i.value="",l.commit(Ae.SET_PRODUCT_ARTICLS,[]),u("update:modelValue",!1)};return te(c,()=>{g()}),Y(()=>t.modelValue,()=>{De(()=>{f.value.focus()})}),{search_str:i,loading:h,target:c,searchInput:f,articles:E(()=>l.getters.getProductArticles),doSearch:r,close:g}}}),Ie={class:"product-search-input-container"},Te={class:"product-search-input options"},be={key:0},Ve={key:1},Pe={class:"article"},Le=V(),Se={class:"name"},Be={key:0},Fe={key:1};function Me(t,u,l,i,h,v){const c=k("PreloaderLocal"),f=k("router-link");return s(),o("div",{class:I("product-search fullwidth"+(t.modelValue?"":" none")),ref:"target"},[e("div",Ie,[e("div",Te,[ge(e("input",{type:"text",placeholder:"\u041F\u043E\u0438\u0441\u043A",autocomplete:"off",onKeyup:u[0]||(u[0]=r=>t.doSearch()),"onUpdate:modelValue":u[1]||(u[1]=r=>t.search_str=r),ref:"searchInput"},null,544),[[Ce,t.search_str]]),t.loading?(s(),H(c,{key:0,small:""})):A("",!0),e("div",{class:"product-search-clear",onClick:u[2]||(u[2]=r=>t.close())})]),e("div",{class:I("product-search-input-options"+(t.search_str==""||t.articles.length==0?" default":""))},[t.search_str==""?(s(),o("span",be,"\u0427\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u0430\u0437 \u043D\u043E\u0432\u044B\u0439 \u043F\u0440\u043E\u0434\u0443\u043A\u0442 - \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0432\u0432\u043E\u0434 \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0430")):(s(),o("div",Ve,[(s(!0),o(L,null,S(t.articles,(r,g)=>(s(),o("p",{key:g,class:I("product-search-input-options-item"+(t.loading?" loading":""))},[p(f,{tag:"a",onClick:u[3]||(u[3]=n=>t.close()),to:"/order/"+r.article},{default:q(()=>[e("div",Pe,_(r.article),1),Le,e("div",Se,_(r.name),1)]),_:2},1032,["to"])],2))),128)),t.loading&&t.articles.length==0?(s(),o("span",Be," \u041F\u043E\u0438\u0441\u043A...")):A("",!0),!t.loading&&t.articles.length==0?(s(),o("span",Fe,"\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")):A("",!0)]))],2)])],2)}var Ue=x(Re,[["render",Me]]);const Ne=e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.7952 0.265077C13.4418 -0.0883587 12.8687 -0.0883589 12.5153 0.265076L5.41912 7.36126L1.54498 3.48711C1.19154 3.13368 0.618512 3.13368 0.265076 3.48711C-0.0883589 3.84055 -0.0883588 4.41358 0.265077 4.76702L4.75226 9.2542C4.88175 9.38369 5.04072 9.46574 5.20757 9.50034C5.50792 9.57832 5.84052 9.49967 6.0758 9.26438L13.7952 1.54498C14.1486 1.19154 14.1486 0.618512 13.7952 0.265077Z",fill:"#C4C4C4"},null,-1),He=[Ne],xe=B({__name:"CheckButton",props:{disabled:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","onClick"],setup(t,{emit:u}){const l=t,i=()=>{u("update:modelValue",l.disabled?l.modelValue:!l.modelValue),u("onClick")},h=E(()=>({"check-btn":!0,disable:l.disabled,active:l.modelValue}));return(v,c)=>(s(),o("button",{class:I(O(h)),onClick:c[0]||(c[0]=f=>i())},[(s(),o("svg",{class:I(t.modelValue?"check-btn-img active":"check-btn-img"),viewBox:"0 0 15 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},He,2))],2))}}),Ge={class:"content-elem"},qe={class:"order-amount-table-wrap scroll-elem"},Ze={class:"table order-amount-table"},ze={class:"table-row table-heading"},Qe=e("div",{class:"table-elem"},"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430",-1),je=e("div",{class:"table-elem"},"\u041E\u0441\u0442\u0430\u0442\u043E\u043A",-1),Ye={class:"table-elem"},Ke=V("\u0426\u0435\u043D\u0430"),Je={key:0,style:{"font-size":"10px"}},We=e("div",{class:"table-elem"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E",-1),Xe=e("div",{class:"table-elem"},"\u041F\u043F / \u0414\u0430\u0442\u0430",-1),et={class:"table-wrap"},tt={class:"table-elem"},ut=["innerHTML"],st={class:"table-elem"},ot=["innerHTML"],lt={key:0,class:"table-elem"},rt=["innerHTML"],it={key:1,class:"table-elem"},nt=["innerHTML"],dt={class:"table-elem"},at={class:"table-elem"},ct={class:"order-amount-more"},mt=e("span",{class:"order-amount-more-text"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u0430\u0437 ",-1),ht={class:"order-amount-more-value"},vt={key:0,class:"order-amount-more-text presail"},_t={key:1,class:"order-amount-more-value"},pt=B({__name:"ProductOffersOrderCard",props:{data:{type:Array,required:!0},discount:{type:Number},modelValue:{type:Array}},emits:["update:modelValue","onClick"],setup(t,{emit:u}){const l=t,i=C([]),h=E(()=>i.value.filter(n=>n.count>0).length),v=E(()=>i.value.filter(n=>n.count>n.RESIDUE&&n.count!=0).length),c=n=>{if(n.check){let d=i.value.find(m=>m.ID==n.ID);d&&(d.count=1)}else{let d=i.value.find(m=>m.ID==n.ID);d&&(d.count=0)}},f=n=>{if(n.count>0){let d=i.value.find(m=>m.ID==n.ID);d&&(d.check=!0)}else{let d=i.value.find(m=>m.ID==n.ID);d&&(d.check=!1)}},r=()=>{if(h.value>0){let n=[];i.value.forEach(d=>{d.count>0&&n.push({ID:d.ID,CHARACTERISTIC:d.CHARACTERISTIC,count:d.count,PRICE:d.PRICE,RESIDUE:d.RESIDUE,GUID:d.GUID,guid:d.GUID,ORGGUID:d.ORGGUID})}),u("update:modelValue",n),u("onClick"),i.value.forEach(d=>{d.count=0,d.check=!1})}},g=()=>{i.value=l.data.map(n=>({ID:n.ID,CHARACTERISTIC:n.CHARACTERISTIC,RESIDUE:n.RESIDUE,PRICE:n.PRICE,PPDATA:n.PPDATA,GUID:n.GUID,guid:n.GUID,ORGGUID:n.ORGGUID,count:0,check:!1}))};return le(()=>{g()}),Y(()=>l.data,()=>{g()}),(n,d)=>(s(),o("div",Ge,[e("div",qe,[e("div",Ze,[e("div",ze,[Qe,je,e("div",Ye,[Ke,t.discount?(s(),o("span",Je," - "+_(t.discount)+"%",1)):A("",!0)]),We,Xe]),e("div",et,[(s(!0),o(L,null,S(i.value,m=>(s(),o("div",{class:I("table-row"+(m.count>0?" active":"")+(m.count>m.RESIDUE&&m.count!=0?" presail":"")),key:m.ID},[e("div",tt,[e("span",{innerHTML:m.CHARACTERISTIC},null,8,ut)]),e("div",st,[e("span",{innerHTML:m.RESIDUE},null,8,ot)]),t.discount?(s(),o("div",lt,[e("span",{innerHTML:Number(m.PRICE-m.PRICE/100*t.discount).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")+" \u20BD"},null,8,rt)])):(s(),o("div",it,[e("span",{innerHTML:Number(m.PRICE).toLocaleString("ru")+" \u20BD"},null,8,nt)])),e("div",dt,[p(ee,{modelValue:m.count,"onUpdate:modelValue":T=>m.count=T,onOnInput:T=>f(m)},null,8,["modelValue","onUpdate:modelValue","onOnInput"]),p(xe,{modelValue:m.check,"onUpdate:modelValue":T=>m.check=T,onOnClick:T=>c(m)},null,8,["modelValue","onUpdate:modelValue","onOnClick"])]),e("div",at,[e("span",null,_(m.PPDATA.replaceAll("/","\xA0/\xA0")),1)])],2))),128))])])]),e("div",ct,[e("div",{class:I(O(h)!=0||O(v)!=0?"order-amount-more-btn":"order-amount-more-btn disable"),onClick:d[0]||(d[0]=m=>r())},[mt,e("span",ht,"("+_(O(h))+")",1),O(v)>0?(s(),o("span",vt," + \u043F\u0440\u0435\u0434\u0437\u0430\u043A\u0430\u0437 ")):A("",!0),O(v)>0?(s(),o("span",_t,"("+_(O(v))+")",1)):A("",!0)],2)])]))}}),ft=B({props:{data:{type:Array}},emits:["toOrder"],components:{ProductSliderFullscreen:he,ProductInfoCard:ve},setup(t){var f;let u=C([]),l=Z(z);const i=E({get:()=>l.getters.getLoader,set:r=>l.commit(re.SET_LOADER,r)}),h=C(!1);(f=t.data)==null||f.forEach((r,g)=>u.value.push({id:g,src:r})),Ee(()=>{var r;u.value=[],(r=t.data)==null||r.forEach((g,n)=>u.value.push({id:n,src:g}))});let v=()=>{const r=u.value.shift();u.value=u.value.concat(r)},c=()=>{const r=u.value.pop();u.value=[r].concat(u.value)};return{loader:i,slides:u,fullscreen:h,product:E(()=>l.getters.getProduct),productProtect:E(()=>l.getters.getProductProtect),next:v,previous:c}}}),At={class:"content-elem"},gt={key:0,class:"product-slider-wrap"},Ct=["src"];function Dt(t,u,l,i,h,v){const c=k("ProductInfoCard"),f=k("ProductSliderFullscreen");return s(),o("div",At,[t.loader?A("",!0):(s(),o("div",gt,[e("div",{class:"product-slider-arrow prev",onClick:u[0]||(u[0]=(...r)=>t.previous&&t.previous(...r))}),p($e,{name:"product-slider-horisont-trans",class:"product-slider-horisont",tag:"div"},{default:q(()=>[(s(!0),o(L,null,S(t.slides,r=>(s(),o("div",{class:"product-slider-horisont-slide",key:r.id},[r.src?(s(),o("img",{key:0,src:r.src,onClick:u[1]||(u[1]=g=>t.fullscreen=!0)},null,8,Ct)):A("",!0)]))),128))]),_:1}),e("div",{class:"product-slider-arrow next",onClick:u[2]||(u[2]=(...r)=>t.next&&t.next(...r))})])),p(c,{data:t.product,protect:t.productProtect},null,8,["data","protect"]),p(f,{modelValue:t.fullscreen,"onUpdate:modelValue":u[3]||(u[3]=r=>t.fullscreen=r),data:t.data},null,8,["modelValue","data"])])}var Et=x(ft,[["render",Dt]]);const $t={props:{data:{type:Object},discount:{type:Number}},setup(){}},kt={class:"content-heading-wrap proudct-heading-wrap"},Ot={class:"content-heading-wrap-elem"},wt={key:0,class:"content-heading"},yt={key:1,class:"content-heading"},Rt={class:"content-heading-wrap-elem"},It={class:"content-heading-price"},Tt=e("div",{class:"content-heading-price-text"},"\u0421\u0443\u043C\u043C\u0430 \u0437\u0430\u043A\u0430\u0437\u0430: ",-1),bt={key:0,class:"content-heading-price-value"},Vt={class:"strikethrough"},Pt={key:1,class:"content-heading-price-value"},Lt={class:"content-heading-info"},St={class:"content-heading-info-elem"},Bt=e("span",{class:"content-heading-info-text"},"\u041A\u043E\u043B\u0435\u0447\u0435\u0441\u0442\u0432\u043E \u0435\u0434\u0435\u043D\u0438\u0446: ",-1),Ft={class:"content-heading-info-value"},Mt={key:0,class:"content-heading-info-elem"},Ut=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u0432\u0435\u0441: ",-1),Nt={class:"content-heading-info-value"},Ht={key:1,class:"content-heading-info-elem"},xt=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1),Gt={class:"content-heading-info-value"};function qt(t,u,l,i,h,v){return s(),o("div",kt,[e("div",Ot,[l.data.edit?(s(),o("div",wt,"\u0417\u0430\u043A\u0430\u0437 \u2116 "+_(l.data.id)+" \u043E\u0442 "+_(l.data.date),1)):(s(),o("div",yt,"\u0417\u0430\u043A\u0430\u0437 \u2116 \u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437 \u043E\u0442 "+_(new Date(l.data.id).toLocaleDateString("ru-RU")),1))]),e("div",Rt,[e("div",It,[Tt,l.data.total!=l.data.total_discount?(s(),o("div",bt,[e("span",Vt,_(Number(l.data.total).toLocaleString("ru"))+" \u20BD",1),V(" "+_(Number(l.data.total_discount).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1)])):(s(),o("div",Pt,_(Number(l.data.total).toLocaleString("ru"))+" \u20BD",1))])]),e("div",Lt,[e("div",St,[Bt,e("span",Ft,_(l.data.total_count),1)]),l.data.total_weight?(s(),o("div",Mt,[Ut,e("span",Nt,_(l.data.total_weight)+" \u043A\u0433.",1)])):A("",!0),l.data.total_valume?(s(),o("div",Ht,[xt,e("span",Gt,_(l.data.total_valume)+" \u043C.\u043A\u0443\u0431.",1)])):A("",!0)])])}var Zt=x($t,[["render",qt]]);const zt={emits:["onClick"],setup(){}},Qt=e("svg",{class:"edit-btn-img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#000000"},[e("path",{d:"M0 0h24v24H0V0z",fill:"none"}),e("path",{class:"fill",fill:"#A5A7A9",d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})],-1),jt=[Qt];function Yt(t,u,l,i,h,v){return s(),o("div",{class:"edit-btn",onClick:u[0]||(u[0]=c=>t.$emit("onClick"))},jt)}var se=x(zt,[["render",Yt]]);const Kt={class:"order-list content-elem"},Jt={class:"order-list-top"},Wt={class:"order-list-top-elem"},Xt=e("div",{class:"product-search-text"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442:",-1),eu={class:"order-list-top-elem"},tu=e("div",{class:"order-list-btn"},[e("svg",{class:"content-heading-btn-img active",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill stroke",fill:"#A5A7A9",d:"m 8.938 13 l 4.958 -4.938 L 12.833 7 l -3.895 3.875 l -1.771 -1.75 l -1.063 1.063 Z M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z m 0 -11 v 11 v -11 Z"})]),V(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0435\u0447\u0430\u0442\u043D\u044B\u0439 \u043A\u0430\u0442\u0430\u043B\u043E\u0433 ")],-1),uu=["tooltip"],su=K('<svg class="content-heading-btn-img" width="30" height="29" viewBox="0 0 30 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path class="fill stroke" d="M23.3935 26.1033L23.3938 26.1031C25.1061 24.6558 26.5848 23.406 27.6138 22.1745M23.3935 26.1033L20.9256 14.8664C21.2129 14.4998 21.5321 14.1811 21.8798 13.9144C22.6709 13.3077 23.5695 13 24.5508 13C25.8637 13 27.0713 13.5213 27.9513 14.4679C28.821 15.4035 29.2998 16.6816 29.2998 18.0669C29.2998 19.4928 28.7641 20.798 27.6138 22.1745M23.3935 26.1033C22.8083 26.5978 22.1452 27.1584 21.4569 27.7553C21.2752 27.913 21.0417 28 20.7998 28C20.5578 28 20.3245 27.913 20.1426 27.7551M23.3935 26.1033L20.1426 27.7551M27.6138 22.1745L27.7673 22.3028C27.7673 22.3028 27.7673 22.3028 27.7673 22.3028M27.6138 22.1745L27.7673 22.3028M27.7673 22.3028C26.7272 23.5475 25.2376 24.8066 23.5348 26.2458L23.5226 26.2561L23.5226 26.2561C22.9374 26.7506 22.2752 27.3104 21.588 27.9064L21.4575 27.7561L21.5879 27.9064C21.3696 28.0958 21.0896 28.2 20.7998 28.2C20.5099 28.2 20.2299 28.0958 20.0115 27.9061C19.3259 27.3115 18.6647 26.7527 18.0805 26.2589L18.0789 26.2576L18.079 26.2576L18.0775 26.2563L18.076 26.255L18.0667 26.2472C16.3631 24.8074 14.8728 23.5479 13.8324 22.3029L13.8324 22.3029C12.66 20.8998 12.0998 19.5508 12.0998 18.0669C12.0998 16.6357 12.5949 15.3076 13.5019 14.3318L13.5019 14.3318C14.4205 13.3437 15.6814 12.8 17.0489 12.8C18.075 12.8 19.0163 13.1227 19.8416 13.7557L19.8417 13.7558C20.1907 14.0235 20.5111 14.3407 20.7998 14.703C21.0886 14.3408 21.409 14.0235 21.7581 13.7557C22.5834 13.1227 23.5248 12.8 24.5508 12.8C25.9183 12.8 27.1793 13.3437 28.0978 14.3318L28.0978 14.3318C29.0049 15.3076 29.4998 16.6357 29.4998 18.0669C29.4998 19.5508 28.9397 20.8998 27.7673 22.3028ZM14.906 21.4162L14.906 21.4162C15.8662 22.5653 17.2989 23.7771 18.9807 25.1986C18.9809 25.1988 18.9812 25.199 18.9815 25.1992L18.9829 25.2004L18.9846 25.2018C19.5339 25.6661 20.1528 26.1893 20.7986 26.7476C21.448 26.1882 22.068 25.6641 22.6186 25.199C24.3006 23.7772 25.7334 22.5655 26.6937 21.4162C27.6806 20.2351 28.1041 19.2064 28.1041 18.0669C28.1041 16.9751 27.7341 15.9851 27.0727 15.2735C26.4221 14.5737 25.5279 14.1876 24.5508 14.1876C23.8402 14.1876 23.1891 14.4107 22.6106 14.8543C22.0919 15.2523 21.7269 15.7588 21.5111 16.1175C21.36 16.3685 21.093 16.5186 20.7998 16.5186C20.5066 16.5186 20.2396 16.3685 20.0885 16.1175L20.0885 16.1174C19.8728 15.7588 19.5078 15.2523 18.989 14.8543C18.4105 14.4107 17.7594 14.1876 17.0489 14.1876C16.0718 14.1876 15.1776 14.5736 14.5269 15.2735L14.906 21.4162ZM14.906 21.4162C13.919 20.2351 13.4955 19.2064 13.4955 18.0669C13.4955 16.9751 13.8655 15.9851 14.5269 15.2735L14.906 21.4162ZM20.1426 27.7551C19.4559 27.1595 18.7937 26.5998 18.2096 26.1062L20.1426 27.7551Z" fill="#A5A7A9" stroke="#A5A7A9" stroke-width="0.4"></path><path class="fill" fill-rule="evenodd" clip-rule="evenodd" d="M3 2H18.75C19.3023 2 19.75 2.44772 19.75 3V15H21.75V3C21.75 1.34315 20.4069 0 18.75 0H3C1.34315 0 0 1.34315 0 3V21.8571C0 23.514 1.34315 24.8571 3 24.8571H16.4846C16.1942 24.6822 16 24.3638 16 24V22.8571H3C2.44772 22.8571 2 22.4094 2 21.8571V3C2 2.44772 2.44772 2 3 2Z" fill="#A5A7A9"></path><rect class="fill" x="17.6074" y="5.17871" width="1.7" height="13.4643" rx="0.85" transform="rotate(90 17.6074 5.17871)" fill="#A5A7A9"></rect><rect class="fill" x="10" y="13" width="1.7" height="6" rx="0.85" transform="rotate(90 10 13)" fill="#A5A7A9"></rect><rect class="fill" x="14" y="9" width="1.7" height="10" rx="0.85" transform="rotate(90 14 9)" fill="#A5A7A9"></rect></svg>',1),ou=[su],lu={class:"scroll-elem"},ru={class:"order-list-bottom-wrap"},iu={key:0,class:"order-list-row order-list-heading"},nu=e("div",{class:"order-list-elem"},"\u2116",-1),du=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),au=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),cu={class:"order-list-elem"},mu=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),hu=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),vu=e("div",{class:"order-list-elem"},null,-1),_u=["onClick"],pu={class:"order-list-elem"},fu=e("div",{class:"table-arrow"},null,-1),Au={class:"order-list-elem"},gu=["innerHTML"],Cu={class:"order-list-elem"},Du=["innerHTML"],Eu=e("div",{class:"order-list-elem"},null,-1),$u={class:"order-list-elem"},ku={class:"order-list-elem"},Ou={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},wu={class:"order-list-elem-delete"},yu=e("div",{class:"order-list-elem"},null,-1),Ru=e("div",{class:"order-list-elem"},null,-1),Iu={class:"order-list-elem"},Tu={class:"order-list-elem"},bu={key:0,class:"order-list-elem-text"},Vu={class:"order-list-elem"},Pu={class:"order-list-elem"},Lu={class:"order-list-elem-delete"},Su={key:0,class:"order-list-bottom-wrap"},Bu=e("div",{class:"order-list-row order-list-subheading"},[e("div",null,"\u041F\u043E\u0437\u0438\u0446\u0438\u0438 \u0434\u043B\u044F \u043F\u0440\u0435\u0434\u0437\u0430\u043A\u0430\u0437\u0430")],-1),Fu={class:"order-list-row order-list-heading"},Mu=e("div",{class:"order-list-elem"},"\u2116",-1),Uu=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),Nu=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),Hu={class:"order-list-elem"},xu=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),Gu=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),qu=e("div",{class:"order-list-elem"},null,-1),Zu=["onClick"],zu={class:"order-list-elem"},Qu=e("div",{class:"table-arrow"},null,-1),ju={class:"order-list-elem"},Yu=["innerHTML"],Ku={class:"order-list-elem"},Ju=["innerHTML"],Wu=e("div",{class:"order-list-elem"},null,-1),Xu={class:"order-list-elem"},e0={class:"order-list-elem"},t0={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},u0={class:"order-list-elem-delete"},s0=e("div",{class:"order-list-elem"},null,-1),o0=e("div",{class:"order-list-elem"},null,-1),l0={class:"order-list-elem"},r0={class:"order-list-elem"},i0={key:0,class:"order-list-elem-text"},n0={class:"order-list-elem"},d0={class:"order-list-elem"},a0={class:"order-list-elem-delete"},c0={class:"order-list-buttons"},m0=e("div",{class:"gradient-btn-text"},"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",-1),h0=[m0],v0=e("div",{class:"gradient-btn-text"},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),_0=[v0],p0=e("div",{class:"gradient-btn-text"},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),f0=[p0],A0=B({__name:"OrderCard",props:{data:{type:Object,required:!0},companys:{type:Array},modelValue:{type:String,required:!0}},emits:["update:modelValue","update:data","onClickAdd","onClickEdit"],setup(t,{emit:u}){const l=t,i=Z(z),h=ue(),v=C([]),c=C([]),f=C(!1),r=C(!1),g=C(""),n=E({get:()=>{var b;return(b=l.data)!=null&&b.edit?l.data.partner_id:l.modelValue},set:b=>u("update:modelValue",b)}),d=E(()=>i.getters.isOrderInDraft),m=()=>{i.commit(w.CALC_ORDER)},T=(b,a)=>{b?i.dispatch(N.REMOVE_POSITION_PRESAIL,a):i.dispatch(N.REMOVE_POSITION,a)},F=(b,a)=>{b?i.dispatch(N.REMOVE_CHARACTERISTIC_PRESAIL,a):i.dispatch(N.REMOVE_CHARACTERISTIC,a)},R=()=>{l.modelValue==""&&(f.value=!0,setTimeout(()=>{f.value=!1},5e3)),u("onClickAdd")},M=()=>{u("onClickEdit")},y=()=>{i.commit(w.CLEAN_ORDER)},J=()=>{var b;i.getters.isOrderInDraft?(i.commit(w.DEL_ORDER_FROM_DRAFT,(b=l.data)==null?void 0:b.id),r.value=!0,g.value="\u0417\u0430\u043A\u0430\u0437 \u0443\u0434\u0430\u043B\u0435\u043D \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430"):(i.commit(w.ADD_ORDER_TO_DRAFT),r.value=!0,g.value="\u0417\u0430\u043A\u0430\u0437 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")},Q=b=>{h.push("/order/"+b)};return(b,a)=>{const ne=k("router-link");return s(),o(L,null,[e("div",Kt,[e("div",Jt,[e("div",Wt,[Xt,p(we,{data:t.companys,error:f.value,"read-only":t.data.edit,modelValue:O(n),"onUpdate:modelValue":a[0]||(a[0]=$=>ke(n)?n.value=$:null)},null,8,["data","error","read-only","modelValue"])]),e("div",eu,[tu,e("div",{to:"#",class:I("content-heading-btn"+(O(d)?" active":"")),onClick:a[1]||(a[1]=$=>J()),tooltip:O(d)?"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A",flow:"up"},ou,10,uu)])]),e("div",lu,[e("div",ru,[t.data.position.length>0?(s(),o("div",iu,[nu,du,au,e("div",cu,_(v.value.length!=0?"\u0426\u0435\u043D\u0430":""),1),mu,hu,vu])):A("",!0),(s(!0),o(L,null,S(t.data.position,($,P)=>(s(),o("div",{class:I(v.value.indexOf(P)!==-1?"order-list-item active":"order-list-item"),key:P},[e("div",{class:"order-list-row order-list-main-row",onClick:D=>v.value.indexOf(P)===-1?v.value.push(P):v.value.splice(v.value.indexOf(P),1)},[e("div",pu,[V(_(P+1)+" ",1),fu]),e("div",Au,[p(ne,{tag:"a",class:"order-list-elem",to:"/order/"+$.article,title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},{default:q(()=>[e("span",{innerHTML:$.article},null,8,gu)]),_:2},1032,["to"])]),e("div",Cu,[e("span",{innerHTML:$.product.NAME},null,8,Du)]),Eu,e("div",$u,_($.count),1),e("div",ku,_(Number($.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",Ou,[p(se,{onClick:X(D=>Q($.article),["stop"])},null,8,["onClick"])]),e("div",wu,[p(G,{onOnClick:D=>T(!1,$.guid)},null,8,["onOnClick"])])],8,_u),e("div",{class:I(v.value.indexOf(P)!==-1?"order-list-sublist active":"order-list-sublist")},[(s(!0),o(L,null,S($.characteristics,(D,W)=>(s(),o("div",{key:W,class:"order-list-row"},[yu,Ru,e("div",Iu,_(D.CHARACTERISTIC),1),e("div",Tu,[V(_(Number(D.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),D.discount>0?(s(),o("div",bu,"\u0441\u043A\u0438\u0434\u043A\u0430 "+_(D.discount)+"% ",1)):A("",!0)]),e("div",Vu,[p(ee,{modelValue:D.count,"onUpdate:modelValue":U=>D.count=U,min:1,max:D.RESIDUE,onOnInput:a[2]||(a[2]=U=>m())},null,8,["modelValue","onUpdate:modelValue","max"])]),e("div",Pu,_(Number(D.price_discount*D.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",Lu,[p(G,{onOnClick:U=>F(!1,{guid:$.guid,characteristics:[D]})},null,8,["onOnClick"])])]))),128))],2)],2))),128))]),t.data.position_presail.length>0?(s(),o("div",Su,[Bu,e("div",Fu,[Mu,Uu,Nu,e("div",Hu,_(c.value.length!=0?"\u0426\u0435\u043D\u0430":""),1),xu,Gu,qu]),(s(!0),o(L,null,S(t.data.position_presail,($,P)=>(s(),o("div",{class:I(c.value.indexOf(P)!==-1?"order-list-item active":"order-list-item"),key:P},[e("div",{class:"order-list-row order-list-main-row",onClick:D=>c.value.indexOf(P)===-1?c.value.push(P):c.value.splice(c.value.indexOf(P),1)},[e("div",zu,[V(_(P+1)+" ",1),Qu]),e("div",ju,[e("span",{innerHTML:$.article},null,8,Yu)]),e("div",Ku,[e("span",{innerHTML:$.product.NAME},null,8,Ju)]),Wu,e("div",Xu,_($.count),1),e("div",e0,_(Number($.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",t0,[p(se,{onClick:X(D=>Q($.article),["stop"])},null,8,["onClick"])]),e("div",u0,[p(G,{onOnClick:D=>T(!0,$.guid)},null,8,["onOnClick"])])],8,Zu),e("div",{class:I(c.value.indexOf(P)!==-1?"order-list-sublist active":"order-list-sublist")},[(s(!0),o(L,null,S($.characteristics,(D,W)=>(s(),o("div",{key:W,class:"order-list-row"},[s0,o0,e("div",l0,_(D.CHARACTERISTIC),1),e("div",r0,[V(_(Number(D.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),D.discount>0?(s(),o("div",i0,"\u0441\u043A\u0438\u0434\u043A\u0430 "+_(D.discount)+"% ",1)):A("",!0)]),e("div",n0,[p(ee,{modelValue:D.count,"onUpdate:modelValue":U=>D.count=U,min:D.RESIDUE+1,onOnInput:a[3]||(a[3]=U=>m())},null,8,["modelValue","onUpdate:modelValue","min"])]),e("div",d0,_(Number(D.price_discount*D.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",a0,[p(G,{onOnClick:U=>F(!0,{guid:$.guid,characteristics:[D]})},null,8,["onOnClick"])])]))),128))],2)],2))),128))])):A("",!0)])]),e("div",c0,[e("button",{class:"order-list-submit gradient-btn disabled",onClick:a[4]||(a[4]=$=>y())},h0),t.data.edit?(s(),o("button",{key:0,class:"order-list-submit gradient-btn",onClick:a[5]||(a[5]=$=>M())},_0)):(s(),o("button",{key:1,class:"order-list-submit gradient-btn",onClick:a[6]||(a[6]=$=>R())},f0))]),p(ie,{modelValue:r.value,"onUpdate:modelValue":a[7]||(a[7]=$=>r.value=$),message:g.value,timeout:2e3,notification:""},null,8,["modelValue","message"])],64)}}}),g0={props:{name:{type:String}},emits:["onClick"],setup(){}},C0={class:""};function D0(t,u,l,i,h,v){return s(),o("button",{class:"default-btn",onClick:u[0]||(u[0]=c=>t.$emit("onClick"))},[e("div",C0,_(l.name),1)])}var oe=x(g0,[["render",D0]]);const E0={key:0,class:"order-modal"},$0={class:"order-modal-content"},k0={class:"order-modal-header"},O0={class:"order-modal-header-title"},w0={class:"order-modal-body"},y0={key:0},R0={key:0},I0={key:0,class:"loading"},T0=V(" \u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044F! "),b0=e("br",null,null,-1),V0=V(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),P0=e("span",null,".",-1),L0=e("span",null,".",-1),S0=e("span",null,".",-1),B0=[T0,b0,V0,P0,L0,S0],F0={key:1,class:"loading"},M0=V(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),U0=e("span",null,".",-1),N0=e("span",null,".",-1),H0=e("span",null,".",-1),x0=[M0,U0,N0,H0],G0=K('<svg width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><animateTransform attributeName="transform" dur="1s" type="translate" values="0 0; 1 -1; 1 1; 0 0;" repeatCount="indefinite" begin="0.1"></animateTransform></svg>',1),q0={key:1},Z0={key:1},z0={class:"order-modal-action"},Q0=K('<svg class="order-list-buttons-item-img" width="31" height="29" viewBox="0 0 31 29" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="stroke" x="1" y="1" width="19.75" height="22.8571" rx="2" stroke="#A5A7A9" stroke-width="2"></rect><circle cx="21.2322" cy="20.1964" r="8.80357" fill="#53565B"></circle><circle class="stroke" cx="21.2322" cy="20.1964" r="7.80357" stroke="#A5A7A9" stroke-width="2"></circle><rect class="fill" x="19.6786" y="15.5358" width="1.7" height="6.21429" rx="0.85" fill="#A5A7A9"></rect><rect class="fill" x="24.8571" y="20.1" width="1.7" height="5.17857" rx="0.85" transform="rotate(90 24.8571 20.1)" fill="#A5A7A9"></rect><rect class="fill" x="17.6071" y="5.17859" width="1.7" height="13.4643" rx="0.85" transform="rotate(90 17.6071 5.17859)" fill="#A5A7A9"></rect><rect class="fill" x="11.3929" y="13" width="1.7" height="7.25" rx="0.85" transform="rotate(90 11.3929 13)" fill="#A5A7A9"></rect><rect class="fill" x="14.5" y="9" width="1.7" height="10.3571" rx="0.85" transform="rotate(90 14.5 9)" fill="#A5A7A9"></rect></svg><div class="order-modal-action-btn-text">\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u043A\u0430\u0437\u043E\u0432</div>',2),j0=[Q0],Y0=K('<svg class="order-list-buttons-item-img" width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="24" y="3" width="8" height="2" rx="1" fill="#A5A7A9"></rect><rect class="fill" x="29" width="8" height="2" rx="1" transform="rotate(90 29 0)" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle></svg><div class="order-modal-action-btn-text">\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437</div>',2),K0=[Y0],J0={key:0,class:"order-list-buttons-wrap"},W0=e("svg",{class:"order-list-buttons-item-img",width:"32",height:"21",viewBox:"0 0 32 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{class:"fill",x:"2.06573",y:"4.13147",width:"10.3286",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("rect",{class:"fill",y:"7.74646",width:"10.3286",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"2.06573",y:"11.3615",width:"7.23",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"3.09857",width:"18.5914",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"27.3458",y:"10.0944",width:"8.32268",height:"2.14434",rx:"1.07217",transform:"rotate(-116.966 27.3458 10.0944)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"29.761",y:"12.6008",width:"6.17839",height:"2.14434",rx:"1.07217",transform:"rotate(-128.694 29.761 12.6008)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"19.6243",y:"8.26282",width:"9.29572",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"21.69",width:"10.3286",height:"2.06571",rx:"1.03286",transform:"rotate(90 21.69 0)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"25.8214",y:"4.13147",width:"5.16429",height:"2.06571",rx:"1.03286",transform:"rotate(-180 25.8214 4.13147)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"30.9857",y:"18.5914",width:"5.16429",height:"2.06571",rx:"1.03286",transform:"rotate(-180 30.9857 18.5914)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"28.92",y:"18.5914",width:"8.26286",height:"2.06571",rx:"1.03286",transform:"rotate(-90 28.92 18.5914)",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"12.3943",y:"16.5258",width:"9.64955",height:"2.14434",rx:"1.07217",fill:"#A5A7A9"}),e("rect",{class:"fill",x:"4.13141",y:"16.5258",width:"5.16429",height:"2.06571",rx:"1.03286",fill:"#A5A7A9"}),e("circle",{class:"stroke",cx:"10.6824",cy:"17.4406",r:"2.21652",stroke:"#A5A7A9","stroke-width":"2"}),e("circle",{class:"stroke",cx:"23.8737",cy:"17.4406",r:"2.21652",stroke:"#A5A7A9","stroke-width":"2"})],-1),X0=e("div",{class:"order-modal-action-btn-text"},"\u0421\u043F\u043E\u0441\u043E\u0431 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0442\u043E\u0432\u0430\u0440\u0430",-1),es=B({__name:"OrderModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:u}){const l=Z(z),i=ue(),h=C(!1),v=C(null);te(v,()=>{h.value=!0,setTimeout(()=>{h.value=!1},500)});const c=()=>{l.commit(w.CLEAN_ORDER),l.commit(w.CLEAN_ORDER_ERROR),l.commit(w.CLEAN_ADD_ORDER),u("update:modelValue",!1)},f=()=>{l.commit(w.CLEAN_ORDER),l.commit(w.CLEAN_ORDER_ERROR),l.commit(w.CLEAN_ADD_ORDER),u("update:modelValue",!1)},r=()=>{l.commit(w.CLEAN_ORDER),l.commit(w.CLEAN_ADD_ORDER),u("update:modelValue",!1),i.push({name:"Orders"})},g=E(()=>l.getters.getOrderError),n=E(()=>l.getters.getOrderErrorMsg),d=E(()=>l.getters.isOrderAddNew),m=E(()=>l.getters.getOrderAddNew),T=E(()=>l.getters.getOrder);return(F,R)=>{const M=k("router-link");return t.modelValue?(s(),o("div",E0,[e("div",{class:I(h.value?"order-modal-dialog shake":"order-modal-dialog"),ref_key:"target_modal",ref:v},[e("div",$0,[e("div",k0,[e("h3",O0,_(O(T).edit?"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430 \u2116"+O(T).id:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430"),1),O(d)?(s(),H(G,{key:0,onOnClick:R[0]||(R[0]=y=>c())})):A("",!0)]),e("div",w0,[O(g)?(s(),o("div",Z0,_(O(n)),1)):(s(),o("div",y0,[O(d)?(s(),o("div",q0,_(O(m).message),1)):(s(),o("div",R0,[O(T).edit?(s(),o("span",F0,x0)):(s(),o("span",I0,B0)),G0]))]))]),e("div",z0,[O(g)?(s(),H(oe,{key:0,name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",onOnClick:R[1]||(R[1]=y=>c())})):A("",!0),O(g)?(s(),H(oe,{key:1,name:"\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437",onOnClick:R[2]||(R[2]=y=>f())})):A("",!0),O(d)?(s(),o("button",{key:2,class:"order-modal-action-btn",onClick:R[3]||(R[3]=y=>r())},j0)):A("",!0),O(d)?(s(),o("button",{key:3,class:"order-modal-action-btn",onClick:R[4]||(R[4]=y=>f())},K0)):A("",!0)]),O(d)?(s(),o("div",J0,[p(M,{tag:"div",to:"/shipments/request",class:"order-modal-action-btn",title:"\u0417\u0430\u044F\u0432\u043A\u0430 \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442",onClick:R[5]||(R[5]=y=>f())},{default:q(()=>[W0,X0]),_:1})])):A("",!0)])],2)])):A("",!0)}}}),ts=B({name:"OrderDraftModal",components:{DeleteButton:G,OrderDraftCard:ye},props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:u}){const l=Z(z),i=C(!1),h=C(!1),v=C(!1),c=C(!1),f=C(null),r=C(-1);te(f,()=>{c.value=!0,setTimeout(()=>{c.value=!1},500)});const g=()=>{l.commit(w.CLEAN_ORDER_ERROR),l.commit(w.CLEAN_ADD_ORDER),u("update:modelValue",!1)},n=m=>{m!=-1?(l.commit(w.DEL_ORDER_FROM_DRAFT,m),i.value=!1,r.value=-1):(l.commit(w.DEL_ALL_DRAFT),h.value=!1)},d=m=>{l.commit(w.USE_DRAFT,m),h.value=!1,v.value=!1,i.value=!1,r.value=-1,u("update:modelValue",!1)};return{shake:c,targetModal:f,active:r,delItem:i,delAll:h,useDraft:v,orderDraft:E(()=>l.getters.getOrderDraft),close:g,del:n,draftToOrder:d}}}),us={key:0,class:"order-modal"},ss={class:"order-modal-content draft"},os={class:"order-modal-header"},ls=e("h3",{class:"order-modal-header-title"},"\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438",-1),rs={class:"order-modal-body draft"},is={key:0},ns={key:1,class:"order-draft-list"},ds={class:"shipment-address-list-wrap"},as=["onClick"],cs={class:"shipment-address-list-elem"},ms={class:"shipment-address-list-elem"},hs=e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",viewBox:"0 0 24 24",width:"30px",fill:"#8D8D8D"},[e("path",{d:"M0 0h24v24H0V0z",fill:"none"}),e("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})],-1),vs=[hs],_s={key:0,class:"shipment-address-list-row-info"},ps=e("div",null,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A?",-1),fs=["onClick"],As={class:"orders-list-info-row draft"},gs={key:0,class:"shipment-address-list-row-info"},Cs=e("div",null,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438?",-1),Ds={key:1,class:"shipment-address-list-row-info"},Es=e("div",null,"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0434\u043B\u044F \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430?",-1),$s={key:2,class:"order-modal-action"};function ks(t,u,l,i,h,v){const c=k("DeleteButton"),f=k("OrderDraftCard");return t.modelValue?(s(),o("div",us,[e("div",{class:I("order-modal-dialog draft"+(t.shake?" shake":"")),ref:"targetModal"},[e("div",ss,[e("div",os,[ls,p(c,{onOnClick:u[0]||(u[0]=r=>t.close())})]),e("div",rs,[t.orderDraft.length==0?(s(),o("div",is," \u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438 \u043E\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044E\u0442 ")):(s(),o("div",ns,[e("div",ds,[(s(!0),o(L,null,S(t.orderDraft,(r,g)=>(s(),o("div",{key:g},[e("div",{class:I("shipment-address-list-row"+(r.id==t.active?" active":"")),onClick:n=>{r.id===t.active?t.active=-1:t.active=r.id,t.delAll=!1,t.useDraft=!1}},[e("div",cs,_(g+1),1),e("div",ms," \u0421\u043E\u0437\u0434\u0430\u043D "+_(new Date(r.id).toLocaleString("ru")),1),r.id==t.active?(s(),o("div",{key:0,class:I("shipment-address-list-elem actions"+(t.delItem?" active":""))},[e("div",{onClick:u[1]||(u[1]=X(n=>{t.delItem=!t.delItem,t.delAll=!1,t.useDraft=!1},["stop"]))},vs)],2)):A("",!0)],10,as),t.delItem&&r.id==t.active?(s(),o("div",_s,[ps,e("div",null,[e("a",{href:"#",onClick:n=>t.del(r.id)},"\u0414\u0430",8,fs),e("a",{href:"#",onClick:u[2]||(u[2]=n=>t.delItem=!1)},"\u041D\u0435\u0442")])])):A("",!0),e("div",{class:I("orders-list-info draft"+(!t.delItem&&r.id==t.active?" active":""))},[e("div",As,[p(f,{data:r},null,8,["data"])])],2)]))),128))])]))])]),t.delAll?(s(),o("div",gs,[Cs,e("div",null,[e("a",{href:"#",onClick:u[3]||(u[3]=r=>t.del(-1))},"\u0414\u0430"),e("a",{href:"#",onClick:u[4]||(u[4]=r=>t.delAll=!1)},"\u041D\u0435\u0442")])])):A("",!0),t.useDraft?(s(),o("div",Ds,[Es,e("div",null,[e("a",{href:"#",onClick:u[5]||(u[5]=r=>t.draftToOrder(t.active))},"\u0414\u0430"),e("a",{href:"#",onClick:u[6]||(u[6]=r=>t.useDraft=!1)},"\u041D\u0435\u0442")])])):A("",!0),!t.delAll&&!t.useDraft?(s(),o("div",$s,[e("button",{onClick:u[7]||(u[7]=r=>{t.active=-1,t.delAll=!0}),class:"order-list-btn"},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438"),t.active!=-1?(s(),o("button",{key:0,onClick:u[8]||(u[8]=r=>t.useDraft=!0),class:"order-list-btn"},"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")):A("",!0)])):A("",!0)],2)])):A("",!0)}var Os=x(ts,[["render",ks]]);const ws=B({components:{PersonalBar:de,Notification:ae,CompanyBarTop:ce,TopNav:me,ProductHeaderCard:_e,ProductSearchResultCard:pe,OrderProductSearchInput:Ue,ProductOffersOrderCard:pt,ProductSliderSmallCard:Et,OrderHeaderCard:Zt,OrderCard:A0,OrderModal:es,SnackBar:ie,OrderDraftModal:Os},props:["article"],setup(t){const u=Z(z),l=ue(),i=E({get:()=>u.getters.getLoader,set:y=>u.commit(re.SET_LOADER,y)}),h=C(""),v=C(""),c=C(!1),f=C(""),r=C(!1),g=C(!1),n=C(!1),d=C([]),m=()=>{let y={article:u.getters.getProduct.ARTICLE,guid:u.getters.getProduct.UID,product:u.getters.getProduct,characteristics:d.value};u.dispatch(N.ADD_POSITION,y)},T=()=>{h.value==""?(c.value=!0,setTimeout(()=>{c.value=!1},5e3),f.value="\u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442\u0430"):(r.value=!0,u.commit(w.ADD_ORDER_PARTNER_ID,h.value),setTimeout(()=>{u.dispatch(N.ADD_ORDER,u.getters.getOrderToAdd).catch(()=>{r.value=!1,c.value=!0,setTimeout(()=>{c.value=!1},5e3),f.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3))},F=()=>{console.log(h.value),r.value=!0,u.commit(w.ADD_ORDER_PARTNER_ID,h.value),setTimeout(()=>{u.dispatch(N.EDIT_ORDER_ACTION,u.getters.getOrderToAdd).catch(()=>{r.value=!1,c.value=!0,setTimeout(()=>{c.value=!1},5e3),f.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3)};Y(()=>t.article,y=>{y!==""&&y!==void 0&&(i.value=!0,u.dispatch(j.SEARCH_PRODUCT,t.article).then(()=>{u.getters.getProduct.ID?v.value=u.getters.getProduct.ID:l.push({name:"Order"})}).finally(()=>{i.value=!1}))}),Y(h,()=>{u.getters.getOrder.edit||u.commit(w.ADD_ORDER_PARTNER_ID,h.value),u.commit(w.CALC_ORDER)}),le(()=>{u.commit(w.ADD_ORDER_PARTNER_ID,h.value),u.getters.isCompanysLoad||u.dispatch(Oe.GET_COMPANYS).finally(()=>{setTimeout(()=>{h.value=u.getters.getCompanys===[]?"":u.getters.getCompanys[0].uid},500)}),v.value=u.getters.getProduct.ID,t.article!==""&&t.article!==void 0&&(i.value=!0,u.dispatch(j.SEARCH_PRODUCT,t.article).then(()=>{u.getters.getProduct.ID?v.value=u.getters.getProduct.ID:l.push({name:"Order"})}).finally(()=>{i.value=!1}))});const R=()=>{i.value=!0,u.dispatch(j.GET_PRODUCT_BY_ID,v.value).then(()=>{v.value=u.getters.getProduct.ID}).finally(()=>{i.value=!1})},M=E(()=>{const y=u.getters.getProduct.STATUS;return y=="Outlet"||y=="Discount"||y=="Activity"?0:u.getters.getCompanyDiscount(h.value,u.getters.getProductOffersORGGUID)});return{error:c,errorMsg:f,activeCompanyUid:h,activeProductId:v,showModal:r,showDraft:g,productItems:d,productSearch:n,isProduct:E(()=>u.getters.isProduct),companyBarTopData:E(()=>u.getters.getCompanysList),productOffers:E(()=>u.getters.getProductOffers),product:E(()=>u.getters.getProduct),productFound:E(()=>u.getters.getProductFound),productImages:E(()=>u.getters.getProductImages),productProtect:E(()=>u.getters.getProductProtect),isOrder:E(()=>u.getters.isOrder),order:E(()=>u.getters.getOrder),getOrderDraftCount:E(()=>u.getters.getOrderDraftCount),discount:M,addToOrder:m,addOrder:T,editOrder:F,loadProduct:R}}}),ys={class:"top-line product-page"},Rs={key:0,class:"order-info"},Is=V(" \u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043E\u0432\u0430\u0440 \u0432 "),Ts=V("\u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0435"),bs=V(" \u0438\u043B\u0438 \u0432\u043E\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435\u0441\u044C "),Vs=V("\u043F\u043E\u0438\u0441\u043A\u043E\u043C"),Ps=V(". "),Ls={key:1},Ss={class:"content-wrap content-product-wrap"},Bs={class:"content-wrap-elem"},Fs={class:"content-wrap-elem"},Ms={key:3,class:"content-heading-wrap proudct-heading-wrap"},Us={key:0,class:"content-heading-wrap-elem"},Ns=e("div",{class:"order-info"},"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438 \u043A \u0437\u0430\u043A\u0430\u0437\u0443 \u0438 \u0442\u043E\u0433\u0434\u0430 \u043E\u043D \u0431\u0443\u0434\u0435\u0442 \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D",-1),Hs=[Ns],xs={class:"content-wrap content-order-wrap"},Gs={class:"content-wrap-elem"},qs={class:"content-wrap-elem"};function Zs(t,u,l,i,h,v){const c=k("CompanyBarTop"),f=k("Notification"),r=k("PersonalBar"),g=k("top-nav"),n=k("router-link"),d=k("OrderProductSearchInput"),m=k("ProductHeaderCard"),T=k("ProductSearchResultCard"),F=k("ProductOffersOrderCard"),R=k("OrderHeaderCard"),M=k("OrderCard"),y=k("ProductSliderSmallCard"),J=k("OrderModal"),Q=k("SnackBar"),b=k("OrderDraftModal");return s(),o("div",null,[e("div",ys,[p(c,{data:t.companyBarTopData,modelValue:t.activeCompanyUid,"onUpdate:modelValue":u[0]||(u[0]=a=>t.activeCompanyUid=a)},null,8,["data","modelValue"]),p(f),p(r)]),p(g,{toDraft:"",draft:t.getOrderDraftCount,onOnClick:u[1]||(u[1]=a=>t.showDraft=!0)},null,8,["draft"]),t.isProduct?(s(),o("div",Ls,[p(d,{modelValue:t.productSearch,"onUpdate:modelValue":u[2]||(u[2]=a=>t.productSearch=a)},null,8,["modelValue"]),p(m,{title:String(t.product.NAME),price:String(t.product.PRICE_OPT),discount:t.discount,status:String(t.product.STATUS),onShowSearch:u[3]||(u[3]=a=>t.productSearch=!t.productSearch)},null,8,["title","price","discount","status"]),e("div",Ss,[e("div",Bs,[p(T,{data:t.productFound,cardType:"order",modelValue:t.activeProductId,"onUpdate:modelValue":u[4]||(u[4]=a=>t.activeProductId=a),onOnClick:u[5]||(u[5]=a=>t.loadProduct()),onShowSearch:u[6]||(u[6]=a=>t.productSearch=!t.productSearch)},null,8,["data","modelValue"])]),e("div",Fs,[p(F,{data:t.productOffers,discount:t.discount,modelValue:t.productItems,"onUpdate:modelValue":u[7]||(u[7]=a=>t.productItems=a),onOnClick:u[8]||(u[8]=a=>t.addToOrder())},null,8,["data","discount","modelValue"])])])])):(s(),o("div",Rs,[Is,p(n,{tag:"a",to:"/catalog/catalog",class:"order-info-link"},{default:q(()=>[Ts]),_:1}),bs,p(n,{tag:"a",to:"/product",class:"order-info-link"},{default:q(()=>[Vs]),_:1}),Ps])),t.isOrder?(s(),H(R,{key:2,discount:t.discount,data:t.order},null,8,["discount","data"])):(s(),o("div",Ms,[t.isProduct?(s(),o("div",Us,Hs)):A("",!0)])),e("div",xs,[e("div",Gs,[t.isOrder?(s(),H(M,{key:0,data:t.order,companys:t.companyBarTopData,modelValue:t.activeCompanyUid,"onUpdate:modelValue":u[9]||(u[9]=a=>t.activeCompanyUid=a),onOnClickAdd:t.addOrder,onOnClickEdit:t.editOrder},null,8,["data","companys","modelValue","onOnClickAdd","onOnClickEdit"])):A("",!0)]),e("div",qs,[t.isProduct?(s(),H(y,{key:0,data:t.productImages},null,8,["data"])):A("",!0)])]),p(J,{modelValue:t.showModal,"onUpdate:modelValue":u[10]||(u[10]=a=>t.showModal=a)},null,8,["modelValue"]),p(Q,{modelValue:t.error,"onUpdate:modelValue":u[11]||(u[11]=a=>t.error=a),message:t.errorMsg},null,8,["modelValue","message"]),p(b,{modelValue:t.showDraft,"onUpdate:modelValue":u[12]||(u[12]=a=>t.showDraft=a)},null,8,["modelValue"])])}var u4=x(ws,[["render",Zs]]);export{u4 as default};
