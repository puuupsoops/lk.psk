import{_ as Ie,N as Se}from"./PersonalBar.48aee952.js";import{_ as Te}from"./CompanyBarTop.5ee1f250.js";import{_ as Le}from"./TopNav.efb054df.js";import{P as Ve,c as Pe,a as be,b as Me}from"./ProductInfoCard.0af66342.js";import{P as Ae}from"./PreloaderLocal.4f88a1f0.js";import{d as x,g as v,z as fe,I as Z,i as D,_ as Y,f as K,ac as W,ad as Be,r as R,o as u,b as o,a as e,a9 as Ce,aa as Ee,c as M,j as $,x as b,F,e as N,l as A,w as j,t as _,O as Ue,k as L,h as J,u as O,W as Fe,Z as De,T as Ne,ae as z,M as ae,af as xe,S as He,ag as _e,ah as $e,B as ee,ai as y,aj as q,ak as qe,p as Ze}from"./index.27b8292e.js";import{A as le}from"./AmountInput.46054879.js";import{_ as Ge}from"./CheckButton.9f725e57.js";import{S as re}from"./SelectInput.2842b375.js";import{D as Qe}from"./DatePicker.ad9eca28.js";import{_ as ze}from"./ModalInputFull.c688c5c6.js";import{D as Q,a as je}from"./types.e9c81299.js";const Xe=x({props:{modelValue:{type:Boolean,required:!0}},components:{PreloaderLocal:Ae},setup(t,{emit:s}){const i=K(),l=v(""),p=v(!1),h=v(),g=v(null),C=v(null),d=()=>{clearTimeout(h.value),p.value=!0,h.value=setTimeout(()=>{l.value.length>=2&&i.dispatch(W.SEARCH_PRODUCT_ARTICLE,l.value).then(()=>{setTimeout(()=>{p.value=!1},500)})},500)},w=()=>{l.value="",i.commit(Be.SET_PRODUCT_ARTICLS,[]),s("update:modelValue",!1)};return fe(g,()=>{w()}),Z(()=>t.modelValue,()=>{Ue(()=>{C.value.focus()})}),{search_str:l,loading:p,target:g,searchInput:C,articles:D(()=>i.getters.getProductArticles),doSearch:d,close:w}}}),Ye={class:"product-search-input-container"},Ke={class:"product-search-input options"},We={key:0},Je={key:1},et={class:"article"},tt=L(),st={class:"name"},ut={key:0},ot={key:1};function lt(t,s,i,l,p,h){const g=R("PreloaderLocal"),C=R("router-link");return u(),o("div",{class:b("product-search fullwidth"+(t.modelValue?"":" none")),ref:"target"},[e("div",Ye,[e("div",Ke,[Ce(e("input",{type:"text",placeholder:"\u041F\u043E\u0438\u0441\u043A",autocomplete:"off",onKeyup:s[0]||(s[0]=d=>t.doSearch()),"onUpdate:modelValue":s[1]||(s[1]=d=>t.search_str=d),ref:"searchInput"},null,544),[[Ee,t.search_str]]),t.loading?(u(),M(g,{key:0,small:""})):$("",!0),e("div",{class:"product-search-clear",onClick:s[2]||(s[2]=d=>t.close())})]),e("div",{class:b("product-search-input-options"+(t.search_str==""||t.articles.length==0?" default":""))},[t.search_str==""?(u(),o("span",We,"\u0427\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u0430\u0437 \u043D\u043E\u0432\u044B\u0439 \u043F\u0440\u043E\u0434\u0443\u043A\u0442 - \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0432\u0432\u043E\u0434 \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0430")):(u(),o("div",Je,[(u(!0),o(F,null,N(t.articles,(d,w)=>(u(),o("p",{key:w,class:b("product-search-input-options-item"+(t.loading?" loading":""))},[A(C,{tag:"a",onClick:s[3]||(s[3]=n=>t.close()),to:"/order/"+d.article},{default:j(()=>[e("div",et,_(d.article),1),tt,e("div",st,_(d.name),1)]),_:2},1032,["to"])],2))),128)),t.loading&&t.articles.length==0?(u(),o("span",ut," \u041F\u043E\u0438\u0441\u043A...")):$("",!0),!t.loading&&t.articles.length==0?(u(),o("span",ot,"\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")):$("",!0)]))],2)])],2)}var rt=Y(Xe,[["render",lt]]);const at={class:"content-elem"},dt={class:"order-amount-table-wrap scroll-elem"},nt={class:"table order-amount-table"},it={class:"table-row table-heading"},ct=e("div",{class:"table-elem"},"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430",-1),mt=e("div",{class:"table-elem"},"\u041E\u0441\u0442\u0430\u0442\u043E\u043A",-1),vt={class:"table-elem"},ht=L("\u0426\u0435\u043D\u0430"),_t={key:0,style:{"font-size":"10px"}},pt=e("div",{class:"table-elem"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E",-1),gt=e("div",{class:"table-elem"},"\u041F\u043F / \u0414\u0430\u0442\u0430",-1),At={class:"table-wrap"},ft={class:"table-elem"},Ct=["innerHTML"],Et={class:"table-elem"},Dt=["innerHTML"],$t={key:0,class:"table-elem"},wt=["innerHTML"],kt={key:1,class:"table-elem"},Ot=["innerHTML"],yt={class:"table-elem"},Rt={class:"table-elem"},It={class:"order-amount-more"},St=e("span",{class:"order-amount-more-text"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u0430\u0437 ",-1),Tt={class:"order-amount-more-value"},Lt={key:0,class:"order-amount-more-text presail"},Vt={key:1,class:"order-amount-more-value"},Pt=x({__name:"ProductOffersOrderCard",props:{data:{type:Array,required:!0},discount:{type:Number},modelValue:{type:Array}},emits:["update:modelValue","onClick"],setup(t,{emit:s}){const i=t,l=v([]),p=D(()=>l.value.filter(n=>n.count>0).length),h=D(()=>l.value.filter(n=>n.count>n.RESIDUE&&n.count!=0).length),g=n=>{if(n.check){let c=l.value.find(m=>m.ID==n.ID);c&&(c.count=1)}else{let c=l.value.find(m=>m.ID==n.ID);c&&(c.count=0)}},C=n=>{if(n.count>0){let c=l.value.find(m=>m.ID==n.ID);c&&(c.check=!0)}else{let c=l.value.find(m=>m.ID==n.ID);c&&(c.check=!1)}},d=()=>{if(p.value>0){let n=[];l.value.forEach(c=>{c.count>0&&n.push({ID:c.ID,CHARACTERISTIC:c.CHARACTERISTIC,MAX_DISCOUNT:c.MAX_DISCOUNT,count:c.count,PRICE:c.PRICE,RESIDUE:c.RESIDUE,RESERVED:c.RESERVED,GUID:c.GUID,guid:c.GUID,ORGGUID:c.ORGGUID})}),s("update:modelValue",n),s("onClick"),l.value.forEach(c=>{c.count=0,c.check=!1})}},w=()=>{l.value=i.data.map(n=>({ID:n.ID,CHARACTERISTIC:n.CHARACTERISTIC,MAX_DISCOUNT:n.MAX_DISCOUNT,RESIDUE:n.RESIDUE,RESERVED:n.RESERVED,PRICE:n.PRICE,PPDATA:n.PPDATA,GUID:n.GUID,guid:n.GUID,ORGGUID:n.ORGGUID,count:0,check:!1}))};return J(()=>{w()}),Z(()=>i.data,()=>{w()}),(n,c)=>(u(),o("div",at,[e("div",dt,[e("div",nt,[e("div",it,[ct,mt,e("div",vt,[ht,t.discount?(u(),o("span",_t," - "+_(t.discount)+"%",1)):$("",!0)]),pt,gt]),e("div",At,[(u(!0),o(F,null,N(l.value,m=>(u(),o("div",{class:b("table-row"+(m.count>0?" active":"")+(m.count>m.RESIDUE&&m.count!=0?" presail":"")),key:m.ID},[e("div",ft,[e("span",{innerHTML:m.CHARACTERISTIC},null,8,Ct)]),e("div",Et,[e("span",{innerHTML:m.RESIDUE},null,8,Dt)]),t.discount?(u(),o("div",$t,[e("span",{innerHTML:Number(m.PRICE-m.PRICE/100*t.discount).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")+" \u20BD"},null,8,wt)])):(u(),o("div",kt,[e("span",{innerHTML:Number(m.PRICE).toLocaleString("ru")+" \u20BD"},null,8,Ot)])),e("div",yt,[A(le,{modelValue:m.count,"onUpdate:modelValue":S=>m.count=S,onOnInput:S=>C(m)},null,8,["modelValue","onUpdate:modelValue","onOnInput"]),A(Ge,{modelValue:m.check,"onUpdate:modelValue":S=>m.check=S,onOnClick:S=>g(m)},null,8,["modelValue","onUpdate:modelValue","onOnClick"])]),e("div",Rt,[e("span",null,_(m.PPDATA?m.PPDATA.replaceAll("/","\xA0/\xA0"):""),1)])],2))),128))])])]),e("div",It,[e("div",{class:b(O(p)!=0||O(h)!=0?"order-amount-more-btn":"order-amount-more-btn disable"),onClick:c[0]||(c[0]=m=>d())},[St,e("span",Tt,"("+_(O(p))+")",1),O(h)>0?(u(),o("span",Lt," + \u043F\u0440\u0435\u0434\u0437\u0430\u043A\u0430\u0437 ")):$("",!0),O(h)>0?(u(),o("span",Vt,"("+_(O(h))+")",1)):$("",!0)],2)])]))}}),bt=x({props:{data:{type:Array}},emits:["toOrder"],components:{ProductSliderFullscreen:Ve,ProductInfoCard:Pe},setup(t){var C;let s=v([]),i=K();const l=D({get:()=>i.getters.getLoader,set:d=>i.commit(De.SET_LOADER,d)}),p=v(!1);(C=t.data)==null||C.forEach((d,w)=>s.value.push({id:w,src:d})),Fe(()=>{var d;s.value=[],(d=t.data)==null||d.forEach((w,n)=>s.value.push({id:n,src:w}))});let h=()=>{const d=s.value.shift();s.value=s.value.concat(d)},g=()=>{const d=s.value.pop();s.value=[d].concat(s.value)};return{loader:l,slides:s,fullscreen:p,product:D(()=>i.getters.getProduct),productProtect:D(()=>i.getters.getProductProtect),next:h,previous:g}}}),Mt={class:"content-elem"},Bt={key:0,class:"product-slider-wrap"},Ut=["src"];function Ft(t,s,i,l,p,h){const g=R("ProductInfoCard"),C=R("ProductSliderFullscreen");return u(),o("div",Mt,[t.loader?$("",!0):(u(),o("div",Bt,[e("div",{class:"product-slider-arrow prev",onClick:s[0]||(s[0]=(...d)=>t.previous&&t.previous(...d))}),A(Ne,{name:"product-slider-horisont-trans",class:"product-slider-horisont",tag:"div"},{default:j(()=>[(u(!0),o(F,null,N(t.slides,d=>(u(),o("div",{class:"product-slider-horisont-slide",key:d.id},[d.src?(u(),o("img",{key:0,src:d.src,onClick:s[1]||(s[1]=w=>t.fullscreen=!0)},null,8,Ut)):$("",!0)]))),128))]),_:1}),e("div",{class:"product-slider-arrow next",onClick:s[2]||(s[2]=(...d)=>t.next&&t.next(...d))})])),A(g,{data:t.product,protect:t.productProtect},null,8,["data","protect"]),A(C,{modelValue:t.fullscreen,"onUpdate:modelValue":s[3]||(s[3]=d=>t.fullscreen=d),data:t.data},null,8,["modelValue","data"])])}var Nt=Y(bt,[["render",Ft]]);const xt={class:"content-heading-wrap proudct-heading-wrap"},Ht={class:"content-heading-wrap-elem"},qt={key:0,class:"content-heading"},Zt={key:1,class:"content-heading"},Gt={class:"content-heading-wrap-elem"},Qt={class:"content-heading-price"},zt=e("div",{class:"content-heading-price-text"},"\u0421\u0443\u043C\u043C\u0430 \u0437\u0430\u043A\u0430\u0437\u0430: ",-1),jt={key:0,class:"content-heading-info-elem",style:{position:"absolute"}},Xt={key:0,class:"content-heading-price-value"},Yt={class:"strikethrough"},Kt={key:1,class:"content-heading-price-value"},Wt={class:"content-heading-info"},Jt={class:"content-heading-info-elem"},e0=e("span",{class:"content-heading-info-text"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0435\u0434\u0438\u043D\u0438\u0446: ",-1),t0={class:"content-heading-info-value"},s0={key:0,class:"content-heading-info-elem"},u0=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u0432\u0435\u0441: ",-1),o0={class:"content-heading-info-value"},l0={key:1,class:"content-heading-info-elem"},r0=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1),a0={class:"content-heading-info-value"},d0=x({__name:"OrderHeaderCard",props:{data:{type:Object,required:!0},discount:{type:Number}},setup(t){return(s,i)=>(u(),o("div",xt,[e("div",Ht,[t.data.edit?(u(),o("div",qt,"\u0417\u0430\u043A\u0430\u0437 \u2116 "+_(t.data.id)+" \u043E\u0442 "+_(t.data.date),1)):(u(),o("div",Zt,"\u0417\u0430\u043A\u0430\u0437 \u2116 \u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437 \u043E\u0442 "+_(new Date(t.data.id).toLocaleDateString("ru-RU")),1))]),e("div",Gt,[e("div",Qt,[e("div",null,[zt,t.data.delivery.case=="other"?(u(),o("div",jt,"+\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430: "+_(t.data.delivery.cost)+" \u20BD",1)):$("",!0)]),t.data.total!=t.data.total_discount?(u(),o("div",Xt,[e("span",Yt,_(Number(t.data.total).toLocaleString("ru"))+" \u20BD",1),L(" "+_(Number(t.data.total_discount).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1)])):(u(),o("div",Kt,_(Number(t.data.total).toLocaleString("ru"))+" \u20BD",1))])]),e("div",Wt,[e("div",Jt,[e0,e("span",t0,_(t.data.total_count),1)]),t.data.total_weight?(u(),o("div",s0,[u0,e("span",o0,_(t.data.total_weight)+" \u043A\u0433.",1)])):$("",!0),t.data.total_valume?(u(),o("div",l0,[r0,e("span",a0,_(t.data.total_valume)+" \u043C.\u043A\u0443\u0431.",1)])):$("",!0)])]))}}),n0={emits:["onClick"],setup(){}},i0=e("svg",{class:"edit-btn-img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#000000"},[e("path",{d:"M0 0h24v24H0V0z",fill:"none"}),e("path",{class:"fill",fill:"#A5A7A9",d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})],-1),c0=[i0];function m0(t,s,i,l,p,h){return u(),o("div",{class:"edit-btn",onClick:s[0]||(s[0]=g=>t.$emit("onClick"))},c0)}var pe=Y(n0,[["render",m0]]);const v0={class:"shipment-form-heading shipment-form-wrap"},h0={class:"shipment-form-elem"},_0={class:"shipment-form-item"},p0=e("div",{class:"shipment-form-elem-title"},[e("span",null,"\u0410\u0434\u0440\u0435\u0441 \u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0438")],-1),g0={class:"shipment-form-row"},A0={class:"shipment-form-input-wrap"},f0=e("svg",{class:"shipment-form-map-btn-img",width:"19",height:"25",viewBox:"0 0 19 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M9.49968 25C8.95397 25 8.4653 24.717 8.19255 24.2429C8.18967 24.238 8.18688 24.2329 8.1841 24.2279L1.98479 12.8809C0.505001 10.1724 0.547432 6.95749 2.09831 4.28113C3.61555 1.66277 6.31047 0.0631103 9.30725 0.00197754C9.43527 -0.00065918 9.56398 -0.00065918 9.69191 0.00197754C12.6887 0.0631103 15.3837 1.66277 16.9009 4.28113C18.4518 6.95749 18.4943 10.1723 17.0145 12.8809L10.8152 24.2279C10.8124 24.2329 10.8096 24.238 10.8067 24.2429C10.534 24.717 10.0454 25 9.49968 25ZM9.49963 1.56252C9.44597 1.56252 9.39245 1.56306 9.33903 1.56414C6.89279 1.61404 4.69133 2.92258 3.45017 5.06453C2.17541 7.26448 2.14016 9.90642 3.35593 12.1317L9.49963 23.3768L15.6433 12.1318C16.8591 9.90642 16.8238 7.26448 15.549 5.06453C14.3078 2.92263 12.1064 1.61404 9.66013 1.56414C9.60685 1.56306 9.55329 1.56252 9.49963 1.56252Z",fill:"#8D8D8D"}),e("path",{d:"M9.5 11.3281C7.56147 11.3281 5.98438 9.75103 5.98438 7.8125C5.98438 5.87397 7.56147 4.29688 9.5 4.29688C11.4385 4.29688 13.0156 5.87397 13.0156 7.8125C13.0156 9.75103 11.4386 11.3281 9.5 11.3281ZM9.5 5.85938C8.42305 5.85938 7.54688 6.73555 7.54688 7.8125C7.54688 8.88945 8.42305 9.76563 9.5 9.76563C10.577 9.76563 11.4531 8.88945 11.4531 7.8125C11.4531 6.73555 10.577 5.85938 9.5 5.85938Z",fill:"#8D8D8D"})],-1),C0=e("span",null,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0430\u0434\u0440\u0435\u0441",-1),E0={class:"shipment-form-elem"},D0={class:"shipment-form-item"},$0=e("div",{class:"shipment-form-elem-title"},[e("span",null,"\u0414\u0430\u0442\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043A\u0438")],-1),w0={class:"shipment-form-row"},k0={class:"shipment-form-date"},O0={key:0,class:"shipment-form-elem"},y0={class:"shipment-form-item"},R0=e("span",null,"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0443 \u0432\u043A\u043B. \u0432 \u0441\u0447\u0435\u0442",-1),I0=[R0],S0=["onClick"],T0={key:0,class:"content-heading-btn-img active",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},L0=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"m 8.938 13 l 4.958 -4.938 L 12.833 7 l -3.895 3.875 l -1.771 -1.75 l -1.063 1.063 Z M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z m 0 -11 v 11 v -11 Z"},null,-1),V0=[L0],P0={key:1,class:"content-heading-btn-img",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},b0=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z"},null,-1),M0=[b0],B0={key:1,class:"order-modal"},U0={class:"order-modal-dialog map"},F0={class:"order-modal-content map"},N0={class:"order-modal-header"},x0=e("h3",{class:"order-modal-header-title"},"\u041A\u0430\u0440\u0442\u0430",-1),H0=e("div",{class:"order-modal-body map"},[e("iframe",{src:"https://yandex.ru/map-widget/v1/?mode=whatshere&whatshere%5Bpoint%5D=37.371453%2C55.980529&z=17",width:"800",height:"600",frameborder:"0"},`\r
						`)],-1),q0=x({__name:"ShipmentTransportAddressCard",props:{addressId:{type:Number,required:!0},errorAddress:{type:Boolean,default:!1},date:{type:String,required:!0},errorDate:{type:Boolean,default:!1},addressList:{type:Array,required:!0},loadingAddress:{type:Boolean,default:!1},other:{type:Boolean,default:!1},storagesList:{type:Array,required:!0},storage:{type:String,required:!0},storageError:{type:Boolean,default:!1}},emits:["update:addressId","update:date","update:errorAddress","update:errorDate","update:storage","update:storageError"],setup(t,{emit:s}){const i=t,l=v(!1),p=v(""),h=v(-1);v(!0),v(!1),J(()=>{p.value=i.date,h.value=i.addressId}),Z(h,()=>{s("update:addressId",h.value),s("update:errorAddress",!1)}),Z(p,()=>{s("update:date",p.value),s("update:errorDate",!1)});const g=C=>{s("update:storage",C),s("update:storageError",!1)};return(C,d)=>{const w=R("router-link");return u(),o("div",v0,[e("div",h0,[e("div",_0,[p0,e("div",g0,[e("div",A0,[t.loadingAddress?(u(),M(Ae,{key:0,small:""})):(u(),M(re,{key:1,data:t.addressList,modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=n=>h.value=n),error:t.errorAddress},null,8,["data","modelValue","error"])),A(w,{tag:"a",class:"shipment-form-map-btn",to:"/shipments/address"},{default:j(()=>[f0,C0]),_:1})])])])]),e("div",E0,[e("div",D0,[$0,e("div",w0,[e("div",k0,[A(Qe,{modelValue:p.value,"onUpdate:modelValue":d[1]||(d[1]=n=>p.value=n),error:t.errorDate},null,8,["modelValue","error"])])])])]),t.other&&t.storagesList.length>0?(u(),o("div",O0,[e("div",y0,[e("div",{class:b(["shipment-form-elem-title",{error:t.storageError}])},I0,2),(u(!0),o(F,null,N(t.storagesList,(n,c)=>(u(),o("div",{class:b(["order-list-btn",{error:t.storageError}]),key:c,onClick:m=>g(String(n.id))},[t.storage==n.id?(u(),o("svg",T0,V0)):(u(),o("svg",P0,M0)),L(" "+_(n.name),1)],10,S0))),128))])])):$("",!0),l.value?(u(),o("div",B0,[e("div",U0,[e("div",F0,[e("div",N0,[x0,A(z,{onOnClick:d[2]||(d[2]=n=>l.value=!1)})]),H0])])])):$("",!0)])}}}),Z0=t=>new Date(t.split(".")[2]+"-"+t.split(".")[1]+"-"+t.split(".")[0]),G0={class:"order-list content-elem"},Q0={class:"order-list-top"},z0={class:"order-list-top-elem"},j0={class:"order-list-top-wrap"},X0=e("div",{class:"order-list-elem"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",-1),Y0={class:"order-list-top-elem"},K0={class:"order-list-top-wrap"},W0=e("div",{class:"order-list-elem"},"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F",-1),J0={class:"order-list-top-elem"},es={key:0,class:"content-heading-btn-img",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},ts=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z"},null,-1),ss=[ts],us={key:1,class:"content-heading-btn-img active",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},os=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"m 8.938 13 l 4.958 -4.938 L 12.833 7 l -3.895 3.875 l -1.771 -1.75 l -1.063 1.063 Z M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z m 0 -11 v 11 v -11 Z"},null,-1),ls=[os],rs=L(" \u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B "),as=e("svg",{class:"content-heading-btn-img",width:"30",height:"29",viewBox:"0 0 30 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"#A5A7A9",stroke:"#A5A7A9","stroke-width":"0.2",d:"M 3.2460938,1.2792969 A 0.82590935,0.82590935 0 0 0 2.4199219,2.1074219 L 2.4492188,20.238281 A 0.82590935,0.82590935 0 0 0 3.2734375,21.0625 h 3.7871094 l 0.044922,6.455078 a 0.82590935,0.82590935 0 0 0 1.4101563,0.578125 l 7.003906,-6.994141 h 12.179688 a 0.82590935,0.82590935 0 0 0 0.826172,-0.826171 V 2.1054688 A 0.82590935,0.82590935 0 0 0 27.699219,1.2792969 Z M 4.0742187,2.9316406 H 26.873047 V 19.449219 H 15.177734 A 0.82590935,0.82590935 0 0 0 14.59375,19.691406 L 8.7441406,25.533203 8.7070313,20.230469 A 0.82590935,0.82590935 0 0 0 7.8808594,19.410156 h -3.78125 z"}),e("path",{class:"stroke",stroke:"#A5A7A9","stroke-width":"1.5",d:"M 8.0573765,6.5547755 H 13.656047 M 8.1338615,10.770541 H 20.646739 M 8.0637134,15.056176 h 9.2246446"})],-1),ds=[as],ns=["tooltip","flow"],is=ee('<svg class="content-heading-btn-img" width="30" height="29" viewBox="0 0 30 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 2H18.75C19.3023 2 19.75 2.44772 19.75 3V15H21.75V3C21.75 1.34315 20.4069 0 18.75 0H3C1.34315 0 0 1.34315 0 3V21.8571C0 23.514 1.34315 24.8571 3 24.8571H16.4846C16.1942 24.6822 16 24.3638 16 24V22.8571H3C2.44772 22.8571 2 22.4094 2 21.8571V3C2 2.44772 2.44772 2 3 2Z" fill="#A5A7A9"></path><path d="M27.614 22.1745C26.585 23.406 25.1063 24.6558 23.394 26.1031L23.3937 26.1033C22.8085 26.5978 22.1454 27.1584 21.457 27.7553M27.614 22.1745L27.7675 22.3028M27.614 22.1745L27.7675 22.3028C27.7675 22.3028 27.7675 22.3028 27.7675 22.3028M27.614 22.1745C28.7643 20.798 29.3 19.4928 29.3 18.0669C29.3 16.6816 28.8211 15.4035 27.9515 14.4679C27.0715 13.5213 25.8639 13 24.551 13C23.5697 13 22.671 13.3077 21.88 13.9144L20.8 14.703M27.7675 22.3028C26.7274 23.5476 25.2378 24.8066 23.5349 26.2458L23.5228 26.2561L23.5228 26.2561C22.9375 26.7506 22.2753 27.3104 21.5881 27.9064L21.457 27.7553M27.7675 22.3028C28.9399 20.8998 29.5 19.5508 29.5 18.0669C29.5 16.6357 29.0051 15.3076 28.098 14.3318L28.098 14.3318C27.1795 13.3437 25.9184 12.8 24.551 12.8C23.525 12.8 22.5836 13.1227 21.7583 13.7557C21.4091 14.0235 21.0888 14.3408 20.8 14.703M21.457 27.7553L21.5881 27.9064M21.457 27.7553C21.2753 27.913 21.0419 28 20.8 28C20.558 28 20.3246 27.913 20.1428 27.7551C19.456 27.1595 18.7939 26.5998 18.2098 26.1062L18.2068 26.1036C16.4941 24.6561 15.0151 23.406 13.9861 22.1747C12.8358 20.798 12.3 19.4928 12.3 18.0669C12.3 16.6816 12.779 15.4035 13.6486 14.4679C14.5286 13.5213 15.7361 13 17.0491 13C18.0304 13 18.9291 13.3077 19.7201 13.9144C20.0677 14.1811 20.387 14.4998 20.6742 14.8663L21.5881 27.9064M21.5881 27.9064C21.3698 28.0958 21.0898 28.2 20.8 28.2C20.5101 28.2 20.2301 28.0958 20.0117 27.9061C19.3261 27.3115 18.6649 26.7527 18.0807 26.2589L18.0791 26.2576L18.0791 26.2576L18.0777 26.2563L18.0761 26.255L18.0669 26.2472C16.3632 24.8074 14.873 23.5479 13.8326 22.3029L13.8326 22.3029C12.6602 20.8998 12.1 19.5508 12.1 18.0669C12.1 16.6357 12.595 15.3076 13.5021 14.3318L13.5021 14.3318C14.4206 13.3437 15.6815 12.8 17.0491 12.8C18.0752 12.8 19.0165 13.1227 19.8418 13.7557L19.8418 13.7558C20.1908 14.0235 20.5113 14.3407 20.8 14.703M21.5881 27.9064L20.8 14.703M14.9062 21.4162L14.9062 21.4162C15.8663 22.5653 17.299 23.777 18.9807 25.1985C18.9811 25.1987 18.9814 25.199 18.9817 25.1992L18.9831 25.2004L18.9848 25.2018C19.5341 25.6661 20.153 26.1893 20.7988 26.7476C21.4482 26.1882 22.0682 25.6641 22.6187 25.199M14.9062 21.4162L14.5271 15.2735C15.1778 14.5736 16.072 14.1876 17.0491 14.1876C17.7595 14.1876 18.4107 14.4107 18.9892 14.8543C19.508 15.2523 19.873 15.7588 20.0887 16.1174L20.0887 16.1175C20.2397 16.3685 20.5068 16.5186 20.8 16.5186C21.0932 16.5186 21.3602 16.3685 21.5113 16.1175C21.7271 15.7588 22.0921 15.2523 22.6108 14.8543C23.1892 14.4107 23.8404 14.1876 24.551 14.1876C25.528 14.1876 26.4223 14.5737 27.0729 15.2735C27.7343 15.9851 28.1043 16.9751 28.1043 18.0669C28.1043 19.2064 27.6808 20.2351 26.6939 21.4162C25.7336 22.5655 24.3008 23.7772 22.6187 25.199M14.9062 21.4162C13.9192 20.2351 13.4957 19.2064 13.4957 18.0669C13.4957 16.9751 13.8657 15.9851 14.5271 15.2735L14.9062 21.4162ZM22.6187 25.199L22.7478 25.3517L22.6187 25.199Z" fill="#A5A7A9" stroke="#A5A7A9" stroke-width="0.4"></path><rect x="17.6071" y="5.17856" width="1.7" height="13.4643" rx="0.85" transform="rotate(90 17.6071 5.17856)" fill="#A5A7A9"></rect><rect x="10" y="13" width="1.7" height="6" rx="0.85" transform="rotate(90 10 13)" fill="#A5A7A9"></rect><rect x="14" y="9" width="1.7" height="10" rx="0.85" transform="rotate(90 14 9)" fill="#A5A7A9"></rect></svg>',1),cs={class:"order-list-delivery"},ms={class:"scroll-elem"},vs={class:"order-list-bottom-wrap"},hs={key:0,class:"order-list-row order-list-heading"},_s=e("div",{class:"order-list-elem"},"\u2116",-1),ps=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),gs=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),As={class:"order-list-elem"},fs=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),Cs=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),Es=e("div",{class:"order-list-elem"},null,-1),Ds=["onClick"],$s={class:"order-list-elem"},ws=e("div",{class:"table-arrow"},null,-1),ks={class:"order-list-elem"},Os=["innerHTML"],ys={class:"order-list-elem"},Rs=["innerHTML"],Is=e("div",{class:"order-list-elem"},null,-1),Ss={class:"order-list-elem"},Ts={class:"order-list-elem"},Ls={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},Vs={class:"order-list-elem-delete"},Ps=e("div",{class:"order-list-elem"},null,-1),bs=e("div",{class:"order-list-elem"},null,-1),Ms={class:"order-list-elem"},Bs={class:"order-list-elem"},Us={key:0,class:"order-list-elem-text"},Fs={class:"order-list-elem"},Ns={class:"order-list-elem"},xs={class:"order-list-elem-delete"},Hs={key:0,class:"order-list-bottom-wrap"},qs=e("div",{class:"order-list-row order-list-subheading"},[e("div",null,"\u041F\u043E\u0437\u0438\u0446\u0438\u0438 \u0434\u043B\u044F \u043F\u0440\u0435\u0434\u0437\u0430\u043A\u0430\u0437\u0430")],-1),Zs={class:"order-list-row order-list-heading"},Gs=e("div",{class:"order-list-elem"},"\u2116",-1),Qs=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),zs=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),js={class:"order-list-elem"},Xs=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),Ys=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),Ks=e("div",{class:"order-list-elem"},null,-1),Ws=["onClick"],Js={class:"order-list-elem"},eu=e("div",{class:"table-arrow"},null,-1),tu={class:"order-list-elem"},su=["innerHTML"],uu={class:"order-list-elem"},ou=["innerHTML"],lu=e("div",{class:"order-list-elem"},null,-1),ru={class:"order-list-elem"},au={class:"order-list-elem"},du={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},nu={class:"order-list-elem-delete"},iu=e("div",{class:"order-list-elem"},null,-1),cu=e("div",{class:"order-list-elem"},null,-1),mu={class:"order-list-elem"},vu={class:"order-list-elem"},hu={key:0,class:"order-list-elem-text"},_u={class:"order-list-elem"},pu={class:"order-list-elem"},gu={class:"order-list-elem-delete"},Au=e("div",{class:"order-comment-title"},[e("span",null,"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439")],-1),fu={class:"order-list-buttons"},Cu=e("div",{class:"gradient-btn-text"},"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",-1),Eu=[Cu],Du=e("div",{class:"gradient-btn-text"},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),$u=[Du],wu=e("div",{class:"gradient-btn-text"},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),ku=[wu],Ou=x({__name:"OrderCard",props:{data:{type:Object,required:!0},companys:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue","update:data","onClickAdd","onClickEdit"],setup(t,{emit:s}){const i=t,l=K(),p=ae(),h=v([]),g=v([]),C=v(!1),d=v(!1),w=v(""),n=v(!1),c=v(""),m=v(""),S=v(!1),B=v(-1),I=v(!1),V=v(""),T=v(!1),X=v(!1),G=v("\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A #"),U=v(!1),f=v(0),te=D({get:()=>{var k;return(k=i.data)!=null&&k.edit?i.data.partner_id:i.modelValue},set:k=>s("update:modelValue",k)}),se=D(()=>l.getters.isOrderInDraft),we=D(()=>l.getters.getShipmentsAddressInputData),de=D(()=>l.getters.getOrderStorages),ne=()=>{l.commit(y.CALC_ORDER)},ie=(k,r)=>{V.value="",k?l.dispatch(q.REMOVE_POSITION_PRESAIL,r):l.dispatch(q.REMOVE_POSITION,r)},ce=(k,r)=>{V.value="",k?l.dispatch(q.REMOVE_CHARACTERISTIC_PRESAIL,r):l.dispatch(q.REMOVE_CHARACTERISTIC,r)},me=()=>{let k=!0;if(n.value||l.commit(y.SET_ORDER_COMMENT,""),i.modelValue==""&&(C.value=!0,setTimeout(()=>{C.value=!1},5e3)),f.value>0&&m.value==""&&(S.value=!0,setTimeout(()=>{S.value=!1},5e3),k=!1),f.value>0&&B.value==-1&&(I.value=!0,setTimeout(()=>{I.value=!1},5e3),k=!1),Q[f.value].code=="other"&&de.value.length>0&&V.value==""&&(T.value=!0,setTimeout(()=>{T.value=!1},5e3),k=!1),k){let r={address:f.value==0?"":l.getters.getShipmentsAddress[B.value].address,case:Q[f.value].code,date:Z0(m.value).getTime(),cost:Q[f.value].code=="other"?900:0,bill_to:V.value};l.commit(y.SET_ORDER_DELIVERY,r),i.data.edit?s("onClickEdit"):s("onClickAdd")}console.log(k)},ke=()=>{l.commit(y.CLEAN_ORDER)},ve=()=>{var k;console.log("addToDraft"),l.getters.isOrderInDraft?(l.commit(y.DEL_ORDER_FROM_DRAFT,(k=i.data)==null?void 0:k.id),d.value=!0,w.value="\u0417\u0430\u043A\u0430\u0437 \u0443\u0434\u0430\u043B\u0435\u043D \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430"):(l.commit(y.ADD_ORDER_TO_DRAFT,G.value),U.value=!1,d.value=!0,w.value="\u0417\u0430\u043A\u0430\u0437 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")},he=k=>{p.push("/order/"+k)},Oe=()=>{l.commit(y.SET_ORDER_REQUEST_SERT,!i.data.request_certificate)},ye=()=>{l.commit(y.SET_ORDER_COMMENT,c.value)};J(()=>{var k;if(i.data.comment.length>0&&(n.value=!0,c.value=i.data.comment),l.getters.getShipmentsAddress.length==0&&(X.value=!0,l.dispatch(xe.GET_SHIPMENTS_ADDRESS).then(()=>{X.value=!1})),i.data.edit){let r=(k=Q.find(ue=>ue.code===i.data.delivery.case))==null?void 0:k.id;f.value=r||0,m.value=new Date(i.data.delivery.date).toLocaleString("ru").substr(0,10),s("update:modelValue",i.data.partner_id)}});const Re=()=>{let k={address:"",case:Q[f.value].code,date:0,cost:Q[f.value].code=="other"?900:0,bill_to:""};l.commit(y.SET_ORDER_DELIVERY,k),l.commit(y.CALC_ORDER)};return Z(U,()=>{U.value&&(G.value="\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A #"+Number(l.getters.getOrderDraftCount+1))}),(k,r)=>{const ue=R("router-link");return u(),o(F,null,[e("div",G0,[e("div",Q0,[e("div",z0,[e("div",j0,[X0,A(re,{data:t.companys,error:C.value,"read-only":t.data.edit,modelValue:O(te),"onUpdate:modelValue":r[0]||(r[0]=a=>He(te)?te.value=a:null)},null,8,["data","error","read-only","modelValue"])])]),e("div",Y0,[e("div",K0,[W0,A(re,{data:O(je),modelValue:f.value,"onUpdate:modelValue":r[1]||(r[1]=a=>f.value=a),onOnInput:r[2]||(r[2]=a=>Re())},null,8,["data","modelValue"])])]),e("div",J0,[e("div",{class:"order-list-btn",tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B \u043A \u0437\u0430\u043A\u0430\u0437\u0443",flow:"up",onClick:r[3]||(r[3]=a=>Oe())},[t.data.request_certificate?(u(),o("svg",us,ls)):(u(),o("svg",es,ss)),rs]),e("div",{class:b(["content-heading-btn",{active:n.value}]),to:"#",onClick:r[4]||(r[4]=a=>n.value=!n.value),tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043A\u0430\u0437\u0443",flow:"up"},ds,2),e("div",{class:b(["content-heading-btn",{active:O(se)}]),to:"#",onClickCapture:r[8]||(r[8]=a=>O(se)?ve():U.value=!0),tooltip:O(se)?"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A",flow:U.value?"":"up"},[A(ze,{modelValue:G.value,"onUpdate:modelValue":r[5]||(r[5]=a=>G.value=a),show:U.value,"onUpdate:show":r[6]||(r[6]=a=>U.value=a),"show-ok":"",onOnOk:r[7]||(r[7]=a=>ve())},null,8,["modelValue","show"]),is],42,ns)])]),e("div",cs,[f.value!=0?(u(),M(q0,{key:0,date:m.value,"onUpdate:date":r[9]||(r[9]=a=>m.value=a),addressId:B.value,"onUpdate:addressId":r[10]||(r[10]=a=>B.value=a),errorDate:S.value,"onUpdate:errorDate":r[11]||(r[11]=a=>S.value=a),errorAddress:I.value,"onUpdate:errorAddress":r[12]||(r[12]=a=>I.value=a),storage:V.value,"onUpdate:storage":r[13]||(r[13]=a=>V.value=a),storageError:T.value,"onUpdate:storageError":r[14]||(r[14]=a=>T.value=a),loadingAddress:X.value,addressList:O(we),other:t.data.delivery.case=="other",storagesList:O(de)},null,8,["date","addressId","errorDate","errorAddress","storage","storageError","loadingAddress","addressList","other","storagesList"])):$("",!0)]),e("div",ms,[e("div",vs,[t.data.position.length>0?(u(),o("div",hs,[_s,ps,gs,e("div",As,_(h.value.length!=0?"\u0426\u0435\u043D\u0430":""),1),fs,Cs,Es])):$("",!0),(u(!0),o(F,null,N(t.data.position,(a,P)=>(u(),o("div",{class:b(h.value.indexOf(P)!==-1?"order-list-item active":"order-list-item"),key:P},[e("div",{class:"order-list-row order-list-main-row",onClick:E=>h.value.indexOf(P)===-1?h.value.push(P):h.value.splice(h.value.indexOf(P),1)},[e("div",$s,[L(_(P+1)+" ",1),ws]),e("div",ks,[A(ue,{tag:"a",class:"order-list-elem",to:"/order/"+a.article,title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},{default:j(()=>[e("span",{innerHTML:a.article},null,8,Os)]),_:2},1032,["to"])]),e("div",ys,[e("span",{innerHTML:a.product.NAME},null,8,Rs)]),Is,e("div",Ss,_(a.count),1),e("div",Ts,_(Number(a.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",Ls,[A(pe,{onClick:_e(E=>he(a.article),["stop"])},null,8,["onClick"])]),e("div",Vs,[A(z,{onOnClick:E=>ie(!1,a.guid)},null,8,["onOnClick"])])],8,Ds),e("div",{class:b(h.value.indexOf(P)!==-1?"order-list-sublist active":"order-list-sublist")},[(u(!0),o(F,null,N(a.characteristics,(E,oe)=>(u(),o("div",{key:oe,class:"order-list-row"},[Ps,bs,e("div",Ms,_(E.CHARACTERISTIC),1),e("div",Bs,[L(_(Number(E.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),E.discount>0?(u(),o("div",Us,"\u0441\u043A\u0438\u0434\u043A\u0430 "+_(E.discount)+"% ",1)):$("",!0)]),e("div",Fs,[A(le,{modelValue:E.count,"onUpdate:modelValue":H=>E.count=H,min:1,max:E.RESIDUE,onOnInput:r[15]||(r[15]=H=>ne())},null,8,["modelValue","onUpdate:modelValue","max"])]),e("div",Ns,_(Number(E.price_discount*E.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",xs,[A(z,{onOnClick:H=>ce(!1,{guid:a.guid,characteristics:[E],article:a.article,product:a.product})},null,8,["onOnClick"])])]))),128))],2)],2))),128))]),t.data.position_presail.length>0?(u(),o("div",Hs,[qs,e("div",Zs,[Gs,Qs,zs,e("div",js,_(g.value.length!=0?"\u0426\u0435\u043D\u0430":""),1),Xs,Ys,Ks]),(u(!0),o(F,null,N(t.data.position_presail,(a,P)=>(u(),o("div",{class:b(g.value.indexOf(P)!==-1?"order-list-item active":"order-list-item"),key:P},[e("div",{class:"order-list-row order-list-main-row",onClick:E=>g.value.indexOf(P)===-1?g.value.push(P):g.value.splice(g.value.indexOf(P),1)},[e("div",Js,[L(_(P+1)+" ",1),eu]),e("div",tu,[e("span",{innerHTML:a.article},null,8,su)]),e("div",uu,[e("span",{innerHTML:a.product.NAME},null,8,ou)]),lu,e("div",ru,_(a.count),1),e("div",au,_(Number(a.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",du,[A(pe,{onClick:_e(E=>he(a.article),["stop"])},null,8,["onClick"])]),e("div",nu,[A(z,{onOnClick:E=>ie(!0,a.guid)},null,8,["onOnClick"])])],8,Ws),e("div",{class:b(g.value.indexOf(P)!==-1?"order-list-sublist active":"order-list-sublist")},[(u(!0),o(F,null,N(a.characteristics,(E,oe)=>(u(),o("div",{key:oe,class:"order-list-row"},[iu,cu,e("div",mu,_(E.CHARACTERISTIC),1),e("div",vu,[L(_(Number(E.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),E.discount>0?(u(),o("div",hu,"\u0441\u043A\u0438\u0434\u043A\u0430 "+_(E.discount)+"% ",1)):$("",!0)]),e("div",_u,[A(le,{modelValue:E.count,"onUpdate:modelValue":H=>E.count=H,min:E.RESIDUE+1,onOnInput:r[16]||(r[16]=H=>ne())},null,8,["modelValue","onUpdate:modelValue","min"])]),e("div",pu,_(Number(E.price_discount*E.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",gu,[A(z,{onOnClick:H=>ce(!0,{guid:a.guid,characteristics:[E],article:a.article,product:a.product})},null,8,["onOnClick"])])]))),128))],2)],2))),128))])):$("",!0)])]),e("div",{class:b(["order-comment-form",{show:n.value}])},[Au,Ce(e("textarea",{class:"order-comment-textarea","onUpdate:modelValue":r[17]||(r[17]=a=>c.value=a),onInput:r[18]||(r[18]=a=>ye()),name:""},null,544),[[Ee,c.value]])],2),e("div",fu,[e("button",{class:"order-list-submit gradient-btn disabled",onClick:r[19]||(r[19]=a=>ke())},Eu),t.data.edit?(u(),o("button",{key:0,class:"order-list-submit gradient-btn",onClick:r[20]||(r[20]=a=>me())},$u)):(u(),o("button",{key:1,class:"order-list-submit gradient-btn",onClick:r[21]||(r[21]=a=>me())},ku))]),A($e,{modelValue:d.value,"onUpdate:modelValue":r[22]||(r[22]=a=>d.value=a),message:w.value,timeout:2e3,notification:""},null,8,["modelValue","message"])],64)}}}),yu={props:{name:{type:String}},emits:["onClick"],setup(){}},Ru={class:""};function Iu(t,s,i,l,p,h){return u(),o("button",{class:"default-btn",onClick:s[0]||(s[0]=g=>t.$emit("onClick"))},[e("div",Ru,_(i.name),1)])}var ge=Y(yu,[["render",Iu]]);const Su={key:0,class:"order-modal"},Tu={class:"order-modal-content"},Lu={class:"order-modal-header"},Vu={class:"order-modal-header-title"},Pu={class:"order-modal-body"},bu={key:0},Mu={key:0},Bu={key:0,class:"loading"},Uu=L(" \u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044F! "),Fu=e("br",null,null,-1),Nu=L(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),xu=e("span",null,".",-1),Hu=e("span",null,".",-1),qu=e("span",null,".",-1),Zu=[Uu,Fu,Nu,xu,Hu,qu],Gu={key:1,class:"loading"},Qu=L(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),zu=e("span",null,".",-1),ju=e("span",null,".",-1),Xu=e("span",null,".",-1),Yu=[Qu,zu,ju,Xu],Ku=ee('<svg width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><animateTransform attributeName="transform" dur="1s" type="translate" values="0 0; 1 -1; 1 1; 0 0;" repeatCount="indefinite" begin="0.1"></animateTransform></svg>',1),Wu={key:1},Ju={key:1},eo={class:"order-modal-action"},to=ee('<svg class="order-list-buttons-item-img" width="31" height="29" viewBox="0 0 31 29" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="stroke" x="1" y="1" width="19.75" height="22.8571" rx="2" stroke="#A5A7A9" stroke-width="2"></rect><circle cx="21.2322" cy="20.1964" r="8.80357" fill="#53565B"></circle><circle class="stroke" cx="21.2322" cy="20.1964" r="7.80357" stroke="#A5A7A9" stroke-width="2"></circle><rect class="fill" x="19.6786" y="15.5358" width="1.7" height="6.21429" rx="0.85" fill="#A5A7A9"></rect><rect class="fill" x="24.8571" y="20.1" width="1.7" height="5.17857" rx="0.85" transform="rotate(90 24.8571 20.1)" fill="#A5A7A9"></rect><rect class="fill" x="17.6071" y="5.17859" width="1.7" height="13.4643" rx="0.85" transform="rotate(90 17.6071 5.17859)" fill="#A5A7A9"></rect><rect class="fill" x="11.3929" y="13" width="1.7" height="7.25" rx="0.85" transform="rotate(90 11.3929 13)" fill="#A5A7A9"></rect><rect class="fill" x="14.5" y="9" width="1.7" height="10.3571" rx="0.85" transform="rotate(90 14.5 9)" fill="#A5A7A9"></rect></svg><div class="order-modal-action-btn-text">\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u043A\u0430\u0437\u043E\u0432</div>',2),so=[to],uo=ee('<svg class="order-list-buttons-item-img" width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="24" y="3" width="8" height="2" rx="1" fill="#A5A7A9"></rect><rect class="fill" x="29" width="8" height="2" rx="1" transform="rotate(90 29 0)" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle></svg><div class="order-modal-action-btn-text">\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437</div>',2),oo=[uo],lo=x({__name:"OrderModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:s}){const i=K(),l=ae(),p=v(!1),h=v(null);fe(h,()=>{p.value=!0,setTimeout(()=>{p.value=!1},500)});const g=()=>{i.commit(y.CLEAN_ORDER),i.commit(y.CLEAN_ORDER_ERROR),i.commit(y.CLEAN_ADD_ORDER),s("update:modelValue",!1)},C=()=>{i.commit(y.CLEAN_ORDER),i.commit(y.CLEAN_ORDER_ERROR),i.commit(y.CLEAN_ADD_ORDER),s("update:modelValue",!1)},d=()=>{i.commit(y.CLEAN_ORDER),i.commit(y.CLEAN_ADD_ORDER),s("update:modelValue",!1),l.push({name:"Orders"})},w=D(()=>i.getters.getOrderError),n=D(()=>i.getters.getOrderErrorMsg),c=D(()=>i.getters.isOrderAddNew),m=D(()=>i.getters.getOrderAddNew),S=D(()=>i.getters.getOrder);return(B,I)=>t.modelValue?(u(),o("div",Su,[e("div",{class:b(p.value?"order-modal-dialog shake":"order-modal-dialog"),ref_key:"target_modal",ref:h},[e("div",Tu,[e("div",Lu,[e("h3",Vu,_(O(S).edit?"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430 \u2116"+O(S).id:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430"),1),O(c)?(u(),M(z,{key:0,onOnClick:I[0]||(I[0]=V=>g())})):$("",!0)]),e("div",Pu,[O(w)?(u(),o("div",Ju,_(O(n)),1)):(u(),o("div",bu,[O(c)?(u(),o("div",Wu,_(O(m).message),1)):(u(),o("div",Mu,[O(S).edit?(u(),o("span",Gu,Yu)):(u(),o("span",Bu,Zu)),Ku]))]))]),e("div",eo,[O(w)?(u(),M(ge,{key:0,name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",onOnClick:I[1]||(I[1]=V=>g())})):$("",!0),O(w)?(u(),M(ge,{key:1,name:"\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437",onOnClick:I[2]||(I[2]=V=>C())})):$("",!0),O(c)?(u(),o("button",{key:2,class:"order-modal-action-btn",onClick:I[3]||(I[3]=V=>d())},so)):$("",!0),O(c)?(u(),o("button",{key:3,class:"order-modal-action-btn",onClick:I[4]||(I[4]=V=>C())},oo)):$("",!0)])])],2)])):$("",!0)}}),ro=x({components:{PersonalBar:Ie,Notification:Se,CompanyBarTop:Te,TopNav:Le,ProductHeaderCard:be,ProductSearchResultCard:Me,OrderProductSearchInput:rt,ProductOffersOrderCard:Pt,ProductSliderSmallCard:Nt,OrderHeaderCard:d0,OrderCard:Ou,OrderModal:lo,SnackBar:$e,OrderDraftModal:qe},props:["article"],setup(t){const s=K(),i=ae(),l=D({get:()=>s.getters.getLoader,set:T=>s.commit(De.SET_LOADER,T)}),p=v(""),h=v(""),g=v(!1),C=v(""),d=v(!1),w=v(!1),n=v(!1),c=v([]),m=()=>{let T={article:s.getters.getProduct.ARTICLE,guid:s.getters.getProduct.UID,product:s.getters.getProduct,characteristics:c.value};s.dispatch(q.ADD_POSITION,T)},S=()=>{p.value==""?(g.value=!0,setTimeout(()=>{g.value=!1},5e3),C.value="\u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442\u0430"):(d.value=!0,s.commit(y.ADD_ORDER_PARTNER_ID,p.value),setTimeout(()=>{s.dispatch(q.ADD_ORDER,s.getters.getOrderToAdd).catch(()=>{d.value=!1,g.value=!0,setTimeout(()=>{g.value=!1},5e3),C.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3))},B=()=>{d.value=!0,s.commit(y.ADD_ORDER_PARTNER_ID,p.value),setTimeout(()=>{s.dispatch(q.EDIT_ORDER_ACTION,s.getters.getOrderToAdd).catch(()=>{d.value=!1,g.value=!0,setTimeout(()=>{g.value=!1},5e3),C.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3)};Z(()=>t.article,T=>{T!==""&&T!==void 0&&(l.value=!0,s.dispatch(W.SEARCH_PRODUCT,t.article).then(()=>{s.getters.getProduct.ID?h.value=s.getters.getProduct.ID:i.push({name:"Order"})}).finally(()=>{l.value=!1}))}),Z(p,()=>{s.getters.getOrder.edit||s.commit(y.ADD_ORDER_PARTNER_ID,p.value),s.commit(y.CALC_ORDER)}),J(()=>{s.commit(y.ADD_ORDER_PARTNER_ID,p.value),s.getters.isCompanysLoad||s.dispatch(Ze.GET_COMPANYS).finally(()=>{setTimeout(()=>{p.value=s.getters.getCompanys.length==0?"":s.getters.getCompanys[0].uid},500)}),h.value=s.getters.getProduct.ID,t.article!==""&&t.article!==void 0&&(l.value=!0,s.dispatch(W.SEARCH_PRODUCT,t.article).then(()=>{s.getters.getProduct.ID?h.value=s.getters.getProduct.ID:i.push({name:"Order"})}).finally(()=>{l.value=!1}))});const I=()=>{l.value=!0,s.dispatch(W.GET_PRODUCT_BY_ID,h.value).then(()=>{h.value=s.getters.getProduct.ID}).finally(()=>{l.value=!1})},V=D(()=>{const T=s.getters.getProduct.STATUS;return T=="Outlet"||T=="Discount"||T=="Activity"?0:s.getters.getCompanyDiscount(p.value,s.getters.getProductOffersORGGUID)});return{error:g,errorMsg:C,activeCompanyUid:p,activeProductId:h,showModal:d,showDraft:w,productItems:c,productSearch:n,isProduct:D(()=>s.getters.isProduct),companyBarTopData:D(()=>s.getters.getCompanysList),productOffers:D(()=>s.getters.getProductOffers),product:D(()=>s.getters.getProduct),productFound:D(()=>s.getters.getProductFound),productImages:D(()=>s.getters.getProductImages),productProtect:D(()=>s.getters.getProductProtect),isOrder:D(()=>s.getters.isOrder),order:D(()=>s.getters.getOrder),getOrderDraftCount:D(()=>s.getters.getOrderDraftCount),discount:V,addToOrder:m,addOrder:S,editOrder:B,loadProduct:I}}}),ao={class:"top-line product-page"},no={key:0,class:"order-info"},io=L(" \u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043E\u0432\u0430\u0440 \u0432 "),co=L("\u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0435"),mo=L(" \u0438\u043B\u0438 \u0432\u043E\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435\u0441\u044C "),vo=L("\u043F\u043E\u0438\u0441\u043A\u043E\u043C"),ho=L(". "),_o={key:1},po={class:"content-wrap content-product-wrap"},go={class:"content-wrap-elem"},Ao={class:"content-wrap-elem"},fo={key:3,class:"content-heading-wrap proudct-heading-wrap"},Co={key:0,class:"content-heading-wrap-elem"},Eo=e("div",{class:"order-info"},"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438 \u043A \u0437\u0430\u043A\u0430\u0437\u0443 \u0438 \u0442\u043E\u0433\u0434\u0430 \u043E\u043D \u0431\u0443\u0434\u0435\u0442 \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D",-1),Do=[Eo],$o={class:"content-wrap content-order-wrap"},wo={class:"content-wrap-elem"},ko={class:"content-wrap-elem"};function Oo(t,s,i,l,p,h){const g=R("CompanyBarTop"),C=R("Notification"),d=R("PersonalBar"),w=R("top-nav"),n=R("router-link"),c=R("OrderProductSearchInput"),m=R("ProductHeaderCard"),S=R("ProductSearchResultCard"),B=R("ProductOffersOrderCard"),I=R("OrderHeaderCard"),V=R("OrderCard"),T=R("ProductSliderSmallCard"),X=R("OrderModal"),G=R("SnackBar"),U=R("OrderDraftModal");return u(),o("div",null,[e("div",ao,[A(g,{data:t.companyBarTopData,modelValue:t.activeCompanyUid,"onUpdate:modelValue":s[0]||(s[0]=f=>t.activeCompanyUid=f)},null,8,["data","modelValue"]),A(C),A(d)]),A(w,{toDraft:"",draft:t.getOrderDraftCount,onOnClick:s[1]||(s[1]=f=>t.showDraft=!0)},null,8,["draft"]),t.isProduct?(u(),o("div",_o,[A(c,{modelValue:t.productSearch,"onUpdate:modelValue":s[2]||(s[2]=f=>t.productSearch=f)},null,8,["modelValue"]),A(m,{title:String(t.product.NAME),price:String(t.product.PRICE_OPT),discount:t.discount,status:String(t.product.STATUS),onShowSearch:s[3]||(s[3]=f=>t.productSearch=!t.productSearch)},null,8,["title","price","discount","status"]),e("div",po,[e("div",go,[A(S,{data:t.productFound,cardType:"order",modelValue:t.activeProductId,"onUpdate:modelValue":s[4]||(s[4]=f=>t.activeProductId=f),onOnClick:s[5]||(s[5]=f=>t.loadProduct()),onShowSearch:s[6]||(s[6]=f=>t.productSearch=!t.productSearch)},null,8,["data","modelValue"])]),e("div",Ao,[A(B,{data:t.productOffers,discount:t.discount,modelValue:t.productItems,"onUpdate:modelValue":s[7]||(s[7]=f=>t.productItems=f),onOnClick:s[8]||(s[8]=f=>t.addToOrder())},null,8,["data","discount","modelValue"])])])])):(u(),o("div",no,[io,A(n,{tag:"a",to:"/catalog/catalog",class:"order-info-link"},{default:j(()=>[co]),_:1}),mo,A(n,{tag:"a",to:"/product",class:"order-info-link"},{default:j(()=>[vo]),_:1}),ho])),t.isOrder?(u(),M(I,{key:2,discount:t.discount,data:t.order},null,8,["discount","data"])):(u(),o("div",fo,[t.isProduct?(u(),o("div",Co,Do)):$("",!0)])),e("div",$o,[e("div",wo,[t.isOrder?(u(),M(V,{key:0,data:t.order,companys:t.companyBarTopData,modelValue:t.activeCompanyUid,"onUpdate:modelValue":s[9]||(s[9]=f=>t.activeCompanyUid=f),onOnClickAdd:t.addOrder,onOnClickEdit:t.editOrder},null,8,["data","companys","modelValue","onOnClickAdd","onOnClickEdit"])):$("",!0)]),e("div",ko,[t.isProduct?(u(),M(T,{key:0,data:t.productImages},null,8,["data"])):$("",!0)])]),A(X,{modelValue:t.showModal,"onUpdate:modelValue":s[10]||(s[10]=f=>t.showModal=f)},null,8,["modelValue"]),A(G,{modelValue:t.error,"onUpdate:modelValue":s[11]||(s[11]=f=>t.error=f),message:t.errorMsg},null,8,["modelValue","message"]),A(U,{modelValue:t.showDraft,"onUpdate:modelValue":s[12]||(s[12]=f=>t.showDraft=f)},null,8,["modelValue"])])}var Fo=Y(ro,[["render",Oo]]);export{Fo as default};
