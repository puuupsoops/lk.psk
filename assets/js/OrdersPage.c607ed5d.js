import{d as Ce,g as ye,R as Ve,h as m,B as he,D as _e,j as K,L as V,aE as Fe,i as Ee,S as Me,r as qe,o as a,b as i,a as s,p as E,u as r,U as y,t as w,z as f,F as Z,f as Y,ap as Ne,m as b,k as n,aF as ze,aG as Ge,n as Ke,ax as T,w as pe,c as z,e as G,aH as F,ai as ge,$ as Je,aI as je,aq as we,aA as We,aJ as Ze,aK as Ye,am as He,l as Qe,s as Xe,ar as ee}from"./index.96b825e6.js";import{N as et}from"./Notification.4853f998.js";import{_ as tt}from"./PersonalBar.52b6abe9.js";import{O as te,a as O,_ as ut}from"./types.2d091df0.js";import{_ as st}from"./CatalogPagination.f6fde4b5.js";import{_ as lt}from"./TopNav.0b516e93.js";import"./CompanyCalendar.vue_vue_type_style_index_0_lang.b1ee90c6.js";import{_ as at}from"./CompanyBarTop.14a699ef.js";/* empty css                                                          */import"./vee-validate.esm.466aae41.js";import"./object.ced0405a.js";const it={class:"orders-heading-info"},ot={class:"orders-heading-pagination"},rt=s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[s("path",{fill:"#A5A7A9",d:"m9.8 21.3-.375-3q-.175-.025-.625-.275T7.775 17.4l-2.75 1.15-2.2-3.825 2.4-1.825q-.05-.2-.062-.413-.013-.212-.013-.487 0-.175.025-.413.025-.237.05-.537l-2.4-1.8 2.2-3.8L7.8 6.625q.35-.275.762-.525.413-.25.863-.4L9.8 2.675h4.4l.375 3q.475.175.838.4.362.225.737.55l2.825-1.175 2.2 3.8-2.5 1.875q.05.25.063.437.012.188.012.438 0 .225-.012.438-.013.212-.063.462l2.475 1.825-2.225 3.825-2.775-1.175q-.325.275-.7.5-.375.225-.875.425l-.375 3Zm2.175-6.4q1.2 0 2.038-.85.837-.85.837-2.05 0-1.2-.837-2.05-.838-.85-2.038-.85-1.225 0-2.062.85-.838.85-.838 2.05 0 1.2.838 2.05.837.85 2.062.85Zm0-1.4q-.625 0-1.062-.438-.438-.437-.438-1.062t.438-1.062q.437-.438 1.062-.438.6 0 1.05.438.45.437.45 1.062t-.45 1.062q-.45.438-1.05.438ZM12 11.975ZM11 19.9h1.95l.375-2.7q.75-.2 1.35-.55.6-.35 1.175-.925l2.5 1.075.975-1.7-2.2-1.625q.125-.4.163-.75.037-.35.037-.725t-.037-.713q-.038-.337-.163-.737l2.2-1.675-.95-1.675-2.55 1.075q-.45-.5-1.15-.913-.7-.412-1.375-.587l-.3-2.7h-1.975l-.325 2.7q-.8.2-1.4.525-.6.325-1.2.95L5.625 7.2 4.65 8.875l2.15 1.6q-.125.375-.175.75-.05.375-.05.775 0 .375.038.738.037.362.162.762L4.65 15.1l.975 1.7 2.45-1.05q.6.575 1.225.938.625.362 1.375.537Z"})],-1),nt=[rt],dt=["onClick"],vt=s("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("rect",{x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),s("rect",{width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),ct=s("span",null,"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C",-1),mt=[vt,ct],ft={class:"orders-list"},ht=s("div",null,"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),_t=s("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),pt=[_t],gt=s("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),s("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),wt=[gt],Ct={class:"orders-list-elem-center"},yt=s("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{class:"fill",d:"M7.00726 8.11117L12.7923 2.32601C12.9262 2.1922 13 2.01359 13 1.82313C13 1.63268 12.9262 1.45406 12.7923 1.32026L12.3664 0.894224C12.0888 0.616998 11.6378 0.616998 11.3606 0.894224L6.5027 5.75217L1.63936 0.888833C1.50545 0.755029 1.32694 0.681152 1.13659 0.681152C0.946033 0.681152 0.767522 0.755029 0.633507 0.888833L0.207681 1.31487C0.0737714 1.44878 -4.1357e-08 1.62729 -4.9682e-08 1.81774C-5.8007e-08 2.0082 0.0737714 2.18681 0.207681 2.32062L5.99802 8.11117C6.13236 8.24529 6.31171 8.31896 6.50238 8.31854C6.69378 8.31896 6.87303 8.24529 7.00726 8.11117Z",fill:"#A5A7A9"})],-1),Et=[yt],bt=s("svg",{width:"12",height:"12",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("rect",{class:"fill",x:"0.250031",y:"2.07935",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"rotate(-45 0.250031 2.07935)",fill:"#A5A7A9"}),s("rect",{class:"fill",width:"2.25351",height:"22.5351",rx:"1.12676",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 17.5282 2.07935)",fill:"#A5A7A9"})],-1),At=[bt],kt=["onClick"],$t=s("div",{class:"table-arrow"},null,-1),Dt=["tooltip"],Ot=["onClick"],St=["onClick"],xt=["onClick"],Pt=["onClick"],Lt=["onClick"],It=["onClick"],Bt=b("\u0417\u0430\u044F\u0432\u043A\u0430 \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442"),Tt=["onClick"],Rt={key:0},Ut={class:"orders-list-info-elem"},Vt={class:"orders-list-info-elem"},Ft={key:0,class:"orders-list-info-about tooltip"},Mt=["onClick"],qt=s("span",{class:"tooltiptext"},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442",-1),Nt={key:1,class:"orders-list-info-about tooltip"},zt={class:"orders-list-info-download disable"},Gt=s("span",{class:"tooltiptext"},[b("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0447\u0435\u0442 \u043C\u043E\u0436\u043D\u043E \u0442\u043E\u043B\u044C\u043A\u043E "),s("br"),b(" \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430")],-1),Kt={key:0,class:"orders-list-info-elem orders-list-info-doc-wrap"},Jt={key:1,class:"orders-list-info-elem orders-list-info-doc-wrap"},jt=["href"],Wt=["href"],Zt=["href"],Yt=["href"],Ht={class:"orders-list-info-elem"},Qt={class:"orders-list-info-elem"},Xt={key:0,class:"orders-list-elem-request-bill"},eu=["onClick"],tu={class:"orders-list-elem-request-bill"},uu=["onClick"],su={key:1,class:"orders-list-info-row"},lu=Qe('<div class="orders-list-info-elem"></div><div class="orders-list-info-elem"> \u0421\u0447\u0435\u0442 \u043E\u0442\u0441\u0443\u0442\u0432\u0443\u0435\u0442 </div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div><div class="orders-list-info-elem"></div>',6),au=[lu],iu={key:0,class:"orders-list-row orders-list-main-row"},ou={class:"order-info"},ru=b(" \u0417\u0430\u043A\u0430\u0437\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 "),nu=b("\u043D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437"),du=b(" \u0438 \u043E\u043D \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0432 \u0441\u043F\u0438\u0441\u043A\u0435. "),vu=Ce({__name:"OrdersListCard",props:{contrAgent:{type:String},period:{type:String},status:{type:String},loading:{type:Boolean,default:!1},search:{type:Object,required:!0},refresh:{type:Boolean,default:!1}},setup(S){var re;const h=S,_=ye(),J=Ve(),A=m(!1),p=m(-1),R=m(-1),$=m(null),x=m(!1),D=m([]),k=m(-1),c=m([{name:"id",value:"",show:!1},{name:"name",value:"",show:!1},{name:"date",value:"",show:!1}]),M=m(!1),C=m(!1),P="http://91.232.12.198:82",d=m({maxItemOnPage:10,currentPage:1}),q=m(-1),be=m(he("tempOrderId")),Ae=m((re=he("tempKPType"))!=null?re:"");_e($,()=>{R.value=-1});let j=K(()=>_.getters.getOrders);const ue=()=>{var l;if(p.value!=-1&&L.value&&Array.isArray(L.value[p.value].checks)){let e=(l=L.value[p.value].checks)==null?void 0:l.map(v=>v.doc_status?null:_.dispatch(F.GET_ORDERS_DOCSTATUS,v.guid));e&&Promise.all(e).finally(()=>{})}};V(p,()=>{ue()}),V(()=>h.status,()=>{d.value.currentPage=1,p.value=-1}),V(()=>h.contrAgent,()=>{d.value.currentPage=1,p.value=-1}),V(()=>h.search,()=>{d.value.currentPage=1,p.value=-1}),V(()=>h.period,()=>{d.value.currentPage=1,p.value=-1}),V(()=>h.refresh,(l,e)=>{e==!0&&l==!1&&ue()});const L=K(()=>{let l=j.value.filter(e=>h.contrAgent==""||e.partner_guid==h.contrAgent);return l=l.filter(e=>ke(e.date)),l=l.filter(e=>$e(e)),l=l.filter(e=>I(e)),c.value[1].value!=""&&(l=l.filter(e=>e.name.indexOf(c.value[1].value)!=-1)),c.value[2].value!=""&&(l=l.filter(e=>e.date.indexOf(c.value[2].value)!=-1)),l}),se=l=>d.value.maxItemOnPage!=-1?l>=(d.value.currentPage-1)*d.value.maxItemOnPage&&l<d.value.currentPage*d.value.maxItemOnPage:!0,I=l=>{if(h.search.search=="")return!0;switch(h.search.id){case 1:return l.name.toUpperCase().indexOf(h.search.search.toUpperCase())!=-1;case 2:return String(l.n).toUpperCase().indexOf(h.search.search.toUpperCase())!=-1;case 3:return l.date.toUpperCase().indexOf(h.search.search.toUpperCase())!=-1;default:return!0}},ke=l=>{var e;if(h.period=="\u0412\u0441\u0435")return!0;{const v=(e=h.period)==null?void 0:e.split(" - ")[0],t=v==null?void 0:v.substring(6,10),g=v==null?void 0:v.substring(3,5);return t==l.substring(6,10)&&g==l.substring(3,5)}},$e=l=>h.status=="\u0412\u0441\u0435"?!0:Array.isArray(l.checks)?l.checks.findIndex(e=>{var t;const v=(t=te.find(g=>g.name==h.status))==null?void 0:t.id;return v&&v-1==e.status})!=-1:!1,De=l=>{D.value.push(l),_.dispatch(ge.GET_BILL_FILE_SAVE,l).finally(()=>{D.value=D.value.filter(e=>e!==l)})},Oe=(l,e)=>{const t=_.getters.getCompanyStoragesData(l).find(g=>g.guid==e);return t?t.name.replace(/(^|\s)\S/g,g=>g.toUpperCase()).replace(/(ООО)|(")|(\s)|([а-я])/g,""):"\u0421\u043A\u043B\u0430\u0434"},Se=l=>{_.commit(Je.SET_CURRENT_ORDER,l),be.value=l,Ae.value=je.ORDER},xe=async l=>{A.value=!0,await _.dispatch(ge.GET_ORDER_DETAIL,l),_.commit(we.SET_KP_OFFER_POSITION,_.getters.getOrderDetail.position),_.commit(we.SET_KP_STEP,2),A.value=!1,await J.push("/kp")},Pe=l=>{A.value=!0,_.commit(We.CLEAN_ORDER_DETAIL),_.commit(Ze.CLEAR_CLAIMS_NEW),_.dispatch(Ye.ADD_CLAIMS_NEW,l).then(()=>{A.value=!1,J.push("/claims/request")})},Le=(l,e)=>{if(q.value==-1){q.value=e.id;const v=Object.assign({},{guid:e.guid,id:e.id,n:e.n,organization_id:e.organization_id,status:e.status});_.dispatch(F.GET_ORDERS_BILL_REQUEST,{id:l,check:v}).then(()=>{q.value=-1}).catch(()=>{q.value=-1})}},Ie=l=>{A.value=!0;let e=l.guid;_.dispatch(F.GET_ORDERS_DOWNLOAD_CERTIFICATED,e).then(()=>{A.value=!1})},Be=l=>{var v;A.value=!0;let e=[];(v=l.checks)==null||v.forEach(t=>{e.push(t.guid)}),_.dispatch(F.GET_ORDERS_DOWNLOAD_CERTIFICATED_ALL,e).then(()=>{A.value=!1})},le=m(),ae=m(0),U=m(""),W=m(!1),ie=m();_e(ie,()=>{W.value=!1});const H={id:{name:"\u2116",width:3,unit:"%",min:10,visible:!0,disabled:!0},name:{name:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",width:20,unit:"%",min:10,visible:!0,disabled:!1},partner_name:{name:"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",width:20,unit:"%",min:10,visible:!0,disabled:!1},n:{name:"\u041D\u043E\u043C\u0435\u0440",width:15,unit:"%",min:5,visible:!0,disabled:!1},date:{name:"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F",width:15,unit:"%",min:10,visible:!0,disabled:!1},status:{name:"\u0421\u0442\u0430\u0442\u0443\u0441",width:10,unit:"%",min:10,visible:!0,disabled:!1},comment:{name:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438",width:15,unit:"%",min:10,visible:!0,disabled:!1},info:{name:"\u0418\u043D\u0444\u043E",width:10,unit:"%",min:10,visible:!0,disabled:!0}},u=m(Fe.cloneDeep(H)),oe=l=>{const e=l.movementX/ae.value*100;Object.keys(u.value).reduce((v,t)=>u.value[t].visible?v+u.value[t].width:v,0)+e<100&&u.value[U.value].width+e>u.value[U.value].min&&(u.value[U.value].width=u.value[U.value].width+e)},B=(l,e)=>{U.value=e,document.addEventListener("mousemove",oe)},Te=()=>{document.removeEventListener("mousemove",oe),U.value="",Q()},Re=()=>{const l=Object.keys(u.value).reduce((e,v)=>u.value[v].visible?e+u.value[v].width:e,0);l>100&&Object.keys(u.value).forEach(e=>{e!="id"&&(u.value[e].width=u.value[e].width-(l-100)/6)})},Ue=()=>{u.value=JSON.parse(JSON.stringify(H)),Q()},Q=()=>{Re(),localStorage.setItem("orders_list_table",JSON.stringify(u.value))};return Ee(()=>{Me(()=>{ae.value=le.value.getBoundingClientRect().width;const l=localStorage.getItem("orders_list_table");l&&(u.value=JSON.parse(l)),u.value.comment||(u.value=JSON.parse(JSON.stringify(H)),localStorage.setItem("orders_list_table",JSON.stringify(u.value)))})}),(l,e)=>{const v=qe("router-link");return a(),i("div",{class:"orders-list-wrap",onMouseup:e[23]||(e[23]=t=>Te())},[s("div",it,[s("div",ot,[E(st,{maxPage:d.value.maxItemOnPage!==-1?Math.ceil(r(L).length/d.value.maxItemOnPage):1,currentPage:d.value.currentPage,"onUpdate:currentPage":e[0]||(e[0]=t=>d.value.currentPage=t),maxItemOnPage:d.value.maxItemOnPage,"onUpdate:maxItemOnPage":e[1]||(e[1]=t=>d.value.maxItemOnPage=t)},null,8,["maxPage","currentPage","maxItemOnPage"])]),s("div",{class:"orders-heading-info-text",style:y(r(L).length!==r(j).length?"visibility: visible":"visibility: hidden")}," \u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E "+w(r(L).length)+" \u0438\u0437 "+w(r(j).length),5),s("div",{class:f(["orders-heading-info-settings",{active:W.value}]),onClick:e[2]||(e[2]=t=>W.value=!0)},nt,2),s("div",{class:f(["orders-heading-info-settings-dropdown",{active:W.value}]),ref_key:"tableMenu",ref:ie},[(a(!0),i(Z,null,Y(u.value,(t,g)=>(a(),i("a",{class:"orders-list-more-dropdown-link",key:g,onClick:Q},[E(Ne,{modelValue:t.visible,"onUpdate:modelValue":N=>t.visible=N,disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"]),s("span",{onClick:N=>t.disabled?null:t.visible=!t.visible},w(t.name),9,dt)]))),128)),s("a",{class:"orders-list-more-dropdown-link clear",onClick:e[3]||(e[3]=t=>Ue())},mt)],2)]),s("div",ft,[s("div",{class:"orders-list-row orders-list-heading",ref_key:"table",ref:le},[u.value.id.visible?(a(),i("div",{key:0,class:f(["orders-list-elem",{id:!0}]),style:y(`width: ${u.value.id.width}${u.value.id.unit}`)},[b(w(u.value.id.name)+" ",1),s("div",{class:"orders-list-elem-resize",onMousedown:e[4]||(e[4]=t=>B(t,"id"))},null,32)],4)):n("",!0),u.value.name.visible?(a(),i("div",{key:1,class:f(["orders-list-elem",{name:!0,active:I.search!==""&&I.id===1||c.value[1].value!==""}]),style:y(`width: ${u.value.name.width}${u.value.name.unit}`)},[E(ze,{modelValue:c.value[1].value,"onUpdate:modelValue":e[5]||(e[5]=t=>c.value[1].value=t),show:c.value[1].show,"onUpdate:show":e[6]||(e[6]=t=>c.value[1].show=t)},null,8,["modelValue","show"]),ht,s("div",{class:f(["orders-list-elem-filter",{active:c.value[1].show||c.value[1].value!==""}]),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:e[7]||(e[7]=t=>c.value[1].show=!0)},pt,2),c.value[1].value!==""?(a(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:e[8]||(e[8]=t=>{c.value[1].value="",p.value=-1})},wt)):n("",!0),s("div",{class:"orders-list-elem-resize",onMousedown:e[9]||(e[9]=t=>B(t,"name"))},null,32)],6)):n("",!0),u.value.partner_name.visible?(a(),i("div",{key:2,class:f(["orders-list-elem",{partner_name:!0,active:S.contrAgent!==""}]),style:y(`width: ${u.value.partner_name.width}${u.value.partner_name.unit}`)},[b(w(u.value.partner_name.name)+" ",1),s("div",{class:"orders-list-elem-resize",onMousedown:e[10]||(e[10]=t=>B(t,"partner_name"))},null,32)],6)):n("",!0),u.value.n.visible?(a(),i("div",{key:3,class:f(["orders-list-elem",{n:!0,active:I.search!==""&&I.id===2}]),style:y(`width: ${u.value.n.width}${u.value.n.unit}`)},[s("div",Ct,w(u.value.n.name),1),s("div",{class:"orders-list-elem-resize",onMousedown:e[11]||(e[11]=t=>B(t,"n"))},null,32)],6)):n("",!0),u.value.date.visible?(a(),i("div",{key:4,class:f(["orders-list-elem",{date:!0,active:I.search!==""&&I.id===3||S.period!=="\u0412\u0441\u0435"||c.value[2].value!==""}]),style:y(`width: ${u.value.date.width}${u.value.date.unit}`)},[E(Ge,{modelValue:c.value[2].value,"onUpdate:modelValue":e[12]||(e[12]=t=>c.value[2].value=t),show:c.value[2].show,"onUpdate:show":e[13]||(e[13]=t=>c.value[2].show=t)},null,8,["modelValue","show"]),s("div",null,w(u.value.date.name),1),s("div",{class:f("orders-list-elem-filter"+(c.value[2].show||c.value[2].value!==""?" active":"")),title:"\u0424\u0438\u043B\u044C\u0442\u0440",onClick:e[14]||(e[14]=t=>c.value[2].show=!0)},Et,2),c.value[2].value!==""?(a(),i("div",{key:0,class:"orders-list-elem-filter active",title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440",onClick:e[15]||(e[15]=t=>{c.value[2].value="",p.value=-1})},At)):n("",!0),s("div",{class:"orders-list-elem-resize",onMousedown:e[16]||(e[16]=t=>B(t,"date"))},null,32)],6)):n("",!0),u.value.status.visible?(a(),i("div",{key:5,class:f(["orders-list-elem",{status:!0,active:S.status!=="\u0412\u0441\u0435"}]),style:y(`width: ${u.value.status.width}${u.value.status.unit}`)},[b(w(u.value.status.name)+" ",1),s("div",{class:"orders-list-elem-resize",onMousedown:e[17]||(e[17]=t=>B(t,"status"))},null,32)],6)):n("",!0),u.value.comment.visible?(a(),i("div",{key:6,class:f(["orders-list-elem",{comment:!0,active:S.status!=="\u0412\u0441\u0435"}]),style:y(`width: ${u.value.comment.width}${u.value.comment.unit}`)},[b(w(u.value.comment.name)+" ",1),s("div",{class:"orders-list-elem-resize",onMousedown:e[18]||(e[18]=t=>B(t,"comment"))},null,32)],6)):n("",!0),u.value.info.visible?(a(),i("div",{key:7,class:f(["orders-list-elem",{info:!0}]),style:y(`width: ${u.value.info.width}${u.value.info.unit}`)},w(u.value.info.name),5)):n("",!0)],512),(a(!0),i(Z,null,Y(r(L),(t,g)=>{var N;return a(),i("div",{class:f(["orders-list-item",{active:g===p.value,reserved:t.reserved}]),key:g},[se(g)?(a(),i("div",{key:0,class:"orders-list-row orders-list-main-row",onClick:o=>g===p.value?p.value=-1:p.value=g},[u.value.id.visible?(a(),i("div",{key:0,class:f(["orders-list-elem",{id:!0}]),style:y(`width: ${u.value.id.width}${u.value.id.unit}`)},[b(w(g+1)+" ",1),$t],4)):n("",!0),u.value.name.visible?(a(),i("div",{key:1,class:f(["orders-list-elem",{name:!0}]),style:y(`width: ${u.value.name.width}${u.value.name.unit}`)},w(t.name),5)):n("",!0),u.value.partner_name.visible?(a(),i("div",{key:2,class:f(["orders-list-elem",{partner_name:!0}]),style:y(`width: ${u.value.partner_name.width}${u.value.partner_name.unit}`)},w(r(Ke)(t.partner_name)),5)):n("",!0),u.value.n.visible?(a(),i("div",{key:3,class:f(["orders-list-elem",{n:!0}]),style:y(`width: ${u.value.n.width}${u.value.n.unit}`)},w(t.n),5)):n("",!0),u.value.date.visible?(a(),i("div",{key:4,class:f(["orders-list-elem",{date:!0}]),style:y(`width: ${u.value.date.width}${u.value.date.unit}`)},w(t.date),5)):n("",!0),u.value.status.visible?(a(),i("div",{key:5,class:f(["orders-list-elem",{status:!0}]),style:y(`width: ${u.value.status.width}${u.value.status.unit}`)},[(a(!0),i(Z,null,Y(t.checks,(o,X)=>(a(),i("div",{class:f("orders-list-elem-status "+(o.status>=0&&o.status<r(O).length?r(O)[o.status].class:"")),tooltip:o.status>=0&&o.status<r(O).length?r(O)[o.status].name:"",flow:"up",key:X},null,10,Dt))),128))],4)):n("",!0),u.value.comment.visible?(a(),i("div",{key:6,class:f(["orders-list-elem",{comment:!0}]),style:y(`width: ${u.value.comment.width}${u.value.comment.unit}`)},w(t.comment),5)):n("",!0),u.value.info.visible?(a(),i("div",{key:7,class:f(["orders-list-elem",{info:!0}]),style:y(`width: ${u.value.info.width}${u.value.info.unit}`)},[s("button",{class:"orders-list-more",onClick:T(o=>R.value=g,["stop"])},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E",8,Ot),s("div",{class:f("orders-list-more-dropdown"+(g===R.value?" active":"")),ref_for:!0,ref_key:"target",ref:$},[s("a",{class:"orders-list-more-dropdown-link",onClick:T(o=>{k.value=t.n,x.value=!0},["stop"])},"\u0414\u0435\u0442\u0430\u043B\u0438 \u0437\u0430\u043A\u0430\u0437\u0430",8,St),s("a",{class:"orders-list-more-dropdown-link",onClick:T(o=>{k.value=t.n,x.value=!0,C.value=!1,M.value=!0},["stop"])},"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,xt),t.reserved?(a(),i("a",{key:0,class:"orders-list-more-dropdown-link",onClick:T(o=>{k.value=t.n,x.value=!0,C.value=!0,M.value=!1},["stop"])},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",8,Pt)):n("",!0),s("a",{class:"orders-list-more-dropdown-link",onClick:T(o=>Be(t),["stop"])},"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0443",8,Lt),t.checks.filter(o=>o.status===5||o.status===9)&&((N=t.checks)==null?void 0:N.filter(o=>o.status===5||o.status===9).length)>0?(a(),i("a",{key:1,class:"orders-list-more-dropdown-link",onClick:T(o=>Pe(t.n),["stop"])}," \u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u043F\u0440\u0435\u0442\u0435\u043D\u0437\u0438\u044E ",8,It)):n("",!0),E(v,{class:"orders-list-more-dropdown-link",to:"/shipments/request",onClick:o=>Se(t.n)},{default:pe(()=>[Bt]),_:2},1032,["onClick"]),s("a",{class:"orders-list-more-dropdown-link",onClick:T(o=>xe(t.n),["stop"])},"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u041A\u041F",8,Tt)],2)],4)):n("",!0)],8,kt)):n("",!0),se(g)?(a(),i("div",{key:1,class:f(["orders-list-info",{active:g===p.value}]),onClick:e[19]||(e[19]=o=>R.value=-1)},[Array.isArray(t.checks)&&t.checks.length>0&&t.status_code!==7&&t.status_code!==9?(a(),i("div",Rt,[(a(!0),i(Z,null,Y(t.checks,(o,X)=>{var ne,de,ve,ce,me;return a(),i("div",{class:"orders-list-info-row",key:X},[s("div",Ut,w(Oe(t.partner_guid,o.organization_id)),1),s("div",Vt,[(ne=o.doc_status)!=null&&ne.StatusSchet?(a(),i("div",Ft,[s("div",{class:"orders-list-info-download",onClick:fe=>De(o.guid)},[s("span",null," \u0421\u0447\u0451\u0442 \u043E\u0442 "+w(t.date.substring(0,10)),1),D.value.includes(o.guid)?(a(),z(G,{key:0,small:""})):n("",!0)],8,Mt),qt])):(a(),i("div",Nt,[s("div",zt," \u0421\u0447\u0451\u0442 \u043E\u0442 "+w(t.date.substring(0,10)),1),Gt]))]),o.doc_status?(a(),i("div",Jt,[(de=o.doc_status)!=null&&de.StatusSchet?(a(),i("a",{key:0,class:"orders-list-info-doc sc",href:`${r(P)}/api/order/print?id=${o.guid}&name=\u0421\u0447\u0435\u0442`,target:"_blank",title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0447\u0435\u0442"},null,8,jt)):n("",!0),(ve=o.doc_status)!=null&&ve.StatusUPD?(a(),i("a",{key:1,class:"orders-list-info-doc upd",href:`${r(P)}/api/order/print?id=${o.guid}&name=\u0423\u041F\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0435\u0440\u0435\u0434\u0430\u0442\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,Wt)):n("",!0),(ce=o.doc_status)!=null&&ce.StatusSF?(a(),i("a",{key:2,class:"orders-list-info-doc sf",href:`${r(P)}/api/order/print?id=${o.guid}&name=\u0421\u0424`,target:"_blank",title:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043A\u0442\u0443\u0440\u0430"},null,8,Zt)):n("",!0),(me=o.doc_status)!=null&&me.StatusUPK?(a(),i("a",{key:3,class:"orders-list-info-doc kor",href:`${r(P)}/api/order/print?id=${o.guid}&name=\u0423\u041A\u0414`,target:"_blank",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043E\u0447\u043D\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442"},null,8,Yt)):n("",!0)])):(a(),i("div",Kt,[E(G,{small:""})])),s("div",Ht,[b(w(r(O)[o.status]?r(O)[o.status].name:"")+" ",1),r(O)[o.status]?(a(),i("div",{key:0,class:f("orders-list-elem-status small "+(o.status>=0&&o.status<r(O).length?r(O)[o.status].class:"")),flow:"up"},null,2)):n("",!0)]),s("div",Qt,[o.status!==10?(a(),i("div",Xt,[q.value===o.id?(a(),z(G,{key:0,small:""})):(a(),i("span",{key:1,onClick:fe=>Le(t.n,o)},"\u0417\u0430\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u0441\u0447\u0435\u0442",8,eu))])):n("",!0),s("div",tu,[s("span",{onClick:fe=>Ie(o)},"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B",8,uu)])])])}),128))])):(a(),i("div",su,au))],2)):n("",!0)],2)}),128)),r(j).length===0&&!S.loading?(a(),i("div",iu,[s("div",ou,[ru,E(v,{class:"order-info-link",to:"/order"},{default:pe(()=>[nu]),_:1}),du])])):n("",!0)]),S.loading?(a(),z(G,{key:0,style:{width:"100%"}})):n("",!0),A.value?(a(),z(He,{key:1})):n("",!0),E(ut,{modelValue:x.value,"onUpdate:modelValue":e[20]||(e[20]=t=>x.value=t),orderId:k.value,repeatOrder:M.value,"onUpdate:repeatOrder":e[21]||(e[21]=t=>M.value=t),editOrder:C.value,"onUpdate:editOrder":e[22]||(e[22]=t=>C.value=t)},null,8,["modelValue","orderId","repeatOrder","editOrder"])],32)}}}),cu={class:"top-line product-page"},mu={class:"orders-heading"},fu={class:"orders-heading-elem"},hu={class:"orders-heading-item"},_u=s("div",{class:"orders-heading-text"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442:",-1),pu={class:"orders-heading-item"},gu=s("div",{class:"orders-heading-text"},"\u0421\u0442\u0430\u0442\u0443\u0441:",-1),wu={class:"orders-heading-item"},Cu=s("div",{class:"orders-heading-text"},"\u041F\u0435\u0440\u0438\u043E\u0434:",-1),yu={key:0,class:"orders-heading-elem"},Eu={key:1},Bu=Ce({__name:"OrdersPage",setup(S){const h=ye(),_=m(!0),J=m({id:1,search:""}),A=K(()=>h.getters.getCompanysList),p=m(0),R=K(()=>h.getters.getCompanyFromOrders()),$=m(""),x=K(()=>h.getters.getOrdersDataPeriodArray),D=m(0),k=m(!1),c=()=>{k.value==!1&&(k.value=!0,h.dispatch(F.GET_ORDERS).finally(()=>{k.value=!1,_.value=!0,_.value=!1}))};return Ee(()=>{h.dispatch(F.GET_ORDERS).finally(()=>{_.value=!1}),h.getters.isCompanysLoad||h.dispatch(Xe.GET_COMPANYS).then(()=>{})}),(M,C)=>{var P;return a(),i("div",null,[s("div",cu,[E(r(at),{data:r(A),modelValue:$.value,"onUpdate:modelValue":C[0]||(C[0]=d=>$.value=d)},null,8,["data","modelValue"]),E(r(et)),E(r(tt))]),E(r(lt),{newOrder:""}),s("div",mu,[s("div",fu,[s("div",hu,[_u,E(r(ee),{data:r(R),modelValue:$.value,"onUpdate:modelValue":C[1]||(C[1]=d=>$.value=d)},null,8,["data","modelValue"])]),s("div",pu,[gu,E(r(ee),{data:r(te),modelValue:p.value,"onUpdate:modelValue":C[2]||(C[2]=d=>p.value=d)},null,8,["data","modelValue"])]),s("div",wu,[Cu,E(r(ee),{data:r(x),modelValue:D.value,"onUpdate:modelValue":C[3]||(C[3]=d=>D.value=d)},null,8,["data","modelValue"])]),s("div",{class:"orders-heading-clean",title:"\u0423\u0431\u0440\u0430\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B",onClick:C[4]||(C[4]=d=>{$.value="",D.value=0,p.value=0})})]),_.value?n("",!0):(a(),i("div",yu,[s("button",{class:"product-search-btn gradient-btn",onClick:C[5]||(C[5]=d=>c())},[k.value?(a(),z(r(G),{key:0,small:""})):(a(),i("div",Eu,"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"))])]))]),E(r(vu),{loading:_.value,contrAgent:$.value,period:r(x)[D.value].name,status:(P=r(te).find(d=>d.id===p.value))==null?void 0:P.name,search:J.value,refresh:k.value},null,8,["loading","contrAgent","period","status","search","refresh"])])}}});export{Bu as default};
