import{_ as Ie}from"./PersonalBar.d7446f6c.js";import{N as Ne}from"./Notification.ad45b66e.js";import{_ as Me}from"./CompanyBarTop.d3e16ac9.js";import{_ as Fe}from"./TopNav.35fe4711.js";import{a as Ue,P as qe,_ as He}from"./ProductPropertiesCard.a5708f2e.js";import{o as s,b as o,a as e,_ as Re,d as oe,h as c,i as fe,L as ie,r as Ae,c as z,e as ze,as as pe,p as m,w as de,at as Qe,z as U,F as j,f as se,m as A,t as g,k as O,au as ue,g as ve,R as Ee,j as k,av as Ze,aw as be,u as n,a0 as Ke,ax as Ge,ay as Ye,az as K,aA as we,W as ke,aB as Je,ai as Se,aC as D,aj as W,aD as je,D as We,l as Ce,a1 as Te,Y as Xe,T as et,aE as tt,af as ge,s as st,ag as ut,ah as ot,aF as lt,ar as ye}from"./index.d771ac86.js";import{a as at}from"./ProductSliderCard.dc358fce.js";import{_ as rt}from"./ModalInputFull.f7bfa988.js";import{D as te,a as nt}from"./types.82703ff6.js";const it={xmlns:"http://www.w3.org/2000/svg",width:"30",height:"29",fill:"none",class:"content-heading-btn-img"},dt=e("path",{fill:"#A5A7A9",stroke:"#A5A7A9","stroke-width":".2",d:"M3.246 1.28a.826.826 0 0 0-.826.827l.03 18.131a.826.826 0 0 0 .823.825h3.788l.044 6.455a.826.826 0 0 0 1.41.578l7.005-6.994H27.7a.826.826 0 0 0 .825-.827V2.105a.826.826 0 0 0-.826-.826Zm.828 1.652h22.799v16.517H15.178a.826.826 0 0 0-.584.242l-5.85 5.842-.037-5.303a.826.826 0 0 0-.826-.82H4.1z"},null,-1),ct=e("path",{fill:"#A5A7A9",stroke:"#A5A7A9","stroke-width":"1.5",d:"M8.057 6.555h5.599M8.134 10.77h12.513M8.064 15.056h9.224"},null,-1),mt=[dt,ct];function vt(a,v){return s(),o("svg",it,mt)}var _t={render:vt};const ht={emits:["onClick"],setup(){}},gt=e("svg",{class:"edit-btn-img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#000000"},[e("path",{d:"M0 0h24v24H0V0z",fill:"none"}),e("path",{class:"fill",fill:"#A5A7A9",d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})],-1),pt=[gt];function ft(a,v,t,i,E,d){return s(),o("div",{class:"edit-btn",onClick:v[0]||(v[0]=$=>a.$emit("onClick"))},pt)}var Oe=Re(ht,[["render",ft]]);const At={class:"shipment-form-heading shipment-form-wrap"},Et={class:"shipment-form-elem"},Ct={class:"shipment-form-item"},Dt=e("div",{class:"shipment-form-elem-title"},[e("span",null,"\u0410\u0434\u0440\u0435\u0441 \u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0438")],-1),$t={class:"shipment-form-row"},wt={class:"shipment-form-input-wrap"},kt=e("svg",{class:"shipment-form-map-btn-img",width:"19",height:"25",viewBox:"0 0 19 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M9.49968 25C8.95397 25 8.4653 24.717 8.19255 24.2429C8.18967 24.238 8.18688 24.2329 8.1841 24.2279L1.98479 12.8809C0.505001 10.1724 0.547432 6.95749 2.09831 4.28113C3.61555 1.66277 6.31047 0.0631103 9.30725 0.00197754C9.43527 -0.00065918 9.56398 -0.00065918 9.69191 0.00197754C12.6887 0.0631103 15.3837 1.66277 16.9009 4.28113C18.4518 6.95749 18.4943 10.1723 17.0145 12.8809L10.8152 24.2279C10.8124 24.2329 10.8096 24.238 10.8067 24.2429C10.534 24.717 10.0454 25 9.49968 25ZM9.49963 1.56252C9.44597 1.56252 9.39245 1.56306 9.33903 1.56414C6.89279 1.61404 4.69133 2.92258 3.45017 5.06453C2.17541 7.26448 2.14016 9.90642 3.35593 12.1317L9.49963 23.3768L15.6433 12.1318C16.8591 9.90642 16.8238 7.26448 15.549 5.06453C14.3078 2.92263 12.1064 1.61404 9.66013 1.56414C9.60685 1.56306 9.55329 1.56252 9.49963 1.56252Z",fill:"#8D8D8D"}),e("path",{d:"M9.5 11.3281C7.56147 11.3281 5.98438 9.75103 5.98438 7.8125C5.98438 5.87397 7.56147 4.29688 9.5 4.29688C11.4385 4.29688 13.0156 5.87397 13.0156 7.8125C13.0156 9.75103 11.4386 11.3281 9.5 11.3281ZM9.5 5.85938C8.42305 5.85938 7.54688 6.73555 7.54688 7.8125C7.54688 8.88945 8.42305 9.76563 9.5 9.76563C10.577 9.76563 11.4531 8.88945 11.4531 7.8125C11.4531 6.73555 10.577 5.85938 9.5 5.85938Z",fill:"#8D8D8D"})],-1),yt=e("span",null,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0430\u0434\u0440\u0435\u0441",-1),Ot={class:"shipment-form-elem"},xt={class:"shipment-form-item"},Rt=e("div",{class:"shipment-form-elem-title"},[e("span",null,"\u0414\u0430\u0442\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043A\u0438")],-1),bt={class:"shipment-form-row"},St={class:"shipment-form-date"},Tt={key:0,class:"shipment-form-elem"},Vt={class:"shipment-form-item"},Pt=e("span",null,"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0443 \u0432\u043A\u043B. \u0432 \u0441\u0447\u0435\u0442",-1),Bt=[Pt],Lt=["onClick"],It={key:0,class:"content-heading-btn-img active",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Nt=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"m 8.938 13 l 4.958 -4.938 L 12.833 7 l -3.895 3.875 l -1.771 -1.75 l -1.063 1.063 Z M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z m 0 -11 v 11 v -11 Z"},null,-1),Mt=[Nt],Ft={key:1,class:"content-heading-btn-img",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Ut=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z"},null,-1),qt=[Ut],Ht={key:1,class:"order-modal"},zt={class:"order-modal-dialog map"},Qt={class:"order-modal-content map"},Zt={class:"order-modal-header"},Kt=e("h3",{class:"order-modal-header-title"},"\u041A\u0430\u0440\u0442\u0430",-1),Gt=e("div",{class:"order-modal-body map"},[e("iframe",{src:"https://yandex.ru/map-widget/v1/?mode=whatshere&whatshere%5Bpoint%5D=37.371453%2C55.980529&z=17",width:"800",height:"600",frameborder:"0"},`\r
						`)],-1),Yt=oe({__name:"ShipmentTransportAddressCard",props:{addressId:{type:Number,required:!0},errorAddress:{type:Boolean,default:!1},date:{type:String,required:!0},errorDate:{type:Boolean,default:!1},addressList:{type:Array,required:!0},loadingAddress:{type:Boolean,default:!1},other:{type:Boolean,default:!1},storagesList:{type:Array,required:!0},storage:{type:String,required:!0},storageError:{type:Boolean,default:!1}},emits:["update:addressId","update:date","update:errorAddress","update:errorDate","update:storage","update:storageError"],setup(a,{emit:v}){const t=a,i=c(!1),E=c(""),d=c(-1);c(!0),c(!1),fe(()=>{E.value=t.date,d.value=t.addressId}),ie(d,()=>{v("update:addressId",d.value),v("update:errorAddress",!1)}),ie(E,()=>{v("update:date",E.value),v("update:errorDate",!1)});const $=R=>{v("update:storage",R),v("update:storageError",!1)};return(R,b)=>{const S=Ae("router-link");return s(),o("div",At,[e("div",Et,[e("div",Ct,[Dt,e("div",$t,[e("div",wt,[a.loadingAddress?(s(),z(ze,{key:0,small:""})):(s(),z(pe,{key:1,data:a.addressList,modelValue:d.value,"onUpdate:modelValue":b[0]||(b[0]=w=>d.value=w),error:a.errorAddress},null,8,["data","modelValue","error"])),m(S,{tag:"a",class:"shipment-form-map-btn",to:"/shipments/address"},{default:de(()=>[kt,yt]),_:1})])])])]),e("div",Ot,[e("div",xt,[Rt,e("div",bt,[e("div",St,[m(Qe,{modelValue:E.value,"onUpdate:modelValue":b[1]||(b[1]=w=>E.value=w),error:a.errorDate},null,8,["modelValue","error"])])])])]),a.other&&a.storagesList.length>0?(s(),o("div",Tt,[e("div",Vt,[e("div",{class:U(["shipment-form-elem-title",{error:a.storageError}])},Bt,2),(s(!0),o(j,null,se(a.storagesList,(w,h)=>(s(),o("div",{class:U(["order-list-btn",{error:a.storageError}]),key:h,onClick:x=>$(String(w.id))},[a.storage==w.id?(s(),o("svg",It,Mt)):(s(),o("svg",Ft,qt)),A(" "+g(w.name),1)],10,Lt))),128))])])):O("",!0),i.value?(s(),o("div",Ht,[e("div",zt,[e("div",Qt,[e("div",Zt,[Kt,m(ue,{onOnClick:b[2]||(b[2]=w=>i.value=!1)})]),Gt])])])):O("",!0)])}}}),Jt={class:"order-list content-elem"},jt={class:"order-list-top"},Wt={class:"order-list-top-elem"},Xt={class:"order-list-top-wrap"},es=e("div",{class:"order-list-elem"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",-1),ts={class:"order-list-top-elem"},ss={class:"order-list-top-wrap"},us=e("div",{class:"order-list-elem"},"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F",-1),os={class:"order-list-top-elem"},ls={key:0,class:"content-heading-btn-img",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},as=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z"},null,-1),rs=[as],ns={key:1,class:"content-heading-btn-img active",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},is=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"m 8.938 13 l 4.958 -4.938 L 12.833 7 l -3.895 3.875 l -1.771 -1.75 l -1.063 1.063 Z M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z m 0 -11 v 11 v -11 Z"},null,-1),ds=[is],cs=A(" \u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B "),ms=["tooltip","flow"],vs={class:"content-heading-info-elem",style:{"padding-left":"40px"}},_s=e("span",{class:"content-heading-info-text"},"\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u043C\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043C\u0435\u0448\u043A\u043E\u0432: ",-1),hs={class:"content-heading-info-value"},gs={class:"order-list-delivery"},ps={class:"scroll-elem"},fs={class:"order-list-bottom-wrap"},As={key:0,class:"order-list-row order-list-heading"},Es=e("div",{class:"order-list-elem"},"\u2116",-1),Cs=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),Ds=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),$s={class:"order-list-elem"},ws=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),ks=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),ys=e("div",{class:"order-list-elem"},null,-1),Os=["onClick"],xs={class:"order-list-elem"},Rs=e("div",{class:"table-arrow"},null,-1),bs={class:"order-list-elem"},Ss=["innerHTML"],Ts={class:"order-list-elem"},Vs=["innerHTML"],Ps=e("div",{class:"order-list-elem"},null,-1),Bs={class:"order-list-elem"},Ls={class:"order-list-elem"},Is=A(" \u20BD"),Ns={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},Ms={class:"order-list-elem-delete"},Fs=e("div",{class:"order-list-elem"},null,-1),Us=e("div",{class:"order-list-elem"},null,-1),qs={class:"order-list-elem"},Hs={class:"order-list-elem"},zs={key:0,class:"order-list-elem-text"},Qs={class:"order-list-elem"},Zs={class:"order-list-elem"},Ks=A(" \u20BD"),Gs={class:"order-list-elem-delete"},Ys={key:0,class:"order-list-bottom-wrap"},Js=e("div",{class:"order-list-row order-list-subheading"},[e("div",null,"\u041F\u043E\u0437\u0438\u0446\u0438\u0438 \u0434\u043B\u044F \u043F\u0440\u0435\u0434\u0437\u0430\u043A\u0430\u0437\u0430")],-1),js={class:"order-list-row order-list-heading"},Ws=e("div",{class:"order-list-elem"},"\u2116",-1),Xs=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),eu=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),tu={class:"order-list-elem"},su=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),uu=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),ou=e("div",{class:"order-list-elem"},null,-1),lu=["onClick"],au={class:"order-list-elem"},ru=e("div",{class:"table-arrow"},null,-1),nu={class:"order-list-elem"},iu=["innerHTML"],du={class:"order-list-elem"},cu=["innerHTML"],mu=e("div",{class:"order-list-elem"},null,-1),vu={class:"order-list-elem"},_u={class:"order-list-elem"},hu=A(" \u20BD"),gu={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},pu={class:"order-list-elem-delete"},fu=e("div",{class:"order-list-elem"},null,-1),Au=e("div",{class:"order-list-elem"},null,-1),Eu={class:"order-list-elem"},Cu={class:"order-list-elem"},Du={key:0,class:"order-list-elem-text"},$u={class:"order-list-elem"},wu={class:"order-list-elem"},ku=A(" \u20BD"),yu={class:"order-list-elem-delete"},Ou=e("div",{class:"order-comment-title"},[e("span",null,"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439")],-1),xu={class:"order-list-buttons"},Ru=e("div",{class:"gradient-btn-text"},"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",-1),bu=[Ru],Su=e("div",{class:"gradient-btn-text"},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),Tu=[Su],Vu=e("div",{class:"gradient-btn-text"},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),Pu=[Vu],Bu=oe({__name:"OrderCard",props:{data:{type:Object,required:!0},companys:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue","update:data","onClickAdd","onClickEdit","goToKP"],setup(a,{emit:v}){const t=a,i=ve(),E=Ee(),d=c([]),$=c([]),R=c(!1),b=c(!1),S=c(""),w=c(!1),h=c(""),x=c(""),T=c(!1),Q=c(-1),V=c(!1),I=c(""),X=c(!1),G=c(!1),Z=c("\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A #"),F=c(!1),L=c(0),Y=k({get:()=>{var f;return(f=t.data)!=null&&f.edit?t.data.partner_id:t.modelValue},set:f=>v("update:modelValue",f)}),le=k(()=>i.getters.isOrderInDraft),_e=k(()=>i.getters.getShipmentsAddressInputData),ae=k(()=>i.getters.getOrderStorages),ee=async f=>{let u=f,r=localStorage.getItem("logs");if(r){let H=JSON.parse(r);H.push(u),localStorage.setItem("logs",JSON.stringify(H))}else localStorage.setItem("logs",JSON.stringify([u]))},ce=()=>{i.commit(D.CALC_ORDER),me()},P=(f,u)=>{me(),I.value="",f?i.dispatch(W.REMOVE_POSITION_PRESAIL,u):i.dispatch(W.REMOVE_POSITION,u)},_=(f,u)=>{me(),I.value="",f?i.dispatch(W.REMOVE_CHARACTERISTIC_PRESAIL,u):i.dispatch(W.REMOVE_CHARACTERISTIC,u)},N=()=>{let f=!0;if(me(),i.commit(D.ADD_BAGS_RECORD,{wear:"PKM "+M.value.toFixed(1),wear_pre:"PKM "+q.value.toFixed(1),shoes:"PKM "+re.value.toFixed(1),shoes_pre:"PKM "+ne.value.toFixed(1)}),w.value||i.commit(D.SET_ORDER_COMMENT,""),t.modelValue==""&&(R.value=!0,setTimeout(()=>{R.value=!1},5e3)),L.value>0&&x.value==""&&(T.value=!0,setTimeout(()=>{T.value=!1},5e3),f=!1),L.value>0&&Q.value==-1&&(V.value=!0,setTimeout(()=>{V.value=!1},5e3),f=!1),te[L.value].code=="other"&&ae.value.length>0&&I.value==""&&(X.value=!0,setTimeout(()=>{X.value=!1},5e3),f=!1),i.commit(D.SET_ORDER_COMMENT,h.value),ee({time:new Date().toLocaleString(),action:"addOrder",payload:{type:"order",data:JSON.parse(JSON.stringify(i.getters.getOrder))}}),f){let u={address:L.value==0?"":i.getters.getShipmentsAddress[Q.value].address,case:te[L.value].code,date:je(x.value).getTime(),cost:te[L.value].code=="other"?900:0,bill_to:I.value};i.commit(D.SET_ORDER_DELIVERY,u),ee({time:new Date().toLocaleString(),action:"addOrderValidation",payload:{type:"valid",data:!0}}),t.data.edit?v("onClickEdit"):v("onClickAdd")}else ee({time:new Date().toLocaleString(),action:"addOrder",payload:{type:"valid",data:!1}});console.log(f)},C=()=>{i.commit(D.CLEAN_ORDER)},De=()=>{var f;i.getters.isOrderInDraft?(i.commit(D.DEL_ORDER_FROM_DRAFT,(f=t.data)==null?void 0:f.id),b.value=!0,S.value="\u0417\u0430\u043A\u0430\u0437 \u0443\u0434\u0430\u043B\u0435\u043D \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430"):(i.commit(D.ADD_ORDER_TO_DRAFT,Z.value),F.value=!1,b.value=!0,S.value="\u0417\u0430\u043A\u0430\u0437 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")},$e=f=>{E.push("/order/"+f)},Ve=()=>{i.commit(D.SET_ORDER_REQUEST_SERT,!t.data.request_certificate)},Pe=()=>{i.commit(D.SET_ORDER_COMMENT,h.value)};fe(()=>{var f;if(t.data.comment.length>0&&(w.value=!0,t.data.comment==""?h.value=t.data.comment:h.value=t.data.comment.replace(new RegExp("PKM [0-9]+.[0-9]+, "),"")),i.getters.getShipmentsAddress.length==0&&(G.value=!0,i.dispatch(Ze.GET_SHIPMENTS_ADDRESS).then(()=>{G.value=!1})),t.data.edit){let u=(f=te.find(r=>r.code===t.data.delivery.case))==null?void 0:f.id;L.value=u||0,x.value=new Date(t.data.delivery.date).toLocaleString("ru").substr(0,10),v("update:modelValue",t.data.partner_id)}});const Be=()=>{let f={address:"",case:te[L.value].code,date:0,cost:te[L.value].code=="other"?900:0,bill_to:""};i.commit(D.SET_ORDER_DELIVERY,f),i.commit(D.CALC_ORDER)};ie(F,()=>{F.value&&(Z.value="\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A #"+Number(i.getters.getOrderDraftCount+1))});const y=c(0),re=c(0),M=c(0),ne=c(0),q=c(0),me=function(){Le()},Le=function(){y.value=0,re.value=0,M.value=0,ne.value=0,q.value=0;let f=i.getters.getOrder.position,u=i.getters.getOrder.position_presail;return f.forEach(function(r,H){switch(r.product.TYPE){case"spetsodezhda-zima":y.value+=.2*r.count,M.value+=.2*r.count;break;case"spetsodezhda":y.value+=.2*r.count,M.value+=.2*r.count;break;case"other-zima":y.value+=.1*r.count,M.value+=.1*r.count;break;case"spetsodezhda-leto":y.value+=.05*r.count,M.value+=.05*r.count;break;case"other-leto":y.value+=.025*r.count,M.value+=.025*r.count;break;case"obuv-rabochaya":y.value+=.05*r.count,re.value+=.05*r.count;break;case"zhilet":y.value+=.01*r.count,M.value+=.01*r.count;break;case"sap":y.value+=.083*r.count,re.value+=.083*r.count;break;default:y.value+=.08*r.count,M.value+=.08*r.count;break}console.log(r.count),console.log(r.product.TYPE)}),u.forEach(function(r,H){switch(r.product.TYPE){case"spetsodezhda-zima":y.value+=.2*r.count,M.value+=.2*r.count;break;case"spetsodezhda":y.value+=.2*r.count,q.value+=.2*r.count;break;case"other-zima":y.value+=.1*r.count,q.value+=.1*r.count;break;case"spetsodezhda-leto":y.value+=.05*r.count,q.value+=.05*r.count;break;case"other-leto":y.value+=.025*r.count,q.value+=.025*r.count;break;case"obuv-rabochaya":y.value+=.05*r.count,ne.value+=.05*r.count;break;case"zhilet":y.value+=.01*r.count,q.value+=.01*r.count;break;case"sap":y.value+=.083*r.count,ne.value+=.083*r.count;break;default:y.value+=.08*r.count,q.value+=.08*r.count;break}}),console.log("all:",y.value),console.log("wear:",M.value),console.log("wear-pre:",q.value),console.log("shoes:",re.value),console.log("shoes-pre:",ne.value),y.value.toFixed(1)};return(f,u)=>{const r=Ae("router-link"),H=be("counter");return s(),o(j,null,[e("div",Jt,[e("div",jt,[e("div",Wt,[e("div",Xt,[es,m(pe,{data:a.companys,error:R.value,"read-only":a.data.edit,modelValue:n(Y),"onUpdate:modelValue":u[0]||(u[0]=l=>Ke(Y)?Y.value=l:null)},null,8,["data","error","read-only","modelValue"])])]),e("div",ts,[e("div",ss,[us,m(pe,{data:n(nt),modelValue:L.value,"onUpdate:modelValue":u[1]||(u[1]=l=>L.value=l),onOnInput:u[2]||(u[2]=l=>Be())},null,8,["data","modelValue"])])]),e("div",os,[e("div",{class:"order-list-btn",tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B \u043A \u0437\u0430\u043A\u0430\u0437\u0443",flow:"up",onClick:u[3]||(u[3]=l=>Ve())},[a.data.request_certificate?(s(),o("svg",ns,ds)):(s(),o("svg",ls,rs)),cs]),e("div",{class:U(["content-heading-btn",{active:w.value}]),onClick:u[4]||(u[4]=l=>w.value=!w.value),tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043A\u0430\u0437\u0443",flow:"up"},[m(n(_t),{class:"content-heading-btn-img"})],2),e("div",{class:"content-heading-btn",onClick:u[5]||(u[5]=l=>f.$emit("goToKP")),tooltip:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0438\u0437 \u0437\u0430\u043A\u0430\u0437\u0430",flow:"up"},[m(n(Ge),{class:"content-heading-btn-img"})]),e("div",{class:U(["content-heading-btn",{active:n(le)}]),onClickCapture:u[9]||(u[9]=l=>n(le)?De():F.value=!0),tooltip:n(le)?"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A",flow:F.value?"":"up-left"},[m(rt,{modelValue:Z.value,"onUpdate:modelValue":u[6]||(u[6]=l=>Z.value=l),show:F.value,"onUpdate:show":u[7]||(u[7]=l=>F.value=l),"show-ok":"",onOnOk:u[8]||(u[8]=l=>De())},null,8,["modelValue","show"]),m(n(Ye),{class:"content-heading-btn-img"})],42,ms)])]),e("div",vs,[_s,e("span",hs,g(y.value==0?"1":Math.ceil(y.value).toString())+" \u0448\u0442.",1)]),e("div",gs,[L.value!==0?(s(),z(Yt,{key:0,date:x.value,"onUpdate:date":u[10]||(u[10]=l=>x.value=l),addressId:Q.value,"onUpdate:addressId":u[11]||(u[11]=l=>Q.value=l),errorDate:T.value,"onUpdate:errorDate":u[12]||(u[12]=l=>T.value=l),errorAddress:V.value,"onUpdate:errorAddress":u[13]||(u[13]=l=>V.value=l),storage:I.value,"onUpdate:storage":u[14]||(u[14]=l=>I.value=l),storageError:X.value,"onUpdate:storageError":u[15]||(u[15]=l=>X.value=l),loadingAddress:G.value,addressList:n(_e),other:a.data.delivery.case==="other",storagesList:n(ae)},null,8,["date","addressId","errorDate","errorAddress","storage","storageError","loadingAddress","addressList","other","storagesList"])):O("",!0)]),e("div",ps,[e("div",fs,[a.data.position.length>0?(s(),o("div",As,[Es,Cs,Ds,e("div",$s,g(d.value.length!==0?"\u0426\u0435\u043D\u0430":""),1),ws,ks,ys])):O("",!0),(s(!0),o(j,null,se(a.data.position,(l,B)=>(s(),o("div",{class:U(d.value.indexOf(B)!==-1?"order-list-item active":"order-list-item"),key:B},[e("div",{class:"order-list-row order-list-main-row",onClick:p=>d.value.indexOf(B)===-1?d.value.push(B):d.value.splice(d.value.indexOf(B),1)},[e("div",xs,[A(g(B+1)+" ",1),Rs]),e("div",bs,[m(r,{class:"order-list-elem",to:"/order/"+l.article,title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},{default:de(()=>[e("span",{innerHTML:l.article},null,8,Ss)]),_:2},1032,["to"])]),e("div",Ts,[e("span",{innerHTML:l.product.NAME},null,8,Vs)]),Ps,e("div",Bs,g(l.count),1),e("div",Ls,[K((s(),o("span",null,[A(g(Number(l.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",",".")),1)])),[[H,Number(l.total_discount)]]),Is]),e("div",Ns,[m(Oe,{onClick:we(p=>$e(l.article),["stop"])},null,8,["onClick"])]),e("div",Ms,[m(ue,{onOnClick:p=>P(!1,l.guid)},null,8,["onOnClick"])])],8,Os),e("div",{class:U(d.value.indexOf(B)!==-1?"order-list-sublist active":"order-list-sublist")},[(s(!0),o(j,null,se(l.characteristics,(p,he)=>(s(),o("div",{key:he,class:"order-list-row"},[Fs,Us,e("div",qs,g(p.CHARACTERISTIC),1),e("div",Hs,[A(g(Number(p.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),p.discount>0?(s(),o("div",zs,"\u0441\u043A\u0438\u0434\u043A\u0430 "+g(p.discount)+"% ",1)):O("",!0)]),e("div",Qs,[m(ke,{modelValue:p.count,"onUpdate:modelValue":J=>p.count=J,min:1,max:p.RESIDUE,onOnInput:u[16]||(u[16]=J=>ce())},null,8,["modelValue","onUpdate:modelValue","max"])]),e("div",Zs,[K((s(),o("span",null,[A(g(Number(p.price_discount*p.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",",".")),1)])),[[H,Number(p.price_discount*p.count)]]),Ks]),e("div",Gs,[m(ue,{onOnClick:J=>_(!1,{guid:l.guid,characteristics:[p],article:l.article,product:l.product})},null,8,["onOnClick"])])]))),128))],2)],2))),128))]),a.data.position_presail.length>0?(s(),o("div",Ys,[Js,e("div",js,[Ws,Xs,eu,e("div",tu,g($.value.length!==0?"\u0426\u0435\u043D\u0430":""),1),su,uu,ou]),(s(!0),o(j,null,se(a.data.position_presail,(l,B)=>(s(),o("div",{class:U($.value.indexOf(B)!==-1?"order-list-item active":"order-list-item"),key:B},[e("div",{class:"order-list-row order-list-main-row",onClick:p=>$.value.indexOf(B)===-1?$.value.push(B):$.value.splice($.value.indexOf(B),1)},[e("div",au,[A(g(B+1)+" ",1),ru]),e("div",nu,[e("span",{innerHTML:l.article},null,8,iu)]),e("div",du,[e("span",{innerHTML:l.product.NAME},null,8,cu)]),mu,e("div",vu,g(l.count),1),e("div",_u,[K((s(),o("span",null,[A(g(Number(l.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",",".")),1)])),[[H,Number(l.total_discount)]]),hu]),e("div",gu,[m(Oe,{onClick:we(p=>$e(l.article),["stop"])},null,8,["onClick"])]),e("div",pu,[m(ue,{onOnClick:p=>P(!0,l.guid)},null,8,["onOnClick"])])],8,lu),e("div",{class:U($.value.indexOf(B)!==-1?"order-list-sublist active":"order-list-sublist")},[(s(!0),o(j,null,se(l.characteristics,(p,he)=>(s(),o("div",{key:he,class:"order-list-row"},[fu,Au,e("div",Eu,g(p.CHARACTERISTIC),1),e("div",Cu,[A(g(Number(p.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),p.discount>0?(s(),o("div",Du,"\u0441\u043A\u0438\u0434\u043A\u0430 "+g(p.discount)+"% ",1)):O("",!0)]),e("div",$u,[m(ke,{modelValue:p.count,"onUpdate:modelValue":J=>p.count=J,min:p.RESIDUE+1,onOnInput:u[17]||(u[17]=J=>ce())},null,8,["modelValue","onUpdate:modelValue","min"])]),e("div",wu,[K((s(),o("span",null,[A(g(Number(p.price_discount*p.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",",".")),1)])),[[H,Number(p.price_discount*p.count)]]),ku]),e("div",yu,[m(ue,{onOnClick:J=>_(!0,{guid:l.guid,characteristics:[p],article:l.article,product:l.product})},null,8,["onOnClick"])])]))),128))],2)],2))),128))])):O("",!0)])]),e("div",{class:U(["order-comment-form",{show:w.value}])},[Ou,K(e("textarea",{class:"order-comment-textarea","onUpdate:modelValue":u[18]||(u[18]=l=>h.value=l),onInput:u[19]||(u[19]=l=>Pe()),name:""},null,544),[[Je,h.value]])],2),e("div",xu,[e("button",{class:"order-list-submit gradient-btn disabled",onClick:u[20]||(u[20]=l=>C())},bu),a.data.edit?(s(),o("button",{key:0,class:"order-list-submit gradient-btn",onClick:u[21]||(u[21]=l=>N())},Tu)):(s(),o("button",{key:1,class:"order-list-submit gradient-btn",onClick:u[22]||(u[22]=l=>N())},Pu))]),m(Se,{modelValue:b.value,"onUpdate:modelValue":u[23]||(u[23]=l=>b.value=l),message:S.value,timeout:2e3,notification:""},null,8,["modelValue","message"])],64)}}}),Lu={class:"content-heading-wrap proudct-heading-wrap"},Iu={class:"content-heading-wrap-elem"},Nu={key:0,class:"content-heading"},Mu={key:1,class:"content-heading"},Fu={class:"content-heading-wrap-elem"},Uu={class:"content-heading-price"},qu=e("div",{class:"content-heading-price-text"},"\u0421\u0443\u043C\u043C\u0430 \u0437\u0430\u043A\u0430\u0437\u0430: ",-1),Hu={key:0,class:"content-heading-info-elem",style:{position:"absolute"}},zu={key:0,class:"content-heading-price-value"},Qu={class:"strikethrough"},Zu=A(" \u20BD"),Ku=A("\xA0\xA0 "),Gu=A(" \u20BD "),Yu={key:1,class:"content-heading-price-value"},Ju={class:"content-heading-info"},ju={class:"content-heading-info-elem"},Wu=e("span",{class:"content-heading-info-text"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0435\u0434\u0438\u043D\u0438\u0446: ",-1),Xu={class:"content-heading-info-value"},eo={key:0,class:"content-heading-info-elem"},to=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u0432\u0435\u0441: ",-1),so={class:"content-heading-info-value"},uo={key:1,class:"content-heading-info-elem"},oo=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1),lo={class:"content-heading-info-value"},ao={class:"content-heading-info"},ro={key:0,class:"content-heading-info-elem"},no=e("span",{class:"content-heading-info-text"},"\u0411\u0443\u0434\u0435\u0442 \u0441\u044D\u043A\u043E\u043D\u043E\u043C\u043B\u0435\u043D\u043E: ",-1),io={class:"content-heading-info-value"},co=A(" \u20BD"),mo=oe({__name:"OrderHeaderCard",props:{data:{type:Object,required:!0},discount:{type:Number}},setup(a){const v=a,t=k(()=>Number(v.data.total?Number(v.data.total)-Number(v.data.total_discount):0));return(i,E)=>{const d=be("counter");return s(),o("div",Lu,[e("div",Iu,[a.data.edit?(s(),o("div",Nu,"\u0417\u0430\u043A\u0430\u0437 \u2116 "+g(a.data.id)+" \u043E\u0442 "+g(a.data.date),1)):(s(),o("div",Mu,"\u0417\u0430\u043A\u0430\u0437 \u2116 \u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437 \u043E\u0442 "+g(new Date(a.data.id).toLocaleDateString("ru-RU")),1))]),e("div",Fu,[e("div",Uu,[e("div",null,[qu,a.data.delivery.case=="other"?(s(),o("div",Hu,"+\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430: "+g(a.data.delivery.cost)+" \u20BD",1)):O("",!0)]),a.data.total!=a.data.total_discount?(s(),o("div",zu,[e("span",Qu,[K((s(),o("span",null,[A(g(a.data.total),1)])),[[d,a.data.total]]),Zu]),Ku,K((s(),o("span",null,[A(g(a.data.total_discount),1)])),[[d,a.data.total_discount]]),Gu])):(s(),o("div",Yu,g(Number(a.data.total).toLocaleString("ru"))+" \u20BD",1))])]),e("div",Ju,[e("div",ju,[Wu,e("span",Xu,g(a.data.total_count),1)]),a.data.total_weight?(s(),o("div",eo,[to,e("span",so,g(a.data.total_weight)+" \u043A\u0433.",1)])):O("",!0),a.data.total_valume?(s(),o("div",uo,[oo,e("span",lo,g(a.data.total_valume)+" \u043C.\u043A\u0443\u0431.",1)])):O("",!0)]),e("div",ao,[a.data.total_discount?(s(),o("div",ro,[no,e("span",io,[K((s(),o("span",null,[A(g(n(t)),1)])),[[d,n(t)]]),co])])):O("",!0)])])}}}),vo={props:{name:{type:String}},emits:["onClick"],setup(){}},_o={class:""};function ho(a,v,t,i,E,d){return s(),o("button",{class:"default-btn",onClick:v[0]||(v[0]=$=>a.$emit("onClick"))},[e("div",_o,g(t.name),1)])}var xe=Re(vo,[["render",ho]]);const go={key:0,class:"order-modal"},po={class:"order-modal-content"},fo={class:"order-modal-header"},Ao={class:"order-modal-header-title"},Eo={class:"order-modal-body"},Co={key:0},Do={key:0},$o={key:0,class:"loading"},wo=A(" \u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044F! "),ko=e("br",null,null,-1),yo=A(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),Oo=e("span",null,".",-1),xo=e("span",null,".",-1),Ro=e("span",null,".",-1),bo=[wo,ko,yo,Oo,xo,Ro],So={key:1,class:"loading"},To=A(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),Vo=e("span",null,".",-1),Po=e("span",null,".",-1),Bo=e("span",null,".",-1),Lo=[To,Vo,Po,Bo],Io=Ce('<svg width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><animateTransform attributeName="transform" dur="1s" type="translate" values="0 0; 1 -1; 1 1; 0 0;" repeatCount="indefinite" begin="0.1"></animateTransform></svg>',1),No={key:1},Mo={key:1},Fo={class:"order-modal-action"},Uo=Ce('<svg class="order-list-buttons-item-img" width="31" height="29" viewBox="0 0 31 29" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="stroke" x="1" y="1" width="19.75" height="22.8571" rx="2" stroke="#A5A7A9" stroke-width="2"></rect><circle cx="21.2322" cy="20.1964" r="8.80357" fill="#53565B"></circle><circle class="stroke" cx="21.2322" cy="20.1964" r="7.80357" stroke="#A5A7A9" stroke-width="2"></circle><rect class="fill" x="19.6786" y="15.5358" width="1.7" height="6.21429" rx="0.85" fill="#A5A7A9"></rect><rect class="fill" x="24.8571" y="20.1" width="1.7" height="5.17857" rx="0.85" transform="rotate(90 24.8571 20.1)" fill="#A5A7A9"></rect><rect class="fill" x="17.6071" y="5.17859" width="1.7" height="13.4643" rx="0.85" transform="rotate(90 17.6071 5.17859)" fill="#A5A7A9"></rect><rect class="fill" x="11.3929" y="13" width="1.7" height="7.25" rx="0.85" transform="rotate(90 11.3929 13)" fill="#A5A7A9"></rect><rect class="fill" x="14.5" y="9" width="1.7" height="10.3571" rx="0.85" transform="rotate(90 14.5 9)" fill="#A5A7A9"></rect></svg><div class="order-modal-action-btn-text">\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u043A\u0430\u0437\u043E\u0432</div>',2),qo=[Uo],Ho=Ce('<svg class="order-list-buttons-item-img" width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="24" y="3" width="8" height="2" rx="1" fill="#A5A7A9"></rect><rect class="fill" x="29" width="8" height="2" rx="1" transform="rotate(90 29 0)" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle></svg><div class="order-modal-action-btn-text">\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437</div>',2),zo=[Ho],Qo=oe({__name:"OrderModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(a,{emit:v}){const t=ve(),i=Ee(),E=c(!1),d=c(null);We(d,()=>{E.value=!0,setTimeout(()=>{E.value=!1},500)});const $=()=>{t.commit(D.CLEAN_ORDER),t.commit(D.CLEAN_ORDER_ERROR),t.commit(D.CLEAN_ADD_ORDER),v("update:modelValue",!1)},R=()=>{t.commit(D.CLEAN_ORDER),t.commit(D.CLEAN_ORDER_ERROR),t.commit(D.CLEAN_ADD_ORDER),v("update:modelValue",!1)},b=()=>{t.commit(D.CLEAN_ORDER),t.commit(D.CLEAN_ADD_ORDER),v("update:modelValue",!1),i.push({name:"Orders"})},S=k(()=>t.getters.getOrderError),w=k(()=>t.getters.getOrderErrorMsg),h=k(()=>t.getters.isOrderAddNew),x=k(()=>t.getters.getOrderAddNew),T=k(()=>t.getters.getOrder);return(Q,V)=>a.modelValue?(s(),o("div",go,[e("div",{class:U(E.value?"order-modal-dialog shake":"order-modal-dialog"),ref_key:"target_modal",ref:d},[e("div",po,[e("div",fo,[e("h3",Ao,g(n(T).edit?"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430 \u2116"+n(T).id:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430"),1),n(h)?(s(),z(ue,{key:0,onOnClick:V[0]||(V[0]=I=>$())})):O("",!0)]),e("div",Eo,[n(S)?(s(),o("div",Mo,g(n(w)),1)):(s(),o("div",Co,[n(h)?(s(),o("div",No,g(n(x).message),1)):(s(),o("div",Do,[n(T).edit?(s(),o("span",So,Lo)):(s(),o("span",$o,bo)),Io]))]))]),e("div",Fo,[n(S)?(s(),z(xe,{key:0,name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",onOnClick:V[1]||(V[1]=I=>$())})):O("",!0),n(S)?(s(),z(xe,{key:1,name:"\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437",onOnClick:V[2]||(V[2]=I=>R())})):O("",!0),n(h)?(s(),o("button",{key:2,class:"order-modal-action-btn",onClick:V[3]||(V[3]=I=>b())},qo)):O("",!0),n(h)?(s(),o("button",{key:3,class:"order-modal-action-btn",onClick:V[4]||(V[4]=I=>R())},zo)):O("",!0)])])],2)])):O("",!0)}}),Zo={class:"content-elem"},Ko={key:0,class:"product-slider-wrap"},Go={class:"product-slider-main"},Yo=["src"],Jo=oe({__name:"ProductSliderSmallCard",props:{data:{type:Array}},setup(a){var w;const v=a,t=c([]),i=ve(),E=k({get:()=>i.getters.getLoader,set:h=>i.commit(Te.SET_LOADER,h)}),d=c(!1);(w=v.data)==null||w.forEach((h,x)=>t.value.push({id:x,src:h})),Xe(()=>{var h;t.value=[],(h=v.data)==null||h.forEach((x,T)=>t.value.push({id:T,src:x}))});const $=()=>{const h=t.value.shift();t.value=t.value.concat(h)},R=()=>{const h=t.value.pop();t.value=[h].concat(t.value)},b=k(()=>i.getters.getProduct),S=k(()=>i.getters.getProductProtect);return(h,x)=>(s(),o("div",Zo,[n(E)?O("",!0):(s(),o("div",Ko,[e("div",Go,[e("div",{class:"product-slider-arrow prev",onClick:R}),m(et,{name:"product-slider-horisont-trans",class:"product-slider-horisont",tag:"div"},{default:de(()=>[(s(!0),o(j,null,se(t.value,T=>(s(),o("div",{class:"product-slider-horisont-slide",key:T.id},[T.src?(s(),o("img",{key:0,src:T.src,alt:"",onClick:x[0]||(x[0]=Q=>d.value=!0)},null,8,Yo)):O("",!0)]))),128))]),_:1}),e("div",{class:"product-slider-arrow next",onClick:$})])])),tt(h.$slots,"product-info"),m(n(Ue),{data:n(b),protect:n(S)},null,8,["data","protect"]),m(n(at),{modelValue:d.value,"onUpdate:modelValue":x[1]||(x[1]=T=>d.value=T),data:a.data},null,8,["modelValue","data"])]))}}),jo={class:"top-line product-page"},Wo={key:0,class:"order-info"},Xo=A(" \u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043E\u0432\u0430\u0440 \u0432 "),e0=A("\u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0435"),t0=A(" \u0438\u043B\u0438 \u0432\u043E\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435\u0441\u044C "),s0=A("\u043F\u043E\u0438\u0441\u043A\u043E\u043C"),u0=A(". "),o0={key:1},l0={class:"content-wrap content-product-order-wrap"},a0={class:"content-wrap-elem"},r0={class:"content-wrap-elem"},n0={key:3,class:"content-heading-wrap product-heading-wrap"},i0={key:0,class:"content-heading-wrap-elem"},d0=e("div",{class:"order-info"},"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438 \u043A \u0437\u0430\u043A\u0430\u0437\u0443 \u0438 \u0442\u043E\u0433\u0434\u0430 \u043E\u043D \u0431\u0443\u0434\u0435\u0442 \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D",-1),c0=[d0],m0={class:"content-wrap content-order-wrap"},v0={class:"content-wrap-elem"},_0={class:"content-wrap-elem"},w0=oe({__name:"OrderPage",props:{article:{type:String}},setup(a){const v=a,t=ve(),i=Ee(),E=k({get:()=>t.getters.getLoader,set:P=>t.commit(Te.SET_LOADER,P)}),d=c(""),$=c(""),R=c(!1),b=c(""),S=c(!1),w=c(!1),h=c(!1),x=c([]),T=()=>{let P={article:t.getters.getProduct.ARTICLE,guid:t.getters.getProduct.UID,product:t.getters.getProduct,characteristics:x.value};t.dispatch(W.ADD_POSITION,P)},Q=()=>{d.value==""?(R.value=!0,setTimeout(()=>{R.value=!1},5e3),b.value="\u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442\u0430"):(S.value=!0,t.commit(D.ADD_ORDER_PARTNER_ID,d.value),setTimeout(()=>{t.dispatch(W.ADD_ORDER,t.getters.getOrderToAdd).catch(()=>{S.value=!1,R.value=!0,setTimeout(()=>{R.value=!1},5e3),b.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3))},V=()=>{S.value=!0,t.commit(D.ADD_ORDER_PARTNER_ID,d.value),setTimeout(()=>{t.dispatch(W.EDIT_ORDER_ACTION,t.getters.getOrderToAdd).catch(()=>{S.value=!1,R.value=!0,setTimeout(()=>{R.value=!1},5e3),b.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3)},I=()=>{E.value=!0,t.dispatch(ge.GET_PRODUCT_BY_ID,$.value).then(()=>{$.value=t.getters.getProduct.ID}).finally(()=>{E.value=!1})},X=async()=>{E.value=!0,t.commit(ye.SET_KP_OFFER_POSITION,t.getters.getOrder.position),t.commit(ye.SET_KP_STEP,2),E.value=!1,await i.push("/kp")};ie(()=>v.article,P=>{P&&(E.value=!0,t.dispatch(ge.SEARCH_PRODUCT,v.article).then(()=>{t.getters.getProduct.ID?$.value=t.getters.getProduct.ID:i.push({name:"Order"})}).finally(()=>{E.value=!1}))}),ie(d,()=>{t.getters.getOrder.edit||t.commit(D.ADD_ORDER_PARTNER_ID,d.value),t.commit(D.CALC_ORDER)}),fe(async()=>{if(t.commit(D.ADD_ORDER_PARTNER_ID,d.value),$.value=t.getters.getProduct.ID,v.article&&(E.value=!0,t.dispatch(ge.SEARCH_PRODUCT,v.article).then(()=>{t.getters.getProduct.ID?$.value=t.getters.getProduct.ID:i.push({name:"Order"})}).finally(()=>{E.value=!1})),t.getters.getActiveCompanyId!==""){d.value=t.getters.getActiveCompanyId;return}t.getters.isCompanysLoad||await t.dispatch(st.GET_COMPANYS),d.value=t.getters.getCompanys===[]?"":t.getters.getCompanys[0].uid});const G=k(()=>{var C;const P=t.getters.getProduct.STATUS,_=Number((C=t.getters.getProduct)==null?void 0:C.MAX_DISCOUNT),N=t.getters.getCompanyDiscount(d.value,t.getters.getProductOffersORGGUID);return _==0&&P=="-"||_==null&&P=="-"?N!=null?N:0:P=="Outlet"||P=="Discount"||P=="Activity"?0:N>_?_:N}),Z=k(()=>t.getters.isProduct),F=k(()=>t.getters.getCompanysList),L=k(()=>t.getters.getProductOffers),Y=k(()=>t.getters.getProduct),le=k(()=>t.getters.getProductFound),_e=k(()=>t.getters.getProductImages),ae=k(()=>t.getters.isOrder),ee=k(()=>t.getters.getOrder),ce=k(()=>t.getters.getOrderDraftCount);return(P,_)=>{const N=Ae("router-link");return s(),o("div",null,[e("div",jo,[m(Me,{data:n(F),modelValue:d.value,"onUpdate:modelValue":_[0]||(_[0]=C=>d.value=C)},null,8,["data","modelValue"]),m(Ne),m(Ie)]),m(Fe,{toDraft:"",draft:n(ce),onOnClick:_[1]||(_[1]=C=>w.value=!0)},null,8,["draft"]),n(Z)?(s(),o("div",o0,[m(ut,{to:"order",show:h.value,"onUpdate:show":_[2]||(_[2]=C=>h.value=C)},null,8,["show"]),m(qe,{title:String(n(Y).NAME),price:String(n(Y).PRICE_OPT),discount:n(G),status:String(n(Y).STATUS),onShowSearch:_[3]||(_[3]=C=>h.value=!h.value)},null,8,["title","price","discount","status"]),e("div",l0,[e("div",a0,[m(ot,{data:n(le),cardType:"order",modelValue:$.value,"onUpdate:modelValue":_[4]||(_[4]=C=>$.value=C),onOnClick:_[5]||(_[5]=C=>I()),onShowSearch:_[6]||(_[6]=C=>h.value=!h.value)},null,8,["data","modelValue"])]),e("div",r0,[m(He,{data:n(L),discount:n(G),modelValue:x.value,"onUpdate:modelValue":_[7]||(_[7]=C=>x.value=C),onOnClick:_[8]||(_[8]=C=>T())},null,8,["data","discount","modelValue"])])])])):(s(),o("div",Wo,[Xo,m(N,{to:"/catalog/catalog",class:"order-info-link"},{default:de(()=>[e0]),_:1}),t0,m(N,{to:"/product",class:"order-info-link"},{default:de(()=>[s0]),_:1}),u0])),n(ae)?(s(),z(mo,{key:2,discount:n(G),data:n(ee)},null,8,["discount","data"])):(s(),o("div",n0,[n(Z)?(s(),o("div",i0,c0)):O("",!0)])),e("div",m0,[e("div",v0,[n(ae)?(s(),z(Bu,{key:0,data:n(ee),companys:n(F),modelValue:d.value,"onUpdate:modelValue":_[9]||(_[9]=C=>d.value=C),onOnClickAdd:Q,onOnClickEdit:V,onGoToKP:X},null,8,["data","companys","modelValue"])):O("",!0)]),e("div",_0,[n(Z)?(s(),z(Jo,{key:0,data:n(_e)},null,8,["data"])):O("",!0)])]),m(Qo,{modelValue:S.value,"onUpdate:modelValue":_[10]||(_[10]=C=>S.value=C)},null,8,["modelValue"]),m(Se,{modelValue:R.value,"onUpdate:modelValue":_[11]||(_[11]=C=>R.value=C),message:b.value},null,8,["modelValue","message"]),m(lt,{modelValue:w.value,"onUpdate:modelValue":_[12]||(_[12]=C=>w.value=C)},null,8,["modelValue"])])}}});export{w0 as default};
