import{d as C,h as p,j as r,b as g,u as s,a as u,p as i,w as L,k as A,a7 as V,ai as k,g as y,R as z,a0 as F,b2 as m,I as R,s as B,P as S,b3 as T,o as h,az as x,aP as D}from"./index.b711e212.js";import{d as _,F as P,a as E,E as M}from"./vee-validate.esm.565f1977.js";var N="/assets/img/logo.a8cca4dc.png";const O={key:0,class:"authorization"},U={class:"authorization-body"},G=u("div",{class:"authorization-logo"},[u("img",{src:N,alt:"\u043B\u043E\u0433\u043E\u0442\u0438\u043F"})],-1),I={class:"authorization-check"},q=u("span",{class:"checkbox-custom"},null,-1),H=u("span",{class:"check-txt"},"\u0417\u0430\u043F\u043E\u043C\u043D\u0438\u0442\u044C \u043C\u0435\u043D\u044F",-1),W=["disabled"],$=u("div",{class:"authorization-bottom"}," Produced by Expert Workwear ",-1),J=C({__name:"LoginPage",setup(j){const e=y(),f=z(),o=p({login:"",password:""}),d=p(!1),l=r({get:()=>e.getters.getLoader,set:a=>e.commit(F.SET_LOADER,a)}),v=r(()=>e.getters.isAuthenticated),b=r(()=>e.getters.getLoginErrorMsg);_("required",a=>!a||!a.length?"\u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043F\u043E\u043B\u0435":!0),_("minLength",(a,[t])=>!a||!a.length?!0:a.length<t?`\u041C\u0438\u043D\u0438\u043C\u0443\u043C ${t} \u0441\u0438\u043C\u0432\u043E\u043B\u0430`:!0);const c=r({get:()=>e.getters.getLoginError,set:()=>e.commit(m.CLEAR_LOGIN_ERROR)}),w=()=>{l.value=!0,e.dispatch(R.LOGIN,o.value).finally(async()=>{d.value&&await e.commit(m.SET_SAVE_AUTH),await e.commit(m.SET_AUTH_LOGIN,o.value.login),await Promise.all([e.dispatch(B.GET_COMPANYS),e.dispatch(S.GET_PROFILE)]),l.value=!1,await e.dispatch(T.AUTH_WS),await f.push("/")}).catch(()=>{o.value.password="",setTimeout(()=>{l.value=!1},3e3)})};return(a,t)=>(h(),g("div",null,[s(v)?A("",!0):(h(),g("div",O,[u("div",U,[G,i(s(P),{onSubmit:w,class:"authorization-form"},{default:L(()=>[i(s(E),{as:"input",modelValue:o.value.login,"onUpdate:modelValue":t[0]||(t[0]=n=>o.value.login=n),class:"authorization-input",name:"Login",placeholder:"\u041B\u043E\u0433\u0438\u043D",autocomplete:"off",rules:"required|minLength:3"},null,8,["modelValue"]),i(s(M),{name:"Login"}),i(s(E),{as:"input",type:"password",modelValue:o.value.password,"onUpdate:modelValue":t[1]||(t[1]=n=>o.value.password=n),class:"authorization-input",name:"password",placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C",autocomplete:"off",rules:"required|minLength:3"},null,8,["modelValue"]),u("label",I,[x(u("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>d.value=n),class:"check-input",type:"checkbox",name:"remember"},null,512),[[D,d.value]]),q,H]),u("button",{class:"authorization-btn",type:"submit",disabled:s(l)},"\u0412\u043E\u0439\u0442\u0438",8,W)]),_:1})]),$])),i(k,{modelValue:s(c),"onUpdate:modelValue":t[3]||(t[3]=n=>V(c)?c.value=n:null),message:s(b)},null,8,["modelValue","message"])]))}});export{J as default};
