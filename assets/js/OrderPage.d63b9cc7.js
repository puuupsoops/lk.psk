import{_ as Ve}from"./PersonalBar.2be0cd94.js";import{N as Pe}from"./Notification.8bcac488.js";import{_ as Be}from"./CompanyBarTop.dd3d9c46.js";import{_ as Le}from"./TopNav.52eb956e.js";import{a as Ie,P as Me,_ as Fe}from"./ProductPropertiesCard.47ac742d.js";import{o as s,b as l,a as e,_ as ye,d as ee,h as n,i as ge,L as re,r as pe,c as q,e as Ne,as as _e,p as m,w as ie,at as Ue,z as N,F as G,f as J,m as V,t as h,k as O,au as X,g as ce,R as fe,j as k,av as qe,u as r,a7 as He,aw as ze,ax as Qe,ay as Ce,W as De,az as Ze,aA as Ke,ai as Oe,aB as A,aj as Y,aC as Ge,D as Ye,l as Ae,a0 as xe,Y as je,T as We,aD as Je,s as Xe,af as he,ag as et,ah as tt,aE as st,ar as we}from"./index.100fded8.js";import{a as ut}from"./ProductSliderCard.6b5aaef6.js";import{_ as ot}from"./ModalInputFull.1a39d84b.js";import{D as W,a as lt}from"./types.82703ff6.js";const at={xmlns:"http://www.w3.org/2000/svg",width:"30",height:"29",fill:"none",class:"content-heading-btn-img"},rt=e("path",{fill:"#A5A7A9",stroke:"#A5A7A9","stroke-width":".2",d:"M3.246 1.28a.826.826 0 0 0-.826.827l.03 18.131a.826.826 0 0 0 .823.825h3.788l.044 6.455a.826.826 0 0 0 1.41.578l7.005-6.994H27.7a.826.826 0 0 0 .825-.827V2.105a.826.826 0 0 0-.826-.826Zm.828 1.652h22.799v16.517H15.178a.826.826 0 0 0-.584.242l-5.85 5.842-.037-5.303a.826.826 0 0 0-.826-.82H4.1z"},null,-1),it=e("path",{fill:"#A5A7A9",stroke:"#A5A7A9","stroke-width":"1.5",d:"M8.057 6.555h5.599M8.134 10.77h12.513M8.064 15.056h9.224"},null,-1),dt=[rt,it];function nt(a,_){return s(),l("svg",at,dt)}var ct={render:nt};const mt={emits:["onClick"],setup(){}},vt=e("svg",{class:"edit-btn-img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#000000"},[e("path",{d:"M0 0h24v24H0V0z",fill:"none"}),e("path",{class:"fill",fill:"#A5A7A9",d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})],-1),ht=[vt];function _t(a,_,t,d,E,c){return s(),l("div",{class:"edit-btn",onClick:_[0]||(_[0]=C=>a.$emit("onClick"))},ht)}var $e=ye(mt,[["render",_t]]);const gt={class:"shipment-form-heading shipment-form-wrap"},pt={class:"shipment-form-elem"},ft={class:"shipment-form-item"},At=e("div",{class:"shipment-form-elem-title"},[e("span",null,"\u0410\u0434\u0440\u0435\u0441 \u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0438")],-1),Et={class:"shipment-form-row"},Ct={class:"shipment-form-input-wrap"},Dt=e("svg",{class:"shipment-form-map-btn-img",width:"19",height:"25",viewBox:"0 0 19 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M9.49968 25C8.95397 25 8.4653 24.717 8.19255 24.2429C8.18967 24.238 8.18688 24.2329 8.1841 24.2279L1.98479 12.8809C0.505001 10.1724 0.547432 6.95749 2.09831 4.28113C3.61555 1.66277 6.31047 0.0631103 9.30725 0.00197754C9.43527 -0.00065918 9.56398 -0.00065918 9.69191 0.00197754C12.6887 0.0631103 15.3837 1.66277 16.9009 4.28113C18.4518 6.95749 18.4943 10.1723 17.0145 12.8809L10.8152 24.2279C10.8124 24.2329 10.8096 24.238 10.8067 24.2429C10.534 24.717 10.0454 25 9.49968 25ZM9.49963 1.56252C9.44597 1.56252 9.39245 1.56306 9.33903 1.56414C6.89279 1.61404 4.69133 2.92258 3.45017 5.06453C2.17541 7.26448 2.14016 9.90642 3.35593 12.1317L9.49963 23.3768L15.6433 12.1318C16.8591 9.90642 16.8238 7.26448 15.549 5.06453C14.3078 2.92263 12.1064 1.61404 9.66013 1.56414C9.60685 1.56306 9.55329 1.56252 9.49963 1.56252Z",fill:"#8D8D8D"}),e("path",{d:"M9.5 11.3281C7.56147 11.3281 5.98438 9.75103 5.98438 7.8125C5.98438 5.87397 7.56147 4.29688 9.5 4.29688C11.4385 4.29688 13.0156 5.87397 13.0156 7.8125C13.0156 9.75103 11.4386 11.3281 9.5 11.3281ZM9.5 5.85938C8.42305 5.85938 7.54688 6.73555 7.54688 7.8125C7.54688 8.88945 8.42305 9.76563 9.5 9.76563C10.577 9.76563 11.4531 8.88945 11.4531 7.8125C11.4531 6.73555 10.577 5.85938 9.5 5.85938Z",fill:"#8D8D8D"})],-1),wt=e("span",null,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0430\u0434\u0440\u0435\u0441",-1),$t={class:"shipment-form-elem"},kt={class:"shipment-form-item"},yt=e("div",{class:"shipment-form-elem-title"},[e("span",null,"\u0414\u0430\u0442\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043A\u0438")],-1),Ot={class:"shipment-form-row"},xt={class:"shipment-form-date"},Rt={key:0,class:"shipment-form-elem"},bt={class:"shipment-form-item"},Tt=e("span",null,"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0443 \u0432\u043A\u043B. \u0432 \u0441\u0447\u0435\u0442",-1),St=[Tt],Vt=["onClick"],Pt={key:0,class:"content-heading-btn-img active",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Bt=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"m 8.938 13 l 4.958 -4.938 L 12.833 7 l -3.895 3.875 l -1.771 -1.75 l -1.063 1.063 Z M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z m 0 -11 v 11 v -11 Z"},null,-1),Lt=[Bt],It={key:1,class:"content-heading-btn-img",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Mt=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z"},null,-1),Ft=[Mt],Nt={key:1,class:"order-modal"},Ut={class:"order-modal-dialog map"},qt={class:"order-modal-content map"},Ht={class:"order-modal-header"},zt=e("h3",{class:"order-modal-header-title"},"\u041A\u0430\u0440\u0442\u0430",-1),Qt=e("div",{class:"order-modal-body map"},[e("iframe",{src:"https://yandex.ru/map-widget/v1/?mode=whatshere&whatshere%5Bpoint%5D=37.371453%2C55.980529&z=17",width:"800",height:"600",frameborder:"0"},`\r
						`)],-1),Zt=ee({__name:"ShipmentTransportAddressCard",props:{addressId:{type:Number,required:!0},errorAddress:{type:Boolean,default:!1},date:{type:String,required:!0},errorDate:{type:Boolean,default:!1},addressList:{type:Array,required:!0},loadingAddress:{type:Boolean,default:!1},other:{type:Boolean,default:!1},storagesList:{type:Array,required:!0},storage:{type:String,required:!0},storageError:{type:Boolean,default:!1}},emits:["update:addressId","update:date","update:errorAddress","update:errorDate","update:storage","update:storageError"],setup(a,{emit:_}){const t=a,d=n(!1),E=n(""),c=n(-1);n(!0),n(!1),ge(()=>{E.value=t.date,c.value=t.addressId}),re(c,()=>{_("update:addressId",c.value),_("update:errorAddress",!1)}),re(E,()=>{_("update:date",E.value),_("update:errorDate",!1)});const C=x=>{_("update:storage",x),_("update:storageError",!1)};return(x,R)=>{const b=pe("router-link");return s(),l("div",gt,[e("div",pt,[e("div",ft,[At,e("div",Et,[e("div",Ct,[a.loadingAddress?(s(),q(Ne,{key:0,small:""})):(s(),q(_e,{key:1,data:a.addressList,modelValue:c.value,"onUpdate:modelValue":R[0]||(R[0]=D=>c.value=D),error:a.errorAddress},null,8,["data","modelValue","error"])),m(b,{tag:"a",class:"shipment-form-map-btn",to:"/shipments/address"},{default:ie(()=>[Dt,wt]),_:1})])])])]),e("div",$t,[e("div",kt,[yt,e("div",Ot,[e("div",xt,[m(Ue,{modelValue:E.value,"onUpdate:modelValue":R[1]||(R[1]=D=>E.value=D),error:a.errorDate},null,8,["modelValue","error"])])])])]),a.other&&a.storagesList.length>0?(s(),l("div",Rt,[e("div",bt,[e("div",{class:N(["shipment-form-elem-title",{error:a.storageError}])},St,2),(s(!0),l(G,null,J(a.storagesList,(D,v)=>(s(),l("div",{class:N(["order-list-btn",{error:a.storageError}]),key:v,onClick:y=>C(String(D.id))},[a.storage==D.id?(s(),l("svg",Pt,Lt)):(s(),l("svg",It,Ft)),V(" "+h(D.name),1)],10,Vt))),128))])])):O("",!0),d.value?(s(),l("div",Nt,[e("div",Ut,[e("div",qt,[e("div",Ht,[zt,m(X,{onOnClick:R[2]||(R[2]=D=>d.value=!1)})]),Qt])])])):O("",!0)])}}}),Kt={class:"order-list content-elem"},Gt={class:"order-list-top"},Yt={class:"order-list-top-elem"},jt={class:"order-list-top-wrap"},Wt=e("div",{class:"order-list-elem"},"\u041A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442",-1),Jt={class:"order-list-top-elem"},Xt={class:"order-list-top-wrap"},es=e("div",{class:"order-list-elem"},"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F",-1),ts={class:"order-list-top-elem"},ss={key:0,class:"content-heading-btn-img",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},us=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z"},null,-1),os=[us],ls={key:1,class:"content-heading-btn-img active",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},as=e("path",{class:"fill stroke",fill:"#A5A7A9",d:"m 8.938 13 l 4.958 -4.938 L 12.833 7 l -3.895 3.875 l -1.771 -1.75 l -1.063 1.063 Z M 4.5 17 q -0.625 0 -1.062 -0.438 Q 3 16.125 3 15.5 v -11 q 0 -0.625 0.438 -1.062 Q 3.875 3 4.5 3 h 11 q 0.625 0 1.062 0.438 Q 17 3.875 17 4.5 v 11 q 0 0.625 -0.438 1.062 Q 16.125 17 15.5 17 Z m 0 -1.5 h 11 v -11 h -11 v 11 Z m 0 -11 v 11 v -11 Z"},null,-1),rs=[as],is=V(" \u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B "),ds=["tooltip","flow"],ns={style:{"padding-left":"40px"}},cs=V(" \u041A\u043E\u044D\u0444\u0438\u0446\u0438\u0435\u043D\u0442: "),ms={class:"content-heading-info-elem",style:{"padding-left":"40px"}},vs=e("span",{class:"content-heading-info-text"},"\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u043C\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043C\u0435\u0448\u043A\u043E\u0432: ",-1),hs={class:"content-heading-info-value"},_s={class:"order-list-delivery"},gs={class:"scroll-elem"},ps={class:"order-list-bottom-wrap"},fs={key:0,class:"order-list-row order-list-heading"},As=e("div",{class:"order-list-elem"},"\u2116",-1),Es=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),Cs=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),Ds={class:"order-list-elem"},ws=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),$s=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),ks=e("div",{class:"order-list-elem"},null,-1),ys=["onClick"],Os={class:"order-list-elem"},xs=e("div",{class:"table-arrow"},null,-1),Rs={class:"order-list-elem"},bs=["innerHTML"],Ts={class:"order-list-elem"},Ss=["innerHTML"],Vs=e("div",{class:"order-list-elem"},null,-1),Ps={class:"order-list-elem"},Bs={class:"order-list-elem"},Ls={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},Is={class:"order-list-elem-delete"},Ms=e("div",{class:"order-list-elem"},null,-1),Fs=e("div",{class:"order-list-elem"},null,-1),Ns={class:"order-list-elem"},Us={class:"order-list-elem"},qs={key:0,class:"order-list-elem-text"},Hs={class:"order-list-elem"},zs={class:"order-list-elem"},Qs={class:"order-list-elem-delete"},Zs={key:0,class:"order-list-bottom-wrap"},Ks=e("div",{class:"order-list-row order-list-subheading"},[e("div",null,"\u041F\u043E\u0437\u0438\u0446\u0438\u0438 \u0434\u043B\u044F \u043F\u0440\u0435\u0434\u0437\u0430\u043A\u0430\u0437\u0430")],-1),Gs={class:"order-list-row order-list-heading"},Ys=e("div",{class:"order-list-elem"},"\u2116",-1),js=e("div",{class:"order-list-elem"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),Ws=e("div",{class:"order-list-elem"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",-1),Js={class:"order-list-elem"},Xs=e("div",{class:"order-list-elem"},"\u041A\u043E\u043B-\u0432\u043E",-1),eu=e("div",{class:"order-list-elem"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),tu=e("div",{class:"order-list-elem"},null,-1),su=["onClick"],uu={class:"order-list-elem"},ou=e("div",{class:"table-arrow"},null,-1),lu={class:"order-list-elem"},au=["innerHTML"],ru={class:"order-list-elem"},iu=["innerHTML"],du=e("div",{class:"order-list-elem"},null,-1),nu={class:"order-list-elem"},cu={class:"order-list-elem"},mu={class:"order-list-elem-edit",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},vu={class:"order-list-elem-delete"},hu=e("div",{class:"order-list-elem"},null,-1),_u=e("div",{class:"order-list-elem"},null,-1),gu={class:"order-list-elem"},pu={class:"order-list-elem"},fu={key:0,class:"order-list-elem-text"},Au={class:"order-list-elem"},Eu={class:"order-list-elem"},Cu={class:"order-list-elem-delete"},Du=e("div",{class:"order-comment-title"},[e("span",null,"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439")],-1),wu={class:"order-list-buttons"},$u=e("div",{class:"gradient-btn-text"},"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",-1),ku=[$u],yu=e("div",{class:"gradient-btn-text"},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),Ou=[yu],xu=e("div",{class:"gradient-btn-text"},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",-1),Ru=[xu],bu=ee({__name:"OrderCard",props:{data:{type:Object,required:!0},companys:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue","update:data","onClickAdd","onClickEdit","goToKP"],setup(a,{emit:_}){const t=a,d=ce(),E=fe(),c=n([]),C=n([]),x=n(!1),R=n(!1),b=n(""),D=n(!1),v=n(""),y=n(""),T=n(!1),H=n(-1),S=n(!1),L=n(""),j=n(!1),Q=n(!1),z=n("\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A #"),F=n(!1),B=n(0),Z=k({get:()=>{var p;return(p=t.data)!=null&&p.edit?t.data.partner_id:t.modelValue},set:p=>_("update:modelValue",p)}),te=k(()=>d.getters.isOrderInDraft),me=k(()=>d.getters.getShipmentsAddressInputData),se=k(()=>d.getters.getOrderStorages),ue=()=>{d.commit(A.CALC_ORDER),ae()},de=(p,u)=>{ae(),L.value="",p?d.dispatch(Y.REMOVE_POSITION_PRESAIL,u):d.dispatch(Y.REMOVE_POSITION,u)},I=(p,u)=>{ae(),L.value="",p?d.dispatch(Y.REMOVE_CHARACTERISTIC_PRESAIL,u):d.dispatch(Y.REMOVE_CHARACTERISTIC,u)},g=()=>{let p=!0;if(ae(),d.commit(A.ADD_BAGS_RECORD,{wear:"PKM "+M.value.toFixed(1),wear_pre:"PKM "+U.value.toFixed(1),shoes:"PKM "+oe.value.toFixed(1),shoes_pre:"PKM "+le.value.toFixed(1)}),D.value||d.commit(A.SET_ORDER_COMMENT,""),t.modelValue==""&&(x.value=!0,setTimeout(()=>{x.value=!1},5e3)),B.value>0&&y.value==""&&(T.value=!0,setTimeout(()=>{T.value=!1},5e3),p=!1),B.value>0&&H.value==-1&&(S.value=!0,setTimeout(()=>{S.value=!1},5e3),p=!1),W[B.value].code=="other"&&se.value.length>0&&L.value==""&&(j.value=!0,setTimeout(()=>{j.value=!1},5e3),p=!1),d.commit(A.SET_ORDER_COMMENT,v.value),p){let u={address:B.value==0?"":d.getters.getShipmentsAddress[H.value].address,case:W[B.value].code,date:Ge(y.value).getTime(),cost:W[B.value].code=="other"?900:0,bill_to:L.value};d.commit(A.SET_ORDER_DELIVERY,u),t.data.edit?_("onClickEdit"):_("onClickAdd")}console.log(p)},ne=()=>{d.commit(A.CLEAN_ORDER)},$=()=>{var p;d.getters.isOrderInDraft?(d.commit(A.DEL_ORDER_FROM_DRAFT,(p=t.data)==null?void 0:p.id),R.value=!0,b.value="\u0417\u0430\u043A\u0430\u0437 \u0443\u0434\u0430\u043B\u0435\u043D \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430"):(d.commit(A.ADD_ORDER_TO_DRAFT,z.value),F.value=!1,R.value=!0,b.value="\u0417\u0430\u043A\u0430\u0437 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")},Ee=p=>{E.push("/order/"+p)},Re=()=>{d.commit(A.SET_ORDER_REQUEST_SERT,!t.data.request_certificate)},be=()=>{d.commit(A.SET_ORDER_COMMENT,v.value)};ge(()=>{var p;if(t.data.comment.length>0&&(D.value=!0,t.data.comment==""?v.value=t.data.comment:v.value=t.data.comment.replace(new RegExp("PKM [0-9]+.[0-9]+, "),"")),d.getters.getShipmentsAddress.length==0&&(Q.value=!0,d.dispatch(qe.GET_SHIPMENTS_ADDRESS).then(()=>{Q.value=!1})),t.data.edit){let u=(p=W.find(i=>i.code===t.data.delivery.case))==null?void 0:p.id;B.value=u||0,y.value=new Date(t.data.delivery.date).toLocaleString("ru").substr(0,10),_("update:modelValue",t.data.partner_id)}});const Te=()=>{let p={address:"",case:W[B.value].code,date:0,cost:W[B.value].code=="other"?900:0,bill_to:""};d.commit(A.SET_ORDER_DELIVERY,p),d.commit(A.CALC_ORDER)};re(F,()=>{F.value&&(z.value="\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A #"+Number(d.getters.getOrderDraftCount+1))});const w=n(0),oe=n(0),M=n(0),le=n(0),U=n(0),ae=function(){Se()},Se=function(){w.value=0,oe.value=0,M.value=0,le.value=0,U.value=0;let p=d.getters.getOrder.position,u=d.getters.getOrder.position_presail;return p.forEach(function(i,o){switch(i.product.TYPE){case"spetsodezhda-zima":w.value+=.2*i.count,M.value+=.2*i.count;break;case"spetsodezhda":w.value+=.2*i.count,M.value+=.2*i.count;break;case"other-zima":w.value+=.1*i.count,M.value+=.1*i.count;break;case"spetsodezhda-leto":w.value+=.05*i.count,M.value+=.05*i.count;break;case"other-leto":w.value+=.025*i.count,M.value+=.025*i.count;break;case"obuv-rabochaya":w.value+=.05*i.count,oe.value+=.05*i.count;break;case"zhilet":w.value+=.01*i.count,M.value+=.01*i.count;break;case"sap":w.value+=.083*i.count,oe.value+=.083*i.count;break;default:w.value+=.08*i.count,M.value+=.08*i.count;break}console.log(i.count),console.log(i.product.TYPE)}),u.forEach(function(i,o){switch(i.product.TYPE){case"spetsodezhda-zima":w.value+=.2*i.count,M.value+=.2*i.count;break;case"spetsodezhda":w.value+=.2*i.count,U.value+=.2*i.count;break;case"other-zima":w.value+=.1*i.count,U.value+=.1*i.count;break;case"spetsodezhda-leto":w.value+=.05*i.count,U.value+=.05*i.count;break;case"other-leto":w.value+=.025*i.count,U.value+=.025*i.count;break;case"obuv-rabochaya":w.value+=.05*i.count,le.value+=.05*i.count;break;case"zhilet":w.value+=.01*i.count,U.value+=.01*i.count;break;case"sap":w.value+=.083*i.count,le.value+=.083*i.count;break;default:w.value+=.08*i.count,U.value+=.08*i.count;break}}),console.log("all:",w.value),console.log("wear:",M.value),console.log("wear-pre:",U.value),console.log("shoes:",oe.value),console.log("shoes-pre:",le.value),w.value.toFixed(1)};return(p,u)=>{const i=pe("router-link");return s(),l(G,null,[e("div",Kt,[e("div",Gt,[e("div",Yt,[e("div",jt,[Wt,m(_e,{data:a.companys,error:x.value,"read-only":a.data.edit,modelValue:r(Z),"onUpdate:modelValue":u[0]||(u[0]=o=>He(Z)?Z.value=o:null)},null,8,["data","error","read-only","modelValue"])])]),e("div",Jt,[e("div",Xt,[es,m(_e,{data:r(lt),modelValue:B.value,"onUpdate:modelValue":u[1]||(u[1]=o=>B.value=o),onOnInput:u[2]||(u[2]=o=>Te())},null,8,["data","modelValue"])])]),e("div",ts,[e("div",{class:"order-list-btn",tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B \u043A \u0437\u0430\u043A\u0430\u0437\u0443",flow:"up",onClick:u[3]||(u[3]=o=>Re())},[a.data.request_certificate?(s(),l("svg",ls,rs)):(s(),l("svg",ss,os)),is]),e("div",{class:N(["content-heading-btn",{active:D.value}]),onClick:u[4]||(u[4]=o=>D.value=!D.value),tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043A\u0430\u0437\u0443",flow:"up"},[m(r(ct),{class:"content-heading-btn-img"})],2),e("div",{class:"content-heading-btn",onClick:u[5]||(u[5]=o=>p.$emit("goToKP")),tooltip:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0438\u0437 \u0437\u0430\u043A\u0430\u0437\u0430",flow:"up"},[m(r(ze),{class:"content-heading-btn-img"})]),e("div",{class:N(["content-heading-btn",{active:r(te)}]),onClickCapture:u[9]||(u[9]=o=>r(te)?$():F.value=!0),tooltip:r(te)?"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A",flow:F.value?"":"up-left"},[m(ot,{modelValue:z.value,"onUpdate:modelValue":u[6]||(u[6]=o=>z.value=o),show:F.value,"onUpdate:show":u[7]||(u[7]=o=>F.value=o),"show-ok":"",onOnOk:u[8]||(u[8]=o=>$())},null,8,["modelValue","show"]),m(r(Qe),{class:"content-heading-btn-img"})],42,ds)])]),e("div",ns,[e("button",{onClick:ae},"\u041C\u0435\u0448\u043A\u0438 \u043F\u043E\u0441\u0447\u0438\u0442\u0430\u0442\u044C"),cs,e("b",null,h(w.value.toFixed(1)),1)]),e("div",ms,[vs,e("span",hs,h(w.value==0?"1":Math.ceil(w.value).toString())+" \u0448\u0442.",1)]),e("div",_s,[B.value!==0?(s(),q(Zt,{key:0,date:y.value,"onUpdate:date":u[10]||(u[10]=o=>y.value=o),addressId:H.value,"onUpdate:addressId":u[11]||(u[11]=o=>H.value=o),errorDate:T.value,"onUpdate:errorDate":u[12]||(u[12]=o=>T.value=o),errorAddress:S.value,"onUpdate:errorAddress":u[13]||(u[13]=o=>S.value=o),storage:L.value,"onUpdate:storage":u[14]||(u[14]=o=>L.value=o),storageError:j.value,"onUpdate:storageError":u[15]||(u[15]=o=>j.value=o),loadingAddress:Q.value,addressList:r(me),other:a.data.delivery.case==="other",storagesList:r(se)},null,8,["date","addressId","errorDate","errorAddress","storage","storageError","loadingAddress","addressList","other","storagesList"])):O("",!0)]),e("div",gs,[e("div",ps,[a.data.position.length>0?(s(),l("div",fs,[As,Es,Cs,e("div",Ds,h(c.value.length!==0?"\u0426\u0435\u043D\u0430":""),1),ws,$s,ks])):O("",!0),(s(!0),l(G,null,J(a.data.position,(o,P)=>(s(),l("div",{class:N(c.value.indexOf(P)!==-1?"order-list-item active":"order-list-item"),key:P},[e("div",{class:"order-list-row order-list-main-row",onClick:f=>c.value.indexOf(P)===-1?c.value.push(P):c.value.splice(c.value.indexOf(P),1)},[e("div",Os,[V(h(P+1)+" ",1),xs]),e("div",Rs,[m(i,{class:"order-list-elem",to:"/order/"+o.article,title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},{default:ie(()=>[e("span",{innerHTML:o.article},null,8,bs)]),_:2},1032,["to"])]),e("div",Ts,[e("span",{innerHTML:o.product.NAME},null,8,Ss)]),Vs,e("div",Ps,h(o.count),1),e("div",Bs,h(Number(o.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",Ls,[m($e,{onClick:Ce(f=>Ee(o.article),["stop"])},null,8,["onClick"])]),e("div",Is,[m(X,{onOnClick:f=>de(!1,o.guid)},null,8,["onOnClick"])])],8,ys),e("div",{class:N(c.value.indexOf(P)!==-1?"order-list-sublist active":"order-list-sublist")},[(s(!0),l(G,null,J(o.characteristics,(f,ve)=>(s(),l("div",{key:ve,class:"order-list-row"},[Ms,Fs,e("div",Ns,h(f.CHARACTERISTIC),1),e("div",Us,[V(h(Number(f.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),f.discount>0?(s(),l("div",qs,"\u0441\u043A\u0438\u0434\u043A\u0430 "+h(f.discount)+"% ",1)):O("",!0)]),e("div",Hs,[m(De,{modelValue:f.count,"onUpdate:modelValue":K=>f.count=K,min:1,max:f.RESIDUE,onOnInput:u[16]||(u[16]=K=>ue())},null,8,["modelValue","onUpdate:modelValue","max"])]),e("div",zs,h(Number(f.price_discount*f.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",Qs,[m(X,{onOnClick:K=>I(!1,{guid:o.guid,characteristics:[f],article:o.article,product:o.product})},null,8,["onOnClick"])])]))),128))],2)],2))),128))]),a.data.position_presail.length>0?(s(),l("div",Zs,[Ks,e("div",Gs,[Ys,js,Ws,e("div",Js,h(C.value.length!==0?"\u0426\u0435\u043D\u0430":""),1),Xs,eu,tu]),(s(!0),l(G,null,J(a.data.position_presail,(o,P)=>(s(),l("div",{class:N(C.value.indexOf(P)!==-1?"order-list-item active":"order-list-item"),key:P},[e("div",{class:"order-list-row order-list-main-row",onClick:f=>C.value.indexOf(P)===-1?C.value.push(P):C.value.splice(C.value.indexOf(P),1)},[e("div",uu,[V(h(P+1)+" ",1),ou]),e("div",lu,[e("span",{innerHTML:o.article},null,8,au)]),e("div",ru,[e("span",{innerHTML:o.product.NAME},null,8,iu)]),du,e("div",nu,h(o.count),1),e("div",cu,h(Number(o.total_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",mu,[m($e,{onClick:Ce(f=>Ee(o.article),["stop"])},null,8,["onClick"])]),e("div",vu,[m(X,{onOnClick:f=>de(!0,o.guid)},null,8,["onOnClick"])])],8,su),e("div",{class:N(C.value.indexOf(P)!==-1?"order-list-sublist active":"order-list-sublist")},[(s(!0),l(G,null,J(o.characteristics,(f,ve)=>(s(),l("div",{key:ve,class:"order-list-row"},[hu,_u,e("div",gu,h(f.CHARACTERISTIC),1),e("div",pu,[V(h(Number(f.price_discount).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1),f.discount>0?(s(),l("div",fu,"\u0441\u043A\u0438\u0434\u043A\u0430 "+h(f.discount)+"% ",1)):O("",!0)]),e("div",Au,[m(De,{modelValue:f.count,"onUpdate:modelValue":K=>f.count=K,min:f.RESIDUE+1,onOnInput:u[17]||(u[17]=K=>ue())},null,8,["modelValue","onUpdate:modelValue","min"])]),e("div",Eu,h(Number(f.price_discount*f.count).toLocaleString("RU",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1),e("div",Cu,[m(X,{onOnClick:K=>I(!0,{guid:o.guid,characteristics:[f],article:o.article,product:o.product})},null,8,["onOnClick"])])]))),128))],2)],2))),128))])):O("",!0)])]),e("div",{class:N(["order-comment-form",{show:D.value}])},[Du,Ze(e("textarea",{class:"order-comment-textarea","onUpdate:modelValue":u[18]||(u[18]=o=>v.value=o),onInput:u[19]||(u[19]=o=>be()),name:""},null,544),[[Ke,v.value]])],2),e("div",wu,[e("button",{class:"order-list-submit gradient-btn disabled",onClick:u[20]||(u[20]=o=>ne())},ku),a.data.edit?(s(),l("button",{key:0,class:"order-list-submit gradient-btn",onClick:u[21]||(u[21]=o=>g())},Ou)):(s(),l("button",{key:1,class:"order-list-submit gradient-btn",onClick:u[22]||(u[22]=o=>g())},Ru))]),m(Oe,{modelValue:R.value,"onUpdate:modelValue":u[23]||(u[23]=o=>R.value=o),message:b.value,timeout:2e3,notification:""},null,8,["modelValue","message"])],64)}}}),Tu={class:"content-heading-wrap proudct-heading-wrap"},Su={class:"content-heading-wrap-elem"},Vu={key:0,class:"content-heading"},Pu={key:1,class:"content-heading"},Bu={class:"content-heading-wrap-elem"},Lu={class:"content-heading-price"},Iu=e("div",{class:"content-heading-price-text"},"\u0421\u0443\u043C\u043C\u0430 \u0437\u0430\u043A\u0430\u0437\u0430: ",-1),Mu={key:0,class:"content-heading-info-elem",style:{position:"absolute"}},Fu={key:0,class:"content-heading-price-value"},Nu={class:"strikethrough"},Uu={key:1,class:"content-heading-price-value"},qu={class:"content-heading-info"},Hu={class:"content-heading-info-elem"},zu=e("span",{class:"content-heading-info-text"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0435\u0434\u0438\u043D\u0438\u0446: ",-1),Qu={class:"content-heading-info-value"},Zu={key:0,class:"content-heading-info-elem"},Ku=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u0432\u0435\u0441: ",-1),Gu={class:"content-heading-info-value"},Yu={key:1,class:"content-heading-info-elem"},ju=e("span",{class:"content-heading-info-text"},"\u041E\u0431\u0449\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1),Wu={class:"content-heading-info-value"},Ju=ee({__name:"OrderHeaderCard",props:{data:{type:Object,required:!0},discount:{type:Number}},setup(a){return(_,t)=>(s(),l("div",Tu,[e("div",Su,[a.data.edit?(s(),l("div",Vu,"\u0417\u0430\u043A\u0430\u0437 \u2116 "+h(a.data.id)+" \u043E\u0442 "+h(a.data.date),1)):(s(),l("div",Pu,"\u0417\u0430\u043A\u0430\u0437 \u2116 \u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437 \u043E\u0442 "+h(new Date(a.data.id).toLocaleDateString("ru-RU")),1))]),e("div",Bu,[e("div",Lu,[e("div",null,[Iu,a.data.delivery.case=="other"?(s(),l("div",Mu,"+\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430: "+h(a.data.delivery.cost)+" \u20BD",1)):O("",!0)]),a.data.total!=a.data.total_discount?(s(),l("div",Fu,[e("span",Nu,h(Number(a.data.total).toLocaleString("ru"))+" \u20BD",1),V(" "+h(Number(a.data.total_discount).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD ",1)])):(s(),l("div",Uu,h(Number(a.data.total).toLocaleString("ru"))+" \u20BD",1))])]),e("div",qu,[e("div",Hu,[zu,e("span",Qu,h(a.data.total_count),1)]),a.data.total_weight?(s(),l("div",Zu,[Ku,e("span",Gu,h(a.data.total_weight)+" \u043A\u0433.",1)])):O("",!0),a.data.total_valume?(s(),l("div",Yu,[ju,e("span",Wu,h(a.data.total_valume)+" \u043C.\u043A\u0443\u0431.",1)])):O("",!0)])]))}}),Xu={props:{name:{type:String}},emits:["onClick"],setup(){}},e0={class:""};function t0(a,_,t,d,E,c){return s(),l("button",{class:"default-btn",onClick:_[0]||(_[0]=C=>a.$emit("onClick"))},[e("div",e0,h(t.name),1)])}var ke=ye(Xu,[["render",t0]]);const s0={key:0,class:"order-modal"},u0={class:"order-modal-content"},o0={class:"order-modal-header"},l0={class:"order-modal-header-title"},a0={class:"order-modal-body"},r0={key:0},i0={key:0},d0={key:0,class:"loading"},n0=V(" \u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044F! "),c0=e("br",null,null,-1),m0=V(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),v0=e("span",null,".",-1),h0=e("span",null,".",-1),_0=e("span",null,".",-1),g0=[n0,c0,m0,v0,h0,_0],p0={key:1,class:"loading"},f0=V(" \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0443\u0442\u043A\u0443"),A0=e("span",null,".",-1),E0=e("span",null,".",-1),C0=e("span",null,".",-1),D0=[f0,A0,E0,C0],w0=Ae('<svg width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><animateTransform attributeName="transform" dur="1s" type="translate" values="0 0; 1 -1; 1 1; 0 0;" repeatCount="indefinite" begin="0.1"></animateTransform></svg>',1),$0={key:1},k0={key:1},y0={class:"order-modal-action"},O0=Ae('<svg class="order-list-buttons-item-img" width="31" height="29" viewBox="0 0 31 29" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="stroke" x="1" y="1" width="19.75" height="22.8571" rx="2" stroke="#A5A7A9" stroke-width="2"></rect><circle cx="21.2322" cy="20.1964" r="8.80357" fill="#53565B"></circle><circle class="stroke" cx="21.2322" cy="20.1964" r="7.80357" stroke="#A5A7A9" stroke-width="2"></circle><rect class="fill" x="19.6786" y="15.5358" width="1.7" height="6.21429" rx="0.85" fill="#A5A7A9"></rect><rect class="fill" x="24.8571" y="20.1" width="1.7" height="5.17857" rx="0.85" transform="rotate(90 24.8571 20.1)" fill="#A5A7A9"></rect><rect class="fill" x="17.6071" y="5.17859" width="1.7" height="13.4643" rx="0.85" transform="rotate(90 17.6071 5.17859)" fill="#A5A7A9"></rect><rect class="fill" x="11.3929" y="13" width="1.7" height="7.25" rx="0.85" transform="rotate(90 11.3929 13)" fill="#A5A7A9"></rect><rect class="fill" x="14.5" y="9" width="1.7" height="10.3571" rx="0.85" transform="rotate(90 14.5 9)" fill="#A5A7A9"></rect></svg><div class="order-modal-action-btn-text">\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u043A\u0430\u0437\u043E\u0432</div>',2),x0=[O0],R0=Ae('<svg class="order-list-buttons-item-img" width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill" x="0.0802612" y="2.04846" width="4.25606" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="3.9931" y="2" width="17.8806" height="2.07613" rx="1.03806" transform="rotate(69.6255 3.9931 2)" fill="#A5A7A9"></rect><rect class="fill" x="8.38477" y="6.20068" width="16.609" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="24" y="3" width="8" height="2" rx="1" fill="#A5A7A9"></rect><rect class="fill" x="29" width="8" height="2" rx="1" transform="rotate(90 29 0)" fill="#A5A7A9"></rect><rect class="fill" x="21.0491" y="19.1241" width="13.0871" height="2.07613" rx="1.03806" transform="rotate(-80.9286 21.0491 19.1241)" fill="#A5A7A9"></rect><rect class="fill" x="7.34668" y="17.6194" width="15.8824" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><rect class="fill" x="6.30865" y="21.7716" width="9.34257" height="2.07613" rx="1.03806" fill="#A5A7A9"></rect><path class="stroke" d="M8.38477 18.6575C6.82768 18.6575 5.78961 18.9374 5.78961 20.7336C5.78961 22.8097 7.34671 22.8097 7.86574 22.8097" stroke="#A5A7A9" stroke-width="2"></path><circle class="stroke" cx="9.42285" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle><circle class="stroke" cx="20.8415" cy="24.8858" r="2.11419" stroke="#A5A7A9" stroke-width="2"></circle></svg><div class="order-modal-action-btn-text">\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437</div>',2),b0=[R0],T0=ee({__name:"OrderModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(a,{emit:_}){const t=ce(),d=fe(),E=n(!1),c=n(null);Ye(c,()=>{E.value=!0,setTimeout(()=>{E.value=!1},500)});const C=()=>{t.commit(A.CLEAN_ORDER),t.commit(A.CLEAN_ORDER_ERROR),t.commit(A.CLEAN_ADD_ORDER),_("update:modelValue",!1)},x=()=>{t.commit(A.CLEAN_ORDER),t.commit(A.CLEAN_ORDER_ERROR),t.commit(A.CLEAN_ADD_ORDER),_("update:modelValue",!1)},R=()=>{t.commit(A.CLEAN_ORDER),t.commit(A.CLEAN_ADD_ORDER),_("update:modelValue",!1),d.push({name:"Orders"})},b=k(()=>t.getters.getOrderError),D=k(()=>t.getters.getOrderErrorMsg),v=k(()=>t.getters.isOrderAddNew),y=k(()=>t.getters.getOrderAddNew),T=k(()=>t.getters.getOrder);return(H,S)=>a.modelValue?(s(),l("div",s0,[e("div",{class:N(E.value?"order-modal-dialog shake":"order-modal-dialog"),ref_key:"target_modal",ref:c},[e("div",u0,[e("div",o0,[e("h3",l0,h(r(T).edit?"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430 \u2116"+r(T).id:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430"),1),r(v)?(s(),q(X,{key:0,onOnClick:S[0]||(S[0]=L=>C())})):O("",!0)]),e("div",a0,[r(b)?(s(),l("div",k0,h(r(D)),1)):(s(),l("div",r0,[r(v)?(s(),l("div",$0,h(r(y).message),1)):(s(),l("div",i0,[r(T).edit?(s(),l("span",p0,D0)):(s(),l("span",d0,g0)),w0]))]))]),e("div",y0,[r(b)?(s(),q(ke,{key:0,name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437",onOnClick:S[1]||(S[1]=L=>C())})):O("",!0),r(b)?(s(),q(ke,{key:1,name:"\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043A\u0430\u0437",onOnClick:S[2]||(S[2]=L=>x())})):O("",!0),r(v)?(s(),l("button",{key:2,class:"order-modal-action-btn",onClick:S[3]||(S[3]=L=>R())},x0)):O("",!0),r(v)?(s(),l("button",{key:3,class:"order-modal-action-btn",onClick:S[4]||(S[4]=L=>x())},b0)):O("",!0)])])],2)])):O("",!0)}}),S0={class:"content-elem"},V0={key:0,class:"product-slider-wrap"},P0={class:"product-slider-main"},B0=["src"],L0=ee({__name:"ProductSliderSmallCard",props:{data:{type:Array}},setup(a){var D;const _=a,t=n([]),d=ce(),E=k({get:()=>d.getters.getLoader,set:v=>d.commit(xe.SET_LOADER,v)}),c=n(!1);(D=_.data)==null||D.forEach((v,y)=>t.value.push({id:y,src:v})),je(()=>{var v;t.value=[],(v=_.data)==null||v.forEach((y,T)=>t.value.push({id:T,src:y}))});const C=()=>{const v=t.value.shift();t.value=t.value.concat(v)},x=()=>{const v=t.value.pop();t.value=[v].concat(t.value)},R=k(()=>d.getters.getProduct),b=k(()=>d.getters.getProductProtect);return(v,y)=>(s(),l("div",S0,[r(E)?O("",!0):(s(),l("div",V0,[e("div",P0,[e("div",{class:"product-slider-arrow prev",onClick:x}),m(We,{name:"product-slider-horisont-trans",class:"product-slider-horisont",tag:"div"},{default:ie(()=>[(s(!0),l(G,null,J(t.value,T=>(s(),l("div",{class:"product-slider-horisont-slide",key:T.id},[T.src?(s(),l("img",{key:0,src:T.src,alt:"",onClick:y[0]||(y[0]=H=>c.value=!0)},null,8,B0)):O("",!0)]))),128))]),_:1}),e("div",{class:"product-slider-arrow next",onClick:C})])])),Je(v.$slots,"product-info"),m(r(Ie),{data:r(R),protect:r(b)},null,8,["data","protect"]),m(r(ut),{modelValue:c.value,"onUpdate:modelValue":y[1]||(y[1]=T=>c.value=T),data:a.data},null,8,["modelValue","data"])]))}}),I0={class:"top-line product-page"},M0={key:0,class:"order-info"},F0=V(" \u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043E\u0432\u0430\u0440 \u0432 "),N0=V("\u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0435"),U0=V(" \u0438\u043B\u0438 \u0432\u043E\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435\u0441\u044C "),q0=V("\u043F\u043E\u0438\u0441\u043A\u043E\u043C"),H0=V(". "),z0={key:1},Q0={class:"content-wrap content-product-order-wrap"},Z0={class:"content-wrap-elem"},K0={class:"content-wrap-elem"},G0={key:3,class:"content-heading-wrap product-heading-wrap"},Y0={key:0,class:"content-heading-wrap-elem"},j0=e("div",{class:"order-info"},"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438 \u043A \u0437\u0430\u043A\u0430\u0437\u0443 \u0438 \u0442\u043E\u0433\u0434\u0430 \u043E\u043D \u0431\u0443\u0434\u0435\u0442 \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D",-1),W0=[j0],J0={class:"content-wrap content-order-wrap"},X0={class:"content-wrap-elem"},eo={class:"content-wrap-elem"},co=ee({__name:"OrderPage",props:{article:{type:String}},setup(a){const _=a,t=ce(),d=fe(),E=k({get:()=>t.getters.getLoader,set:I=>t.commit(xe.SET_LOADER,I)}),c=n(""),C=n(""),x=n(!1),R=n(""),b=n(!1),D=n(!1),v=n(!1),y=n([]),T=()=>{let I={article:t.getters.getProduct.ARTICLE,guid:t.getters.getProduct.UID,product:t.getters.getProduct,characteristics:y.value};t.dispatch(Y.ADD_POSITION,I)},H=()=>{c.value==""?(x.value=!0,setTimeout(()=>{x.value=!1},5e3),R.value="\u0414\u043B\u044F \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043E\u043D\u0442\u0440\u0430\u0433\u0435\u043D\u0442\u0430"):(b.value=!0,t.commit(A.ADD_ORDER_PARTNER_ID,c.value),setTimeout(()=>{t.dispatch(Y.ADD_ORDER,t.getters.getOrderToAdd).catch(()=>{b.value=!1,x.value=!0,setTimeout(()=>{x.value=!1},5e3),R.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3))},S=()=>{b.value=!0,t.commit(A.ADD_ORDER_PARTNER_ID,c.value),setTimeout(()=>{t.dispatch(Y.EDIT_ORDER_ACTION,t.getters.getOrderToAdd).catch(()=>{b.value=!1,x.value=!0,setTimeout(()=>{x.value=!1},5e3),R.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})},3e3)},L=()=>{E.value=!0,t.dispatch(he.GET_PRODUCT_BY_ID,C.value).then(()=>{C.value=t.getters.getProduct.ID}).finally(()=>{E.value=!1})},j=async()=>{E.value=!0,t.commit(we.SET_KP_OFFER_POSITION,t.getters.getOrder.position),t.commit(we.SET_KP_STEP,2),E.value=!1,await d.push("/kp")};re(()=>_.article,I=>{I&&(E.value=!0,t.dispatch(he.SEARCH_PRODUCT,_.article).then(()=>{t.getters.getProduct.ID?C.value=t.getters.getProduct.ID:d.push({name:"Order"})}).finally(()=>{E.value=!1}))}),re(c,()=>{t.getters.getOrder.edit||t.commit(A.ADD_ORDER_PARTNER_ID,c.value),t.commit(A.CALC_ORDER)}),ge(()=>{t.commit(A.ADD_ORDER_PARTNER_ID,c.value),t.getters.isCompanysLoad||t.dispatch(Xe.GET_COMPANYS).finally(()=>{setTimeout(()=>{c.value=t.getters.getCompanys.length==0?"":t.getters.getCompanys[0].uid},500)}),C.value=t.getters.getProduct.ID,_.article&&(E.value=!0,t.dispatch(he.SEARCH_PRODUCT,_.article).then(()=>{t.getters.getProduct.ID?C.value=t.getters.getProduct.ID:d.push({name:"Order"})}).finally(()=>{E.value=!1}))});const Q=k(()=>{const I=t.getters.getProduct.STATUS;return I=="Outlet"||I=="Discount"||I=="Activity"?0:t.getters.getCompanyDiscount(c.value,t.getters.getProductOffersORGGUID)}),z=k(()=>t.getters.isProduct),F=k(()=>t.getters.getCompanysList),B=k(()=>t.getters.getProductOffers),Z=k(()=>t.getters.getProduct),te=k(()=>t.getters.getProductFound),me=k(()=>t.getters.getProductImages),se=k(()=>t.getters.isOrder),ue=k(()=>t.getters.getOrder),de=k(()=>t.getters.getOrderDraftCount);return(I,g)=>{const ne=pe("router-link");return s(),l("div",null,[e("div",I0,[m(Be,{data:r(F),modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=$=>c.value=$)},null,8,["data","modelValue"]),m(Pe),m(Ve)]),m(Le,{toDraft:"",draft:r(de),onOnClick:g[1]||(g[1]=$=>D.value=!0)},null,8,["draft"]),r(z)?(s(),l("div",z0,[m(et,{to:"order",show:v.value,"onUpdate:show":g[2]||(g[2]=$=>v.value=$)},null,8,["show"]),m(Me,{title:String(r(Z).NAME),price:String(r(Z).PRICE_OPT),discount:r(Q),status:String(r(Z).STATUS),onShowSearch:g[3]||(g[3]=$=>v.value=!v.value)},null,8,["title","price","discount","status"]),e("div",Q0,[e("div",Z0,[m(tt,{data:r(te),cardType:"order",modelValue:C.value,"onUpdate:modelValue":g[4]||(g[4]=$=>C.value=$),onOnClick:g[5]||(g[5]=$=>L()),onShowSearch:g[6]||(g[6]=$=>v.value=!v.value)},null,8,["data","modelValue"])]),e("div",K0,[m(Fe,{data:r(B),discount:r(Q),modelValue:y.value,"onUpdate:modelValue":g[7]||(g[7]=$=>y.value=$),onOnClick:g[8]||(g[8]=$=>T())},null,8,["data","discount","modelValue"])])])])):(s(),l("div",M0,[F0,m(ne,{to:"/catalog/catalog",class:"order-info-link"},{default:ie(()=>[N0]),_:1}),U0,m(ne,{to:"/product",class:"order-info-link"},{default:ie(()=>[q0]),_:1}),H0])),r(se)?(s(),q(Ju,{key:2,discount:r(Q),data:r(ue)},null,8,["discount","data"])):(s(),l("div",G0,[r(z)?(s(),l("div",Y0,W0)):O("",!0)])),e("div",J0,[e("div",X0,[r(se)?(s(),q(bu,{key:0,data:r(ue),companys:r(F),modelValue:c.value,"onUpdate:modelValue":g[9]||(g[9]=$=>c.value=$),onOnClickAdd:H,onOnClickEdit:S,onGoToKP:j},null,8,["data","companys","modelValue"])):O("",!0)]),e("div",eo,[r(z)?(s(),q(L0,{key:0,data:r(me)},null,8,["data"])):O("",!0)])]),m(T0,{modelValue:b.value,"onUpdate:modelValue":g[10]||(g[10]=$=>b.value=$)},null,8,["modelValue"]),m(Oe,{modelValue:x.value,"onUpdate:modelValue":g[11]||(g[11]=$=>x.value=$),message:R.value},null,8,["modelValue","message"]),m(st,{modelValue:D.value,"onUpdate:modelValue":g[12]||(g[12]=$=>D.value=$)},null,8,["modelValue"])])}}});export{co as default};
