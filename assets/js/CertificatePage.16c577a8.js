import{_ as P,f as V,u as B,h as R,g as n,ai as v,aj as U,i as k,D as M,o as y,c as C,b as o,m as c,q as T,x as a,ab as I,al as F,a2 as b,b7 as H,j as O,Q as j,aa as N,K as A}from"./index.09a56ea9.js";import{f as $}from"./ProductSliderSmallCard.45465e8a.js";const q={class:"top-line product-page"},z={key:0},K={class:"content-heading-wrap proudct-heading-wrap"},G={class:"content-heading-price"},Q=["innerHTML"],W={class:"content-heading-wrap-elem",style:{width:"23.76%"}},J={class:"content-heading-price"},X=["innerHTML"],Y={style:"margin: 0 auto 0 auto; display: table;"},Z=V({__name:"CertificatePage",props:{article:{type:String}},setup(g){const r=g,l=B(),d=R({get:()=>l.getters.getLoader,set:u=>l.commit(j.SET_LOADER,u)}),m=n(""),_=n("\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0430");let s=n(!1),i=n([]),E=n(!1),f=n("\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B \u0430\u0440\u0445\u0438\u0432\u043E\u043C "),p=n(v.Active),x=U.Download,h=n(!1);const w=async()=>{d.value=!0,await l.dispatch(N.SEARCH_PRODUCT,r.article),_.value=l.getters.getProduct.NAME,await S(l.getters.getProduct.UID),d.value=!1};k(()=>{r.article&&w()}),M(()=>r.article,u=>{u&&w()});const S=async u=>{i.value=[],await A.get("/product/"+u+"/certificates").then(e=>{var t;(t=e.data)==null||t.forEach(L=>{i.value.push(L)})}).catch(e=>{console.log("error"),console.log(e)}).finally(function(){E.value=!0,d.value=!1})},D=async()=>{p.value=v.InProgress,f.value="\u0410\u0440\u0445\u0438\u0432 \u0441\u043A\u0430\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044F, \u043F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435",await A.get("/product/"+l.getters.getProduct.UID+"/certificates/download",{responseType:"blob",transformRequest:(u,e)=>{e==null||delete e.common}}).then(u=>{const e=window.URL.createObjectURL(new Blob([u.data])),t=document.createElement("a");t.href=e,t.setAttribute("download","cert.zip"),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(e),h.value=!h.value}).catch(u=>{console.log("error"),console.log(u)}).finally(function(){p.value=v.Active,f.value="\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u044B \u0430\u0440\u0445\u0438\u0432\u043E\u043C "})};return(u,e)=>(y(),C("div",null,[o("div",q,[e[4]||(e[4]=o("div",{class:"top-line-card-wrap header-lable"},"\u041F\u043E\u0438\u0441\u043A \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0432",-1)),c(T)]),c(a(I),{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),to:"certificate"},null,8,["modelValue"]),a(i).length>0?(y(),C("div",z,[o("div",K,[o("div",G,[o("div",{class:"content-heading-price-text",innerHTML:_.value},null,8,Q)]),o("div",W,[o("div",J,[e[5]||(e[5]=o("div",{class:"content-heading-price-text"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B:",-1)),o("div",{class:"content-heading-price-value",innerHTML:g.article},null,8,X)])]),o("div",Y,[c(a(F),{style:{display:"flex",margin:"0px auto"},text:a(f),icon:a(x),state:a(p),onClick:e[1]||(e[1]=t=>D())},null,8,["text","icon","state"])])]),c(a(H),{data:a(i),onOnClick:e[2]||(e[2]=t=>b(s)?s.value=!0:s=!0),style:{width:"50%"}},null,8,["data"]),c(a($),{modelValue:a(s),"onUpdate:modelValue":e[3]||(e[3]=t=>b(s)?s.value=t:s=t),data:a(i)},null,8,["modelValue","data"])])):O("",!0)]))}});var ue=P(Z,[["__scopeId","data-v-3ead0852"]]);export{ue as default};
