import{f as fe,g as d,o as i,c as m,b as u,m as v,x as r,aU as X,am as Q,l as x,y as D,u as Te,h as K,aT as q,aV as Ye,aW as Fu,D as ge,aX as $u,j as y,d as N,aY as qe,aZ as me,aF as Iu,aw as _e,a_ as Ru,a$ as Pu,ae as Su,b0 as eu,b1 as Tu,b2 as Z,a as Be,i as Uu,aK as uu,V as be,t as oe,b3 as Xe,aG as Ve,b4 as Ze,U as pe,aS as We,aH as je,w as L,F as re,e as Ae,T as Je,b5 as U,k as lu,ak as tu,K as Qu,an as ee,b6 as Nu,p as Ku,av as Mu,q as zu,L as Hu}from"./index.09a56ea9.js";import{N as Gu}from"./Notification.b98f3bf7.js";import{_ as Yu}from"./CompanyBarTop.a3a46566.js";const qu={class:"kp-step-body step1"},Xu={class:"kp-step-body-elem"},Zu=["flow"],Wu={class:"kp-step-body-elem"},ju={class:"kp-step-actions"},Ju=fe({__name:"KpStep1",props:{modelValue:{type:String,required:!0},active:{type:Boolean,default:!1},isDraft:{type:Boolean,default:!1}},emits:["update:modelValue","next"],setup(A,{emit:c}){const I=A,R=c,p=d(!0),s=d(!1),B=d(!1),F=P=>{P==X.ORDER?(p.value=!0,s.value=!1,B.value=!1):P==X.DRAFT&&I.isDraft?(p.value=!1,s.value=!0,B.value=!1):(p.value=!1,s.value=!1,B.value=!0),R("update:modelValue",P)};return(P,n)=>(i(),m("div",{class:D(["kp-step",{active:A.active}])},[n[10]||(n[10]=u("div",{class:"kp-step-title"},"\u0421\u043E\u0431\u0440\u0430\u0442\u044C \u041A\u041F \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0438\u0438",-1)),u("div",qu,[u("div",Xu,[v(Q,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=a=>p.value=a),onOnClick:n[1]||(n[1]=a=>F(r(X).ORDER))},null,8,["modelValue"]),n[7]||(n[7]=u("div",{class:"kp-step-body-elem-text"},[x(" \u0417\u0430\u043A\u0430\u0437\u0430 "),u("div",{class:"kp-step-body-elem-text-sub"}," \u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0435 \u0443\u0436\u0435 \u0438\u043C\u0435\u044E\u0449\u0435\u0433\u043E\u0441\u044F \u0437\u0430\u043A\u0430\u0437\u0430. ")],-1))]),u("div",{class:"kp-step-body-elem",tooltip:"\u041E\u0442\u0441\u0443\u0442\u0432\u0443\u044E\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u044B\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438",flow:A.isDraft?"":"left"},[v(Q,{modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=a=>s.value=a),onOnClick:n[3]||(n[3]=a=>F(r(X).DRAFT)),disabled:!A.isDraft},null,8,["modelValue","disabled"]),u("div",{class:D(["kp-step-body-elem-text",{disablsed:!A.isDraft}])},[...n[8]||(n[8]=[x(" \u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430 ",-1),u("div",{class:"kp-step-body-elem-text-sub"}," \u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u043E\u0433\u043E \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430. ",-1)])],2)],8,Zu),u("div",Wu,[v(Q,{modelValue:B.value,"onUpdate:modelValue":n[4]||(n[4]=a=>B.value=a),onOnClick:n[5]||(n[5]=a=>F(r(X).CATALOG_POS))},null,8,["modelValue"]),n[9]||(n[9]=u("div",{class:"kp-step-body-elem-text"},[x(" \u041F\u043E\u0437\u0438\u0446\u0438\u0439 \u0438\u0437 \u043A\u0430\u0442\u043E\u043B\u043E\u0433\u0430 "),u("div",{class:"kp-step-body-elem-text-sub"}," \u041A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0438\u0437 \u043F\u043E\u0437\u0438\u0446\u0438\u0439 \u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0430 ")],-1))])]),u("div",ju,[u("div",{class:"kp-step-actions-link right",onClick:n[6]||(n[6]=a=>P.$emit("next"))},"\u0414\u0430\u043B\u0435\u0435")])],2))}}),_u={key:0,class:"kp-step-title"},e0={key:1,class:"kp-step-title"},u0={class:"kp-step-body"},l0={key:2,class:"kp-step-body-input"},t0={class:"kp-step-body-row"},a0={class:"kp-step-body-row"},o0={class:"kp-step-body-row"},s0=["flow"],n0={key:3},i0={class:"kp-step-actions"},d0=fe({__name:"KpStep2",props:{active:{type:Boolean,default:!1},type:{type:String,required:!0},kp:{type:Object,required:!0}},emits:["next","prev","update:kp"],setup(A,{emit:c}){const I=c,R=A,p=Te(),s=d(R.kp),B=d(-1),F=K(()=>p.getters.getOrdersInputData),P={id:-1,name:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043A\u0430\u0437"},n=d(-1),a=K(()=>p.getters.getOrderDraftsInputData),G={id:-1,name:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A"},M=K(()=>X),O=d(!1),C=d(!1),g=d(!1),E=d(""),b=d(!1),V=d(new Date().toLocaleString("ru").substring(0,10)),$=d(q.cloneDeep(Ye));$.value.position=q.cloneDeep(R.kp.offer.position),$.value=Fu($.value);const ce=K(()=>p.getters.getCompanysListInput().filter(se=>se.id!==""));ge(B,()=>{B.value!=-1&&(O.value=!0,p.dispatch(Su.GET_ORDER_DETAIL,B.value).finally(()=>{$.value=q.cloneDeep(p.getters.getOrderDetail),O.value=!1}))}),ge(n,()=>{n.value!=-1&&($.value=q.cloneDeep(p.getters.getOrderDrafts.find(se=>se.id==n.value)))}),$u(()=>{R.active&&(s.value.offer.position=q.cloneDeep($.value.position),I("update:kp",s.value))});const S=()=>{B.value=-1,n.value=-1,s.value=q.cloneDeep(eu),$.value=q.cloneDeep(Ye),I("update:kp",s.value),I("prev")},Oe=()=>{s.value.offer.date=new Date(Tu(V.value)).getTime(),s.value.offer.position=q.cloneDeep($.value.position),I("next"),I("update:kp",s.value)},he=()=>{E.value.length>=2&&(s.value.offer.customer="",g.value=!0,C.value=!1,b.value=!1,p.dispatch(Z.GET_ORG_BY_INN,E.value).then(()=>{g.value=!1,s.value.offer.customer=p.getters.getKPOrgName,E.value=""}).catch(()=>{C.value=!0,setTimeout(()=>{C.value=!1},1e4),g.value=!1,E.value=""}))};return(se,f)=>(i(),m("div",{class:D(["kp-step",{active:A.active}])},[A.type===M.value.ORDER?(i(),m("div",_u,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043A\u0430\u0437")):y("",!0),A.type===M.value.DRAFT?(i(),m("div",e0,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")):y("",!0),u("div",u0,[A.type===M.value.ORDER?(i(),N(qe,{key:0,modelValue:B.value,"onUpdate:modelValue":f[0]||(f[0]=w=>B.value=w),"select-input-data":F.value,"first-element":B.value===-1?P:null},null,8,["modelValue","select-input-data","first-element"])):y("",!0),A.type===M.value.DRAFT?(i(),N(qe,{key:1,modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=w=>n.value=w),"select-input-data":a.value,"first-element":n.value===-1?G:null},null,8,["modelValue","select-input-data","first-element"])):y("",!0),B.value!==-1||n.value!==-1||A.type===r(X).CATALOG_POS?(i(),m("div",l0,[u("div",t0,[v(me,{modelValue:s.value.offer.n,"onUpdate:modelValue":f[2]||(f[2]=w=>s.value.offer.n=w),label:"\u041D\u043E\u043C\u0435\u0440 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430",style:{width:"100%"}},null,8,["modelValue"]),v(Iu,{modelValue:V.value,"onUpdate:modelValue":f[3]||(f[3]=w=>V.value=w)},null,8,["modelValue"])]),u("div",a0,[v(me,{modelValue:s.value.offer.executor,"onUpdate:modelValue":f[4]||(f[4]=w=>s.value.offer.executor=w),label:"\u041F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A",onInput:f[5]||(f[5]=w=>s.value.offer.executorUID=""),style:{width:"100%"}},null,8,["modelValue"]),v(_e,{data:ce.value,modelValue:s.value.offer.executorUID,"onUpdate:modelValue":f[6]||(f[6]=w=>s.value.offer.executorUID=w),onOnInput:f[7]||(f[7]=w=>{var j;return s.value.offer.executor=((j=ce.value.find(ue=>ue.id===s.value.offer.executorUID))==null?void 0:j.name)||""})},null,8,["data","modelValue"])]),u("div",o0,[v(me,{modelValue:s.value.offer.customer,"onUpdate:modelValue":f[8]||(f[8]=w=>s.value.offer.customer=w),label:"\u041F\u043E\u043A\u0443\u043F\u0430\u0442\u0435\u043B\u044C",error:C.value,loading:g.value,style:{width:"100%"}},null,8,["modelValue","error","loading"]),u("div",{class:"kp-step-body-button",tooltip:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u0418\u041D\u041D",flow:b.value?"":"up",onClickCapture:f[12]||(f[12]=w=>b.value=!0)},[v(Ru,{modelValue:E.value,"onUpdate:modelValue":f[9]||(f[9]=w=>E.value=w),show:b.value,"onUpdate:show":f[10]||(f[10]=w=>b.value=w),"show-ok":"",onOnOk:f[11]||(f[11]=w=>he()),label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u041D\u041D",style:{left:"-125px"}},null,8,["modelValue","show"]),f[16]||(f[16]=u("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("rect",{width:"2.17029",height:"21.7029",rx:"1.08514",transform:"matrix(0.999975 -0.00708126 -0.00708126 0.999975 11.097 1.26186)",fill:"#A5A7A9"}),u("rect",{width:"2.17029",height:"21.7029",rx:"1.08514",transform:"matrix(0.00708126 -0.999975 -0.999975 0.00708126 22.7798 12.9446)",fill:"#A5A7A9"})],-1))],40,s0)])])):y("",!0),B.value!==-1||n.value!==-1||A.type===r(X).CATALOG_POS?(i(),m("div",n0,[O.value?(i(),N(Be,{key:0,center:""})):A.active?(i(),N(Pu,{key:1,order:$.value,"onUpdate:order":f[13]||(f[13]=w=>$.value=w),"is-kp":""},null,8,["order"])):y("",!0)])):y("",!0)]),u("div",i0,[u("div",{class:"kp-step-actions-link",onClick:f[14]||(f[14]=w=>S())},"\u041D\u0430\u0437\u0430\u0434"),u("div",{class:"kp-step-actions-link right",onClick:f[15]||(f[15]=w=>Oe())},"\u0414\u0430\u043B\u0435\u0435")])],2))}}),v0={xmlns:"http://www.w3.org/2000/svg",width:"34",height:"42",fill:"none"};function r0(A,c){return i(),m("svg",v0,[...c[0]||(c[0]=[u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M28.007.81 5.98.8C3.137.799.8 3.137.8 5.98v30.541c0 2.843 2.337 5.18 5.18 5.18h22.035c2.843 0 5.18-2.337 5.18-5.18l.01-30.572c0-2.817-2.3-5.139-5.198-5.14Zm3.114 35.667c0 1.744-1.368 3.15-3.105 3.15H5.98a3.1 3.1 0 0 1-3.105-3.106V5.936A3.102 3.102 0 0 1 5.98 2.83L28 2.808c1.786-.001 3.103 1.377 3.104 3.128z"},null,-1),u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M6.94 11.337h2.71c.544 0 1.037-.436 1.037-1.038A1.01 1.01 0 0 0 9.65 9.262H6.94a1.037 1.037 0 1 0 0 2.075zM6.93 16.878h2.713c.544 0 1.037-.436 1.037-1.038a1.01 1.01 0 0 0-1.037-1.037H6.93a1.037 1.037 0 1 0 0 2.075zM23.871 11.36h2.71c.545 0 1.038-.436 1.038-1.038a1.01 1.01 0 0 0-1.037-1.037h-2.71a1.037 1.037 0 1 0 0 2.074zM23.894 16.899h2.71c.544 0 1.038-.436 1.038-1.038a1.01 1.01 0 0 0-1.038-1.037h-2.71a1.037 1.037 0 1 0 0 2.075zM5.903 20.957c0 .544.435 1.037 1.037 1.037h19.655a1.037 1.037 0 1 0 0-2.075H6.94c-.544 0-1.037.436-1.037 1.038zM5.884 25.873c0 .544.435 1.038 1.037 1.038h19.656a1.037 1.037 0 1 0 0-2.075H6.92c-.544 0-1.037.435-1.037 1.037zM5.875 30.978c0 .544.435 1.037 1.037 1.037h19.656a1.037 1.037 0 1 0 0-2.075H6.912c-.544 0-1.037.436-1.037 1.038z"},null,-1),u("path",{fill:"#a5a7a9",d:"M12.646 17.067q-.48 0-.814-.343-.336-.343-.336-.806v-8.43q0-.462.336-.806.335-.343.814-.343h8.429q.479 0 .814.343.335.344.335.807v8.429q0 .463-.335.806t-.814.343zm0-1.15h8.429V7.49h-8.43zm.766-1.149h6.897l-2.3-3.065-1.724 2.3-1.149-1.533zm-.766 1.15v-8.43Z"},null,-1)])])}var p0={render:r0};const m0={xmlns:"http://www.w3.org/2000/svg",width:"34",height:"42",fill:"none"};function g0(A,c){return i(),m("svg",m0,[...c[0]||(c[0]=[u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M28.007.81 5.98.8C3.137.799.8 3.137.8 5.98v30.541c0 2.843 2.337 5.18 5.18 5.18h22.035c2.843 0 5.18-2.337 5.18-5.18l.01-30.572c0-2.817-2.3-5.139-5.198-5.14Zm3.114 35.667c0 1.744-1.368 3.15-3.105 3.15H5.98a3.1 3.1 0 0 1-3.105-3.106V5.936A3.102 3.102 0 0 1 5.98 2.83L28 2.808c1.786-.001 3.103 1.377 3.104 3.128z"},null,-1),u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M19.232 11.337h7.36c.544 0 1.037-.436 1.037-1.038a1.01 1.01 0 0 0-1.037-1.037h-7.36a1.037 1.037 0 1 0 0 2.075zM19.223 16.878h7.36c.544 0 1.037-.436 1.037-1.038a1.01 1.01 0 0 0-1.037-1.037h-7.36a1.037 1.037 0 1 0 0 2.075zM5.903 20.957c0 .544.435 1.037 1.037 1.037h19.655a1.037 1.037 0 1 0 0-2.075H6.94c-.544 0-1.037.436-1.037 1.038zM5.884 25.873c0 .544.435 1.038 1.037 1.038h19.656a1.037 1.037 0 1 0 0-2.075H6.92c-.544 0-1.037.435-1.037 1.037zM5.875 30.978c0 .544.435 1.037 1.037 1.037h19.656a1.037 1.037 0 1 0 0-2.075H6.912c-.544 0-1.037.436-1.037 1.038z"},null,-1),u("path",{fill:"#a5a7a9",d:"M6.86 17.067q-.48 0-.814-.343-.336-.343-.336-.806v-8.43q0-.462.336-.806.334-.343.813-.343h8.43q.479 0 .813.343.336.344.336.807v8.429q0 .463-.336.806-.334.343-.813.343zm0-1.15h8.429V7.49h-8.43Zm.766-1.149h6.896l-2.299-3.065-1.724 2.3-1.15-1.533zm-.767 1.15v-8.43Z"},null,-1)])])}var f0={render:g0};const c0={xmlns:"http://www.w3.org/2000/svg",width:"34",height:"42",fill:"none"};function y0(A,c){return i(),m("svg",c0,[...c[0]||(c[0]=[u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M28.007.81 5.98.8C3.137.799.8 3.137.8 5.98v30.541c0 2.843 2.337 5.18 5.18 5.18h22.035c2.843 0 5.18-2.337 5.18-5.18l.01-30.572c0-2.817-2.3-5.139-5.198-5.14Zm3.114 35.667c0 1.744-1.368 3.15-3.105 3.15H5.98a3.1 3.1 0 0 1-3.105-3.106V5.936A3.102 3.102 0 0 1 5.98 2.83L28 2.808c1.786-.001 3.103 1.377 3.104 3.128z"},null,-1),u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M6.94 11.337h7.36c.544 0 1.037-.436 1.037-1.038a1.01 1.01 0 0 0-1.038-1.037H6.94a1.037 1.037 0 1 0 0 2.075zM6.93 16.878h7.36c.545 0 1.038-.436 1.038-1.038a1.01 1.01 0 0 0-1.037-1.037H6.93a1.037 1.037 0 1 0 0 2.075zM5.903 20.957c0 .544.435 1.037 1.037 1.037h19.655a1.037 1.037 0 1 0 0-2.075H6.94c-.544 0-1.037.436-1.037 1.038zM5.884 25.873c0 .544.435 1.038 1.037 1.038h19.656a1.037 1.037 0 1 0 0-2.075H6.92c-.544 0-1.037.435-1.037 1.037zM5.875 30.978c0 .544.435 1.037 1.037 1.037h19.656a1.037 1.037 0 1 0 0-2.075H6.912c-.544 0-1.037.436-1.037 1.038z"},null,-1),u("path",{fill:"#a5a7a9",d:"M18.27 17.067q-.48 0-.814-.343-.336-.343-.336-.806v-8.43q0-.462.336-.806.335-.343.813-.343h8.43q.479 0 .814.343.335.344.335.807v8.429q0 .463-.335.806t-.814.343zm0-1.15h8.429V7.49h-8.43zm.766-1.149h6.896l-2.298-3.065-1.725 2.3-1.149-1.533zm-.767 1.15v-8.43Z"},null,-1)])])}var k0={render:y0};const E0={class:"kp-step-body"},C0={class:"kp-step-body-input"},w0={class:"kp-step-body-row"},x0={key:1},D0={class:"kp-step-body-row"},b0={key:1,style:"margin-left: 10px"},V0={key:2,class:"kp-step-body-elem-text-sub",style:"margin-left: 10px"},A0={class:"kp-step-body-row"},B0={style:"margin-left: 30px"},O0={class:"kp-step-body-row"},h0={class:"kp-step-body-row"},L0={key:0,class:"kp-step-body-add-file-label",for:"file-upload"},F0={key:1,class:"kp-step-body-elem-header-align-wrap"},$0={style:"text-align: center;"},I0={key:1,class:"kp-step-body-column",style:"justify-content: center"},R0={class:"product-slider-wrap"},P0={class:"product-slider-main"},S0=["src"],T0={style:"text-align: center; margin-top: -50px;"},U0={class:"kp-step-body-row"},Q0={key:0,class:"kp-step-body-add-file-label",for:"banner-upload"},N0={key:1,style:{color:"#A5A7A9","padding-left":"95px",opacity:"0.7"}},K0={style:"text-align: center;"},M0={key:1,class:"kp-step-body-column",style:"justify-content: center"},z0={class:"product-slider-wrap"},H0={class:"product-slider-main"},G0=["src"],Y0={key:2,style:"text-align: center; margin-top: -50px;"},q0={class:"order-comment-form show"},X0={class:"kp-step-body-row",style:"justify-content: flex-end"},Z0={class:"kp-step-body-row",style:"justify-content: flex-end; align-items: baseline;"},W0={style:"display: flex; flex-direction: column; margin-left: 20px; margin-right: 148px;"},j0={style:"display: flex; align-items: center;"},J0={style:"display: flex; align-items: center; padding-top: 12px;"},_0={class:"content-heading-wrap kp",style:{display:"block"}},el={key:0,style:"display: flex; align-items: center; max-width: 580px; padding: 10px 5px;"},ul={class:"select-input-container"},ll=["onClick"],tl={class:D("kp-canvas-controller")},al={style:"display: grid;"},ol={style:"display: flex;"},sl={style:{display:"flex","align-items":"center"}},nl={style:"display: flex;"},il={key:1,class:"kp-product-image-container"},dl=["onClick","src"],vl={class:"kp-step-actions"},Pe=100,Se=100,rl=fe({__name:"KpStep3",props:{active:{type:Boolean,default:!1},kp:{type:Object,require:!0}},emits:["next","prev","update:kp"],setup(A,{emit:c}){const I=A,R=c,p=Te(),s=d(!1),B=d(!1),F=d(!1),P=d(),n=d(),a=d(),G=d(),M=d(),O=d(),C=d(),g=d(),E=d(),b=d(Pe),V=d(Se),$=d(!1),ce=t=>t.replace(/&quot;/gi,'"'),S=d("10%"),Oe=t=>{console.log("click",t)},he=t=>{console.log("out",t.target.value);let e=t.target.value;(e>=360||e<=-360)&&(e=0),T.value=e,ye.value=T.value.toString();let l=g.value+b.value/2,k=E.value+V.value/2;a.value.getContext("2d").translate(l,k),a.value.getContext("2d").rotate(T.value*Math.PI/180),a.value.getContext("2d").translate(-l,-k),a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value,V.value),a.value.getContext("2d").resetTransform()},se=t=>{console.log(t),S.value=S.value.replace("%","")},f=t=>{console.log("scaleFocusOutHandler",t);let e=Number(S.value.replace("%",""))*10;if(console.log(e),S.value+="%",console.log(e),e==0){a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value=Pe,V.value=Se);return}b.value=Pe,V.value=Se,e>0?(S.value="0",Le(e)):(S.value="0",Fe(e*-1))},w=t=>{console.log("scaleInputChange");let e=S.value.replace("%",""),l=Number(e)*10;console.log(l),l+=t,console.log(l),S.value=(l/10).toString()+"%"};ge(S,()=>{console.log(S.value)});const j=d(),ue=d([]),au=t=>{t!="null"&&(s.value=!0,ue.value=[],console.log(t),Qu.get("/product/search?QUERY="+t+"&OPTION=8").then(e=>{console.log(e.data.IMAGES),e.data.IMAGES.forEach(l=>{ue.value.push(l)})}).finally(()=>{s.value=!1,console.log(ue.value)}))},ou=t=>{console.log(t),su(t)},su=t=>{let e=new Image(O.value.width,O.value.height);e.onload=function(){O.value.getContext("2d").drawImage(e,0,0,O.value.width,O.value.height),O.value.getContext("2d").save()},e.crossOrigin="Anonymous",e.src=t+"?no-cache-please"},nu=t=>new Promise((e,l)=>{const k=new FileReader;k.readAsDataURL(t),k.onload=()=>e(k.result),k.onerror=Y=>l(Y)}),iu=()=>{console.log("Image download"),C.value.getContext("2d").clearRect(0,0,C.value.width,C.value.height),C.value.getContext("2d").drawImage(O.value,0,0),C.value.getContext("2d").drawImage(a.value,0,0),C.value.toBlob(t=>{console.log(t);const e=window.URL.createObjectURL(t),l=document.createElement("a");l.href=e,l.setAttribute("download","image.png"),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(e)})},du=async()=>{if(j.value&&j.value.files){let t=await nu(j.value.files[0]);n.value=new Image,n.value.src=t,n.value.onload=()=>{console.log("Logo load",n.value),a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value,V.value),a.value.getContext("2d").save(),Ke()}}},vu=()=>{j.value.click()},le=()=>{let t=g.value+b.value/2,e=E.value+V.value/2;a.value.getContext("2d").translate(t,e),a.value.getContext("2d").rotate(T.value*Math.PI/180),a.value.getContext("2d").translate(-t,-e),a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value,V.value),a.value.getContext("2d").resetTransform()},T=d(0),ye=d(T.value.toString());ge(T,()=>{console.log("watch",T.value),(T.value>359||T.value<-359)&&(T.value=0),ye.value=T.value.toString()});const Ue=t=>{t>0&&(t*=-1),Ne(t)},Qe=t=>{Ne(t)},Ne=t=>{if(t==0)return;T.value=Number(T.value)+Number(t);let e=g.value+b.value/2,l=E.value+V.value/2;a.value.getContext("2d").translate(e,l),a.value.getContext("2d").rotate(T.value*Math.PI/180),a.value.getContext("2d").translate(-e,-l),a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value,V.value),a.value.getContext("2d").resetTransform()},Le=t=>{a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value+=t,V.value+=t),le(),w(t)},Fe=t=>{console.log("zoomDown"),a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value-=t,V.value-=t),le(),w(t*-1)},Ke=()=>{a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),g.value++,a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value,V.value),le()},ru=()=>{a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),g.value--,a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value,V.value),le()},pu=()=>{a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),E.value--,a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value,V.value),le()},mu=()=>{a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),E.value++,a.value.getContext("2d").drawImage(n.value,g.value,E.value,b.value,V.value),le()},gu=()=>{let t=a.value.getBoundingClientRect();G.value=t.x,M.value=t.y,console.log("getFrontCanvasOffset X: ",G.value," Y: ",M.value)},$e=t=>{t.preventDefault()};Uu(async()=>{I.active&&R("update:kp",o.value),a.value=window.document.getElementById("canvas-front"),O.value=window.document.getElementById("canvas-back"),C.value=window.document.getElementById("c1");let t=window.document.getElementById("canvas-back"),e=window.document.getElementById("canvas-front");P.value=t.getContext("2d");const l=new Image(720,1080);l.onload=function(){var h,H;(h=t.getContext("2d"))==null||h.drawImage(l,0,0,720,1080),(H=t.getContext("2d"))==null||H.save()},l.crossOrigin="Anonymous",l.src="https://psk.expert/upload/iblock/77d/w8huebomv7df5plmaq7ok88rcpemw03m/kos610_aaa.jpg";let k=!1,Y=e.width/2,de=e.height/2,He=b.value,Ge=V.value;g.value=Y-He/2,E.value=de-Ge/2,n.value=new Image,n.value.src="https://psk.expert/upload/lk-kp-logo-NOT-REMOVE.png",n.value.crossOrigin="Anonymous",n.value.onload=()=>{var h,H;(h=e.getContext("2d"))==null||h.drawImage(n.value,g.value,E.value,He,Ge),(H=e.getContext("2d"))==null||H.save()},e.onmousedown=h=>{gu(),console.log("startLogoPosX",g.value,"startLogoPosY",E.value),console.log("mouseDownCanvas",h);let H=h.clientX-G.value,ve=h.clientY-M.value,Bu=g.value,Ou=g.value+b.value,hu=E.value,Lu=E.value+V.value;H>Bu&&H<Ou&&ve>hu&&ve<Lu?(k=!0,console.log("click Image"),window.addEventListener("wheel",$e,{passive:!1})):console.log("didnt click Image"),console.log("isDraggable",k)},e.onmouseup=()=>{k=!1,window.removeEventListener("wheel",$e,!1)},e.onmouseout=()=>{!k||(k=!1,window.removeEventListener("wheel",$e,!1))},e.onmousemove=h=>{if(!k)return;let H=h.clientX-G.value-g.value-b.value/2,ve=h.clientY-M.value-E.value-V.value/2;console.log("move x:",H," y: ",ve),a.value.getContext("2d").clearRect(0,0,a.value.width,a.value.height),a.value.getContext("2d").drawImage(n.value,g.value+=H,E.value+=ve,b.value,V.value),le()},e.onwheel=h=>{if(!!k)if(h.deltaY>0){if(console.log("wheel down",h.deltaY),$.value){Ue(-5);return}if(b.value<=10||V.value<=10)return;Fe(10)}else{if(console.log("wheel up",h.deltaY),$.value){Qe(5);return}if(b.value>=700||V.value>=800)return;Le(10)}}});const fu=()=>{console.log(123),console.log("Image add to attachments"),C.value.getContext("2d").clearRect(0,0,C.value.width,C.value.height),C.value.getContext("2d").drawImage(O.value,0,0),C.value.getContext("2d").drawImage(a.value,0,0)},o=d(I.kp),Ie=K(()=>{let t=0;return o.value.offer.position.forEach(e=>{t=t+e.total}),t}),ke=d(!1),J=d(!1),Re=d(!0),ne=d(!1),Ee=d(""),W=d(!1),_=K(()=>p.getters.getKPLogoList),Me=K(()=>p.getters.getKPLogoListOrigin),z=K(()=>p.getters.getKPBannerList),ze=K(()=>p.getters.getKPBannerListOrigin),te=d(0),Ce=d(!0),we=d(!1),xe=d(!1),De=d(!0),cu=t=>{if(!W.value){let e=t.target.files[0],l=e.name,k=new FileReader;k.onloadend=()=>{Ee.value=k.result,W.value=!0,p.dispatch(Z.ADD_KP_LOGO,{name:l,file:Ee.value}).then(()=>{o.value.headerLogo=p.getters.getKPLogoId,W.value=!1})},k.readAsDataURL(e)}},yu=t=>{if(!W.value){let e=t.target.files[0],l=e.name,k=new FileReader;k.onloadend=()=>{Ee.value=k.result,W.value=!0,p.dispatch(Z.ADD_KP_BANNER,{name:l,file:Ee.value}).then(()=>{o.value.bannerSrc=p.getters.getKPBannerSrc,W.value=!1})},k.readAsDataURL(e)}},ku=()=>{p.commit(ee.SET_KP_LOGO_LIST_NEXT),++ae.value,ae.value>=_.value.length&&(ae.value=0)},Eu=()=>{p.commit(ee.SET_KP_LOGO_LIST_PREV),--ae.value,ae.value<0&&(ae.value=_.value.length-1)},Cu=()=>{p.commit(ee.SET_KP_BANNER_LIST_NEXT),++te.value,te.value>=z.value.length&&(te.value=0)},wu=()=>{p.commit(ee.SET_KP_BANNER_LIST_PREV),--te.value,te.value<0&&(te.value=z.value.length-1)},ie=K(()=>Nu),xu=K(()=>p.getters.getShipmentsAddressInputData),ae=d(0);p.dispatch(Z.GET_KP_LOGO),p.dispatch(uu.GET_SHIPMENTS_ADDRESS);const Du=K(()=>p.getters.getCompanysListInput().filter(t=>t.id!=="")),bu=()=>{const t=Du.value.find(e=>e.id==o.value.offer.executor);if(t&&(o.value.offer.executor=t.name),o.value.additionally.pickup){const e=p.getters.getShipmentsAddress.find(l=>l.index==parseInt(o.value.additionally.pickupValue)).address;e&&(o.value.additionally.pickupValue=e)}J.value?o.value.headerLogo=Number(_.value[0].id):o.value.headerLogo=0,o.value.banner==!0?(o.value.bannerSrc=z.value[0].image,o.value.bannerId=z.value[0].id):o.value.bannerSrc="",R("next"),R("update:kp",o.value)},Vu=t=>{t=t-1,_.value.length==1&&(t=0),s.value=!0;let e=0,l=_.value[t].id;Me.value.forEach((Y,de)=>{Y.id==l&&(e=de)});let k={index:t,id:Number(Me.value[e].id)};p.dispatch(Z.DELETE_KP_LOGO,k).then(()=>{s.value=!1})},Au=t=>{t=t-1,z.value.length==1&&(t=0),s.value=!0;let e=0,l=z.value[t].id;ze.value.forEach((Y,de)=>{Y.id==l&&(e=de)});let k={index:t,id:Number(ze.value[e].id)};p.dispatch(Z.DELETE_KP_BANNER,k).then(()=>{s.value=!1})};return(t,e)=>(i(),m(re,null,[u("div",{class:D(["kp-step",{active:A.active}])},[e[99]||(e[99]=u("div",{class:"kp-step-title"},"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F",-1)),u("div",E0,[u("div",C0,[u("div",{class:D(["orders-list-item",{active:ke.value}])},[u("div",{class:"orders-list-row",onClick:e[0]||(e[0]=l=>ke.value=!ke.value)},[...e[58]||(e[58]=[u("div",{class:"orders-list-elem"},[u("div",{class:"table-arrow"})],-1),u("div",{class:"orders-list-elem"}," \u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0443\u0441\u043B\u043E\u0432\u0438\u044F",-1)])]),u("div",{class:D(["kp-step-body-row-group",{active:ke.value}])},[u("div",w0,[e[60]||(e[60]=u("span",{class:"kp-step-body-row-elem"},"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438",-1)),v(r(Q),{modelValue:o.value.additionally.pickup,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.additionally.pickup=l),onOnClick:e[2]||(e[2]=l=>{o.value.additionally.delivery=!1,o.value.additionally.deliveryValue=0}),style:{"margin-left":"30px"}},null,8,["modelValue"]),e[61]||(e[61]=u("div",null,"\u0421\u0430\u043C\u043E\u0432\u044B\u0432\u043E\u0437",-1)),v(r(Q),{modelValue:o.value.additionally.delivery,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.additionally.delivery=l),onOnClick:e[4]||(e[4]=l=>o.value.additionally.pickup=!1),style:{"margin-left":"30px"}},null,8,["modelValue"]),e[62]||(e[62]=u("div",null,"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430",-1)),o.value.additionally.delivery?(i(),N(r(be),{key:0,min:0,step:10,modelValue:o.value.additionally.deliveryValue,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.additionally.deliveryValue=l),style:{"margin-left":"30px"}},null,8,["modelValue"])):y("",!0),o.value.additionally.delivery?(i(),m("div",x0,[...e[59]||(e[59]=[x("\u20BD ",-1),u("span",{class:"kp-step-body-elem-text-sub"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1)])])):y("",!0),o.value.additionally.pickup?(i(),N(r(_e),{key:2,data:xu.value,modelValue:o.value.additionally.pickupValue,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.additionally.pickupValue=l),style:"max-width: 300px"},null,8,["data","modelValue"])):y("",!0)]),u("div",D0,[e[63]||(e[63]=u("span",{class:"kp-step-body-row-elem"},"\u041F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0430",-1)),v(r(Q),{modelValue:o.value.additionally.prepayment,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.additionally.prepayment=l),onOnClick:e[8]||(e[8]=l=>o.value.additionally.prepaymentValue=0),style:"margin-left: 30px"},null,8,["modelValue"]),o.value.additionally.prepayment?(i(),N(r(be),{key:0,min:0,max:100,step:.1,modelValue:o.value.additionally.prepaymentValue,"onUpdate:modelValue":e[9]||(e[9]=l=>o.value.additionally.prepaymentValue=l),style:"margin-left: 30px"},null,8,["modelValue"])):y("",!0),o.value.additionally.prepayment?(i(),m("div",b0,"%")):y("",!0),o.value.additionally.prepayment&&Ie.value?(i(),m("div",V0,oe(r(Xe)(Number(Ie.value/100*o.value.additionally.prepaymentValue),!0))+" \u043E\u0442 "+oe(r(Xe)(Ie.value,!0)),1)):y("",!0)]),Ve(u("div",A0,[e[66]||(e[66]=u("span",{class:"kp-step-body-row-elem"},"\u041E\u0442\u0441\u0440\u043E\u0447\u043A\u0430",-1)),v(r(Q),{modelValue:o.value.additionally.delay,"onUpdate:modelValue":e[10]||(e[10]=l=>o.value.additionally.delay=l),onOnClick:e[11]||(e[11]=l=>{o.value.additionally.delayWorkValue=0,o.value.additionally.delayCalendarValue=0}),style:"margin-left: 30px"},null,8,["modelValue"]),o.value.additionally.delay?(i(),m("div",{key:0,style:pe([ne.value?"color: #292C32":"color: #FFFFFF","margin-left: 30px"])},[...e[64]||(e[64]=[x("\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E ",-1),u("br",null,null,-1),x("\u043A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u043D\u044B\u0445 \u0434\u043D\u0435\u0439",-1)])],4)):y("",!0),o.value.additionally.delay?(i(),N(r(be),{key:1,min:0,modelValue:o.value.additionally.delayCalendarValue,"onUpdate:modelValue":e[12]||(e[12]=l=>o.value.additionally.delayCalendarValue=l),disabled:ne.value},null,8,["modelValue","disabled"])):y("",!0),Ve(u("div",B0,[v(r(We),{modelValue:ne.value,"onUpdate:modelValue":e[13]||(e[13]=l=>ne.value=l)},null,8,["modelValue"])],512),[[Ze,o.value.additionally.delay]]),o.value.additionally.delay?(i(),m("div",{key:2,style:pe([ne.value?"color: #FFFFFF":"color: #292C32","margin-left: 30px"])},[...e[65]||(e[65]=[x("\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E",-1),u("br",null,null,-1),x("\u0440\u0430\u0431\u043E\u0447\u0438\u0445 \u0434\u043D\u0435\u0439",-1)])],4)):y("",!0),o.value.additionally.delay?(i(),N(r(be),{key:3,min:0,modelValue:o.value.additionally.delayWorkValue,"onUpdate:modelValue":e[14]||(e[14]=l=>o.value.additionally.delayWorkValue=l),disabled:!ne.value},null,8,["modelValue","disabled"])):y("",!0)],512),[[Ze,o.value.additionally.prepaymentValue!==100]])],2)],2),u("div",{class:D(["orders-list-item",{active:o.value.header}])},[u("div",{class:"orders-list-row",onClick:e[15]||(e[15]=l=>o.value.header=!o.value.header)},[...e[67]||(e[67]=[u("div",{class:"orders-list-elem"},[u("div",{class:"table-arrow"})],-1),u("div",{class:"orders-list-elem"},"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",-1)])]),u("div",{class:D(["kp-step-body-row-group",{active:o.value.header}])},[u("div",O0,[e[68]||(e[68]=u("span",{class:"kp-step-body-row-elem"},"\u0422\u0435\u043A\u0441\u0442",-1)),v(r(Q),{modelValue:Re.value,"onUpdate:modelValue":e[16]||(e[16]=l=>Re.value=l),style:"margin-left: 30px"},null,8,["modelValue"]),u("div",{class:D(["kp-step-body-row-group",{active:Re.value}])},[Ve(u("textarea",{class:"order-comment-textarea",style:{"min-width":"500px"},"onUpdate:modelValue":e[17]||(e[17]=l=>o.value.headerText=l),placeholder:"\u0422\u0435\u043A\u0441\u0442 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430 \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F..."},null,512),[[je,o.value.headerText]])],2)]),u("div",h0,[e[70]||(e[70]=u("span",{class:"kp-step-body-row-elem"},"\u041B\u043E\u0433\u043E",-1)),v(r(Q),{modelValue:J.value,"onUpdate:modelValue":e[18]||(e[18]=l=>J.value=l),style:{"margin-left":"30px"}},null,8,["modelValue"]),J.value?(i(),m("label",L0,[u("input",{onChange:e[19]||(e[19]=l=>cu(l)),class:"kp-step-body-add-file-input",id:"file-upload",type:"file",accept:"image/*"},null,32)])):y("",!0),J.value?(i(),m("div",F0,[e[69]||(e[69]=u("div",{class:"kp-step-body-elem-text-sub"},"\u0412\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435:",-1)),u("div",{class:D(["header-button left",{active:o.value.headerLogoAlign===ie.value.LEFT}]),onClick:e[20]||(e[20]=l=>o.value.headerLogoAlign=ie.value.LEFT),tooltip:"\u0421\u043B\u0435\u0432\u0430",flow:"up"},[v(r(f0),{class:"sidebar-btn"})],2),u("div",{class:D(["header-button center",{active:o.value.headerLogoAlign===ie.value.CENTER}]),onClick:e[21]||(e[21]=l=>o.value.headerLogoAlign=ie.value.CENTER),tooltip:"\u041F\u043E \u0446\u0435\u043D\u0442\u0440\u0443",flow:"up"},[v(r(p0),{class:"sidebar-btn"})],2),u("div",{class:D(["header-button right",{active:o.value.headerLogoAlign===ie.value.RIGHT}]),tooltip:"\u0421\u043F\u0440\u0430\u0432\u0430",flow:"up",onClick:e[22]||(e[22]=l=>o.value.headerLogoAlign=ie.value.RIGHT)},[v(r(k0),{class:"sidebar-btn"})],2)])):y("",!0)]),_.value.length>0?(i(),m("div",{key:0,class:D(["kp-step-body-row-group",{active:J.value}])},[u("div",$0," \u041B\u043E\u0433\u043E #"+oe(_.value[0].id),1),W.value?(i(),N(r(Be),{key:0,style:{margin:"auto"}})):y("",!0),J.value&&!W.value?(i(),m("div",I0,[u("div",R0,[u("div",P0,[u("button",{class:"product-slider-arrow prev",onClick:Eu}),v(Je,{name:"product-slider-trans",class:"product-slider",style:"align-items: center; height: 500px;",tag:"div"},{default:L(()=>[(i(!0),m(re,null,Ae(_.value,l=>(i(),m("div",{class:"product-slider-slide",key:l.id},[l.image?(i(),m("img",{key:0,src:l.image},null,8,S0)):y("",!0)]))),128))]),_:1}),u("div",{class:"product-slider-arrow next",onClick:ku})])])])):y("",!0),u("div",T0,[v(r(U),{onClick:e[23]||(e[23]=l=>Vu(ae.value))},{default:L(()=>[...e[71]||(e[71]=[x("\u0423\u0434\u0430\u043B\u0438\u0442\u044C",-1)])]),_:1})])],2)):(i(),m("div",{key:1,class:D(["kp-step-title kp-step-body-row-group",{active:J.value}])},[...e[72]||(e[72]=[u("span",null,"\u041B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u0432 \u043D\u0435\u0442. \u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043B\u043E\u0433\u043E\u0442\u0438\u043F.",-1)])],2)),u("div",U0,[e[74]||(e[74]=u("span",{class:"kp-step-body-row-elem"},"\u0411\u0430\u043D\u043D\u0435\u0440",-1)),v(r(Q),{modelValue:o.value.banner,"onUpdate:modelValue":e[24]||(e[24]=l=>o.value.banner=l),style:{"margin-left":"30px"}},null,8,["modelValue"]),o.value.banner?(i(),m("label",Q0,[u("input",{onChange:e[25]||(e[25]=l=>yu(l)),class:"kp-step-body-add-file-input",id:"banner-upload",type:"file",accept:"image/*"},null,32)])):y("",!0),o.value.banner?(i(),m("div",N0,[...e[73]||(e[73]=[x("\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u043C\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440 \u0431\u0430\u043D\u043D\u0435\u0440\u0430 \u0434\u043B\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438, \u0432\u044B\u0441\u043E\u0442\u0430: ",-1),u("strong",null,"240",-1),x("px, ",-1),u("strong",null,"x",-1),x(" \u0448\u0438\u0440\u0438\u043D\u0430: ",-1),u("strong",null,"2040",-1),x("px.",-1)])])):y("",!0)]),z.value.length>0?(i(),m("div",{key:2,class:D(["kp-step-body-row-group",{active:o.value.banner}])},[u("div",K0," \u0411\u0430\u043D\u043D\u0435\u0440 #"+oe(z.value[0].id)+" "+oe(z.value[0].type=="showcase"?"- \u0441\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0439":""),1),W.value?(i(),N(r(Be),{key:0,style:{margin:"auto"}})):y("",!0),o.value.banner?(i(),m("div",M0,[u("div",z0,[u("div",H0,[u("button",{class:"product-slider-arrow prev",onClick:wu}),v(Je,{name:"product-slider-trans",class:"product-slider",style:"align-items: center; height: 240px; max-width: 1200px;",tag:"div"},{default:L(()=>[(i(!0),m(re,null,Ae(z.value,l=>(i(),m("div",{class:"product-slider-slide",key:l.id,style:pe(l.type!="custom"?["border: 2px solid;","border-color: #FAC12E;","border-radius: 10px;"]:[])},[l.image?(i(),m("img",{key:0,src:l.image},null,8,G0)):y("",!0)],4))),128))]),_:1}),u("div",{class:"product-slider-arrow next",onClick:Cu})])])])):y("",!0),z.value[0].type=="custom"?(i(),m("div",Y0,[v(r(U),{onClick:e[26]||(e[26]=l=>Au(te.value))},{default:L(()=>[...e[75]||(e[75]=[x("\u0423\u0434\u0430\u043B\u0438\u0442\u044C",-1)])]),_:1})])):y("",!0)],2)):(i(),m("div",{key:3,class:D(["kp-step-title kp-step-body-row-group",{active:o.value.banner}])},[...e[76]||(e[76]=[u("span",null,"\u0411\u0430\u043D\u043D\u0435\u0440\u043E\u0432 \u043D\u0435\u0442. \u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0431\u0430\u043D\u043D\u0435\u0440.",-1)])],2))],2)],2),u("div",q0,[e[77]||(e[77]=u("div",{class:"order-comment-title"},[u("span",null,"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439")],-1)),Ve(u("textarea",{class:"order-comment-textarea","onUpdate:modelValue":e[27]||(e[27]=l=>o.value.offer.comment=l)},null,512),[[je,o.value.offer.comment]])]),u("div",X0,[e[78]||(e[78]=x(" \u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435: ",-1)),v(r(Q),{modelValue:Ce.value,"onUpdate:modelValue":e[28]||(e[28]=l=>Ce.value=l),onOnClick:e[29]||(e[29]=l=>{Ce.value=!0,we.value=!1,o.value.as="PDF"}),style:"margin-left: 30px"},null,8,["modelValue"]),e[79]||(e[79]=u("div",{style:"margin-left: 10px"},"PDF",-1)),v(r(Q),{modelValue:we.value,"onUpdate:modelValue":e[30]||(e[30]=l=>we.value=l),onOnClick:e[31]||(e[31]=l=>{Ce.value=!1,we.value=!0,o.value.as="WORD"}),style:"margin-left: 30px"},null,8,["modelValue"]),e[80]||(e[80]=u("div",{style:"margin-left: 10px"},"WORD",-1))]),u("div",Z0,[e[83]||(e[83]=x(" \u041E\u0440\u0438\u0435\u043D\u0442\u0430\u0446\u0438\u044F \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430: ",-1)),u("div",W0,[u("div",j0,[v(r(Q),{modelValue:De.value,"onUpdate:modelValue":e[32]||(e[32]=l=>De.value=l),onOnClick:e[33]||(e[33]=l=>{De.value=!0,xe.value=!1,o.value.isPortraitOrientation=!1})},null,8,["modelValue"]),e[81]||(e[81]=u("div",{style:"margin-left: 10px"},"\u0410\u043B\u044C\u0431\u043E\u043C",-1))]),u("div",J0,[v(r(Q),{modelValue:xe.value,"onUpdate:modelValue":e[34]||(e[34]=l=>xe.value=l),onOnClick:e[35]||(e[35]=l=>{De.value=!1,xe.value=!0,o.value.isPortraitOrientation=!0})},null,8,["modelValue"]),e[82]||(e[82]=u("div",{style:"margin-left: 10px"},"\u041F\u043E\u0440\u0442\u0440\u0435\u0442",-1))])])])])]),u("div",{class:"order-list content-elem",style:pe([B.value?"display: flex;":"display: none;"])},[u("div",_0,[o.value.offer.position?(i(),m("div",el,[u("div",ul,[u("button",{onClick:e[36]||(e[36]=l=>F.value=!F.value),class:D(["select-input-btn",F.value?"active":""])},"\u0412\u042B\u0411\u0415\u0420\u0418\u0422\u0415 \u0422\u041E\u0412\u0410\u0420 \u0418\u0417 \u0412\u042B\u041F\u0410\u0414\u0410\u042E\u0429\u0415\u0413\u041E \u0421\u041F\u0418\u0421\u041A\u0410. ",2),u("div",{class:D(["select-input-options",F.value?"active":""])},[(i(!0),m(re,null,Ae(o.value.offer.position,(l,k)=>(i(),m("p",{key:k,class:D("select-input-item"),onClick:Y=>{au(l.guid),F.value=!1}}," ["+oe(l.article)+"] "+oe(ce(l.product.NAME)),9,ll))),128))],2)]),s.value?(i(),N(r(Be),{key:0,center:""})):y("",!0)])):y("",!0),u("div",tl,[u("div",null,[u("input",{ref_key:"file",ref:j,id:"myfile",type:"file",onChange:e[37]||(e[37]=l=>du()),style:{display:"none"}},null,544),v(r(U),{tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u0430\u0439\u043B \u0441 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C \u043D\u0430 \u0445\u043E\u043B\u0441\u0442",tooltipFlow:"up",onOnClick:e[38]||(e[38]=l=>vu())},{default:L(()=>[...e[84]||(e[84]=[x("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043B\u043E\u0433\u043E\u0442\u0438\u043F",-1)])]),_:1})]),u("div",al,[u("span",null,[v(r(U),{onMousedown:e[39]||(e[39]=l=>pu())},{default:L(()=>[...e[85]||(e[85]=[x("\u{1F815}",-1)])]),_:1})]),u("div",null,[v(r(U),{onOnClick:e[40]||(e[40]=l=>ru())},{default:L(()=>[...e[86]||(e[86]=[x("\u{1F814}",-1)])]),_:1}),v(r(U),{onOnClick:e[41]||(e[41]=l=>mu())},{default:L(()=>[...e[87]||(e[87]=[x("\u{1F817}",-1)])]),_:1}),v(r(U),{onOnClick:e[42]||(e[42]=l=>Ke())},{default:L(()=>[...e[88]||(e[88]=[x("\u279D",-1)])]),_:1})])]),u("div",null,[e[91]||(e[91]=u("span",{style:"margin-bottom: 10px;"},"\u041C\u0430\u0441\u0448\u0442\u0430\u0431 \u043D\u0430\u043D\u0435\u0441\u0435\u043D\u0438\u044F",-1)),u("div",ol,[u("div",null,[v(r(U),{onOnClick:e[43]||(e[43]=l=>Fe(1))},{default:L(()=>[...e[89]||(e[89]=[x("-",-1)])]),_:1})]),u("div",null,[v(r(me),{onClick:e[44]||(e[44]=l=>se(l)),onFocusout:e[45]||(e[45]=l=>f(l)),modelValue:S.value,"onUpdate:modelValue":e[46]||(e[46]=l=>S.value=l),class:D("input-text-field-modify")},null,8,["modelValue"])]),u("div",null,[v(r(U),{onOnClick:e[47]||(e[47]=l=>Le(1))},{default:L(()=>[...e[90]||(e[90]=[x("+",-1)])]),_:1})])])]),u("div",sl,[v(r(U),{style:{margin:"0","border-radius":"100px",width:"30px","min-width":"30px","min-height":"30px",height:"30px",cursor:"help"},active:!1,tooltip:"\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u0430 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043A\u043E\u043B\u0435\u0441\u043E\u043C \u043C\u044B\u0448\u0438",tooltipFlow:"up"},{default:L(()=>[...e[92]||(e[92]=[x("?",-1)])]),_:1}),v(r(We),{modelValue:$.value,"onUpdate:modelValue":e[48]||(e[48]=l=>$.value=l)},null,8,["modelValue"])]),u("div",null,[e[95]||(e[95]=u("span",{style:"margin-bottom: 10px;"},"\u0423\u0433\u043E\u043B \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u0430",-1)),u("div",nl,[u("div",null,[v(r(U),{onOnClick:e[49]||(e[49]=l=>Ue(-1))},{default:L(()=>[...e[93]||(e[93]=[x("L",-1)])]),_:1})]),u("div",null,[v(r(me),{onClick:e[50]||(e[50]=l=>Oe(l)),onFocusout:e[51]||(e[51]=l=>he(l)),modelValue:ye.value,"onUpdate:modelValue":e[52]||(e[52]=l=>ye.value=l),class:D("input-text-field-modify")},null,8,["modelValue"])]),u("div",null,[v(r(U),{onOnClick:e[53]||(e[53]=l=>Qe(1))},{default:L(()=>[...e[94]||(e[94]=[x("R",-1)])]),_:1})])])]),u("div",null,[v(r(U),{onOnClick:e[54]||(e[54]=l=>fu()),tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u043E\u043E\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0432 \u0444\u0430\u0439\u043B \u041A\u041F","tooltip-flow":"up"},{default:L(()=>[...e[96]||(e[96]=[x("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",-1)])]),_:1}),v(r(U),{onOnClick:e[55]||(e[55]=l=>iu()),tooltip:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u043D\u0430 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E","tooltip-flow":"up",style:"background-color: oldlace;"},{default:L(()=>[...e[97]||(e[97]=[x("\u0421\u043A\u0430\u0447\u0430\u0442\u044C",-1)])]),_:1})])]),ue.value.length>0?(i(),m("div",il,[(i(!0),m(re,null,Ae(ue.value,(l,k)=>(i(),m("img",{style:{cursor:"pointer"},onClick:Y=>ou(Y.target.src),key:k,src:l,height:"200"},null,8,dl))),128))])):y("",!0),e[98]||(e[98]=lu('<div style="display:table;margin:auto;"><span><div style="position:relative;" width="720" height="1080"><canvas width="720" height="1080" style="z-index:-1;"></canvas><canvas id="canvas-back" width="720" height="1080" style="position:absolute;left:0;top:0;z-index:0;"></canvas><canvas id="canvas-front" width="720" height="1080" style="position:absolute;left:0;top:0;z-index:1;"></canvas></div></span><span style="display:none;"><canvas id="c1" width="720" height="1080"></canvas></span></div>',1))])],4),u("div",vl,[u("div",{class:"kp-step-actions-link",onClick:e[56]||(e[56]=l=>t.$emit("prev"))},"\u041D\u0430\u0437\u0430\u0434"),u("div",{class:"kp-step-actions-link right",onClick:e[57]||(e[57]=l=>bu())},"\u0414\u0430\u043B\u0435\u0435")])],2),s.value?(i(),N(r(tu),{key:0})):y("",!0)],64))}}),pl={class:"kp-step-body"},ml={class:"kp-step-actions"},gl=fe({__name:"KpStep4",props:{active:{type:Boolean,default:!1}},emits:["save","prev"],setup(A,{emit:c}){const I=c,R=()=>{I("save")};return(p,s)=>(i(),m("div",{class:D(["kp-step",{active:A.active}])},[s[2]||(s[2]=u("div",{class:"kp-step-title"},"\u0424\u0430\u0439\u043B \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D",-1)),u("div",pl,[u("div",{onClick:s[0]||(s[0]=B=>R()),class:"kp-step-actions-link",style:"text-align: center"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C")]),u("div",ml,[u("div",{class:"kp-step-actions-link",onClick:s[1]||(s[1]=B=>p.$emit("prev"))},"\u041D\u0430\u0437\u0430\u0434")])],2))}}),fl={class:"kp"},cl={class:"top-line product-page"},yl={class:"kp-form"},kl={class:"kp-form-stepper-wrap"},El={class:"kp-form-stepper"},Cl={class:"kp-form-stepper-list"},wl={class:"kp-form-stepper-content"},xl={class:"kp-form-stepper-content-tabs-box"},Al=fe({__name:"KpPage",setup(A){const c=Te(),I=K(()=>c.getters.getCompanysList),R=d(""),p=d(q.cloneDeep(eu)),s=d(1),B=d(!1),F=d(!1),P=d(X.ORDER);c.getters.isCompanysLoad||c.dispatch(Ku.GET_COMPANYS),c.getters.isOrders||(B.value=!0,c.dispatch(Mu.GET_ORDERS).then(()=>{B.value=!1})),c.dispatch(Z.GET_KP_LOGO),c.dispatch(Z.GET_KP_BANNER),c.dispatch(uu.GET_SHIPMENTS_ADDRESS),p.value=c.getters.getKP,s.value=c.getters.getKPStep,s.value!=1&&(P.value=X.CATALOG_POS);const n=K(()=>c.getters.getOrderDraftCount>0),a=()=>{if(s.value<4&&(s.value=s.value+1),s.value==4){let O=q.cloneDeep(p.value);O.additionally.prepayment&&(O.additionally.prepaymentValue=O.additionally.prepaymentValue/100),F.value=!0,c.dispatch(Z.SEND_KP,O).finally(()=>{F.value=!1}),c.commit(ee.SET_KP_STEP,1)}c.commit(ee.SET_KP_STEP,s.value)},G=()=>{s.value>1&&(s.value=s.value-1),c.commit(ee.SET_KP_STEP,s.value)},M=()=>{c.dispatch(Z.SAVE_KP)};return ge(p,()=>{c.commit(ee.SET_KP,p.value)}),(O,C)=>(i(),m("div",fl,[u("div",cl,[v(Yu,{data:I.value,modelValue:R.value,"onUpdate:modelValue":C[0]||(C[0]=g=>R.value=g)},null,8,["data","modelValue"]),v(Gu),v(zu)]),v(Hu),C[4]||(C[4]=lu('<div class="kp-head-card"><div class="kp-head-card-title">\u041A\u043E\u043D\u0441\u0442\u0440\u0443\u043A\u0442\u043E\u0440 \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u0438\u0445 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0439</div><div class="kp-head-card-subtitle"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#A5A7A9" d="M11.875 18Q12.5 18 12.95 17.55Q13.4 17.1 13.4 16.475Q13.4 15.85 12.95 15.412Q12.5 14.975 11.875 14.975Q11.25 14.975 10.8 15.412Q10.35 15.85 10.35 16.475Q10.35 17.1 10.8 17.55Q11.25 18 11.875 18ZM10.7 14.15H13.05Q13.05 13.425 13.25 12.925Q13.45 12.425 14.2 11.7Q14.775 11.15 15.137 10.525Q15.5 9.9 15.5 9.025Q15.5 7.525 14.525 6.737Q13.55 5.95 12.15 5.95Q10.625 5.95 9.613 6.825Q8.6 7.7 8.2 8.9L10.4 9.725Q10.575 9.225 10.95 8.725Q11.325 8.225 12.025 8.225Q12.525 8.225 12.8 8.537Q13.075 8.85 13.075 9.225Q13.075 9.6 12.812 10Q12.55 10.4 12.275 10.625Q11.275 11.55 10.988 12.137Q10.7 12.725 10.7 14.15ZM12 22.85Q9.75 22.85 7.763 22Q5.775 21.15 4.312 19.688Q2.85 18.225 2 16.25Q1.15 14.275 1.15 12Q1.15 9.725 2 7.75Q2.85 5.775 4.312 4.312Q5.775 2.85 7.763 2Q9.75 1.15 12 1.15Q14.275 1.15 16.25 2Q18.225 2.85 19.688 4.312Q21.15 5.775 22 7.75Q22.85 9.725 22.85 12Q22.85 14.275 22 16.25Q21.15 18.225 19.688 19.688Q18.225 21.15 16.25 22Q14.275 22.85 12 22.85ZM12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12ZM12 19.7Q15.2 19.7 17.45 17.462Q19.7 15.225 19.7 12Q19.7 8.775 17.45 6.537Q15.2 4.3 12 4.3Q8.8 4.3 6.55 6.537Q4.3 8.775 4.3 12Q4.3 15.225 6.55 17.462Q8.8 19.7 12 19.7Z"></path></svg><div>\u041D\u0430 \u044D\u0442\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 \u0412\u044B \u0441\u043C\u043E\u0436\u0435\u0442\u0435 \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0438\u0438 \u0441\u043E\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u043E\u0433\u043E \u0437\u0430\u043A\u0430\u0437\u0430, \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430 \u0438\u043B\u0438 \u0442\u043E\u0432\u0430\u0440\u0430 \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0441\u043E \u0441\u0432\u043E\u0438\u043C \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C \u0438 \u0446\u0435\u043D\u0430\u043C\u0438.</div></div></div>',1)),u("div",yl,[u("div",kl,[u("div",El,[u("div",{class:"kp-form-stepper-bar",style:pe("width:"+33.33*(s.value-1)+"%")},null,4),u("ul",Cl,[u("li",{class:D(["kp-form-stepper-item",{active:s.value>=1}]),tooltip:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0438\u0435",flow:"up"},"1",2),u("li",{class:D(["kp-form-stepper-item",{active:s.value>=2}]),tooltip:"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043F\u043E\u043B\u044F",flow:"up"},"2",2),u("li",{class:D(["kp-form-stepper-item",{active:s.value>=3}]),tooltip:"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",flow:"up"},"3",2),u("li",{class:D(["kp-form-stepper-item with-image",{active:s.value>=4}]),tooltip:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u0435 \u0444\u0430\u0439\u043B",flow:"up"},null,2)])])]),u("div",wl,[u("div",xl,[u("div",{class:D(`kp-form-stepper-content-tabs step${s.value}`)},[v(Ju,{onNext:a,modelValue:P.value,"onUpdate:modelValue":C[1]||(C[1]=g=>P.value=g),active:s.value===1,isDraft:n.value},null,8,["modelValue","active","isDraft"]),v(d0,{type:P.value,onNext:a,onPrev:G,kp:p.value,"onUpdate:kp":C[2]||(C[2]=g=>p.value=g),active:s.value===2},null,8,["type","kp","active"]),v(rl,{onNext:a,onPrev:G,kp:p.value,"onUpdate:kp":C[3]||(C[3]=g=>p.value=g),active:s.value===3},null,8,["kp","active"]),v(gl,{onPrev:G,onSave:M,active:s.value===4},null,8,["active"])],2)])])]),F.value?(i(),N(tu,{key:0})):y("",!0)]))}});export{Al as default};
