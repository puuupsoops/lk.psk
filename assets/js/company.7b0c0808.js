import{o as n,b as l,a as e,d as S,i as C,K as N,W as ee,c as j,_ as Z,t as i,l as B,e as x,p as z,F as I,g as P,B as X,u as y,z as V,U as H,X as W,Y as O,m as K,k as g,Z as ae,$ as te,j as se,s as T,a0 as R,a1 as ne,h as oe,Q as ue,a2 as le,a3 as ce}from"./index.70c78815.js";import{N as ie}from"./Notification.9e0f05b4.js";import{a as de,_ as re}from"./PersonalBar.a7707a57.js";import{m as me,a as pe,b as he,_ as ve,F as ye,C as ge}from"./CompanyCalendar.vue_vue_type_style_index_0_lang.70b4c05d.js";import{_ as _e}from"./doc.a542cbe8.js";import{_ as fe}from"./CompanyBarTop.d671a0eb.js";import"./vee-validate.esm.9d1132f1.js";import"./object.463815cc.js";const xe={xmlns:"http://www.w3.org/2000/svg",width:"41",height:"20",fill:"none"},Ce=e("path",{fill:"#A5A7A9","fill-rule":"evenodd",d:"M37.465 2H18.579l8.064 7.102L37.465 2ZM16.739 3.036 14.713 15.91a1 1 0 0 0 .988 1.156h19.926a1 1 0 0 0 .988-.845l1.978-12.576-11.33 7.436c-.047.03-.094.056-.142.078a.998.998 0 0 1-1.235-.067l-9.107-8.02a.957.957 0 0 1-.04-.037Zm-1.946-.502A3 3 0 0 1 17.757 0h19.926a3 3 0 0 1 2.963 3.466L38.59 16.533a3 3 0 0 1-2.963 2.534H15.7a3 3 0 0 1-2.964-3.467l2.056-13.066Z","clip-rule":"evenodd"},null,-1),$e=e("rect",{width:"8",height:"2",x:"3.7",y:"4",fill:"#A5A7A9",rx:"1"},null,-1),be=e("rect",{width:"11",height:"2",y:"8",fill:"#A5A7A9",rx:"1"},null,-1),Ae=e("rect",{width:"5",height:"2",x:"5.3",y:"12",fill:"#A5A7A9",rx:"1"},null,-1),Me=[Ce,$e,be,Ae];function Ee(a,o){return n(),l("svg",xe,Me)}var Q={render:Ee};const we={key:0,class:"company-consultant-wrap content-elem"},De={class:"company-consultant-info"},ke={key:1,class:"company-consultant-img-box"},Be=["src"],Se={key:1,class:"company-consultant-img",src:de,alt:""},Fe={class:"company-consultant-info-box"},Le={class:"company-consultant-info-about"},Ve={class:"company-consultant-name"},Ne={class:"company-consultant-position"},Te={class:"company-consultant-contact"},Re=["href"],Ge=["href"],Ue=["href"],qe=["title","href"],Oe=e("img",{class:"company-consultant-mail-img",src:Q,alt:""},null,-1),je=z("\u041D\u0430\u043F\u0438\u0441\u0430\u0442\u044C "),Ie=[Oe,je],Pe={key:1,class:"company-consultant-wrap content-elem"},Ze={class:"company-consultant-info"},We=e("a",{class:"company-consultant-mail"},[e("img",{class:"company-consultant-mail-img",src:Q,alt:""}),z("\u041D\u0430\u043F\u0438\u0441\u0430\u0442\u044C ")],-1),Ye=S({__name:"ManagerCard",props:{manager:{type:Object,required:!0}},setup(a){const o=a,t=C(!1),d=C(!1),p=C("");return N(()=>o.manager,()=>{t.value=!1,d.value=!0,o.manager&&o.manager.image?(p.value="",ee({method:"get",timeout:1e3*3,url:o.manager.image,responseType:"arraybuffer",headers:{"Content-type":"image/jpeg"}}).then(c=>{t.value=!0,d.value=!1,p.value=`data:${c.headers["content-type"]};base64,${btoa(String.fromCharCode(...new Uint8Array(c.data)))}`}).catch(()=>{d.value=!1})):d.value=!1,o.manager.image!=""&&(t.value=!0),p.value=o.manager.image}),(c,s)=>{var u;return n(),l("div",null,[a.manager&&Object.keys(a.manager).length>0?(n(),l("div",we,[e("div",De,[d.value?(n(),j(Z,{key:0,style:{margin:"auto"}})):(n(),l("div",ke,[t.value?(n(),l("img",{key:0,class:"company-consultant-img",src:p.value},null,8,Be)):(n(),l("img",Se))])),e("div",Fe,[e("div",Le,[e("div",Ve,i(a.manager.name),1),e("div",Ne,i((u=a.manager)!=null&&u.caption?a.manager.caption:"\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0439 \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440"),1)]),e("div",Te,[e("a",{class:"company-consultant-phone",href:"tel:"+a.manager.contact},i(a.manager.contact),9,Re),a.manager.phone1!==""?(n(),l("a",{key:0,class:"company-consultant-phone",href:"tel:"+a.manager.phone1},i(a.manager.phone1),9,Ge)):B("",!0),a.manager.phone2!==""?(n(),l("a",{key:1,class:"company-consultant-phone",href:"tel:"+a.manager.phone2},i(a.manager.phone2),9,Ue)):B("",!0)])])]),e("a",{class:"company-consultant-mail",title:a.manager.email,href:"mailto:"+a.manager.email},Ie,8,qe)])):(n(),l("div",Pe,[e("div",Ze,[x(Z,{style:{margin:"auto"}})]),We]))])}}}),ze={class:"company-consultant",style:{display:"flex","flex-direction":"column","row-gap":"16px"}},Xe=S({__name:"ManagerCardStack",props:{managers:{type:Array,required:!0,default:[]}},setup(a){return(o,t)=>(n(),l("div",ze,[(n(!0),l(I,null,P(a.managers,(d,p)=>(n(),j(Ye,{key:p,manager:d},null,8,["manager"]))),128))]))}}),He={key:0},Ke={class:"content-elem"},Qe={class:"company-head-item-title"},Je={class:"company-card-sale"},ea={class:"company-card-sale-box"},aa=e("span",{class:"company-card-sale-text"},"\u0421\u043A\u0438\u0434\u043A\u0430",-1),ta={class:"company-card-sale-value"},sa={class:"company-card-balance"},na={class:"company-card-balance-box"},oa={key:0,class:"company-head-info-elem l highlight"},ua={key:1,class:"company-head-info-elem l highlight"},la={class:"company-head-info"},ca={class:"company-head-info-row"},ia=e("div",{class:"company-head-info-elem l"},[e("span",{class:"company-head-info-val cash-back-title"},"\u041A\u0435\u0448\u0431\u044D\u043A")],-1),da={class:"company-head-info-elem r"},ra={class:"company-head-info-val cash-back-value"},ma={class:"company-head-info-row"},pa={class:"company-head-info-elem l"},ha={class:"company-head-info-title"},va={key:0,class:"company-head-info-val"},ya={key:1,class:"company-head-info-val"},ga={key:0,class:"company-head-info-elem r"},_a=e("span",{class:"company-head-info-title"},"\u0414\u0430\u0442\u0430 \u043F\u043E\u0433\u0430\u0448\u0435\u043D\u0438\u044F",-1),fa={class:"company-head-info-val"},xa={class:"company-card-footer"},Ca={class:"company-head-info-elem l"},$a=e("span",{class:"company-head-info-title"},"\u0414\u043E\u0433\u043E\u0432\u043E\u0440",-1),ba={class:"company-head-info-val"},Aa={class:"company-head-info-elem \u043A"},Ma=e("span",{class:"company-head-info-title"},"\u041B\u0438\u043C\u0438\u0442",-1),Ea={class:"company-head-info-val"},wa={class:"company-head-sale"},Da={class:"sale-val"},ka={tooltip:"\u0421\u0443\u043C\u043C\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043E\u043A \u043F\u043E \u0434\u043E\u0433\u043E\u0432\u043E\u0440\u0443",flow:"up"},Ba={class:"sale-val-money"},Sa=e("div",{tooltip:"\u041F\u043B\u0430\u0442\u0435\u0436\u0438",flow:"left"},[e("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.84625 6.4597L2.68453 0.298103C2.54202 0.155477 2.35178 0.076904 2.14893 0.0769041C1.94608 0.0769041 1.75584 0.155478 1.61332 0.298103L1.15956 0.751758C0.864288 1.04737 0.864288 1.52781 1.15956 1.82297L6.3337 6.99711L1.15382 12.177C1.01131 12.3196 0.932619 12.5097 0.932619 12.7125C0.932619 12.9154 1.01131 13.1056 1.15382 13.2483L1.60759 13.7019C1.75021 13.8445 1.94034 13.9231 2.14319 13.9231C2.34604 13.9231 2.53628 13.8445 2.6788 13.7019L8.84625 7.53463C8.9891 7.39155 9.06756 7.20052 9.06711 6.99745C9.06756 6.79358 8.9891 6.60267 8.84625 6.4597Z",fill:"#A5A7A9"})])],-1),Fa=[Sa],La={key:1,class:"doc"},Va={class:"content-elem"},Na={class:"company-head-item-title"},Ta={class:"company-card-sale"},Ra={class:"company-card-sale-box"},Ga=e("span",{class:"company-card-sale-text"},"\u0421\u043A\u0438\u0434\u043A\u0430",-1),Ua={class:"company-card-sale-value"},qa={class:"company-card-balance"},Oa={class:"company-card-balance-box"},ja={key:0,class:"company-head-info-elem l highlight"},Ia={key:1,class:"company-head-info-elem l highlight"},Pa={class:"company-head-info",style:{display:"flex","justify-content":"space-between"}},Za={key:0,class:"company-head-list-content"},Wa={key:0,class:"company-head-list"},Ya=["onClick"],za={key:1,class:"company-head-list-content"},Xa=e("span",null,"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u0443\u043C\u043C\u0443 \u043F\u043B\u0430\u0442\u0435\u0436\u0430",-1),Ha={style:{padding:"10px 0px",display:"flex","justify-content":"flex-start","align-items":"baseline"}},Ka=e("div",{style:{padding:"0px 5px"}},"\u0440\u0443\u0431.",-1),Qa=e("div",{style:{padding:"0px 5px"}},"\u043A\u043E\u043F.",-1),Ja={style:{display:"flex","justify-content":"unset","flex-direction":"column","flex-wrap":"wrap"}},et=["disabled"],at=["value"],tt={class:"company-head-sale"},st={class:"sale-val"},nt={tooltip:"\u0421\u0443\u043C\u043C\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043E\u043A \u043F\u043E \u0434\u043E\u0433\u043E\u0432\u043E\u0440\u0443",flow:"up"},ot={class:"sale-val-money"},ut=e("div",{tooltip:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",flow:"left"},[e("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.84625 6.4597L2.68453 0.298103C2.54202 0.155477 2.35178 0.076904 2.14893 0.0769041C1.94608 0.0769041 1.75584 0.155478 1.61332 0.298103L1.15956 0.751758C0.864288 1.04737 0.864288 1.52781 1.15956 1.82297L6.3337 6.99711L1.15382 12.177C1.01131 12.3196 0.932619 12.5097 0.932619 12.7125C0.932619 12.9154 1.01131 13.1056 1.15382 13.2483L1.60759 13.7019C1.75021 13.8445 1.94034 13.9231 2.14319 13.9231C2.34604 13.9231 2.53628 13.8445 2.6788 13.7019L8.84625 7.53463C8.9891 7.39155 9.06756 7.20052 9.06711 6.99745C9.06756 6.79358 8.9891 6.60267 8.84625 6.4597Z",fill:"#A5A7A9"})])],-1),lt=[ut],ct={key:1,class:"company-head-item yellow"},it=K('<div class="content-elem active"><div class="company-head-item-title" style="margin-right:100px;">\u0414\u043E\u0433\u043E\u0432\u043E\u0440 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442</div><div class="company-card-sale"><div class="company-card-sale-box"><span class="company-card-sale-text">\u0421\u043A\u0438\u0434\u043A\u0430</span><div class="company-card-sale-value">\u0421\u043A\u0438\u0434\u043A\u0430 %</div></div></div><div class="company-card-balance"><div class="company-card-balance-box"><div class="company-head-info-elem l highlight">\u0411\u0430\u043B\u0430\u043D\u0441: 0 \u20BD</div></div></div><div class="company-head-info"><div class="company-head-info-row"><div class="company-head-info-elem l"><span class="company-head-info-title">\u041E\u0442\u0441\u0440\u043E\u0447\u043A\u0430</span><span class="company-head-info-val">0 \u0434\u043D\u0435\u0439</span></div><div class="company-head-info-elem r"><span class="company-head-info-title">\u0414\u0430\u0442\u0430 \u043F\u043E\u0433\u0430\u0448\u0435\u043D\u0438\u044F</span><span class="company-head-info-val">--.--.----</span></div></div></div></div>',1),dt=e("div",{class:"company-head-sale",tooltip:"\u0421\u0443\u043C\u043C\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043E\u043A \u043F\u043E \u0434\u043E\u0433\u043E\u0432\u043E\u0440\u0443",flow:"up"},[e("div",{class:"sale-val"},[e("span",{class:"sale-val-money"},"0 \u20BD")])],-1),rt=[it,dt],Y=S({__name:"CompanyStorageCard",props:{data:{type:Object},active:{type:Boolean}},emits:["onClick"],setup(a,{emit:o}){var w,_,M;const t=a,d=C(!1);X("docDate");let p=function(m){let r=["\u0434\u043D\u0435\u0439","\u0434\u0435\u043D\u044C","\u0434\u043D\u044F"],f=m%100;f=f>=20?f%10:f;let k=0;return f===0||f>=5&&f<=20?k=0:f==1?k=1:k=2,r[k]};const c=C(!1),s=C(0),u=C(0),h=C(""),$=new Date().toLocaleDateString("ru"),b=(w=t.data)==null?void 0:w.contract,F="f59a4d06-2f35-11e7-8fdb-0025907c0298",A=((M=(_=t.data)==null?void 0:_.guid)!=null?M:"")<F?"\u0441\u043F\u0435\u0446\u043E\u0434\u0435\u0436\u0434\u0443":"\u0441\u043F\u0435\u0446\u043E\u0431\u0443\u0432\u044C",E=function(m,r){let f=(""+m).split(".");f[1]?u.value=Number(f[1]):u.value=0,s.value=Math.trunc(m),c.value=!0},L=function(){let m=u.value<10?"0":"";return`\u041E\u043F\u043B\u0430\u0442\u0430 \u043F\u043E \u0434\u043E\u0433\u043E\u0432\u043E\u0440\u0443 \u2116 ${b} \u043E\u0442 ${$}, \u0437\u0430 ${A} \u043D\u0430 \u0441\u0443\u043C\u043C\u0443 ${s.value.toLocaleString("ru")} \u0440\u0443\u0431\u043B\u0435\u0439 ${m}${u.value} \u043A\u043E\u043F \u0432 \u0442.\u0447. \u041D\u0414\u0421 20% ${U()}`},G=function(m,r){return r<10?O.exports.toNumber(m+O.exports.toNumber("0.0"+r.toString())):O.exports.toNumber(m+"."+r)},U=function(){return(G(s.value,u.value)*.2).toFixed(2)},q=function(){var r;let m=document.querySelector("#testing-code");m==null||m.setAttribute("type","text"),m==null||m.select(),document.execCommand("copy"),m==null||m.setAttribute("type","hidden"),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges(),alert("\u0422\u0435\u043A\u0441\u0442 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430.")};return N(s,async(m,r)=>{h.value=L()}),N(u,async(m,r)=>{h.value=L()}),(m,r)=>{var f,k;return a.data?(n(),l("div",{key:0,class:V("company-head-item "+(a.data.debt>1e3?"red":"yellow")+(a.active?" content-elem-active":"")+(d.value?" doc":"")),onClick:r[7]||(r[7]=v=>m.$emit("onClick",v))},[d.value?(n(),l("div",La,[e("div",Va,[e("div",Na,i(a.data.name),1),e("div",Ta,[e("div",Ra,[Ga,e("div",Ua,i(a.data.discount)+" %",1)])]),e("div",qa,[e("div",Oa,[a.data.balance-a.data.debt<0?(n(),l("div",ja," \u0417\u0430\u0434\u043E\u043B\u0436\u0435\u043D\u043D\u043E\u0441\u0442\u044C: "+i((a.data.balance-a.data.debt).toLocaleString("ru").replace(",",".").substring(1))+" \u20BD",1)):(n(),l("div",Ia,"\u0411\u0430\u043B\u0430\u043D\u0441: "+i(a.data.balance.toLocaleString("ru").replace(",","."))+" \u20BD",1))])]),e("div",Pa,[e("div",{class:V("company-head-info-row"+(c.value?" passive-border":" active-border")),onClick:r[1]||(r[1]=v=>c.value=!1)}," \u041F\u043B\u0430\u0442\u0435\u0436\u0438 ",2),e("div",{class:V("company-head-info-row"+(c.value?" active-border":" passive-border")),onClick:r[2]||(r[2]=v=>c.value=!0)}," \u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043F\u043B\u0430\u0442\u0435\u0436\u0430 ",2)]),c.value?(n(),l("div",za,[Xa,e("div",Ha,[x(W,{modelValue:s.value,"onUpdate:modelValue":r[3]||(r[3]=v=>s.value=v),step:1,min:0,style:"max-width: 100%"},null,8,["modelValue"]),Ka,x(W,{modelValue:u.value,"onUpdate:modelValue":r[4]||(r[4]=v=>u.value=v),min:0,max:99},null,8,["modelValue"]),Qa]),e("div",Ja,[e("textarea",{class:"order-comment-textarea",disabled:h.value===""},i(h.value),9,et),e("input",{type:"hidden",id:"testing-code",value:h.value},null,8,at),e("span",{style:{"text-align":"center",padding:"5px 0px"},onClick:r[5]||(r[5]=v=>q())},"\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C")])])):(n(),l("div",Za,[a.data.documents?(n(),l("ul",Wa,[(n(!0),l(I,null,P(a.data.documents,(v,J)=>(n(),l("li",{style:{"align-items":"center"},class:"company-head-list-elem",key:J},[x(y(_e),{class:"company-head-list-img",style:{width:"20px",height:"21px"}}),e("a",{style:H(Date.parse(v.expires_date)>new Date().getTime()?"":"background-color: #B9342D; color: white;"),class:V([Date.parse(v.expires_date)>new Date().getTime()?"":"debt","company-head-list-link"]),onClick:Ot=>E(v.debt,v.expires_date)},i(v.debt.toLocaleString("ru").replace(",","."))+" \u20BD \u0434\u043E "+i(v.expires)+" / \u0423\u041F\u0414 "+i(v.number),15,Ya)]))),128))])):B("",!0)]))]),e("div",tt,[e("div",st,[e("span",nt,[e("span",ot,i(a.data.spent.toLocaleString("ru").replace(",","."))+" \u20BD",1)])]),e("div",{class:V("company-card-showdoc"+(d.value?" active":"")),onClick:r[6]||(r[6]=v=>d.value=!d.value)},lt,2)])])):(n(),l("div",He,[e("div",Ke,[e("div",Qe,i(a.data.name),1),e("div",Je,[e("div",ea,[aa,e("div",ta,i(a.data.discount)+" %",1)])]),e("div",sa,[e("div",na,[a.data.balance-a.data.debt<0?(n(),l("div",oa," \u0417\u0430\u0434\u043E\u043B\u0436\u0435\u043D\u043D\u043E\u0441\u0442\u044C: "+i((a.data.balance-a.data.debt).toLocaleString("ru").replace(",",".").substring(1))+" \u20BD",1)):(n(),l("div",ua,"\u0411\u0430\u043B\u0430\u043D\u0441: "+i(a.data.balance.toLocaleString("ru").replace(",","."))+" \u20BD",1))])]),e("div",la,[e("div",ca,[ia,e("div",da,[e("span",ra,i(Number((k=(f=a.data)==null?void 0:f.cashback)!=null?k:0).toFixed()),1)])]),e("div",ma,[e("div",pa,[e("span",ha,i(a.data.case),1),a.data.case==="\u043E\u0442\u0441\u0440\u043E\u0447\u043A\u0430"?(n(),l("span",va,i(a.data.deferment)+" "+i(y(p)(a.data.deferment)),1)):B("",!0),a.data.case==="\u043F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0430"?(n(),l("span",ya,i(a.data.percent)+"%",1)):B("",!0)]),a.data.case!=="\u043F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0430"?(n(),l("div",ga,[_a,e("span",fa,i(a.data.date),1)])):B("",!0)])]),e("div",xa,[e("div",Ca,[$a,e("span",ba,i(a.data.contract),1)]),e("div",Aa,[Ma,e("span",Ea,i(Number(a.data.limit).toLocaleString("ru").replace(",","."))+" \u20BD",1)])])]),e("div",wa,[e("div",Da,[e("span",ka,[e("span",Ba,i(a.data.spent.toLocaleString("ru").replace(",","."))+" \u20BD",1)])]),e("div",{class:V("company-card-showdoc"+(d.value?" active":"")),onClick:r[0]||(r[0]=v=>d.value=!d.value)},Fa,2)])]))],2)):(n(),l("div",ct,rt))}}}),mt={key:0,class:"company-head-wrap"},pt={key:1,class:"company-head-wrap"},ht=S({__name:"CompanyStorageBar",props:{data:{type:Array,required:!0},modelValue:{type:Number}},emits:["update:modelValue","prev","next"],setup(a,{emit:o}){const t=a,d=250,p=s=>{const u=t.data[s].guid;let h=0,$=0,b=0,F=0;const D=document.querySelector("#"+u+"-"+s);D&&(b=D.getBoundingClientRect().x,F=D.getBoundingClientRect().x+D.getBoundingClientRect().width);const A=document.querySelector(".company-head-elem");A&&(h=A.getBoundingClientRect().x,$=A.getBoundingClientRect().x+A.getBoundingClientRect().width);const E=document.querySelector(".company-head-wrap");F>$?(E&&(E.scrollLeft+=d),setTimeout(()=>{o("update:modelValue",s)},250)):b<h?(E&&(E.scrollLeft-=d),setTimeout(()=>{o("update:modelValue",s)},250)):o("update:modelValue",s)},c=s=>{const u=document.querySelector(".company-head-wrap");u&&(u.scrollLeft+=s),setTimeout(()=>{s>0?o("next"):o("prev")},250)};return(s,u)=>a.data.length!==0?(n(),l("div",mt,[e("div",{class:"btn btn-prev",onClick:u[0]||(u[0]=h=>c(-d))}," \u276E "),(n(!0),l(I,null,P(a.data,(h,$)=>(n(),j(Y,{id:h.guid+"-"+$,key:$,data:h||null,active:$===a.modelValue,onOnClick:b=>p($)},null,8,["id","data","active","onOnClick"]))),128)),e("div",{class:"btn btn-next",onClick:u[1]||(u[1]=h=>c(d))}," \u276F ")])):(n(),l("div",pt,[x(Y)]))}}),vt={class:"company-sale sale"},yt={class:"sale-progressbar-wrap"},gt={class:"sale-progressbar content-elem tooltip"},_t={class:"sale-progressbar-val"},ft={class:"sale-progressbar-val-money"},xt={class:"company-sale-card"},Ct={class:"table"},$t={class:"table-row"},bt={class:"table-sale"},At=S({__name:"CompanySaleBar",props:{spent:{type:Number,required:!0},modelValue:{type:Number,required:!0}},setup(a){const o=a,t=g(()=>o.modelValue),d=[{progressMoneyMin:0,progressMoneyMax:5e4,discount:0,next:2},{progressMoneyMin:5e4,progressMoneyMax:99e3,discount:2,next:3},{progressMoneyMin:1e5,progressMoneyMax:199999,discount:3,next:4},{progressMoneyMin:2e5,progressMoneyMax:399999,discount:4,next:6},{progressMoneyMin:4e5,progressMoneyMax:599999,discount:6,next:8},{progressMoneyMin:6e5,progressMoneyMax:799999,discount:8,next:9},{progressMoneyMin:8e5,progressMoneyMax:999999,discount:9,next:10},{progressMoneyMin:1e6,progressMoneyMax:5999999,discount:10,next:15},{progressMoneyMin:6e6,progressMoneyMax:9999999,discount:15,next:17},{progressMoneyMin:1e7,progressMoneyMax:19999999,discount:17,next:18},{progressMoneyMin:2e7,progressMoneyMax:29999999,discount:18,next:20},{progressMoneyMin:3e7,progressMoneyMax:1/0,discount:20,next:0}];let p=g(()=>{let s=d.filter(u=>o.spent>=u.progressMoneyMin&&o.spent<u.progressMoneyMax);return s.length>0?s[0]:d[0]}),c=g(()=>p.value.progressMoneyMax!=1/0?o.spent/p.value.progressMoneyMax*100:100);return g(()=>p.value.progressMoneyMax-o.spent),(s,u)=>(n(),l("div",vt,[e("div",yt,[e("div",gt,[e("div",{class:"sale-progressbar-line",style:H("width: "+y(c)+"%")},[e("div",_t,[e("div",null,[e("span",ft,"("+i(a.spent.toLocaleString("ru").replace(",","."))+"\xA0\u20BD)",1)])])],4)])]),e("div",xt,[e("div",Ct,[e("div",$t,[e("div",bt,"\u0412\u0430\u0448\u0430 \u0441\u043A\u0438\u0434\u043A\u0430 "+i(y(t))+" %",1)])])])]))}}),Mt={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",fill:"none"},Et=e("rect",{width:"2.254",height:"22.535",x:".25",y:"2.079",fill:"#A5A7A9",rx:"1.127",transform:"rotate(-45 .25 2.08)"},null,-1),wt=e("rect",{width:"2.254",height:"22.535",fill:"#A5A7A9",rx:"1.127",transform:"scale(-1 1) rotate(-45 -6.254 22.198)"},null,-1),Dt=[Et,wt];function kt(a,o){return n(),l("svg",Mt,Dt)}var Bt={render:kt};const St={class:"company-calendar-box content-elem"},Ft=K('<form class="company-search-wrap" action=""><div class="company-search-input-wrap"><input class="company-search-input" type="text" placeholder="\u041F\u043E\u0438\u0441\u043A"><img class="company-search-input-clear" src="'+Bt+'" alt=""></div><button class="company-search-btn gradient-btn"><img class="company-search-btn-img" src="'+te+'" alt=""></button></form>',1),Lt=S({__name:"CompanyCalendar",props:{data:{type:Array}},setup(a){var s;const o=a,t=C(),d=C((s=X("docDate"))!=null?s:"");N(d,u=>{t.value.getApi().gotoDate(new Date(u))}),ae(()=>{t.value.getApi().today()});let p=g(()=>o.data===null?[]:o.data),c=g(()=>({plugins:[me,pe,he],headerToolbar:{left:"today prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",duration:{days:3},locale:ve,events:p.value?p.value.map(u=>({title:`\u0423\u041F\u0414 ${u.number} \u043D\u0430 ${u.debt}\u20BD`,start:u.expires_date,backgroundColor:"#378006",allDay:!0,display:"block"})):[]}));return(u,h)=>(n(),l("div",St,[Ft,x(y(ye),{ref_key:"fullCalendar",ref:t,options:y(c)},null,8,["options"])]))}}),Vt={key:0},Nt={class:"top-line product-page"},Tt={class:"company-head"},Rt={class:"company-head-elem"},Gt={class:"company-head-elem"},Ut={id:"CompanyCalendar"},qt={class:"company-calendar-wrap"},Ht=S({__name:"company",props:["id"],setup(a){const o=a,t=oe(),d=ue(),p=C(!1),c=C(o.id),s=C(0),u=C(""),h=g(()=>t.getters.getCompanyCurrentDiscount(c.value)),$=g(()=>t.getters.getCompanyData(c.value)),b=g(()=>t.getters.getCompanyStoragesData(c.value)),F=g(()=>t.getters.getCompanysList),D=g(()=>t.getters.getCompanySpent(c.value)),A=g(()=>t.getters.getManagerUid(c.value));g(()=>t.getters.getManager);const E=g(()=>t.getters.getManagers),L=g({get:()=>t.getters.getLoader,set:w=>t.commit(le.SET_LOADER,w)}),G=g(()=>b.value.length===0?null:b.value[s.value?s.value:0].documents);N(()=>o.id,()=>{o.id!==""?c.value=o.id:c.value=t.getters.getCompanys===[]?"":t.getters.getCompanys[0].uid}),N(c,()=>{b.value.length===0?s.value=null:s.value=0,d.push(`/company/${c.value}`),t.commit(R.CLEAR_MANAGER),setTimeout(()=>t.dispatch(T.GET_MANAGER,A.value),1e3),setTimeout(()=>t.dispatch(T.GET_MANAGERS,A.value),1e3)}),se(()=>{t.getters.isCompanysLoad?(o.id!==""?(c.value=o.id,console.log(o.id),t.commit(R.SET_ACTIVE_COMPANY_ID,o.id),t.commit(R.CLEAR_MANAGER),t.dispatch(T.GET_MANAGER,A.value),t.dispatch(T.GET_MANAGERS,A.value)):c.value=t.getters.getCompanys===[]?"":t.getters.getCompanys[0].uid,p.value=!0):(L.value=!0,Promise.all([t.dispatch(T.GET_COMPANYS)]).finally(()=>{setTimeout(()=>{if(t.getters.isCompanysLoad){const w=t.getters.getCompanys.find(_=>_.uid===o.id);c.value=w?w.uid:t.getters.getCompanys[0].uid,t.commit(R.SET_ACTIVE_COMPANY_ID,o.id),p.value=!0,L.value=!1}else L.value=!1},500)}))}),ce("docDate",u);const U=()=>{s.value!=null&&s.value<b.value.length-1&&(s.value=s.value+1)},q=()=>{s.value&&s.value>0&&(s.value=s.value-1)};return(w,_)=>p.value?(n(),l("div",Vt,[e("div",Nt,[x(fe,{data:y(F),modelValue:c.value,"onUpdate:modelValue":_[0]||(_[0]=M=>c.value=M)},null,8,["data","modelValue"]),x(y(ie)),x(y(re))]),e("div",Tt,[e("div",Rt,[x(ht,{data:y(b),modelValue:s.value,"onUpdate:modelValue":_[1]||(_[1]=M=>s.value=M),onNext:_[2]||(_[2]=M=>U()),onPrev:_[3]||(_[3]=M=>q())},null,8,["data","modelValue"])]),e("div",Gt,[x(ge,{data:y($)},null,8,["data"])])]),x(At,{spent:y(D),modelValue:y(h),"onUpdate:modelValue":_[4]||(_[4]=M=>ne(h)?h.value=M:null)},null,8,["spent","modelValue"]),e("div",Ut,[e("div",qt,[x(Lt,{data:y(G)},null,8,["data"]),x(y(Xe),{managers:y(E)},null,8,["managers"])])])])):B("",!0)}});export{Ht as default};
