import{_ as R,d as $,h as _,o as l,b as m,a as e,p as s,w as A,v as S,t as y,k as D,m as W,j as P,W as x,z as N,u,x as z,y as Y,i as K,s as X,af as I,L as q,ag as J,c as Q,ah as Z,ai as tt,g as et,R as ut,a0 as at,aj as ot,ak as st}from"./index.74120467.js";import{N as dt}from"./Notification.4524cfc5.js";import{_ as ct}from"./PersonalBar.fabbd082.js";import{P as rt}from"./ProductSliderCard.b8619e86.js";import{P as lt,_ as nt,a as it}from"./ProductPropertiesCard.3a185588.js";import"./CompanyCalendar.vue_vue_type_style_index_0_lang.b23cf9c9.js";import{_ as pt}from"./CompanyBarTop.5163635b.js";/* empty css                                                          */import{_ as mt}from"./TopNav.24f99694.js";import"./vee-validate.esm.57a98d5f.js";import"./object.4fc33f28.js";const vt={class:"product-add-info content-elem content-elem-info"},_t={class:"content-elem-heading"},gt={key:0,class:"content-elem-bottom content-elem-desc content-hide"},ft=W(" \u0421\u043E\u043E\u0431\u0449\u0430\u0435\u043C \u0432\u0430\u043C \u0447\u0442\u043E \u0441\u043E\u0433\u043B\u0430\u0441\u043D\u043E \u041F\u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044E \u041F\u0440\u0430\u0432\u0438\u0442\u0435\u043B\u044C\u0441\u0442\u0432\u0430 \u0420\u043E\u0441\u0441\u0438\u0439\u0441\u043A\u043E\u0439 \u0424\u0435\u0434\u0435\u0440\u0430\u0446\u0438\u0438 \u2116 216 \u043E\u0442 29.02.2020 \u0434\u0430\u0442\u0430 \u0437\u0430\u043F\u0440\u0435\u0442\u0430 \u043E\u0431\u043E\u0440\u043E\u0442\u0430 \u043D\u0435\u043C\u0430\u0440\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0439 \u043E\u0431\u0443\u0432\u0438 \u043F\u0435\u0440\u0435\u043D\u0435\u0441\u0435\u043D\u0430 \u043D\u0430 1 \u0438\u044E\u043B\u044F 2020 \u0433\u043E\u0434\u0430. "),Pt=["innerHTML"],ht=$({__name:"ProductAddInfoCard",props:{data:{type:Object}},setup(n){const d=_(!0);return(t,i)=>(l(),m("div",vt,[e("div",_t,[s(S,{name:"text",mode:"out-in"},{default:A(()=>[(l(),m("div",{key:d.value,class:"content-elem-heading-text"},"\u0414\u043E\u043F. \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B"))]),_:1}),e("div",{class:"content-elem-heading-btn content-hide-btn",onClick:i[0]||(i[0]=r=>d.value=!d.value)},y(d.value?"\u0421\u043A\u0440\u044B\u0442\u044C \u2014":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C +"),1)]),s(S,{name:"fade"},{default:A(()=>[d.value?(l(),m("div",gt,[ft,e("div",{class:"video-area",innerHTML:n.data.VIDEO,style:"padding-top: 10px;"},null,8,Pt)])):D("",!0)]),_:1})]))}});var Dt=R(ht,[["__scopeId","data-v-1b24bf9e"]]);const C=n=>(z("data-v-68b8d31a"),n=n(),Y(),n),Et={class:"product-parcel"},Ct={class:"product-parcel-wrap"},yt={class:"product-parcel-elem content-elem"},It={key:0,class:"content-hide"},At={class:"product-parcel-row"},St=C(()=>e("div",{class:"product-parcel-text"},"\u041D\u0430\u0446\u0435\u043D\u043A\u0430: ",-1)),Tt={class:"product-parcel-value"},Ot={class:"product-parcel-value-block"},$t={class:"product-parcel-row"},bt=C(()=>e("div",{class:"product-parcel-text"},"\u0426\u0435\u043D\u0430 \u0441 \u043D\u0430\u0446\u0435\u043D\u043A\u043E\u0439: ",-1)),Vt={class:"product-parcel-value"},kt={key:0,class:"product-parcel-text"},xt={class:"product-parcel-elem content-elem"},Nt={key:0,class:"content-hide"},Rt={class:"product-parcel-row"},Ut=C(()=>e("div",{class:"product-parcel-text"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E: ",-1)),wt={class:"product-parcel-row"},Bt=C(()=>e("div",{class:"product-parcel-text"},"\u0421\u0443\u043C\u043C\u0430: ",-1)),Ft={class:"product-parcel-value"},Lt={class:"product-parcel-row"},Mt=C(()=>e("div",{class:"product-parcel-text"},"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0432\u0435\u0441: ",-1)),Ht={class:"product-parcel-value"},Gt={class:"product-parcel-row"},jt=C(()=>e("div",{class:"product-parcel-text"},"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1)),Wt={class:"product-parcel-value"},zt={key:0,class:"product-parcel-text"},Yt=$({__name:"ProductParcelCard",props:{data:{type:Object},discount:{type:Number}},setup(n){const d=n,t=_(!0),i=_(1),r=_(0),g=_("percent"),h=P(()=>{var v;if((v=d.data)!=null&&v.PRICE_OPT){let c=d.discount?Number(d.data.PRICE_OPT)-Number(d.data.PRICE_OPT/100)*d.discount:d.data.PRICE_OPT;return g.value==="add"?Number(c)+Number(r.value):Number(c)+Number(c)/100*Number(r.value)}else return 0});return(v,c)=>(l(),m("div",Et,[e("div",Ct,[e("div",yt,[s(S,{name:"fade1",mode:"out-in"},{default:A(()=>[t.value?(l(),m("div",It,[e("div",At,[St,e("div",Tt,[e("div",Ot,[s(x,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=p=>r.value=p)},null,8,["modelValue"]),e("button",{class:N("product-parcel-btn"+(g.value==="percent"?" active":"")),onClick:c[1]||(c[1]=p=>g.value="percent")},"%",2),e("button",{class:N("product-parcel-btn"+(g.value==="add"?" active":"")),onClick:c[2]||(c[2]=p=>g.value="add")},"\u20BD",2)])])]),e("div",$t,[bt,e("div",Vt,y(Number(u(h)).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1)])])):D("",!0)]),_:1}),t.value?D("",!0):(l(),m("div",kt,"\u041D\u0430\u0446\u0435\u043D\u043A\u0430"))]),e("div",xt,[s(S,{name:"fade2"},{default:A(()=>[t.value?(l(),m("div",Nt,[e("div",Rt,[Ut,s(x,{modelValue:i.value,"onUpdate:modelValue":c[3]||(c[3]=p=>i.value=p)},null,8,["modelValue"])]),e("div",wt,[Bt,e("div",Ft,y(Number(u(h)*i.value).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1)]),e("div",Lt,[Mt,e("div",Ht,y((Number(n.data.WEIGHT?n.data.WEIGHT:0)*i.value).toFixed(3)),1)]),e("div",Gt,[jt,e("div",Wt,y((Number(n.data.VALUME?n.data.VALUME:0)*i.value).toFixed(3)),1)])])):D("",!0)]),_:1}),t.value?D("",!0):(l(),m("div",zt,"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E"))])])]))}});var Kt=R(Yt,[["__scopeId","data-v-68b8d31a"]]);const Xt={class:"top-line product-page"},qt={key:0},Jt=e("br",null,null,-1),Qt={key:1,class:"content-wrap content-product-wrap"},Zt={class:"content-wrap-elem"},te={class:"content-elem-desc"},ee={class:"content-wrap-elem"},ue={key:1},ae={key:0},_e=$({__name:"ProductPage",props:{article:{type:String}},setup(n){const d=n,t=et(),i=ut(),r=P({get:()=>t.getters.getLoader,set:f=>t.commit(at.SET_LOADER,f)}),g=_(""),h=_(""),v=_(!1),c=_(!1),p=_(""),T=_([]),U=()=>{i.push({name:"Order"})};K(()=>{(!t.getters.isCompanysLoad||!t.getters.isManagerLoad)&&Promise.all([t.dispatch(X.GET_COMPANYS)]).finally(()=>{setTimeout(()=>{g.value=t.getters.getCompanys.length==0?"":t.getters.getCompanys[0].uid},500)}),d.article&&(r.value=!0,t.dispatch(I.SEARCH_PRODUCT,d.article).then(()=>{v.value=!0,t.getters.getProduct.ID?p.value=t.getters.getProduct.ID:i.push({name:"Product"})}).finally(()=>{r.value=!1}))}),q(()=>d.article,f=>{f&&(r.value=!0,t.dispatch(I.SEARCH_PRODUCT,d.article).then(()=>{v.value=!0,t.getters.getProduct.ID?p.value=t.getters.getProduct.ID:i.push({name:"Product"})}).finally(()=>{r.value=!1}))});const w=()=>{r.value=!0,t.dispatch(I.GET_PRODUCT_BY_ID,p.value).then(()=>{p.value=t.getters.getProduct.ID}).finally(()=>{r.value=!1})},b=()=>{v.value=!1,t.commit(st.SET_SEARCH_PRODUCT_CLEAR)},B=()=>{h.value.trim()!==""&&(b(),r.value=!0,t.dispatch(I.SEARCH_PRODUCT,h.value).then(()=>{v.value=!0,p.value=t.getters.getProduct.ID}).finally(()=>{r.value=!1}))},F=()=>{b(),h.value="",i.push("/product")},L=()=>{const f={article:t.getters.getProduct.ARTICLE,guid:t.getters.getProduct.UID,product:t.getters.getProduct,characteristics:T.value};t.dispatch(ot.ADD_POSITION,f),c.value=!0},M=P(()=>t.getters.getCompanysList),H=P(()=>t.getters.getProductOffers),E=P(()=>t.getters.getProduct),V=P(()=>t.getters.getProductFound),G=P(()=>t.getters.getProductImages),j=P(()=>t.getters.getProductProtect),O=P(()=>{var k;const f=t.getters.getProduct.STATUS,a=Number((k=t.getters.getProduct)==null?void 0:k.MAX_DISCOUNT),o=t.getters.getCompanyDiscount(g.value,t.getters.getProductOffersORGGUID);return console.log("productDiscount:",a),console.log("companyDiscount:",o),console.log("computedDiscount:",o>a?a:o),a==0||a==null?o!=null?o:0:f=="Outlet"||f=="Discount"||f=="Activity"?0:o>a?a:o});return(f,a)=>(l(),m("div",null,[e("div",Xt,[s(u(pt),{data:u(M),modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=o=>g.value=o)},null,8,["data","modelValue"]),s(u(dt)),s(u(ct))]),s(u(mt),{catalog:""}),s(u(J),{modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=o=>h.value=o),to:"product",onSearch:a[2]||(a[2]=o=>B())},null,8,["modelValue"]),u(V).length>0?(l(),m("div",qt,[v.value?(l(),Q(u(lt),{key:0,title:String(u(E).NAME),price:String(u(E).PRICE_OPT),status:String(u(E).STATUS),discount:u(O),onShowSearch:a[3]||(a[3]=o=>F())},null,8,["title","price","status","discount"])):D("",!0),Jt,v.value?(l(),m("div",Qt,[e("div",Zt,[s(u(Z),{data:u(V),cardType:"search",modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=o=>p.value=o),onOnClick:a[5]||(a[5]=o=>w())},null,8,["data","modelValue"]),e("div",te,[s(u(nt),{modelValue:T.value,"onUpdate:modelValue":a[6]||(a[6]=o=>T.value=o),data:u(H),discount:u(O),onOnClick:a[7]||(a[7]=o=>L())},null,8,["modelValue","data","discount"])]),s(u(Dt),{data:u(E)},null,8,["data"])]),e("div",ee,[s(u(rt),{data:u(G),onToOrder:U},null,8,["data"]),s(u(Kt),{data:u(E),discount:u(O)},null,8,["data","discount"]),s(u(it),{data:u(E),protect:u(j)},null,8,["data","protect"])])])):D("",!0)])):(l(),m("div",ue,[v.value?(l(),m("div",ae,"\u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")):D("",!0)])),s(u(tt),{modelValue:c.value,"onUpdate:modelValue":a[8]||(a[8]=o=>c.value=o),message:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0432 \u0437\u0430\u043A\u0430\u0437",timeout:5e3,notification:""},null,8,["modelValue"])]))}});export{_e as default};
