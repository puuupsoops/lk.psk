import{N as G}from"./Notification.b98f3bf7.js";import{f as O,g as v,r as m,o as t,c as u,b as o,l as E,t as y,m as h,w as N,F as $,e as A,y as P,z as b,j as c,d as f,s as I,_ as T,a as B,q as S,A as V,u as D,B as F,h as _,D as R,E as U,i as j,G as w,H as L}from"./index.09a56ea9.js";import{C as z}from"./CatalogItem.ee176da3.js";import"./doc.66697d7d.js";const q={class:"catalog-menu"},H={class:"catalog-menu-heading"},Y=["title"],J={key:0},K={key:0,class:"catalog-menu-nav"},Q=["onClick"],W={key:0,class:"catalog-menu-nav-arrow"},X={class:"catalog-menu-nav-dropdown-list"},Z=O({__name:"CatalogMenu",props:{data:{type:Object},loading:{type:Boolean,default:!0},catalogName:{type:String},showMenu:{type:Boolean}},emits:["update:showMenu","update:catalogName"],setup(e,{emit:a}){const i=v([]),C=n=>{i.value.indexOf(n)!=-1?i.value.splice(i.value.indexOf(n)):i.value.push(n)};return(n,g)=>{const p=m("router-link");return t(),u("div",q,[o("div",H,[g[1]||(g[1]=E("\u041A\u0430\u0442\u0430\u043B\u043E\u0433 ",-1)),o("span",{class:"catalog-menu-heading-add",title:e.showMenu?"\u0421\u043A\u0440\u044B\u0442\u044C":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C",onClick:g[0]||(g[0]=s=>n.$emit("update:showMenu",!e.showMenu))},y(e.showMenu?"-":"+"),9,Y)]),h(I,{name:"fade"},{default:N(()=>[e.showMenu?(t(),u("div",J,[e.loading?(t(),f(B,{key:1})):(t(),u("ul",K,[(t(!0),u($,null,A(e.data,s=>(t(),u("li",{class:"catalog-menu-nav-elem",key:s.id},[o("div",{class:"catalog-menu-nav-elem-wrap",onClick:d=>C(s.id)},[s.sub?(t(),u("div",W,[o("img",{class:P(i.value.indexOf(s.id)!==-1?"catalog-menu-nav-arrow active":"catalog-menu-nav-arrow"),src:b,alt:""},null,2)])):c("",!0),o("div",{class:P(i.value.indexOf(s.id)!==-1?"catalog-menu-nav-text active":"catalog-menu-nav-text")},y(s.name),3)],8,Q),s.sub?(t(),u("div",{key:0,class:P(i.value.indexOf(s.id)!=-1?"catalog-menu-nav-dropdown active":"catalog-menu-nav-dropdown")},[o("ul",X,[(t(!0),u($,null,A(s.sub,d=>(t(),u("li",{key:d.id},[h(p,{tag:"a",to:"/catalog/catalog/"+d.code,class:"catalog-menu-nav-dropdown-link","active-class":"catalog-menu-nav-dropdown-link active",onClick:r=>n.$emit("update:catalogName",d.name)},{default:N(()=>[E(y(d.name),1)]),_:2},1032,["to","onClick"])]))),128))])],2)):c("",!0)]))),128))]))])):c("",!0)]),_:1})])}}});var x=T(Z,[["__scopeId","data-v-e01e1416"]]);const ee=O({components:{Notification:G,PersonalBar:S,CatalogMenu:x,CatalogItem:z,CatalogPagination:V,PreloaderLocal:B},props:["id"],setup(e){const a=D(),i=F(),C=v(!1),n=v(!1),g=v(null),p=v(!0),s=_(()=>a.getters.getMenuCategoryName(e.id)),d=v(),r=v(1),M=l=>{d.value=l.target.documentElement.scrollTop},k=l=>{r.value+l>=1&&r.value+l<=a.getters.getPageCount&&(r.value=r.value+l,n.value=!0,a.dispatch(w.GET_CATALOG,{SECTION:e.id,PAGE:r.value}).then(()=>{n.value=!1}))};return R(()=>e.id,()=>{a.commit(L.CLEAR_CATALOG),r.value=1,e.id!==""&&e.id!==void 0&&(n.value=!0,a.dispatch(w.GET_CATALOG,{SECTION:e.id,PAGE:r.value}).then(()=>{n.value=!1}))}),U(()=>{window.removeEventListener("scroll",M)}),j(()=>{window.addEventListener("scroll",M),a.getters.isCatalogMenuLoad||(C.value=!0,a.dispatch(w.GET_CATALOG_MENU).then(()=>{C.value=!1,s.value||i.push({name:"Catalog"})})),a.commit(L.CLEAR_CATALOG),e.id!==""&&e.id!==void 0&&(n.value=!0,a.dispatch(w.GET_CATALOG,{SECTION:e.id,PAGE:r.value}).then(()=>{n.value=!1}))}),{currentCategory:g,loaderMenu:C,loaderCatalog:n,showMenu:p,currentPage:r,catalogPageCount:_(()=>a.getters.getPageCount),changePage:k,catalogMenu:_(()=>a.getters.getCatalogMenu),catalog:_(()=>a.getters.getCatalog),getMenuCategoryName:s,isLoad:_(()=>a.getters.isCatalogLoad),scroll:d}}}),ae={class:"top-line main-page"},te={class:"catalog"},oe={class:"catalog-elem"},ne={class:"catalog-head-card"},se={key:0},ue={key:1},le={class:"catalog-body-items"},re={key:0},ie={key:0,class:"page_up_down_butn",href:"#"};function de(e,a,i,C,n,g){const p=m("Notification"),s=m("PersonalBar"),d=m("CatalogMenu"),r=m("CatalogPagination"),M=m("PreloaderLocal"),k=m("CatalogItem");return t(),u("div",null,[o("div",ae,[a[5]||(a[5]=o("div",{class:"top-line-menu-btn"},[o("span"),o("span"),o("span")],-1)),h(p),h(s)]),o("div",te,[o("div",{class:P("catalog-elem-menu"+(e.showMenu?" menu-open":""))},[h(d,{loading:e.loaderMenu,data:e.catalogMenu,showMenu:e.showMenu,"onUpdate:showMenu":a[0]||(a[0]=l=>e.showMenu=l)},null,8,["loading","data","showMenu"])],2),o("div",oe,[o("div",ne,[e.getMenuCategoryName?(t(),u("span",se,y(e.getMenuCategoryName),1)):(t(),u("span",ue,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E \u0438\u0437 \u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0430"))])]),o("div",{class:P("catalog-body"+(e.showMenu?" menu-open":""))},[e.isLoad||e.loaderCatalog?(t(),f(r,{key:0,currentPage:e.currentPage,maxPage:e.catalogPageCount,onPrev:a[1]||(a[1]=l=>e.changePage(-1)),onNext:a[2]||(a[2]=l=>e.changePage(1))},null,8,["currentPage","maxPage"])):c("",!0),e.loaderCatalog?(t(),f(M,{key:1,class:"catalog-body-preloader"})):c("",!0),o("div",le,[e.isLoad?(t(),u("div",re,[(t(!0),u($,null,A(e.catalog.products,l=>(t(),f(k,{key:l.id,data:l},null,8,["data"]))),128))])):c("",!0),e.isLoad?(t(),f(r,{key:1,currentPage:e.currentPage,maxPage:e.catalogPageCount,onPrev:a[3]||(a[3]=l=>e.changePage(-1)),onNext:a[4]||(a[4]=l=>e.changePage(1))},null,8,["currentPage","maxPage"])):c("",!0)])],2)]),e.scroll>200?(t(),u("a",ie,"\u041D\u0430\u0432\u0435\u0440\u0445")):c("",!0)])}var Ce=T(ee,[["render",de]]);export{Ce as default};
