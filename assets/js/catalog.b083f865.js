import{N as G}from"./Notification.9e0f05b4.js";import{_ as b}from"./PersonalBar.a7707a57.js";import{f as N,d as O,i as g,r as v,o as t,b as u,a as o,t as y,e as f,w as E,F as $,g as A,z as P,J as I,l as c,p as T,c as h,v as S,_ as B,k as p,K as V,L as F,j as R,M as w,O as L,h as U,Q as j}from"./index.70c78815.js";import{C as z}from"./CatalogItem.da97dcf3.js";import{_ as D}from"./CatalogPagination.98fda29b.js";import"./doc.a542cbe8.js";const J={class:"catalog-menu"},K={class:"catalog-menu-heading"},Q=T("\u041A\u0430\u0442\u0430\u043B\u043E\u0433 "),Y=["title"],q={key:0},H={key:0,class:"catalog-menu-nav"},W=["onClick"],X={key:0,class:"catalog-menu-nav-arrow"},Z={class:"catalog-menu-nav-dropdown-list"},x=O({__name:"CatalogMenu",props:{data:{type:Object},loading:{type:Boolean,default:!0},catalogName:{type:String},showMenu:{type:Boolean}},emits:["update:showMenu","update:catalogName"],setup(e,{emit:a}){const i=g([]),m=n=>{i.value.indexOf(n)!=-1?i.value.splice(i.value.indexOf(n)):i.value.push(n)};return(n,C)=>{const _=v("router-link");return t(),u("div",J,[o("div",K,[Q,o("span",{class:"catalog-menu-heading-add",title:e.showMenu?"\u0421\u043A\u0440\u044B\u0442\u044C":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C",onClick:C[0]||(C[0]=s=>n.$emit("update:showMenu",!e.showMenu))},y(e.showMenu?"-":"+"),9,Y)]),f(S,{name:"fade"},{default:E(()=>[e.showMenu?(t(),u("div",q,[e.loading?(t(),h(B,{key:1})):(t(),u("ul",H,[(t(!0),u($,null,A(e.data,s=>(t(),u("li",{class:"catalog-menu-nav-elem",key:s.id},[o("div",{class:"catalog-menu-nav-elem-wrap",onClick:d=>m(s.id)},[s.sub?(t(),u("div",X,[o("img",{class:P(i.value.indexOf(s.id)!==-1?"catalog-menu-nav-arrow active":"catalog-menu-nav-arrow"),src:I,alt:""},null,2)])):c("",!0),o("div",{class:P(i.value.indexOf(s.id)!==-1?"catalog-menu-nav-text active":"catalog-menu-nav-text")},y(s.name),3)],8,W),s.sub?(t(),u("div",{key:0,class:P(i.value.indexOf(s.id)!=-1?"catalog-menu-nav-dropdown active":"catalog-menu-nav-dropdown")},[o("ul",Z,[(t(!0),u($,null,A(s.sub,d=>(t(),u("li",{key:d.id},[f(_,{tag:"a",to:"/catalog/catalog/"+d.code,class:"catalog-menu-nav-dropdown-link","active-class":"catalog-menu-nav-dropdown-link active",onClick:r=>n.$emit("update:catalogName",d.name)},{default:E(()=>[T(y(d.name),1)]),_:2},1032,["to","onClick"])]))),128))])],2)):c("",!0)]))),128))]))])):c("",!0)]),_:1})])}}});var ee=N(x,[["__scopeId","data-v-e01e1416"]]);const ae=O({components:{Notification:G,PersonalBar:b,CatalogMenu:ee,CatalogItem:z,CatalogPagination:D,PreloaderLocal:B},props:["id"],setup(e){const a=U(),i=j(),m=g(!1),n=g(!1),C=g(null),_=g(!0),s=p(()=>a.getters.getMenuCategoryName(e.id)),d=g(),r=g(1),M=l=>{d.value=l.target.documentElement.scrollTop},k=l=>{r.value+l>=1&&r.value+l<=a.getters.getPageCount&&(r.value=r.value+l,n.value=!0,a.dispatch(w.GET_CATALOG,{SECTION:e.id,PAGE:r.value}).then(()=>{n.value=!1}))};return V(()=>e.id,()=>{a.commit(L.CLEAR_CATALOG),r.value=1,e.id!==""&&e.id!==void 0&&(n.value=!0,a.dispatch(w.GET_CATALOG,{SECTION:e.id,PAGE:r.value}).then(()=>{n.value=!1}))}),F(()=>{window.removeEventListener("scroll",M)}),R(()=>{window.addEventListener("scroll",M),a.getters.isCatalogMenuLoad||(m.value=!0,a.dispatch(w.GET_CATALOG_MENU).then(()=>{m.value=!1,s.value||i.push({name:"Catalog"})})),a.commit(L.CLEAR_CATALOG),e.id!==""&&e.id!==void 0&&(n.value=!0,a.dispatch(w.GET_CATALOG,{SECTION:e.id,PAGE:r.value}).then(()=>{n.value=!1}))}),{currentCategory:C,loaderMenu:m,loaderCatalog:n,showMenu:_,currentPage:r,catalogPageCount:p(()=>a.getters.getPageCount),changePage:k,catalogMenu:p(()=>a.getters.getCatalogMenu),catalog:p(()=>a.getters.getCatalog),getMenuCategoryName:s,isLoad:p(()=>a.getters.isCatalogLoad),scroll:d}}}),te={class:"top-line main-page"},oe=o("div",{class:"top-line-menu-btn"},[o("span"),o("span"),o("span")],-1),ne={class:"catalog"},se={class:"catalog-elem"},ue={class:"catalog-head-card"},le={key:0},re={key:1},ie={class:"catalog-body-items"},de={key:0},ce={key:0,class:"page_up_down_butn",href:"#"};function ge(e,a,i,m,n,C){const _=v("Notification"),s=v("PersonalBar"),d=v("CatalogMenu"),r=v("CatalogPagination"),M=v("PreloaderLocal"),k=v("CatalogItem");return t(),u("div",null,[o("div",te,[oe,f(_),f(s)]),o("div",ne,[o("div",{class:P("catalog-elem-menu"+(e.showMenu?" menu-open":""))},[f(d,{loading:e.loaderMenu,data:e.catalogMenu,showMenu:e.showMenu,"onUpdate:showMenu":a[0]||(a[0]=l=>e.showMenu=l)},null,8,["loading","data","showMenu"])],2),o("div",se,[o("div",ue,[e.getMenuCategoryName?(t(),u("span",le,y(e.getMenuCategoryName),1)):(t(),u("span",re,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E \u0438\u0437 \u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0430"))])]),o("div",{class:P("catalog-body"+(e.showMenu?" menu-open":""))},[e.isLoad||e.loaderCatalog?(t(),h(r,{key:0,currentPage:e.currentPage,maxPage:e.catalogPageCount,onPrev:a[1]||(a[1]=l=>e.changePage(-1)),onNext:a[2]||(a[2]=l=>e.changePage(1))},null,8,["currentPage","maxPage"])):c("",!0),e.loaderCatalog?(t(),h(M,{key:1,class:"catalog-body-preloader"})):c("",!0),o("div",ie,[e.isLoad?(t(),u("div",de,[(t(!0),u($,null,A(e.catalog.products,l=>(t(),h(k,{key:l.id,data:l},null,8,["data"]))),128))])):c("",!0),e.isLoad?(t(),h(r,{key:1,currentPage:e.currentPage,maxPage:e.catalogPageCount,onPrev:a[3]||(a[3]=l=>e.changePage(-1)),onNext:a[4]||(a[4]=l=>e.changePage(1))},null,8,["currentPage","maxPage"])):c("",!0)])],2)]),e.scroll>200?(t(),u("a",ce,"\u041D\u0430\u0432\u0435\u0440\u0445")):c("",!0)])}var fe=N(ae,[["render",ge]]);export{fe as default};
