import{o as n,b as l,a as e,d as k,i as x,L as V,V as J,c as O,_ as Z,t as m,l as D,e as f,p as j,F as I,g as P,B as z,u as y,z as L,U as X,W,X as q,m as H,k as g,Y as Q,Z as ee,j as ae,s as N,$ as T,a0 as te,h as se,R as ne,a1 as oe,a2 as ue}from"./index.94a7ad73.js";import{N as le}from"./Notification.9b9a57a0.js";import{a as ie,_ as ce}from"./PersonalBar.764d3378.js";import{m as de,a as re,b as me,_ as pe,F as ve,C as he}from"./CompanyCalendar.vue_vue_type_style_index_0_lang.bba17083.js";import{_ as ye}from"./doc.cb10a934.js";import{_ as ge}from"./CompanyBarTop.69e7597a.js";import"./vee-validate.esm.c8c9cbdf.js";import"./object.9788cf93.js";const _e={xmlns:"http://www.w3.org/2000/svg",width:"41",height:"20",fill:"none"},fe=e("path",{fill:"#A5A7A9","fill-rule":"evenodd",d:"M37.465 2H18.579l8.064 7.102L37.465 2ZM16.739 3.036 14.713 15.91a1 1 0 0 0 .988 1.156h19.926a1 1 0 0 0 .988-.845l1.978-12.576-11.33 7.436c-.047.03-.094.056-.142.078a.998.998 0 0 1-1.235-.067l-9.107-8.02a.957.957 0 0 1-.04-.037Zm-1.946-.502A3 3 0 0 1 17.757 0h19.926a3 3 0 0 1 2.963 3.466L38.59 16.533a3 3 0 0 1-2.963 2.534H15.7a3 3 0 0 1-2.964-3.467l2.056-13.066Z","clip-rule":"evenodd"},null,-1),xe=e("rect",{width:"8",height:"2",x:"3.7",y:"4",fill:"#A5A7A9",rx:"1"},null,-1),Ce=e("rect",{width:"11",height:"2",y:"8",fill:"#A5A7A9",rx:"1"},null,-1),$e=e("rect",{width:"5",height:"2",x:"5.3",y:"12",fill:"#A5A7A9",rx:"1"},null,-1),be=[fe,xe,Ce,$e];function Ae(a,o){return n(),l("svg",_e,be)}var K={render:Ae};const Me={key:0,class:"company-consultant-wrap content-elem"},Ee={class:"company-consultant-info"},we={key:1,class:"company-consultant-img-box"},De=["src"],ke={key:1,class:"company-consultant-img",src:ie,alt:""},Be={class:"company-consultant-info-box"},Se={class:"company-consultant-info-about"},Fe={class:"company-consultant-name"},Le={class:"company-consultant-position"},Ve={class:"company-consultant-contact"},Ne=["href"],Te=["href"],Re=["href"],Ge=["title","href"],Ue=e("img",{class:"company-consultant-mail-img",src:K,alt:""},null,-1),qe=j("\u041D\u0430\u043F\u0438\u0441\u0430\u0442\u044C "),Oe=[Ue,qe],je={key:1,class:"company-consultant-wrap content-elem"},Ie={class:"company-consultant-info"},Pe=e("a",{class:"company-consultant-mail"},[e("img",{class:"company-consultant-mail-img",src:K,alt:""}),j("\u041D\u0430\u043F\u0438\u0441\u0430\u0442\u044C ")],-1),Ze=k({__name:"ManagerCard",props:{manager:{type:Object,required:!0}},setup(a){const o=a,t=x(!1),d=x(!1),v=x("");return V(()=>o.manager,()=>{t.value=!1,d.value=!0,o.manager&&o.manager.image?(v.value="",J({method:"get",timeout:1e3*3,url:o.manager.image,responseType:"arraybuffer",headers:{"Content-type":"image/jpeg"}}).then(i=>{t.value=!0,d.value=!1,v.value=`data:${i.headers["content-type"]};base64,${btoa(String.fromCharCode(...new Uint8Array(i.data)))}`}).catch(()=>{d.value=!1})):d.value=!1,o.manager.image!=""&&(t.value=!0),v.value=o.manager.image}),(i,s)=>{var u;return n(),l("div",null,[a.manager&&Object.keys(a.manager).length>0?(n(),l("div",Me,[e("div",Ee,[d.value?(n(),O(Z,{key:0,style:{margin:"auto"}})):(n(),l("div",we,[t.value?(n(),l("img",{key:0,class:"company-consultant-img",src:v.value},null,8,De)):(n(),l("img",ke))])),e("div",Be,[e("div",Se,[e("div",Fe,m(a.manager.name),1),e("div",Le,m((u=a.manager)!=null&&u.caption?a.manager.caption:"\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0439 \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440"),1)]),e("div",Ve,[e("a",{class:"company-consultant-phone",href:"tel:"+a.manager.contact},m(a.manager.contact),9,Ne),a.manager.phone1!==""?(n(),l("a",{key:0,class:"company-consultant-phone",href:"tel:"+a.manager.phone1},m(a.manager.phone1),9,Te)):D("",!0),a.manager.phone2!==""?(n(),l("a",{key:1,class:"company-consultant-phone",href:"tel:"+a.manager.phone2},m(a.manager.phone2),9,Re)):D("",!0)])])]),e("a",{class:"company-consultant-mail",title:a.manager.email,href:"mailto:"+a.manager.email},Oe,8,Ge)])):(n(),l("div",je,[e("div",Ie,[f(Z,{style:{margin:"auto"}})]),Pe]))])}}}),We={class:"company-consultant",style:{display:"flex","flex-direction":"column","row-gap":"16px"}},Ye=k({__name:"ManagerCardStack",props:{managers:{type:Array,required:!0,default:[]}},setup(a){return(o,t)=>(n(),l("div",We,[(n(!0),l(I,null,P(a.managers,(d,v)=>(n(),O(Ze,{key:v,manager:d},null,8,["manager"]))),128))]))}}),ze={key:0},Xe={class:"content-elem"},He={class:"company-head-item-title"},Ke={class:"company-card-sale"},Je={class:"company-card-sale-box"},Qe=e("span",{class:"company-card-sale-text"},"\u0421\u043A\u0438\u0434\u043A\u0430",-1),ea={class:"company-card-sale-value"},aa={class:"company-card-balance"},ta={class:"company-card-balance-box"},sa={key:0,class:"company-head-info-elem l highlight"},na={key:1,class:"company-head-info-elem l highlight"},oa={class:"company-head-info"},ua={class:"company-head-info-row"},la={class:"company-head-info-elem l"},ia={class:"company-head-info-title"},ca={key:0,class:"company-head-info-val"},da={key:1,class:"company-head-info-val"},ra={key:0,class:"company-head-info-elem r"},ma=e("span",{class:"company-head-info-title"},"\u0414\u0430\u0442\u0430 \u043F\u043E\u0433\u0430\u0448\u0435\u043D\u0438\u044F",-1),pa={class:"company-head-info-val"},va={class:"company-card-footer"},ha={class:"company-head-info-elem l"},ya=e("span",{class:"company-head-info-title"},"\u0414\u043E\u0433\u043E\u0432\u043E\u0440",-1),ga={class:"company-head-info-val"},_a={class:"company-head-info-elem \u043A"},fa=e("span",{class:"company-head-info-title"},"\u041B\u0438\u043C\u0438\u0442",-1),xa={class:"company-head-info-val"},Ca={class:"company-head-sale"},$a={class:"sale-val"},ba={tooltip:"\u0421\u0443\u043C\u043C\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043E\u043A \u043F\u043E \u0434\u043E\u0433\u043E\u0432\u043E\u0440\u0443",flow:"up"},Aa={class:"sale-val-money"},Ma=e("div",{tooltip:"\u041F\u043B\u0430\u0442\u0435\u0436\u0438",flow:"left"},[e("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.84625 6.4597L2.68453 0.298103C2.54202 0.155477 2.35178 0.076904 2.14893 0.0769041C1.94608 0.0769041 1.75584 0.155478 1.61332 0.298103L1.15956 0.751758C0.864288 1.04737 0.864288 1.52781 1.15956 1.82297L6.3337 6.99711L1.15382 12.177C1.01131 12.3196 0.932619 12.5097 0.932619 12.7125C0.932619 12.9154 1.01131 13.1056 1.15382 13.2483L1.60759 13.7019C1.75021 13.8445 1.94034 13.9231 2.14319 13.9231C2.34604 13.9231 2.53628 13.8445 2.6788 13.7019L8.84625 7.53463C8.9891 7.39155 9.06756 7.20052 9.06711 6.99745C9.06756 6.79358 8.9891 6.60267 8.84625 6.4597Z",fill:"#A5A7A9"})])],-1),Ea=[Ma],wa={key:1,class:"doc"},Da={class:"content-elem"},ka={class:"company-head-item-title"},Ba={class:"company-card-sale"},Sa={class:"company-card-sale-box"},Fa=e("span",{class:"company-card-sale-text"},"\u0421\u043A\u0438\u0434\u043A\u0430",-1),La={class:"company-card-sale-value"},Va={class:"company-card-balance"},Na={class:"company-card-balance-box"},Ta={key:0,class:"company-head-info-elem l highlight"},Ra={key:1,class:"company-head-info-elem l highlight"},Ga={class:"company-head-info",style:{display:"flex","justify-content":"space-between"}},Ua={key:0,class:"company-head-list-content"},qa={key:0,class:"company-head-list"},Oa=["onClick"],ja={key:1,class:"company-head-list-content"},Ia=e("span",null,"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u0443\u043C\u043C\u0443 \u043F\u043B\u0430\u0442\u0435\u0436\u0430",-1),Pa={style:{padding:"10px 0px",display:"flex","justify-content":"flex-start","align-items":"baseline"}},Za=e("div",{style:{padding:"0px 5px"}},"\u0440\u0443\u0431.",-1),Wa=j(),Ya=e("div",{style:{padding:"0px 5px"}},"\u043A\u043E\u043F.",-1),za={style:{display:"flex","justify-content":"unset","flex-direction":"column","flex-wrap":"wrap"}},Xa=["disabled"],Ha=["value"],Ka={class:"company-head-sale"},Ja={class:"sale-val"},Qa={tooltip:"\u0421\u0443\u043C\u043C\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043E\u043A \u043F\u043E \u0434\u043E\u0433\u043E\u0432\u043E\u0440\u0443",flow:"up"},et={class:"sale-val-money"},at=e("div",{tooltip:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",flow:"left"},[e("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.84625 6.4597L2.68453 0.298103C2.54202 0.155477 2.35178 0.076904 2.14893 0.0769041C1.94608 0.0769041 1.75584 0.155478 1.61332 0.298103L1.15956 0.751758C0.864288 1.04737 0.864288 1.52781 1.15956 1.82297L6.3337 6.99711L1.15382 12.177C1.01131 12.3196 0.932619 12.5097 0.932619 12.7125C0.932619 12.9154 1.01131 13.1056 1.15382 13.2483L1.60759 13.7019C1.75021 13.8445 1.94034 13.9231 2.14319 13.9231C2.34604 13.9231 2.53628 13.8445 2.6788 13.7019L8.84625 7.53463C8.9891 7.39155 9.06756 7.20052 9.06711 6.99745C9.06756 6.79358 8.9891 6.60267 8.84625 6.4597Z",fill:"#A5A7A9"})])],-1),tt=[at],st={key:1,class:"company-head-item yellow"},nt=H('<div class="content-elem active"><div class="company-head-item-title" style="margin-right:100px;">\u0414\u043E\u0433\u043E\u0432\u043E\u0440 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442</div><div class="company-card-sale"><div class="company-card-sale-box"><span class="company-card-sale-text">\u0421\u043A\u0438\u0434\u043A\u0430</span><div class="company-card-sale-value">\u0421\u043A\u0438\u0434\u043A\u0430 %</div></div></div><div class="company-card-balance"><div class="company-card-balance-box"><div class="company-head-info-elem l highlight">\u0411\u0430\u043B\u0430\u043D\u0441: 0 \u20BD</div></div></div><div class="company-head-info"><div class="company-head-info-row"><div class="company-head-info-elem l"><span class="company-head-info-title">\u041E\u0442\u0441\u0440\u043E\u0447\u043A\u0430</span><span class="company-head-info-val">0 \u0434\u043D\u0435\u0439</span></div><div class="company-head-info-elem r"><span class="company-head-info-title">\u0414\u0430\u0442\u0430 \u043F\u043E\u0433\u0430\u0448\u0435\u043D\u0438\u044F</span><span class="company-head-info-val">--.--.----</span></div></div></div></div>',1),ot=e("div",{class:"company-head-sale",tooltip:"\u0421\u0443\u043C\u043C\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043E\u043A \u043F\u043E \u0434\u043E\u0433\u043E\u0432\u043E\u0440\u0443",flow:"up"},[e("div",{class:"sale-val"},[e("span",{class:"sale-val-money"},"0 \u20BD")])],-1),ut=[nt,ot],Y=k({__name:"CompanyStorageCard",props:{data:{type:Object},active:{type:Boolean}},emits:["onClick"],setup(a,{emit:o}){var E,_,A;const t=a,d=x(!1);z("docDate");let v=function(p){let r=["\u0434\u043D\u0435\u0439","\u0434\u0435\u043D\u044C","\u0434\u043D\u044F"],c=p%100;c=c>=20?c%10:c;let F=0;return c===0||c>=5&&c<=20?F=0:c==1?F=1:F=2,r[F]};const i=x(!1),s=x(0),u=x(0),h=x(""),C=new Date().toLocaleDateString("ru"),$=(E=t.data)==null?void 0:E.contract,B="f59a4d06-2f35-11e7-8fdb-0025907c0298",b=((A=(_=t.data)==null?void 0:_.guid)!=null?A:"")<B?"\u0441\u043F\u0435\u0446\u043E\u0434\u0435\u0436\u0434\u0443":"\u0441\u043F\u0435\u0446\u043E\u0431\u0443\u0432\u044C",M=function(p,r){let c=(""+p).split(".");c[1]?u.value=Number(c[1]):u.value=0,s.value=Math.trunc(p),i.value=!0},S=function(){let p=u.value<10?"0":"";return`\u041E\u043F\u043B\u0430\u0442\u0430 \u043F\u043E \u0434\u043E\u0433\u043E\u0432\u043E\u0440\u0443 \u2116 ${$} \u043E\u0442 ${C}, \u0437\u0430 ${b} \u043D\u0430 \u0441\u0443\u043C\u043C\u0443 ${s.value.toLocaleString("ru")} \u0440\u0443\u0431\u043B\u0435\u0439 ${p}${u.value} \u043A\u043E\u043F \u0432 \u0442.\u0447. \u041D\u0414\u0421 20% ${G()}`},R=function(p,r){return r<10?q.exports.toNumber(p+q.exports.toNumber("0.0"+r.toString())):q.exports.toNumber(p+"."+r)},G=function(){return(R(s.value,u.value)*.2).toFixed(2)},U=function(){var r;let p=document.querySelector("#testing-code");p==null||p.setAttribute("type","text"),p==null||p.select(),document.execCommand("copy"),p==null||p.setAttribute("type","hidden"),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges(),alert("\u0422\u0435\u043A\u0441\u0442 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430.")};return V(s,async(p,r)=>{h.value=S()}),V(u,async(p,r)=>{h.value=S()}),(p,r)=>a.data?(n(),l("div",{key:0,class:L("company-head-item "+(a.data.debt>1e3?"red":"yellow")+(a.active?" content-elem-active":"")+(d.value?" doc":"")),onClick:r[7]||(r[7]=c=>p.$emit("onClick",c))},[d.value?(n(),l("div",wa,[e("div",Da,[e("div",ka,m(a.data.name),1),e("div",Ba,[e("div",Sa,[Fa,e("div",La,m(a.data.discount)+" %",1)])]),e("div",Va,[e("div",Na,[a.data.balance-a.data.debt<0?(n(),l("div",Ta,"\u0417\u0430\u0434\u043E\u043B\u0436\u0435\u043D\u043D\u043E\u0441\u0442\u044C: "+m((a.data.balance-a.data.debt).toLocaleString("ru").replace(",",".").substring(1))+" \u20BD",1)):(n(),l("div",Ra,"\u0411\u0430\u043B\u0430\u043D\u0441: "+m(a.data.balance.toLocaleString("ru").replace(",","."))+" \u20BD",1))])]),e("div",Ga,[e("div",{class:L("company-head-info-row"+(i.value?" passive-border":" active-border")),onClick:r[1]||(r[1]=c=>i.value=!1)}," \u041F\u043B\u0430\u0442\u0435\u0436\u0438 ",2),e("div",{class:L("company-head-info-row"+(i.value?" active-border":" passive-border")),onClick:r[2]||(r[2]=c=>i.value=!0)}," \u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043F\u043B\u0430\u0442\u0435\u0436\u0430 ",2)]),i.value?(n(),l("div",ja,[Ia,e("div",Pa,[f(W,{modelValue:s.value,"onUpdate:modelValue":r[3]||(r[3]=c=>s.value=c),step:1,min:0,style:"max-width: 100%"},null,8,["modelValue"]),Za,f(W,{modelValue:u.value,"onUpdate:modelValue":r[4]||(r[4]=c=>u.value=c),min:0,max:99},null,8,["modelValue"]),Wa,Ya]),e("div",za,[e("textarea",{class:"order-comment-textarea",disabled:h.value===""},m(h.value),9,Xa),e("input",{type:"hidden",id:"testing-code",value:h.value},null,8,Ha),e("span",{style:{"text-align":"center",padding:"5px 0px"},onClick:r[5]||(r[5]=c=>U())},"\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C")])])):(n(),l("div",Ua,[a.data.documents?(n(),l("ul",qa,[(n(!0),l(I,null,P(a.data.documents,(c,F)=>(n(),l("li",{style:{"align-items":"center"},class:"company-head-list-elem",key:F},[f(y(ye),{class:"company-head-list-img",style:{width:"20px",height:"21px"}}),e("a",{style:X(Date.parse(c.expires_date)>new Date().getTime()?"":"background-color: #B9342D; color: white;"),class:L([Date.parse(c.expires_date)>new Date().getTime()?"":"debt","company-head-list-link"]),onClick:Tt=>M(c.debt,c.expires_date)},m(c.debt.toLocaleString("ru").replace(",","."))+" \u20BD \u0434\u043E "+m(c.expires)+" / \u0423\u041F\u0414 "+m(c.number),15,Oa)]))),128))])):D("",!0)]))]),e("div",Ka,[e("div",Ja,[e("span",Qa,[e("span",et,m(a.data.spent.toLocaleString("ru").replace(",","."))+" \u20BD",1)])]),e("div",{class:L("company-card-showdoc"+(d.value?" active":"")),onClick:r[6]||(r[6]=c=>d.value=!d.value)},tt,2)])])):(n(),l("div",ze,[e("div",Xe,[e("div",He,m(a.data.name),1),e("div",Ke,[e("div",Je,[Qe,e("div",ea,m(a.data.discount)+" %",1)])]),e("div",aa,[e("div",ta,[a.data.balance-a.data.debt<0?(n(),l("div",sa,"\u0417\u0430\u0434\u043E\u043B\u0436\u0435\u043D\u043D\u043E\u0441\u0442\u044C: "+m((a.data.balance-a.data.debt).toLocaleString("ru").replace(",",".").substring(1))+" \u20BD",1)):(n(),l("div",na,"\u0411\u0430\u043B\u0430\u043D\u0441: "+m(a.data.balance.toLocaleString("ru").replace(",","."))+" \u20BD",1))])]),e("div",oa,[e("div",ua,[e("div",la,[e("span",ia,m(a.data.case),1),a.data.case==="\u043E\u0442\u0441\u0440\u043E\u0447\u043A\u0430"?(n(),l("span",ca,m(a.data.deferment)+" "+m(y(v)(a.data.deferment)),1)):D("",!0),a.data.case==="\u043F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0430"?(n(),l("span",da,m(a.data.percent)+"%",1)):D("",!0)]),a.data.case!=="\u043F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0430"?(n(),l("div",ra,[ma,e("span",pa,m(a.data.date),1)])):D("",!0)])]),e("div",va,[e("div",ha,[ya,e("span",ga,m(a.data.contract),1)]),e("div",_a,[fa,e("span",xa,m(Number(a.data.limit).toLocaleString("ru").replace(",","."))+" \u20BD",1)])])]),e("div",Ca,[e("div",$a,[e("span",ba,[e("span",Aa,m(a.data.spent.toLocaleString("ru").replace(",","."))+" \u20BD",1)])]),e("div",{class:L("company-card-showdoc"+(d.value?" active":"")),onClick:r[0]||(r[0]=c=>d.value=!d.value)},Ea,2)])]))],2)):(n(),l("div",st,ut))}}),lt={key:0,class:"company-head-wrap"},it={key:1,class:"company-head-wrap"},ct=k({__name:"CompanyStorageBar",props:{data:{type:Array,required:!0},modelValue:{type:Number}},emits:["update:modelValue","prev","next"],setup(a,{emit:o}){const t=a,d=250,v=s=>{const u=t.data[s].guid;let h=0,C=0,$=0,B=0;const w=document.querySelector("#"+u+"-"+s);w&&($=w.getBoundingClientRect().x,B=w.getBoundingClientRect().x+w.getBoundingClientRect().width);const b=document.querySelector(".company-head-elem");b&&(h=b.getBoundingClientRect().x,C=b.getBoundingClientRect().x+b.getBoundingClientRect().width);const M=document.querySelector(".company-head-wrap");B>C?(M&&(M.scrollLeft+=d),setTimeout(()=>{o("update:modelValue",s)},250)):$<h?(M&&(M.scrollLeft-=d),setTimeout(()=>{o("update:modelValue",s)},250)):o("update:modelValue",s)},i=s=>{const u=document.querySelector(".company-head-wrap");u&&(u.scrollLeft+=s),setTimeout(()=>{s>0?o("next"):o("prev")},250)};return(s,u)=>a.data.length!==0?(n(),l("div",lt,[e("div",{class:"btn btn-prev",onClick:u[0]||(u[0]=h=>i(-d))}," \u276E "),(n(!0),l(I,null,P(a.data,(h,C)=>(n(),O(Y,{id:h.guid+"-"+C,key:C,data:h||null,active:C===a.modelValue,onOnClick:$=>v(C)},null,8,["id","data","active","onOnClick"]))),128)),e("div",{class:"btn btn-next",onClick:u[1]||(u[1]=h=>i(d))}," \u276F ")])):(n(),l("div",it,[f(Y)]))}}),dt={class:"company-sale sale"},rt={class:"sale-progressbar-wrap"},mt={class:"sale-progressbar content-elem tooltip"},pt={class:"sale-progressbar-val"},vt={class:"sale-progressbar-val-money"},ht={class:"company-sale-card"},yt={class:"table"},gt={class:"table-row"},_t={class:"table-sale"},ft=k({__name:"CompanySaleBar",props:{spent:{type:Number,required:!0},modelValue:{type:Number,required:!0}},setup(a){const o=a,t=g(()=>o.modelValue),d=[{progressMoneyMin:0,progressMoneyMax:5e4,discount:0,next:2},{progressMoneyMin:5e4,progressMoneyMax:99e3,discount:2,next:3},{progressMoneyMin:1e5,progressMoneyMax:199999,discount:3,next:4},{progressMoneyMin:2e5,progressMoneyMax:399999,discount:4,next:6},{progressMoneyMin:4e5,progressMoneyMax:599999,discount:6,next:8},{progressMoneyMin:6e5,progressMoneyMax:799999,discount:8,next:9},{progressMoneyMin:8e5,progressMoneyMax:999999,discount:9,next:10},{progressMoneyMin:1e6,progressMoneyMax:5999999,discount:10,next:15},{progressMoneyMin:6e6,progressMoneyMax:9999999,discount:15,next:17},{progressMoneyMin:1e7,progressMoneyMax:19999999,discount:17,next:18},{progressMoneyMin:2e7,progressMoneyMax:29999999,discount:18,next:20},{progressMoneyMin:3e7,progressMoneyMax:1/0,discount:20,next:0}];let v=g(()=>{let s=d.filter(u=>o.spent>=u.progressMoneyMin&&o.spent<u.progressMoneyMax);return s.length>0?s[0]:d[0]}),i=g(()=>v.value.progressMoneyMax!=1/0?o.spent/v.value.progressMoneyMax*100:100);return g(()=>v.value.progressMoneyMax-o.spent),(s,u)=>(n(),l("div",dt,[e("div",rt,[e("div",mt,[e("div",{class:"sale-progressbar-line",style:X("width: "+y(i)+"%")},[e("div",pt,[e("div",null,[e("span",vt,"("+m(a.spent.toLocaleString("ru").replace(",","."))+"\xA0\u20BD)",1)])])],4)])]),e("div",ht,[e("div",yt,[e("div",gt,[e("div",_t,"\u0412\u0430\u0448\u0430 \u0441\u043A\u0438\u0434\u043A\u0430 "+m(y(t))+" %",1)])])])]))}}),xt={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",fill:"none"},Ct=e("rect",{width:"2.254",height:"22.535",x:".25",y:"2.079",fill:"#A5A7A9",rx:"1.127",transform:"rotate(-45 .25 2.08)"},null,-1),$t=e("rect",{width:"2.254",height:"22.535",fill:"#A5A7A9",rx:"1.127",transform:"scale(-1 1) rotate(-45 -6.254 22.198)"},null,-1),bt=[Ct,$t];function At(a,o){return n(),l("svg",xt,bt)}var Mt={render:At};const Et={class:"company-calendar-box content-elem"},wt=H('<form class="company-search-wrap" action=""><div class="company-search-input-wrap"><input class="company-search-input" type="text" placeholder="\u041F\u043E\u0438\u0441\u043A"><img class="company-search-input-clear" src="'+Mt+'" alt=""></div><button class="company-search-btn gradient-btn"><img class="company-search-btn-img" src="'+ee+'" alt=""></button></form>',1),Dt=k({__name:"CompanyCalendar",props:{data:{type:Array}},setup(a){var s;const o=a,t=x(),d=x((s=z("docDate"))!=null?s:"");V(d,u=>{t.value.getApi().gotoDate(new Date(u))}),Q(()=>{t.value.getApi().today()});let v=g(()=>o.data===null?[]:o.data),i=g(()=>({plugins:[de,re,me],headerToolbar:{left:"today prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",duration:{days:3},locale:pe,events:v.value?v.value.map(u=>({title:`\u0423\u041F\u0414 ${u.number} \u043D\u0430 ${u.debt}\u20BD`,start:u.expires_date,backgroundColor:"#378006",allDay:!0,display:"block"})):[]}));return(u,h)=>(n(),l("div",Et,[wt,f(y(ve),{ref_key:"fullCalendar",ref:t,options:y(i)},null,8,["options"])]))}}),kt={key:0},Bt={class:"top-line product-page"},St={class:"company-head"},Ft={class:"company-head-elem"},Lt={class:"company-head-elem"},Vt={id:"CompanyCalendar"},Nt={class:"company-calendar-wrap"},Zt=k({__name:"company",props:["id"],setup(a){const o=a,t=se(),d=ne(),v=x(!1),i=x(o.id),s=x(0),u=x(""),h=g(()=>t.getters.getCompanyCurrentDiscount(i.value)),C=g(()=>t.getters.getCompanyData(i.value)),$=g(()=>t.getters.getCompanyStoragesData(i.value)),B=g(()=>t.getters.getCompanysList),w=g(()=>t.getters.getCompanySpent(i.value)),b=g(()=>t.getters.getManagerUid(i.value));g(()=>t.getters.getManager);const M=g(()=>t.getters.getManagers),S=g({get:()=>t.getters.getLoader,set:E=>t.commit(oe.SET_LOADER,E)}),R=g(()=>$.value.length===0?null:$.value[s.value?s.value:0].documents);V(()=>o.id,()=>{o.id!==""?i.value=o.id:i.value=t.getters.getCompanys===[]?"":t.getters.getCompanys[0].uid}),V(i,()=>{$.value.length===0?s.value=null:s.value=0,d.push(`/company/${i.value}`),t.commit(T.CLEAR_MANAGER),setTimeout(()=>t.dispatch(N.GET_MANAGER,b.value),1e3),setTimeout(()=>t.dispatch(N.GET_MANAGERS,b.value),1e3)}),ae(()=>{t.getters.isCompanysLoad?(o.id!==""?(i.value=o.id,console.log(o.id),t.commit(T.SET_ACTIVE_COMPANY_ID,o.id),t.commit(T.CLEAR_MANAGER),t.dispatch(N.GET_MANAGER,b.value),t.dispatch(N.GET_MANAGERS,b.value)):i.value=t.getters.getCompanys===[]?"":t.getters.getCompanys[0].uid,v.value=!0):(S.value=!0,Promise.all([t.dispatch(N.GET_COMPANYS)]).finally(()=>{setTimeout(()=>{if(t.getters.isCompanysLoad){const E=t.getters.getCompanys.find(_=>_.uid===o.id);i.value=E?E.uid:t.getters.getCompanys[0].uid,t.commit(T.SET_ACTIVE_COMPANY_ID,o.id),v.value=!0,S.value=!1}else S.value=!1},500)}))}),ue("docDate",u);const G=()=>{s.value!=null&&s.value<$.value.length-1&&(s.value=s.value+1)},U=()=>{s.value&&s.value>0&&(s.value=s.value-1)};return(E,_)=>v.value?(n(),l("div",kt,[e("div",Bt,[f(ge,{data:y(B),modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=A=>i.value=A)},null,8,["data","modelValue"]),f(y(le)),f(y(ce))]),e("div",St,[e("div",Ft,[f(ct,{data:y($),modelValue:s.value,"onUpdate:modelValue":_[1]||(_[1]=A=>s.value=A),onNext:_[2]||(_[2]=A=>G()),onPrev:_[3]||(_[3]=A=>U())},null,8,["data","modelValue"])]),e("div",Lt,[f(he,{data:y(C)},null,8,["data"])])]),f(ft,{spent:y(w),modelValue:y(h),"onUpdate:modelValue":_[4]||(_[4]=A=>te(h)?h.value=A:null)},null,8,["spent","modelValue"]),e("div",Vt,[e("div",Nt,[f(Dt,{data:y(R)},null,8,["data"]),f(y(Ye),{managers:y(M)},null,8,["managers"])])])])):D("",!0)}});export{Zt as default};
