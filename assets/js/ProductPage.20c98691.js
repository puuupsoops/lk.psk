import{f as R,d as b,i as f,o as l,b as m,a as e,e as o,w as A,v as S,t as y,l as D,p as z,k as P,X as N,z as x,u,x as K,y as W,j as X,ag as I,s as Y,K as Q,ah as q,c as J,ai as Z,aj as tt,h as et,Q as ut,a2 as at,ak as ot,al as st}from"./index.70c78815.js";import{N as ct}from"./Notification.9e0f05b4.js";import{_ as dt}from"./PersonalBar.a7707a57.js";import{_ as rt,P as lt}from"./ProductSliderCard.89d0808a.js";import{_ as nt,P as it,c as pt}from"./calcProductDiscount.974ac82c.js";import"./CompanyCalendar.vue_vue_type_style_index_0_lang.70b4c05d.js";import{_ as mt}from"./CompanyBarTop.d671a0eb.js";/* empty css                                                          */import{_ as vt}from"./TopNav.a120b62a.js";import"./vee-validate.esm.9d1132f1.js";import"./object.463815cc.js";const _t={class:"product-add-info content-elem content-elem-info"},gt={class:"content-elem-heading"},ft={key:0,class:"content-elem-bottom content-elem-desc content-hide"},Pt=z(" \u0421\u043E\u043E\u0431\u0449\u0430\u0435\u043C \u0432\u0430\u043C \u0447\u0442\u043E \u0441\u043E\u0433\u043B\u0430\u0441\u043D\u043E \u041F\u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044E \u041F\u0440\u0430\u0432\u0438\u0442\u0435\u043B\u044C\u0441\u0442\u0432\u0430 \u0420\u043E\u0441\u0441\u0438\u0439\u0441\u043A\u043E\u0439 \u0424\u0435\u0434\u0435\u0440\u0430\u0446\u0438\u0438 \u2116 216 \u043E\u0442 29.02.2020 \u0434\u0430\u0442\u0430 \u0437\u0430\u043F\u0440\u0435\u0442\u0430 \u043E\u0431\u043E\u0440\u043E\u0442\u0430 \u043D\u0435\u043C\u0430\u0440\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0439 \u043E\u0431\u0443\u0432\u0438 \u043F\u0435\u0440\u0435\u043D\u0435\u0441\u0435\u043D\u0430 \u043D\u0430 1 \u0438\u044E\u043B\u044F 2020 \u0433\u043E\u0434\u0430. "),ht=["innerHTML"],Dt=b({__name:"ProductAddInfoCard",props:{data:{type:Object}},setup(n){const s=f(!0);return(t,i)=>(l(),m("div",_t,[e("div",gt,[o(S,{name:"text",mode:"out-in"},{default:A(()=>[(l(),m("div",{key:s.value,class:"content-elem-heading-text"},"\u0414\u043E\u043F. \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B"))]),_:1}),e("div",{class:"content-elem-heading-btn content-hide-btn",onClick:i[0]||(i[0]=r=>s.value=!s.value)},y(s.value?"\u0421\u043A\u0440\u044B\u0442\u044C \u2014":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C +"),1)]),o(S,{name:"fade"},{default:A(()=>[s.value?(l(),m("div",ft,[Pt,e("div",{class:"video-area",innerHTML:n.data.VIDEO,style:"padding-top: 10px;"},null,8,ht)])):D("",!0)]),_:1})]))}});var Ct=R(Dt,[["__scopeId","data-v-1b24bf9e"]]);const E=n=>(K("data-v-68b8d31a"),n=n(),W(),n),Et={class:"product-parcel"},yt={class:"product-parcel-wrap"},It={class:"product-parcel-elem content-elem"},At={key:0,class:"content-hide"},St={class:"product-parcel-row"},Tt=E(()=>e("div",{class:"product-parcel-text"},"\u041D\u0430\u0446\u0435\u043D\u043A\u0430: ",-1)),$t={class:"product-parcel-value"},bt={class:"product-parcel-value-block"},Ot={class:"product-parcel-row"},Vt=E(()=>e("div",{class:"product-parcel-text"},"\u0426\u0435\u043D\u0430 \u0441 \u043D\u0430\u0446\u0435\u043D\u043A\u043E\u0439: ",-1)),kt={class:"product-parcel-value"},Nt={key:0,class:"product-parcel-text"},xt={class:"product-parcel-elem content-elem"},Rt={key:0,class:"content-hide"},Ut={class:"product-parcel-row"},wt=E(()=>e("div",{class:"product-parcel-text"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E: ",-1)),Bt={class:"product-parcel-row"},Ft=E(()=>e("div",{class:"product-parcel-text"},"\u0421\u0443\u043C\u043C\u0430: ",-1)),Lt={class:"product-parcel-value"},Mt={class:"product-parcel-row"},Ht=E(()=>e("div",{class:"product-parcel-text"},"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0432\u0435\u0441: ",-1)),Gt={class:"product-parcel-value"},jt={class:"product-parcel-row"},zt=E(()=>e("div",{class:"product-parcel-text"},"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1)),Kt={class:"product-parcel-value"},Wt={key:0,class:"product-parcel-text"},Xt=b({__name:"ProductParcelCard",props:{data:{type:Object},discount:{type:Number}},setup(n){const s=n,t=f(!0),i=f(1),r=f(0),v=f("percent"),h=P(()=>{var _;if((_=s.data)!=null&&_.PRICE_OPT){let c=s.discount?Number(s.data.PRICE_OPT)-Number(s.data.PRICE_OPT/100)*s.discount:s.data.PRICE_OPT;return v.value==="add"?Number(c)+Number(r.value):Number(c)+Number(c)/100*Number(r.value)}else return 0});return(_,c)=>(l(),m("div",Et,[e("div",yt,[e("div",It,[o(S,{name:"fade1",mode:"out-in"},{default:A(()=>[t.value?(l(),m("div",At,[e("div",St,[Tt,e("div",$t,[e("div",bt,[o(N,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=p=>r.value=p)},null,8,["modelValue"]),e("button",{class:x("product-parcel-btn"+(v.value==="percent"?" active":"")),onClick:c[1]||(c[1]=p=>v.value="percent")},"%",2),e("button",{class:x("product-parcel-btn"+(v.value==="add"?" active":"")),onClick:c[2]||(c[2]=p=>v.value="add")},"\u20BD",2)])])]),e("div",Ot,[Vt,e("div",kt,y(Number(u(h)).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1)])])):D("",!0)]),_:1}),t.value?D("",!0):(l(),m("div",Nt,"\u041D\u0430\u0446\u0435\u043D\u043A\u0430"))]),e("div",xt,[o(S,{name:"fade2"},{default:A(()=>[t.value?(l(),m("div",Rt,[e("div",Ut,[wt,o(N,{modelValue:i.value,"onUpdate:modelValue":c[3]||(c[3]=p=>i.value=p)},null,8,["modelValue"])]),e("div",Bt,[Ft,e("div",Lt,y(Number(u(h)*i.value).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1)]),e("div",Mt,[Ht,e("div",Gt,y((Number(n.data.WEIGHT?n.data.WEIGHT:0)*i.value).toFixed(3)),1)]),e("div",jt,[zt,e("div",Kt,y((Number(n.data.VALUME?n.data.VALUME:0)*i.value).toFixed(3)),1)])])):D("",!0)]),_:1}),t.value?D("",!0):(l(),m("div",Wt,"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E"))])])]))}});var Yt=R(Xt,[["__scopeId","data-v-68b8d31a"]]);const Qt={class:"top-line product-page"},qt={key:0},Jt=e("br",null,null,-1),Zt={key:1,class:"content-wrap content-product-wrap"},te={class:"content-wrap-elem"},ee={class:"content-elem-desc"},ue={class:"content-wrap-elem"},ae={key:1},oe={key:0},ge=b({__name:"ProductPage",props:{article:{type:String}},setup(n){const s=n,t=et(),i=ut(),r=P({get:()=>t.getters.getLoader,set:g=>t.commit(at.SET_LOADER,g)}),v=f(""),h=f(""),_=f(!1),c=f(!1),p=f(""),T=f([]),U=()=>{i.push({name:"Order"})};X(async()=>{var g;if(s.article&&(r.value=!0,t.dispatch(I.SEARCH_PRODUCT,s.article).then(()=>{_.value=!0,t.getters.getProduct.ID?p.value=t.getters.getProduct.ID:i.push({name:"Product"})}).finally(()=>{r.value=!1})),t.getters.getActiveCompanyId!==""){v.value=t.getters.getActiveCompanyId;return}(!t.getters.isCompanysLoad||!t.getters.isManagerLoad)&&await t.dispatch(Y.GET_COMPANYS),v.value=t.getters.getCompanys===[]?"":(g=t.getters.getCompanys[0])==null?void 0:g.uid}),Q(()=>s.article,g=>{g&&(r.value=!0,t.dispatch(I.SEARCH_PRODUCT,s.article).then(()=>{_.value=!0,t.getters.getProduct.ID?p.value=t.getters.getProduct.ID:i.push({name:"Product"})}).finally(()=>{r.value=!1}))});const w=()=>{r.value=!0,t.dispatch(I.GET_PRODUCT_BY_ID,p.value).then(()=>{p.value=t.getters.getProduct.ID}).finally(()=>{r.value=!1})},O=()=>{_.value=!1,t.commit(st.SET_SEARCH_PRODUCT_CLEAR)},B=()=>{h.value.trim()!==""&&(O(),r.value=!0,t.dispatch(I.SEARCH_PRODUCT,h.value).then(()=>{_.value=!0,p.value=t.getters.getProduct.ID}).finally(()=>{r.value=!1}))},F=()=>{O(),h.value="",i.push("/product")},L=()=>{const g={article:t.getters.getProduct.ARTICLE,guid:t.getters.getProduct.UID,product:t.getters.getProduct,characteristics:T.value};t.dispatch(ot.ADD_POSITION,g),c.value=!0},M=P(()=>t.getters.getCompanysList),H=P(()=>t.getters.getProductOffers),C=P(()=>t.getters.getProduct),V=P(()=>t.getters.getProductFound),G=P(()=>t.getters.getProductImages),j=P(()=>t.getters.getProductProtect),$=P(()=>{var k;const g=String(t.getters.getProduct.STATUS),a=Number((k=t.getters.getProduct)==null?void 0:k.MAX_DISCOUNT),d=Number(t.getters.getCompanyDiscount(v.value,t.getters.getProductOffersORGGUID));return pt(g,a,d)});return(g,a)=>(l(),m("div",null,[e("div",Qt,[o(u(mt),{data:u(M),modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=d=>v.value=d)},null,8,["data","modelValue"]),o(u(ct)),o(u(dt))]),o(u(vt),{catalog:""}),o(u(q),{modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=d=>h.value=d),to:"product",onSearch:a[2]||(a[2]=d=>B())},null,8,["modelValue"]),u(V).length>0?(l(),m("div",qt,[_.value?(l(),J(u(rt),{key:0,title:String(u(C).NAME),price:String(u(C).PRICE_OPT),status:String(u(C).STATUS),discount:u($),onShowSearch:a[3]||(a[3]=d=>F())},null,8,["title","price","status","discount"])):D("",!0),Jt,_.value?(l(),m("div",Zt,[e("div",te,[o(u(Z),{data:u(V),cardType:"search",modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=d=>p.value=d),onOnClick:a[5]||(a[5]=d=>w())},null,8,["data","modelValue"]),e("div",ee,[o(u(nt),{modelValue:T.value,"onUpdate:modelValue":a[6]||(a[6]=d=>T.value=d),data:u(H),discount:u($),onOnClick:a[7]||(a[7]=d=>L())},null,8,["modelValue","data","discount"])]),o(u(Ct),{data:u(C)},null,8,["data"])]),e("div",ue,[o(u(lt),{data:u(G),onToOrder:U},null,8,["data"]),o(u(Yt),{data:u(C),discount:u($)},null,8,["data","discount"]),o(u(it),{data:u(C),protect:u(j)},null,8,["data","protect"])])])):D("",!0)])):(l(),m("div",ae,[_.value?(l(),m("div",oe,"\u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")):D("",!0)])),o(u(tt),{modelValue:c.value,"onUpdate:modelValue":a[8]||(a[8]=d=>c.value=d),message:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0432 \u0437\u0430\u043A\u0430\u0437",timeout:5e3,notification:""},null,8,["modelValue"])]))}});export{ge as default};
