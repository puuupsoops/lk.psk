import{_ as Bu}from"./PersonalBar.1b3becf2.js";import{N as Ou}from"./Notification.0d8400af.js";import{_ as Lu}from"./CompanyBarTop.9e8204a2.js";import{_ as Fu}from"./TopNav.b4bc3b25.js";import{d as de,o as n,b as c,a as u,t as Z,l as k,F as ie,g as me,i,e as r,u as s,aL as G,aq as P,z as w,p as x,h as Pe,k as T,aG as H,aW as He,aX as Iu,L as ye,aj as Ru,aY as Pu,c as S,at as Su,as as We,aO as Tu,aZ as Je,aD as Uu,a_ as q,_ as $e,j as Qu,a$ as Nu,av as eu,W as Ve,b0 as Ge,az as Ae,b1 as qe,U as ge,aV as Ye,aB as Xe,w as $,T as Ze,b2 as R,an as uu,m as tu,ap as Mu,ar as J,s as Ku,aJ as zu}from"./index.319ff497.js";import{_ as Hu}from"./ModalInputFull.6e17fac9.js";import{_ as fe}from"./BaseInput.77d6f7c5.js";const Gu={class:"base-select-wrap"},qu=["value"],Yu=["value"],Xu=["value"],je=de({__name:"SimpleSelect",props:{modelValue:{type:[String,Number]},selectInputData:{type:Array,require:!0},firstElement:{type:Object}},setup(C){return(y,B)=>(n(),c("div",Gu,[u("select",{class:"base-select",value:C.modelValue,onChange:B[0]||(B[0]=p=>y.$emit("update:modelValue",p.target.value))},[C.firstElement?(n(),c("option",{key:0,value:C.firstElement.id},Z(C.firstElement.name),9,Yu)):k("",!0),(n(!0),c(ie,null,me(C.selectInputData,p=>(n(),c("option",{key:p.id,value:p.id},Z(p.name),9,Xu))),128))],40,qu)]))}}),Zu=u("div",{class:"kp-step-title"},"\u0421\u043E\u0431\u0440\u0430\u0442\u044C \u041A\u041F \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0438\u0438",-1),ju={class:"kp-step-body step1"},Wu={class:"kp-step-body-elem"},Ju=u("div",{class:"kp-step-body-elem-text"},[x(" \u0417\u0430\u043A\u0430\u0437\u0430 "),u("div",{class:"kp-step-body-elem-text-sub"}," \u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0435 \u0443\u0436\u0435 \u0438\u043C\u0435\u044E\u0449\u0435\u0433\u043E\u0441\u044F \u0437\u0430\u043A\u0430\u0437\u0430. ")],-1),e0=["flow"],u0=x(" \u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430 "),t0=u("div",{class:"kp-step-body-elem-text-sub"}," \u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u043E\u0433\u043E \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430. ",-1),l0=[u0,t0],a0={class:"kp-step-body-elem"},o0=u("div",{class:"kp-step-body-elem-text"},[x(" \u041F\u043E\u0437\u0438\u0446\u0438\u0439 \u0438\u0437 \u043A\u0430\u0442\u043E\u043B\u043E\u0433\u0430 "),u("div",{class:"kp-step-body-elem-text-sub"}," \u041A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0438\u0437 \u043F\u043E\u0437\u0438\u0446\u0438\u0439 \u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0430 ")],-1),s0={class:"kp-step-actions"},n0=de({__name:"KpStep1",props:{modelValue:{type:String,required:!0},active:{type:Boolean,default:!1},isDraft:{type:Boolean,default:!1}},emits:["update:modelValue","next"],setup(C,{emit:y}){const B=C,p=i(!0),v=i(!1),m=i(!1),L=U=>{U==G.ORDER?(p.value=!0,v.value=!1,m.value=!1):U==G.DRAFT&&B.isDraft?(p.value=!1,v.value=!0,m.value=!1):(p.value=!1,v.value=!1,m.value=!0),y("update:modelValue",U)};return(U,d)=>(n(),c("div",{class:w(["kp-step",{active:C.active}])},[Zu,u("div",ju,[u("div",Wu,[r(P,{modelValue:p.value,"onUpdate:modelValue":d[0]||(d[0]=o=>p.value=o),onOnClick:d[1]||(d[1]=o=>L(s(G).ORDER))},null,8,["modelValue"]),Ju]),u("div",{class:"kp-step-body-elem",tooltip:"\u041E\u0442\u0441\u0443\u0442\u0432\u0443\u044E\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u044B\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0438",flow:C.isDraft?"":"left"},[r(P,{modelValue:v.value,"onUpdate:modelValue":d[2]||(d[2]=o=>v.value=o),onOnClick:d[3]||(d[3]=o=>L(s(G).DRAFT)),disabled:!C.isDraft},null,8,["modelValue","disabled"]),u("div",{class:w(["kp-step-body-elem-text",{disablsed:!C.isDraft}])},l0,2)],8,e0),u("div",a0,[r(P,{modelValue:m.value,"onUpdate:modelValue":d[4]||(d[4]=o=>m.value=o),onOnClick:d[5]||(d[5]=o=>L(s(G).CATALOG_POS))},null,8,["modelValue"]),o0])]),u("div",s0,[u("div",{class:"kp-step-actions-link right",onClick:d[6]||(d[6]=o=>U.$emit("next"))},"\u0414\u0430\u043B\u0435\u0435")])],2))}}),i0={key:0,class:"kp-step-title"},d0={key:1,class:"kp-step-title"},r0={class:"kp-step-body"},v0={key:2,class:"kp-step-body-input"},p0={class:"kp-step-body-row"},c0={class:"kp-step-body-row"},m0={class:"kp-step-body-row"},g0=["flow"],f0=u("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("rect",{width:"2.17029",height:"21.7029",rx:"1.08514",transform:"matrix(0.999975 -0.00708126 -0.00708126 0.999975 11.097 1.26186)",fill:"#A5A7A9"}),u("rect",{width:"2.17029",height:"21.7029",rx:"1.08514",transform:"matrix(0.00708126 -0.999975 -0.999975 0.00708126 22.7798 12.9446)",fill:"#A5A7A9"})],-1),y0={key:3},h0={class:"kp-step-actions"},k0=de({__name:"KpStep2",props:{active:{type:Boolean,default:!1},type:{type:String,required:!0},kp:{type:Object,required:!0}},emits:["next","prev","update:kp"],setup(C,{emit:y}){const B=C,p=Pe(),v=i(B.kp),m=i(-1),L=T(()=>p.getters.getOrdersInputData),U={id:-1,name:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043A\u0430\u0437"},d=i(-1),o=T(()=>p.getters.getOrderDraftsInputData),K={id:-1,name:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A"},Q=T(()=>G),O=i(!1),V=i(!1),f=i(!1),g=i(""),Y=i(!1),ee=i(new Date().toLocaleString("ru").substring(0,10)),_=i(H.cloneDeep(He));_.value.position=H.cloneDeep(B.kp.offer.position),_.value=Iu(_.value);const b=T(()=>p.getters.getCompanysListInput().filter(oe=>oe.id!==""));ye(m,()=>{m.value!=-1&&(O.value=!0,p.dispatch(Ru.GET_ORDER_DETAIL,m.value).finally(()=>{_.value=H.cloneDeep(p.getters.getOrderDetail),O.value=!1}))}),ye(d,()=>{d.value!=-1&&(_.value=H.cloneDeep(p.getters.getOrderDrafts.find(oe=>oe.id==d.value)))}),Pu(()=>{B.active&&(v.value.offer.position=H.cloneDeep(_.value.position),y("update:kp",v.value))});const ae=()=>{m.value=-1,d.value=-1,v.value=H.cloneDeep(Je),_.value=H.cloneDeep(He),y("update:kp",v.value),y("prev")},Be=()=>{v.value.offer.date=new Date(Uu(ee.value)).getTime(),v.value.offer.position=H.cloneDeep(_.value.position),y("next"),y("update:kp",v.value)},F=()=>{g.value.length>=2&&(v.value.offer.customer="",f.value=!0,V.value=!1,Y.value=!1,p.dispatch(q.GET_ORG_BY_INN,g.value).then(()=>{f.value=!1,v.value.offer.customer=p.getters.getKPOrgName,g.value=""}).catch(()=>{V.value=!0,setTimeout(()=>{V.value=!1},1e4),f.value=!1,g.value=""}))};return(oe,h)=>(n(),c("div",{class:w(["kp-step",{active:C.active}])},[C.type===s(Q).ORDER?(n(),c("div",i0,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043A\u0430\u0437")):k("",!0),C.type===s(Q).DRAFT?(n(),c("div",d0,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A")):k("",!0),u("div",r0,[C.type===s(Q).ORDER?(n(),S(je,{key:0,modelValue:m.value,"onUpdate:modelValue":h[0]||(h[0]=D=>m.value=D),"select-input-data":s(L),"first-element":m.value===-1?s(U):null},null,8,["modelValue","select-input-data","first-element"])):k("",!0),C.type===s(Q).DRAFT?(n(),S(je,{key:1,modelValue:d.value,"onUpdate:modelValue":h[1]||(h[1]=D=>d.value=D),"select-input-data":s(o),"first-element":d.value===-1?s(K):null},null,8,["modelValue","select-input-data","first-element"])):k("",!0),m.value!==-1||d.value!==-1||C.type===s(G).CATALOG_POS?(n(),c("div",v0,[u("div",p0,[r(fe,{modelValue:v.value.offer.n,"onUpdate:modelValue":h[2]||(h[2]=D=>v.value.offer.n=D),label:"\u041D\u043E\u043C\u0435\u0440 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430",style:{width:"100%"}},null,8,["modelValue"]),r(Su,{modelValue:ee.value,"onUpdate:modelValue":h[3]||(h[3]=D=>ee.value=D)},null,8,["modelValue"])]),u("div",c0,[r(fe,{modelValue:v.value.offer.executor,"onUpdate:modelValue":h[4]||(h[4]=D=>v.value.offer.executor=D),label:"\u041F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A",onInput:h[5]||(h[5]=D=>v.value.offer.executorUID=""),style:{width:"100%"}},null,8,["modelValue"]),r(We,{data:s(b),modelValue:v.value.offer.executorUID,"onUpdate:modelValue":h[6]||(h[6]=D=>v.value.offer.executorUID=D),onOnInput:h[7]||(h[7]=D=>{var he;return v.value.offer.executor=((he=s(b).find(ke=>ke.id===v.value.offer.executorUID))==null?void 0:he.name)||""})},null,8,["data","modelValue"])]),u("div",m0,[r(fe,{modelValue:v.value.offer.customer,"onUpdate:modelValue":h[8]||(h[8]=D=>v.value.offer.customer=D),label:"\u041F\u043E\u043A\u0443\u043F\u0430\u0442\u0435\u043B\u044C",error:V.value,loading:f.value,style:{width:"100%"}},null,8,["modelValue","error","loading"]),u("div",{class:"kp-step-body-button",tooltip:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u0418\u041D\u041D",flow:Y.value?"":"up",onClickCapture:h[12]||(h[12]=D=>Y.value=!0)},[r(Hu,{modelValue:g.value,"onUpdate:modelValue":h[9]||(h[9]=D=>g.value=D),show:Y.value,"onUpdate:show":h[10]||(h[10]=D=>Y.value=D),"show-ok":"",onOnOk:h[11]||(h[11]=D=>F()),label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u041D\u041D",style:{left:"-125px"}},null,8,["modelValue","show"]),f0],40,g0)])])):k("",!0),m.value!==-1||d.value!==-1||C.type===s(G).CATALOG_POS?(n(),c("div",y0,[O.value?(n(),S($e,{key:0,center:""})):C.active?(n(),S(Tu,{key:1,order:_.value,"onUpdate:order":h[13]||(h[13]=D=>_.value=D),"is-kp":""},null,8,["order"])):k("",!0)])):k("",!0)]),u("div",h0,[u("div",{class:"kp-step-actions-link",onClick:h[14]||(h[14]=D=>ae())},"\u041D\u0430\u0437\u0430\u0434"),u("div",{class:"kp-step-actions-link right",onClick:h[15]||(h[15]=D=>Be())},"\u0414\u0430\u043B\u0435\u0435")])],2))}}),_0={xmlns:"http://www.w3.org/2000/svg",width:"34",height:"42",fill:"none"},E0=u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M28.007.81 5.98.8C3.137.799.8 3.137.8 5.98v30.541c0 2.843 2.337 5.18 5.18 5.18h22.035c2.843 0 5.18-2.337 5.18-5.18l.01-30.572c0-2.817-2.3-5.139-5.198-5.14Zm3.114 35.667c0 1.744-1.368 3.15-3.105 3.15H5.98a3.1 3.1 0 0 1-3.105-3.106V5.936A3.102 3.102 0 0 1 5.98 2.83L28 2.808c1.786-.001 3.103 1.377 3.104 3.128z"},null,-1),C0=u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M6.94 11.337h2.71c.544 0 1.037-.436 1.037-1.038A1.01 1.01 0 0 0 9.65 9.262H6.94a1.037 1.037 0 1 0 0 2.075zM6.93 16.878h2.713c.544 0 1.037-.436 1.037-1.038a1.01 1.01 0 0 0-1.037-1.037H6.93a1.037 1.037 0 1 0 0 2.075zM23.871 11.36h2.71c.545 0 1.038-.436 1.038-1.038a1.01 1.01 0 0 0-1.037-1.037h-2.71a1.037 1.037 0 1 0 0 2.074zM23.894 16.899h2.71c.544 0 1.038-.436 1.038-1.038a1.01 1.01 0 0 0-1.038-1.037h-2.71a1.037 1.037 0 1 0 0 2.075zM5.903 20.957c0 .544.435 1.037 1.037 1.037h19.655a1.037 1.037 0 1 0 0-2.075H6.94c-.544 0-1.037.436-1.037 1.038zM5.884 25.873c0 .544.435 1.038 1.037 1.038h19.656a1.037 1.037 0 1 0 0-2.075H6.92c-.544 0-1.037.435-1.037 1.037zM5.875 30.978c0 .544.435 1.037 1.037 1.037h19.656a1.037 1.037 0 1 0 0-2.075H6.912c-.544 0-1.037.436-1.037 1.038z"},null,-1),w0=u("path",{fill:"#a5a7a9",d:"M12.646 17.067q-.48 0-.814-.343-.336-.343-.336-.806v-8.43q0-.462.336-.806.335-.343.814-.343h8.429q.479 0 .814.343.335.344.335.807v8.429q0 .463-.335.806t-.814.343zm0-1.15h8.429V7.49h-8.43zm.766-1.149h6.897l-2.3-3.065-1.724 2.3-1.149-1.533zm-.766 1.15v-8.43Z"},null,-1),x0=[E0,C0,w0];function D0(C,y){return n(),c("svg",_0,x0)}var b0={render:D0};const V0={xmlns:"http://www.w3.org/2000/svg",width:"34",height:"42",fill:"none"},A0=u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M28.007.81 5.98.8C3.137.799.8 3.137.8 5.98v30.541c0 2.843 2.337 5.18 5.18 5.18h22.035c2.843 0 5.18-2.337 5.18-5.18l.01-30.572c0-2.817-2.3-5.139-5.198-5.14Zm3.114 35.667c0 1.744-1.368 3.15-3.105 3.15H5.98a3.1 3.1 0 0 1-3.105-3.106V5.936A3.102 3.102 0 0 1 5.98 2.83L28 2.808c1.786-.001 3.103 1.377 3.104 3.128z"},null,-1),$0=u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M19.232 11.337h7.36c.544 0 1.037-.436 1.037-1.038a1.01 1.01 0 0 0-1.037-1.037h-7.36a1.037 1.037 0 1 0 0 2.075zM19.223 16.878h7.36c.544 0 1.037-.436 1.037-1.038a1.01 1.01 0 0 0-1.037-1.037h-7.36a1.037 1.037 0 1 0 0 2.075zM5.903 20.957c0 .544.435 1.037 1.037 1.037h19.655a1.037 1.037 0 1 0 0-2.075H6.94c-.544 0-1.037.436-1.037 1.038zM5.884 25.873c0 .544.435 1.038 1.037 1.038h19.656a1.037 1.037 0 1 0 0-2.075H6.92c-.544 0-1.037.435-1.037 1.037zM5.875 30.978c0 .544.435 1.037 1.037 1.037h19.656a1.037 1.037 0 1 0 0-2.075H6.912c-.544 0-1.037.436-1.037 1.038z"},null,-1),B0=u("path",{fill:"#a5a7a9",d:"M6.86 17.067q-.48 0-.814-.343-.336-.343-.336-.806v-8.43q0-.462.336-.806.334-.343.813-.343h8.43q.479 0 .813.343.336.344.336.807v8.429q0 .463-.336.806-.334.343-.813.343zm0-1.15h8.429V7.49h-8.43Zm.766-1.149h6.896l-2.299-3.065-1.724 2.3-1.15-1.533zm-.767 1.15v-8.43Z"},null,-1),O0=[A0,$0,B0];function L0(C,y){return n(),c("svg",V0,O0)}var F0={render:L0};const I0={xmlns:"http://www.w3.org/2000/svg",width:"34",height:"42",fill:"none"},R0=u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M28.007.81 5.98.8C3.137.799.8 3.137.8 5.98v30.541c0 2.843 2.337 5.18 5.18 5.18h22.035c2.843 0 5.18-2.337 5.18-5.18l.01-30.572c0-2.817-2.3-5.139-5.198-5.14Zm3.114 35.667c0 1.744-1.368 3.15-3.105 3.15H5.98a3.1 3.1 0 0 1-3.105-3.106V5.936A3.102 3.102 0 0 1 5.98 2.83L28 2.808c1.786-.001 3.103 1.377 3.104 3.128z"},null,-1),P0=u("path",{fill:"#a5a7a9",stroke:"#a5a7a9","stroke-width":".4",d:"M6.94 11.337h7.36c.544 0 1.037-.436 1.037-1.038a1.01 1.01 0 0 0-1.038-1.037H6.94a1.037 1.037 0 1 0 0 2.075zM6.93 16.878h7.36c.545 0 1.038-.436 1.038-1.038a1.01 1.01 0 0 0-1.037-1.037H6.93a1.037 1.037 0 1 0 0 2.075zM5.903 20.957c0 .544.435 1.037 1.037 1.037h19.655a1.037 1.037 0 1 0 0-2.075H6.94c-.544 0-1.037.436-1.037 1.038zM5.884 25.873c0 .544.435 1.038 1.037 1.038h19.656a1.037 1.037 0 1 0 0-2.075H6.92c-.544 0-1.037.435-1.037 1.037zM5.875 30.978c0 .544.435 1.037 1.037 1.037h19.656a1.037 1.037 0 1 0 0-2.075H6.912c-.544 0-1.037.436-1.037 1.038z"},null,-1),S0=u("path",{fill:"#a5a7a9",d:"M18.27 17.067q-.48 0-.814-.343-.336-.343-.336-.806v-8.43q0-.462.336-.806.335-.343.813-.343h8.43q.479 0 .814.343.335.344.335.807v8.429q0 .463-.335.806t-.814.343zm0-1.15h8.429V7.49h-8.43zm.766-1.149h6.896l-2.298-3.065-1.725 2.3-1.149-1.533zm-.767 1.15v-8.43Z"},null,-1),T0=[R0,P0,S0];function U0(C,y){return n(),c("svg",I0,T0)}var Q0={render:U0};const N0=u("div",{class:"kp-step-title"},"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F",-1),M0={class:"kp-step-body"},K0={class:"kp-step-body-input"},z0=u("div",{class:"orders-list-elem"},[u("div",{class:"table-arrow"})],-1),H0=u("div",{class:"orders-list-elem"}," \u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0443\u0441\u043B\u043E\u0432\u0438\u044F",-1),G0=[z0,H0],q0={class:"kp-step-body-row"},Y0=u("span",{class:"kp-step-body-row-elem"},"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438",-1),X0=u("div",null,"\u0421\u0430\u043C\u043E\u0432\u044B\u0432\u043E\u0437",-1),Z0=u("div",null,"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430",-1),j0={key:1},W0=x("\u20BD "),J0=u("span",{class:"kp-step-body-elem-text-sub"},"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",-1),et=[W0,J0],ut={class:"kp-step-body-row"},tt=u("span",{class:"kp-step-body-row-elem"},"\u041F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0430",-1),lt={key:1,style:"margin-left: 10px"},at={key:2,class:"kp-step-body-elem-text-sub",style:"margin-left: 10px"},ot={class:"kp-step-body-row"},st=u("span",{class:"kp-step-body-row-elem"},"\u041E\u0442\u0441\u0440\u043E\u0447\u043A\u0430",-1),nt=x("\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E "),it=u("br",null,null,-1),dt=x("\u043A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u043D\u044B\u0445 \u0434\u043D\u0435\u0439"),rt=[nt,it,dt],vt={style:"margin-left: 30px"},pt=x("\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E"),ct=u("br",null,null,-1),mt=x("\u0440\u0430\u0431\u043E\u0447\u0438\u0445 \u0434\u043D\u0435\u0439"),gt=[pt,ct,mt],ft=u("div",{class:"orders-list-elem"},[u("div",{class:"table-arrow"})],-1),yt=u("div",{class:"orders-list-elem"},"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",-1),ht=[ft,yt],kt={class:"kp-step-body-row"},_t=u("span",{class:"kp-step-body-row-elem"},"\u0422\u0435\u043A\u0441\u0442",-1),Et={class:"kp-step-body-row"},Ct=u("span",{class:"kp-step-body-row-elem"},"\u041B\u043E\u0433\u043E",-1),wt={key:0,class:"kp-step-body-add-file-label",for:"file-upload"},xt={key:1,class:"kp-step-body-elem-header-align-wrap"},Dt=u("div",{class:"kp-step-body-elem-text-sub"},"\u0412\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435:",-1),bt={style:"text-align: center;"},Vt={key:1,class:"kp-step-body-column",style:"justify-content: center"},At={class:"product-slider-wrap"},$t={class:"product-slider-main"},Bt=["src"],Ot={style:"text-align: center; margin-top: -50px;"},Lt=x("\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),Ft=u("span",null,"\u041B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u0432 \u043D\u0435\u0442. \u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043B\u043E\u0433\u043E\u0442\u0438\u043F.",-1),It=[Ft],Rt={class:"kp-step-body-row"},Pt=u("span",{class:"kp-step-body-row-elem"},"\u0411\u0430\u043D\u043D\u0435\u0440",-1),St={key:0,class:"kp-step-body-add-file-label",for:"banner-upload"},Tt={key:1,style:{color:"#A5A7A9","padding-left":"95px",opacity:"0.7"}},Ut=x("\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u043C\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440 \u0431\u0430\u043D\u043D\u0435\u0440\u0430 \u0434\u043B\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438, \u0432\u044B\u0441\u043E\u0442\u0430: "),Qt=u("strong",null,"240",-1),Nt=x("px, "),Mt=u("strong",null,"x",-1),Kt=x(" \u0448\u0438\u0440\u0438\u043D\u0430: "),zt=u("strong",null,"2040",-1),Ht=x("px."),Gt=[Ut,Qt,Nt,Mt,Kt,zt,Ht],qt={style:"text-align: center;"},Yt={key:1,class:"kp-step-body-column",style:"justify-content: center"},Xt={class:"product-slider-wrap"},Zt={class:"product-slider-main"},jt=["src"],Wt={key:2,style:"text-align: center; margin-top: -50px;"},Jt=x("\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),el=u("span",null,"\u0411\u0430\u043D\u043D\u0435\u0440\u043E\u0432 \u043D\u0435\u0442. \u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0431\u0430\u043D\u043D\u0435\u0440.",-1),ul=[el],tl={class:"order-comment-form show"},ll=u("div",{class:"order-comment-title"},[u("span",null,"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439")],-1),al={class:"kp-step-body-row",style:"justify-content: flex-end"},ol=x(" \u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435: "),sl=u("div",{style:"margin-left: 10px"},"PDF",-1),nl=u("div",{style:"margin-left: 10px"},"WORD",-1),il={class:"kp-step-body-row",style:"justify-content: flex-end; align-items: baseline;"},dl=x(" \u041E\u0440\u0438\u0435\u043D\u0442\u0430\u0446\u0438\u044F \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430: "),rl={style:"display: flex; flex-direction: column; margin-left: 20px; margin-right: 148px;"},vl={style:"display: flex; align-items: center;"},pl=u("div",{style:"margin-left: 10px"},"\u0410\u043B\u044C\u0431\u043E\u043C",-1),cl={style:"display: flex; align-items: center; padding-top: 12px;"},ml=u("div",{style:"margin-left: 10px"},"\u041F\u043E\u0440\u0442\u0440\u0435\u0442",-1),gl={class:"content-heading-wrap kp",style:{display:"block"}},fl={key:0,style:"display: flex; align-items: center; max-width: 580px; padding: 10px 5px;"},yl={class:"select-input-container"},hl=["onClick"],kl={class:w("kp-canvas-controller")},_l=x("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043B\u043E\u0433\u043E\u0442\u0438\u043F"),El={style:"display: grid;"},Cl=x("\u{1F815}"),wl=x("\u{1F814}"),xl=x("\u{1F817}"),Dl=x("\u279D"),bl=u("span",{style:"margin-bottom: 10px;"},"\u041C\u0430\u0441\u0448\u0442\u0430\u0431 \u043D\u0430\u043D\u0435\u0441\u0435\u043D\u0438\u044F",-1),Vl={style:"display: flex;"},Al=x("-"),$l=x("+"),Bl={style:{display:"flex","align-items":"center"}},Ol=x("?"),Ll=u("span",{style:"margin-bottom: 10px;"},"\u0423\u0433\u043E\u043B \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u0430",-1),Fl={style:"display: flex;"},Il=x("L"),Rl=x("R"),Pl=x("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),Sl=x("\u0421\u043A\u0430\u0447\u0430\u0442\u044C"),Tl={key:1,class:"kp-product-image-container"},Ul=["onClick","src"],Ql=tu('<div style="display:table;margin:auto;"><span><div style="position:relative;" width="720" height="1080"><canvas width="720" height="1080" style="z-index:-1;"></canvas><canvas id="canvas-back" width="720" height="1080" style="position:absolute;left:0;top:0;z-index:0;"></canvas><canvas id="canvas-front" width="720" height="1080" style="position:absolute;left:0;top:0;z-index:1;"></canvas></div></span><span style="display:none;"><canvas id="c1" width="720" height="1080"></canvas></span></div>',1),Nl={class:"kp-step-actions"},Ml=de({__name:"KpStep3",props:{active:{type:Boolean,default:!1},kp:{type:Object,require:!0}},emits:["next","prev","update:kp"],setup(C,{emit:y}){const B=C,p=Pe(),v=i(!1),m=i(!1),L=i(!1),U=i(),d=i(),o=i(),K=i(),Q=i(),O=i(),V=i(),f=i(),g=i(),Y=100,ee=100,_=i(Y),b=i(ee),ae=i(!1),Be=l=>l.replace(/&quot;/gi,'"'),F=i("10%"),oe=l=>{console.log("click",l)},h=l=>{console.log("out",l.target.value);let e=l.target.value;(e>=360||e<=-360)&&(e=0),I.value=e,_e.value=I.value.toString();let t=f.value+_.value/2,E=g.value+b.value/2;o.value.getContext("2d").translate(t,E),o.value.getContext("2d").rotate(I.value*Math.PI/180),o.value.getContext("2d").translate(-t,-E),o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value,b.value),o.value.getContext("2d").resetTransform()},D=l=>{console.log(l),F.value=F.value.replace("%","")},he=l=>{console.log("scaleFocusOutHandler",l);let e=Number(F.value.replace("%",""))*10;if(console.log(e),F.value+="%",console.log(e),e==0){o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value=Y,b.value=ee);return}_.value=Y,b.value=ee,e>0?(F.value="0",Oe(e)):(F.value="0",Le(e*-1))},ke=l=>{console.log("scaleInputChange");let e=F.value.replace("%",""),t=Number(e)*10;console.log(t),t+=l,console.log(t),F.value=(t/10).toString()+"%"};ye(F,()=>{console.log(F.value)});const re=i(),ve=i([]),lu=l=>{l!="null"&&(v.value=!0,ve.value=[],console.log(l),Mu.get("/product/search?QUERY="+l+"&OPTION=8").then(e=>{console.log(e.data.IMAGES),e.data.IMAGES.forEach(t=>{ve.value.push(t)})}).finally(()=>{v.value=!1,console.log(ve.value)}))},au=l=>{console.log(l),ou(l)},ou=l=>{let e=new Image(O.value.width,O.value.height);e.onload=function(){O.value.getContext("2d").drawImage(e,0,0,O.value.width,O.value.height),O.value.getContext("2d").save()},e.crossOrigin="Anonymous",e.src=l+"?no-cache-please"},su=l=>new Promise((e,t)=>{const E=new FileReader;E.readAsDataURL(l),E.onload=()=>e(E.result),E.onerror=z=>t(z)}),nu=()=>{console.log("Image download"),V.value.getContext("2d").clearRect(0,0,V.value.width,V.value.height),V.value.getContext("2d").drawImage(O.value,0,0),V.value.getContext("2d").drawImage(o.value,0,0),V.value.toBlob(l=>{console.log(l);const e=window.URL.createObjectURL(l),t=document.createElement("a");t.href=e,t.setAttribute("download","image.png"),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(e)})},iu=async()=>{if(re.value&&re.value.files){let l=await su(re.value.files[0]);d.value=new Image,d.value.src=l,d.value.onload=()=>{console.log("Logo load",d.value),o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value,b.value),o.value.getContext("2d").save(),Qe()}}},du=()=>{re.value.click()},ue=()=>{let l=f.value+_.value/2,e=g.value+b.value/2;o.value.getContext("2d").translate(l,e),o.value.getContext("2d").rotate(I.value*Math.PI/180),o.value.getContext("2d").translate(-l,-e),o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value,b.value),o.value.getContext("2d").resetTransform()},I=i(0),_e=i(I.value.toString());ye(I,()=>{console.log("watch",I.value),(I.value>359||I.value<-359)&&(I.value=0),_e.value=I.value.toString()});const Se=l=>{l>0&&(l*=-1),Ue(l)},Te=l=>{Ue(l)},Ue=l=>{if(l==0)return;I.value=Number(I.value)+Number(l);let e=f.value+_.value/2,t=g.value+b.value/2;o.value.getContext("2d").translate(e,t),o.value.getContext("2d").rotate(I.value*Math.PI/180),o.value.getContext("2d").translate(-e,-t),o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value,b.value),o.value.getContext("2d").resetTransform()},Oe=l=>{o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value+=l,b.value+=l),ue(),ke(l)},Le=l=>{console.log("zoomDown"),o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value-=l,b.value-=l),ue(),ke(l*-1)},Qe=()=>{o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),f.value++,o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value,b.value),ue()},ru=()=>{o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),f.value--,o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value,b.value),ue()},vu=()=>{o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),g.value--,o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value,b.value),ue()},pu=()=>{o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),g.value++,o.value.getContext("2d").drawImage(d.value,f.value,g.value,_.value,b.value),ue()},cu=()=>{let l=o.value.getBoundingClientRect();K.value=l.x,Q.value=l.y,console.log("getFrontCanvasOffset X: ",K.value," Y: ",Q.value)},Fe=l=>{l.preventDefault()};Qu(async()=>{B.active&&y("update:kp",a.value),o.value=window.document.getElementById("canvas-front"),O.value=window.document.getElementById("canvas-back"),V.value=window.document.getElementById("c1");let l=window.document.getElementById("canvas-back"),e=window.document.getElementById("canvas-front");U.value=l.getContext("2d");const t=new Image(720,1080);t.onload=function(){var A,M;(A=l.getContext("2d"))==null||A.drawImage(t,0,0,720,1080),(M=l.getContext("2d"))==null||M.save()},t.crossOrigin="Anonymous",t.src="https://psk.expert/upload/iblock/77d/w8huebomv7df5plmaq7ok88rcpemw03m/kos610_aaa.jpg";let E=!1,z=e.width/2,pe=e.height/2,Ke=_.value,ze=b.value;f.value=z-Ke/2,g.value=pe-ze/2,d.value=new Image,d.value.src="https://psk.expert/upload/lk-kp-logo-NOT-REMOVE.png",d.value.crossOrigin="Anonymous",d.value.onload=()=>{var A,M;(A=e.getContext("2d"))==null||A.drawImage(d.value,f.value,g.value,Ke,ze),(M=e.getContext("2d"))==null||M.save()},e.onmousedown=A=>{cu(),console.log("startLogoPosX",f.value,"startLogoPosY",g.value),console.log("mouseDownCanvas",A);let M=A.clientX-K.value,ce=A.clientY-Q.value,bu=f.value,Vu=f.value+_.value,Au=g.value,$u=g.value+b.value;M>bu&&M<Vu&&ce>Au&&ce<$u?(E=!0,console.log("click Image"),window.addEventListener("wheel",Fe,{passive:!1})):console.log("didnt click Image"),console.log("isDraggable",E)},e.onmouseup=()=>{E=!1,window.removeEventListener("wheel",Fe,!1)},e.onmouseout=()=>{!E||(E=!1,window.removeEventListener("wheel",Fe,!1))},e.onmousemove=A=>{if(!E)return;let M=A.clientX-K.value-f.value-_.value/2,ce=A.clientY-Q.value-g.value-b.value/2;console.log("move x:",M," y: ",ce),o.value.getContext("2d").clearRect(0,0,o.value.width,o.value.height),o.value.getContext("2d").drawImage(d.value,f.value+=M,g.value+=ce,_.value,b.value),ue()},e.onwheel=A=>{if(!!E)if(A.deltaY>0){if(console.log("wheel down",A.deltaY),ae.value){Se(-5);return}if(_.value<=10||b.value<=10)return;Le(10)}else{if(console.log("wheel up",A.deltaY),ae.value){Te(5);return}if(_.value>=700||b.value>=800)return;Oe(10)}}});const mu=()=>{console.log(123),console.log("Image add to attachments"),V.value.getContext("2d").clearRect(0,0,V.value.width,V.value.height),V.value.getContext("2d").drawImage(O.value,0,0),V.value.getContext("2d").drawImage(o.value,0,0)},a=i(B.kp),Ie=T(()=>{let l=0;return a.value.offer.position.forEach(e=>{l=l+e.total}),l}),Ee=i(!1),j=i(!1),Re=i(!0),se=i(!1),Ce=i(""),X=i(!1),W=T(()=>p.getters.getKPLogoList),Ne=T(()=>p.getters.getKPLogoListOrigin),N=T(()=>p.getters.getKPBannerList),Me=T(()=>p.getters.getKPBannerListOrigin),te=i(0),we=i(!0),xe=i(!1),De=i(!1),be=i(!0),gu=l=>{if(!X.value){let e=l.target.files[0],t=e.name,E=new FileReader;E.onloadend=()=>{Ce.value=E.result,X.value=!0,p.dispatch(q.ADD_KP_LOGO,{name:t,file:Ce.value}).then(()=>{a.value.headerLogo=p.getters.getKPLogoId,X.value=!1})},E.readAsDataURL(e)}},fu=l=>{if(!X.value){let e=l.target.files[0],t=e.name,E=new FileReader;E.onloadend=()=>{Ce.value=E.result,X.value=!0,p.dispatch(q.ADD_KP_BANNER,{name:t,file:Ce.value}).then(()=>{a.value.bannerSrc=p.getters.getKPBannerSrc,X.value=!1})},E.readAsDataURL(e)}},yu=()=>{p.commit(J.SET_KP_LOGO_LIST_NEXT),++le.value,le.value>=W.value.length&&(le.value=0)},hu=()=>{p.commit(J.SET_KP_LOGO_LIST_PREV),--le.value,le.value<0&&(le.value=W.value.length-1)},ku=()=>{p.commit(J.SET_KP_BANNER_LIST_NEXT),++te.value,te.value>=N.value.length&&(te.value=0)},_u=()=>{p.commit(J.SET_KP_BANNER_LIST_PREV),--te.value,te.value<0&&(te.value=N.value.length-1)},ne=T(()=>Nu),Eu=T(()=>p.getters.getShipmentsAddressInputData),le=i(0);p.dispatch(q.GET_KP_LOGO),p.dispatch(eu.GET_SHIPMENTS_ADDRESS);const Cu=T(()=>p.getters.getCompanysListInput().filter(l=>l.id!=="")),wu=()=>{const l=Cu.value.find(e=>e.id==a.value.offer.executor);if(l&&(a.value.offer.executor=l.name),a.value.additionally.pickup){const e=p.getters.getShipmentsAddress.find(t=>t.index==parseInt(a.value.additionally.pickupValue)).address;e&&(a.value.additionally.pickupValue=e)}j.value?a.value.headerLogo=Number(W.value[0].id):a.value.headerLogo=0,a.value.banner==!0?(a.value.bannerSrc=N.value[0].image,a.value.bannerId=N.value[0].id):a.value.bannerSrc="",y("next"),y("update:kp",a.value)},xu=l=>{l=l-1,W.value.length==1&&(l=0),v.value=!0;let e=0,t=W.value[l].id;Ne.value.forEach((z,pe)=>{z.id==t&&(e=pe)});let E={index:l,id:Number(Ne.value[e].id)};p.dispatch(q.DELETE_KP_LOGO,E).then(()=>{v.value=!1})},Du=l=>{l=l-1,N.value.length==1&&(l=0),v.value=!0;let e=0,t=N.value[l].id;Me.value.forEach((z,pe)=>{z.id==t&&(e=pe)});let E={index:l,id:Number(Me.value[e].id)};p.dispatch(q.DELETE_KP_BANNER,E).then(()=>{v.value=!1})};return(l,e)=>(n(),c(ie,null,[u("div",{class:w(["kp-step",{active:C.active}])},[N0,u("div",M0,[u("div",K0,[u("div",{class:w(["orders-list-item",{active:Ee.value}])},[u("div",{class:"orders-list-row",onClick:e[0]||(e[0]=t=>Ee.value=!Ee.value)},G0),u("div",{class:w(["kp-step-body-row-group",{active:Ee.value}])},[u("div",q0,[Y0,r(s(P),{modelValue:a.value.additionally.pickup,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.additionally.pickup=t),onOnClick:e[2]||(e[2]=t=>{a.value.additionally.delivery=!1,a.value.additionally.deliveryValue=0}),style:{"margin-left":"30px"}},null,8,["modelValue"]),X0,r(s(P),{modelValue:a.value.additionally.delivery,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.additionally.delivery=t),onOnClick:e[4]||(e[4]=t=>a.value.additionally.pickup=!1),style:{"margin-left":"30px"}},null,8,["modelValue"]),Z0,a.value.additionally.delivery?(n(),S(s(Ve),{key:0,min:0,step:10,modelValue:a.value.additionally.deliveryValue,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.additionally.deliveryValue=t),style:{"margin-left":"30px"}},null,8,["modelValue"])):k("",!0),a.value.additionally.delivery?(n(),c("div",j0,et)):k("",!0),a.value.additionally.pickup?(n(),S(s(We),{key:2,data:s(Eu),modelValue:a.value.additionally.pickupValue,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.additionally.pickupValue=t),style:"max-width: 300px"},null,8,["data","modelValue"])):k("",!0)]),u("div",ut,[tt,r(s(P),{modelValue:a.value.additionally.prepayment,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.additionally.prepayment=t),onOnClick:e[8]||(e[8]=t=>a.value.additionally.prepaymentValue=0),style:"margin-left: 30px"},null,8,["modelValue"]),a.value.additionally.prepayment?(n(),S(s(Ve),{key:0,min:0,max:100,step:.1,modelValue:a.value.additionally.prepaymentValue,"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.additionally.prepaymentValue=t),style:"margin-left: 30px"},null,8,["step","modelValue"])):k("",!0),a.value.additionally.prepayment?(n(),c("div",lt,"%")):k("",!0),a.value.additionally.prepayment&&s(Ie)?(n(),c("div",at,Z(s(Ge)(Number(s(Ie)/100*a.value.additionally.prepaymentValue),!0))+" \u043E\u0442 "+Z(s(Ge)(s(Ie),!0)),1)):k("",!0)]),Ae(u("div",ot,[st,r(s(P),{modelValue:a.value.additionally.delay,"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.additionally.delay=t),onOnClick:e[11]||(e[11]=t=>{a.value.additionally.delayWorkValue=0,a.value.additionally.delayCalendarValue=0}),style:"margin-left: 30px"},null,8,["modelValue"]),a.value.additionally.delay?(n(),c("div",{key:0,style:ge([se.value?"color: #292C32":"color: #FFFFFF","margin-left: 30px"])},rt,4)):k("",!0),a.value.additionally.delay?(n(),S(s(Ve),{key:1,min:0,modelValue:a.value.additionally.delayCalendarValue,"onUpdate:modelValue":e[12]||(e[12]=t=>a.value.additionally.delayCalendarValue=t),disabled:se.value},null,8,["modelValue","disabled"])):k("",!0),Ae(u("div",vt,[r(s(Ye),{modelValue:se.value,"onUpdate:modelValue":e[13]||(e[13]=t=>se.value=t)},null,8,["modelValue"])],512),[[qe,a.value.additionally.delay]]),a.value.additionally.delay?(n(),c("div",{key:2,style:ge([se.value?"color: #FFFFFF":"color: #292C32","margin-left: 30px"])},gt,4)):k("",!0),a.value.additionally.delay?(n(),S(s(Ve),{key:3,min:0,modelValue:a.value.additionally.delayWorkValue,"onUpdate:modelValue":e[14]||(e[14]=t=>a.value.additionally.delayWorkValue=t),disabled:!se.value},null,8,["modelValue","disabled"])):k("",!0)],512),[[qe,a.value.additionally.prepaymentValue!==100]])],2)],2),u("div",{class:w(["orders-list-item",{active:a.value.header}])},[u("div",{class:"orders-list-row",onClick:e[15]||(e[15]=t=>a.value.header=!a.value.header)},ht),u("div",{class:w(["kp-step-body-row-group",{active:a.value.header}])},[u("div",kt,[_t,r(s(P),{modelValue:Re.value,"onUpdate:modelValue":e[16]||(e[16]=t=>Re.value=t),style:"margin-left: 30px"},null,8,["modelValue"]),u("div",{class:w(["kp-step-body-row-group",{active:Re.value}])},[Ae(u("textarea",{class:"order-comment-textarea",style:{"min-width":"500px"},"onUpdate:modelValue":e[17]||(e[17]=t=>a.value.headerText=t),placeholder:"\u0422\u0435\u043A\u0441\u0442 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430 \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F..."},null,512),[[Xe,a.value.headerText]])],2)]),u("div",Et,[Ct,r(s(P),{modelValue:j.value,"onUpdate:modelValue":e[18]||(e[18]=t=>j.value=t),style:{"margin-left":"30px"}},null,8,["modelValue"]),j.value?(n(),c("label",wt,[u("input",{onChange:e[19]||(e[19]=t=>gu(t)),class:"kp-step-body-add-file-input",id:"file-upload",type:"file",accept:"image/*"},null,32)])):k("",!0),j.value?(n(),c("div",xt,[Dt,u("div",{class:w(["header-button left",{active:a.value.headerLogoAlign===s(ne).LEFT}]),onClick:e[20]||(e[20]=t=>a.value.headerLogoAlign=s(ne).LEFT),tooltip:"\u0421\u043B\u0435\u0432\u0430",flow:"up"},[r(s(F0),{class:"sidebar-btn"})],2),u("div",{class:w(["header-button center",{active:a.value.headerLogoAlign===s(ne).CENTER}]),onClick:e[21]||(e[21]=t=>a.value.headerLogoAlign=s(ne).CENTER),tooltip:"\u041F\u043E \u0446\u0435\u043D\u0442\u0440\u0443",flow:"up"},[r(s(b0),{class:"sidebar-btn"})],2),u("div",{class:w(["header-button right",{active:a.value.headerLogoAlign===s(ne).RIGHT}]),tooltip:"\u0421\u043F\u0440\u0430\u0432\u0430",flow:"up",onClick:e[22]||(e[22]=t=>a.value.headerLogoAlign=s(ne).RIGHT)},[r(s(Q0),{class:"sidebar-btn"})],2)])):k("",!0)]),s(W).length>0?(n(),c("div",{key:0,class:w(["kp-step-body-row-group",{active:j.value}])},[u("div",bt," \u041B\u043E\u0433\u043E #"+Z(s(W)[0].id),1),X.value?(n(),S(s($e),{key:0,style:{margin:"auto"}})):k("",!0),j.value&&!X.value?(n(),c("div",Vt,[u("div",At,[u("div",$t,[u("button",{class:"product-slider-arrow prev",onClick:hu}),r(Ze,{name:"product-slider-trans",class:"product-slider",style:"align-items: center; height: 500px;",tag:"div"},{default:$(()=>[(n(!0),c(ie,null,me(s(W),t=>(n(),c("div",{class:"product-slider-slide",key:t.id},[t.image?(n(),c("img",{key:0,src:t.image},null,8,Bt)):k("",!0)]))),128))]),_:1}),u("div",{class:"product-slider-arrow next",onClick:yu})])])])):k("",!0),u("div",Ot,[r(s(R),{onClick:e[23]||(e[23]=t=>xu(le.value))},{default:$(()=>[Lt]),_:1})])],2)):(n(),c("div",{key:1,class:w(["kp-step-title kp-step-body-row-group",{active:j.value}])},It,2)),u("div",Rt,[Pt,r(s(P),{modelValue:a.value.banner,"onUpdate:modelValue":e[24]||(e[24]=t=>a.value.banner=t),style:{"margin-left":"30px"}},null,8,["modelValue"]),a.value.banner?(n(),c("label",St,[u("input",{onChange:e[25]||(e[25]=t=>fu(t)),class:"kp-step-body-add-file-input",id:"banner-upload",type:"file",accept:"image/*"},null,32)])):k("",!0),a.value.banner?(n(),c("div",Tt,Gt)):k("",!0)]),s(N).length>0?(n(),c("div",{key:2,class:w(["kp-step-body-row-group",{active:a.value.banner}])},[u("div",qt," \u0411\u0430\u043D\u043D\u0435\u0440 #"+Z(s(N)[0].id)+" "+Z(s(N)[0].type=="showcase"?"- \u0441\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0439":""),1),X.value?(n(),S(s($e),{key:0,style:{margin:"auto"}})):k("",!0),a.value.banner?(n(),c("div",Yt,[u("div",Xt,[u("div",Zt,[u("button",{class:"product-slider-arrow prev",onClick:_u}),r(Ze,{name:"product-slider-trans",class:"product-slider",style:"align-items: center; height: 240px; max-width: 1200px;",tag:"div"},{default:$(()=>[(n(!0),c(ie,null,me(s(N),t=>(n(),c("div",{class:"product-slider-slide",key:t.id,style:ge(t.type!="custom"?["border: 2px solid;","border-color: #FAC12E;","border-radius: 10px;"]:[])},[t.image?(n(),c("img",{key:0,src:t.image},null,8,jt)):k("",!0)],4))),128))]),_:1}),u("div",{class:"product-slider-arrow next",onClick:ku})])])])):k("",!0),s(N)[0].type=="custom"?(n(),c("div",Wt,[r(s(R),{onClick:e[26]||(e[26]=t=>Du(te.value))},{default:$(()=>[Jt]),_:1})])):k("",!0)],2)):(n(),c("div",{key:3,class:w(["kp-step-title kp-step-body-row-group",{active:a.value.banner}])},ul,2))],2)],2),u("div",tl,[ll,Ae(u("textarea",{class:"order-comment-textarea","onUpdate:modelValue":e[27]||(e[27]=t=>a.value.offer.comment=t)},null,512),[[Xe,a.value.offer.comment]])]),u("div",al,[ol,r(s(P),{modelValue:we.value,"onUpdate:modelValue":e[28]||(e[28]=t=>we.value=t),onOnClick:e[29]||(e[29]=t=>{we.value=!0,xe.value=!1,a.value.as="PDF"}),style:"margin-left: 30px"},null,8,["modelValue"]),sl,r(s(P),{modelValue:xe.value,"onUpdate:modelValue":e[30]||(e[30]=t=>xe.value=t),onOnClick:e[31]||(e[31]=t=>{we.value=!1,xe.value=!0,a.value.as="WORD"}),style:"margin-left: 30px"},null,8,["modelValue"]),nl]),u("div",il,[dl,u("div",rl,[u("div",vl,[r(s(P),{modelValue:be.value,"onUpdate:modelValue":e[32]||(e[32]=t=>be.value=t),onOnClick:e[33]||(e[33]=t=>{be.value=!0,De.value=!1,a.value.isPortraitOrientation=!1})},null,8,["modelValue"]),pl]),u("div",cl,[r(s(P),{modelValue:De.value,"onUpdate:modelValue":e[34]||(e[34]=t=>De.value=t),onOnClick:e[35]||(e[35]=t=>{be.value=!1,De.value=!0,a.value.isPortraitOrientation=!0})},null,8,["modelValue"]),ml])])])])]),u("div",{class:"order-list content-elem",style:ge([m.value?"display: flex;":"display: none;"])},[u("div",gl,[a.value.offer.position?(n(),c("div",fl,[u("div",yl,[u("button",{onClick:e[36]||(e[36]=t=>L.value=!L.value),class:w(["select-input-btn",L.value?"active":""])},"\u0412\u042B\u0411\u0415\u0420\u0418\u0422\u0415 \u0422\u041E\u0412\u0410\u0420 \u0418\u0417 \u0412\u042B\u041F\u0410\u0414\u0410\u042E\u0429\u0415\u0413\u041E \u0421\u041F\u0418\u0421\u041A\u0410. ",2),u("div",{class:w(["select-input-options",L.value?"active":""])},[(n(!0),c(ie,null,me(a.value.offer.position,(t,E)=>(n(),c("p",{key:E,class:w("select-input-item"),onClick:z=>{lu(t.guid),L.value=!1}}," ["+Z(t.article)+"] "+Z(Be(t.product.NAME)),9,hl))),128))],2)]),v.value?(n(),S(s($e),{key:0,center:""})):k("",!0)])):k("",!0),u("div",kl,[u("div",null,[u("input",{ref_key:"file",ref:re,id:"myfile",type:"file",onChange:e[37]||(e[37]=t=>iu()),style:{display:"none"}},null,544),r(s(R),{tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u0430\u0439\u043B \u0441 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C \u043D\u0430 \u0445\u043E\u043B\u0441\u0442",tooltipFlow:"up",onOnClick:e[38]||(e[38]=t=>du())},{default:$(()=>[_l]),_:1})]),u("div",El,[u("span",null,[r(s(R),{onMousedown:e[39]||(e[39]=t=>vu())},{default:$(()=>[Cl]),_:1})]),u("div",null,[r(s(R),{onOnClick:e[40]||(e[40]=t=>ru())},{default:$(()=>[wl]),_:1}),r(s(R),{onOnClick:e[41]||(e[41]=t=>pu())},{default:$(()=>[xl]),_:1}),r(s(R),{onOnClick:e[42]||(e[42]=t=>Qe())},{default:$(()=>[Dl]),_:1})])]),u("div",null,[bl,u("div",Vl,[u("div",null,[r(s(R),{onOnClick:e[43]||(e[43]=t=>Le(1))},{default:$(()=>[Al]),_:1})]),u("div",null,[r(s(fe),{onClick:e[44]||(e[44]=t=>D(t)),onFocusout:e[45]||(e[45]=t=>he(t)),modelValue:F.value,"onUpdate:modelValue":e[46]||(e[46]=t=>F.value=t),class:w("input-text-field-modify")},null,8,["modelValue"])]),u("div",null,[r(s(R),{onOnClick:e[47]||(e[47]=t=>Oe(1))},{default:$(()=>[$l]),_:1})])])]),u("div",Bl,[r(s(R),{style:{margin:"0","border-radius":"100px",width:"30px","min-width":"30px","min-height":"30px",height:"30px",cursor:"help"},active:!1,tooltip:"\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u0430 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043A\u043E\u043B\u0435\u0441\u043E\u043C \u043C\u044B\u0448\u0438",tooltipFlow:"up"},{default:$(()=>[Ol]),_:1}),r(s(Ye),{modelValue:ae.value,"onUpdate:modelValue":e[48]||(e[48]=t=>ae.value=t)},null,8,["modelValue"])]),u("div",null,[Ll,u("div",Fl,[u("div",null,[r(s(R),{onOnClick:e[49]||(e[49]=t=>Se(-1))},{default:$(()=>[Il]),_:1})]),u("div",null,[r(s(fe),{onClick:e[50]||(e[50]=t=>oe(t)),onFocusout:e[51]||(e[51]=t=>h(t)),modelValue:_e.value,"onUpdate:modelValue":e[52]||(e[52]=t=>_e.value=t),class:w("input-text-field-modify")},null,8,["modelValue"])]),u("div",null,[r(s(R),{onOnClick:e[53]||(e[53]=t=>Te(1))},{default:$(()=>[Rl]),_:1})])])]),u("div",null,[r(s(R),{onOnClick:e[54]||(e[54]=t=>mu()),tooltip:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u043E\u043E\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0432 \u0444\u0430\u0439\u043B \u041A\u041F","tooltip-flow":"up"},{default:$(()=>[Pl]),_:1}),r(s(R),{onOnClick:e[55]||(e[55]=t=>nu()),tooltip:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u043D\u0430 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E","tooltip-flow":"up",style:"background-color: oldlace;"},{default:$(()=>[Sl]),_:1})])]),ve.value.length>0?(n(),c("div",Tl,[(n(!0),c(ie,null,me(ve.value,(t,E)=>(n(),c("img",{style:{cursor:"pointer"},onClick:z=>au(z.target.src),key:E,src:t,height:"200"},null,8,Ul))),128))])):k("",!0),Ql])],4),u("div",Nl,[u("div",{class:"kp-step-actions-link",onClick:e[56]||(e[56]=t=>l.$emit("prev"))},"\u041D\u0430\u0437\u0430\u0434"),u("div",{class:"kp-step-actions-link right",onClick:e[57]||(e[57]=t=>wu())},"\u0414\u0430\u043B\u0435\u0435")])],2),v.value?(n(),S(s(uu),{key:0})):k("",!0)],64))}}),Kl=u("div",{class:"kp-step-title"},"\u0424\u0430\u0439\u043B \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D",-1),zl={class:"kp-step-body"},Hl={class:"kp-step-actions"},Gl=de({__name:"KpStep4",props:{active:{type:Boolean,default:!1}},emits:["save","prev"],setup(C,{emit:y}){const B=()=>{y("save")};return(p,v)=>(n(),c("div",{class:w(["kp-step",{active:C.active}])},[Kl,u("div",zl,[u("div",{onClick:v[0]||(v[0]=m=>B()),class:"kp-step-actions-link",style:"text-align: center"},"\u0421\u043A\u0430\u0447\u0430\u0442\u044C")]),u("div",Hl,[u("div",{class:"kp-step-actions-link",onClick:v[1]||(v[1]=m=>p.$emit("prev"))},"\u041D\u0430\u0437\u0430\u0434")])],2))}}),ql={class:"kp"},Yl={class:"top-line product-page"},Xl=tu('<div class="kp-head-card"><div class="kp-head-card-title">\u041A\u043E\u043D\u0441\u0442\u0440\u0443\u043A\u0442\u043E\u0440 \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u0438\u0445 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0439</div><div class="kp-head-card-subtitle"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#A5A7A9" d="M11.875 18Q12.5 18 12.95 17.55Q13.4 17.1 13.4 16.475Q13.4 15.85 12.95 15.412Q12.5 14.975 11.875 14.975Q11.25 14.975 10.8 15.412Q10.35 15.85 10.35 16.475Q10.35 17.1 10.8 17.55Q11.25 18 11.875 18ZM10.7 14.15H13.05Q13.05 13.425 13.25 12.925Q13.45 12.425 14.2 11.7Q14.775 11.15 15.137 10.525Q15.5 9.9 15.5 9.025Q15.5 7.525 14.525 6.737Q13.55 5.95 12.15 5.95Q10.625 5.95 9.613 6.825Q8.6 7.7 8.2 8.9L10.4 9.725Q10.575 9.225 10.95 8.725Q11.325 8.225 12.025 8.225Q12.525 8.225 12.8 8.537Q13.075 8.85 13.075 9.225Q13.075 9.6 12.812 10Q12.55 10.4 12.275 10.625Q11.275 11.55 10.988 12.137Q10.7 12.725 10.7 14.15ZM12 22.85Q9.75 22.85 7.763 22Q5.775 21.15 4.312 19.688Q2.85 18.225 2 16.25Q1.15 14.275 1.15 12Q1.15 9.725 2 7.75Q2.85 5.775 4.312 4.312Q5.775 2.85 7.763 2Q9.75 1.15 12 1.15Q14.275 1.15 16.25 2Q18.225 2.85 19.688 4.312Q21.15 5.775 22 7.75Q22.85 9.725 22.85 12Q22.85 14.275 22 16.25Q21.15 18.225 19.688 19.688Q18.225 21.15 16.25 22Q14.275 22.85 12 22.85ZM12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12ZM12 19.7Q15.2 19.7 17.45 17.462Q19.7 15.225 19.7 12Q19.7 8.775 17.45 6.537Q15.2 4.3 12 4.3Q8.8 4.3 6.55 6.537Q4.3 8.775 4.3 12Q4.3 15.225 6.55 17.462Q8.8 19.7 12 19.7Z"></path></svg><div>\u041D\u0430 \u044D\u0442\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 \u0412\u044B \u0441\u043C\u043E\u0436\u0435\u0442\u0435 \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0438\u0438 \u0441\u043E\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u043E\u0433\u043E \u0437\u0430\u043A\u0430\u0437\u0430, \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430 \u0438\u043B\u0438 \u0442\u043E\u0432\u0430\u0440\u0430 \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0441\u043E \u0441\u0432\u043E\u0438\u043C \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C \u0438 \u0446\u0435\u043D\u0430\u043C\u0438.</div></div></div>',1),Zl={class:"kp-form"},jl={class:"kp-form-stepper-wrap"},Wl={class:"kp-form-stepper"},Jl={class:"kp-form-stepper-list"},e4={class:"kp-form-stepper-content"},u4={class:"kp-form-stepper-content-tabs-box"},d4=de({__name:"KpPage",setup(C){const y=Pe(),B=T(()=>y.getters.getCompanysList),p=i(""),v=i(H.cloneDeep(Je)),m=i(1),L=i(!1),U=i(!1),d=i(G.ORDER);y.getters.isCompanysLoad||y.dispatch(Ku.GET_COMPANYS),y.getters.isOrders||(L.value=!0,y.dispatch(zu.GET_ORDERS).then(()=>{L.value=!1})),y.dispatch(q.GET_KP_LOGO),y.dispatch(q.GET_KP_BANNER),y.dispatch(eu.GET_SHIPMENTS_ADDRESS),v.value=y.getters.getKP,m.value=y.getters.getKPStep,m.value!=1&&(d.value=G.CATALOG_POS);const o=T(()=>y.getters.getOrderDraftCount>0),K=()=>{if(m.value<4&&(m.value=m.value+1),m.value==4){let V=H.cloneDeep(v.value);V.additionally.prepayment&&(V.additionally.prepaymentValue=V.additionally.prepaymentValue/100),U.value=!0,y.dispatch(q.SEND_KP,V).finally(()=>{U.value=!1}),y.commit(J.SET_KP_STEP,1)}y.commit(J.SET_KP_STEP,m.value)},Q=()=>{m.value>1&&(m.value=m.value-1),y.commit(J.SET_KP_STEP,m.value)},O=()=>{y.dispatch(q.SAVE_KP)};return ye(v,()=>{y.commit(J.SET_KP,v.value)}),(V,f)=>(n(),c("div",ql,[u("div",Yl,[r(Lu,{data:s(B),modelValue:p.value,"onUpdate:modelValue":f[0]||(f[0]=g=>p.value=g)},null,8,["data","modelValue"]),r(Ou),r(Bu)]),r(Fu),Xl,u("div",Zl,[u("div",jl,[u("div",Wl,[u("div",{class:"kp-form-stepper-bar",style:ge("width:"+33.33*(m.value-1)+"%")},null,4),u("ul",Jl,[u("li",{class:w(["kp-form-stepper-item",{active:m.value>=1}]),tooltip:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0438\u0435",flow:"up"},"1",2),u("li",{class:w(["kp-form-stepper-item",{active:m.value>=2}]),tooltip:"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043F\u043E\u043B\u044F",flow:"up"},"2",2),u("li",{class:w(["kp-form-stepper-item",{active:m.value>=3}]),tooltip:"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",flow:"up"},"3",2),u("li",{class:w(["kp-form-stepper-item with-image",{active:m.value>=4}]),tooltip:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u0435 \u0444\u0430\u0439\u043B",flow:"up"},null,2)])])]),u("div",e4,[u("div",u4,[u("div",{class:w(`kp-form-stepper-content-tabs step${m.value}`)},[r(n0,{onNext:K,modelValue:d.value,"onUpdate:modelValue":f[1]||(f[1]=g=>d.value=g),active:m.value===1,isDraft:s(o)},null,8,["modelValue","active","isDraft"]),r(k0,{type:d.value,onNext:K,onPrev:Q,kp:v.value,"onUpdate:kp":f[2]||(f[2]=g=>v.value=g),active:m.value===2},null,8,["type","kp","active"]),r(Ml,{onNext:K,onPrev:Q,kp:v.value,"onUpdate:kp":f[3]||(f[3]=g=>v.value=g),active:m.value===3},null,8,["kp","active"]),r(Gl,{onPrev:Q,onSave:O,active:m.value===4},null,8,["active"])],2)])])]),U.value?(n(),S(uu,{key:0})):k("",!0)]))}});export{d4 as default};
