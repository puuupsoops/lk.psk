import{_ as R,d as $,h as f,o as n,b as m,a as e,p as s,w as A,v as S,t as y,k as C,m as W,j as P,W as x,z as N,u,x as z,y as Y,i as K,af as I,s as X,L as q,ag as J,c as Q,ah as Z,ai as tt,g as et,R as ut,a1 as at,aj as ot,ak as st}from"./index.d771ac86.js";import{N as dt}from"./Notification.ad45b66e.js";import{_ as rt}from"./PersonalBar.d7446f6c.js";import{P as ct}from"./ProductSliderCard.dc358fce.js";import{P as lt,_ as nt,a as it}from"./ProductPropertiesCard.a5708f2e.js";import"./CompanyCalendar.vue_vue_type_style_index_0_lang.d1e8a926.js";import{_ as pt}from"./CompanyBarTop.d3e16ac9.js";/* empty css                                                          */import{_ as vt}from"./TopNav.35fe4711.js";import"./vee-validate.esm.03cc5089.js";import"./object.c1f59207.js";const mt={class:"product-add-info content-elem content-elem-info"},_t={class:"content-elem-heading"},gt={key:0,class:"content-elem-bottom content-elem-desc content-hide"},ft=W(" \u0421\u043E\u043E\u0431\u0449\u0430\u0435\u043C \u0432\u0430\u043C \u0447\u0442\u043E \u0441\u043E\u0433\u043B\u0430\u0441\u043D\u043E \u041F\u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044E \u041F\u0440\u0430\u0432\u0438\u0442\u0435\u043B\u044C\u0441\u0442\u0432\u0430 \u0420\u043E\u0441\u0441\u0438\u0439\u0441\u043A\u043E\u0439 \u0424\u0435\u0434\u0435\u0440\u0430\u0446\u0438\u0438 \u2116 216 \u043E\u0442 29.02.2020 \u0434\u0430\u0442\u0430 \u0437\u0430\u043F\u0440\u0435\u0442\u0430 \u043E\u0431\u043E\u0440\u043E\u0442\u0430 \u043D\u0435\u043C\u0430\u0440\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0439 \u043E\u0431\u0443\u0432\u0438 \u043F\u0435\u0440\u0435\u043D\u0435\u0441\u0435\u043D\u0430 \u043D\u0430 1 \u0438\u044E\u043B\u044F 2020 \u0433\u043E\u0434\u0430. "),Pt=["innerHTML"],ht=$({__name:"ProductAddInfoCard",props:{data:{type:Object}},setup(i){const d=f(!0);return(t,p)=>(n(),m("div",mt,[e("div",_t,[s(S,{name:"text",mode:"out-in"},{default:A(()=>[(n(),m("div",{key:d.value,class:"content-elem-heading-text"},"\u0414\u043E\u043F. \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B"))]),_:1}),e("div",{class:"content-elem-heading-btn content-hide-btn",onClick:p[0]||(p[0]=l=>d.value=!d.value)},y(d.value?"\u0421\u043A\u0440\u044B\u0442\u044C \u2014":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C +"),1)]),s(S,{name:"fade"},{default:A(()=>[d.value?(n(),m("div",gt,[ft,e("div",{class:"video-area",innerHTML:i.data.VIDEO,style:"padding-top: 10px;"},null,8,Pt)])):C("",!0)]),_:1})]))}});var Ct=R(ht,[["__scopeId","data-v-1b24bf9e"]]);const D=i=>(z("data-v-68b8d31a"),i=i(),Y(),i),Et={class:"product-parcel"},Dt={class:"product-parcel-wrap"},yt={class:"product-parcel-elem content-elem"},It={key:0,class:"content-hide"},At={class:"product-parcel-row"},St=D(()=>e("div",{class:"product-parcel-text"},"\u041D\u0430\u0446\u0435\u043D\u043A\u0430: ",-1)),Tt={class:"product-parcel-value"},Ot={class:"product-parcel-value-block"},$t={class:"product-parcel-row"},bt=D(()=>e("div",{class:"product-parcel-text"},"\u0426\u0435\u043D\u0430 \u0441 \u043D\u0430\u0446\u0435\u043D\u043A\u043E\u0439: ",-1)),Vt={class:"product-parcel-value"},kt={key:0,class:"product-parcel-text"},xt={class:"product-parcel-elem content-elem"},Nt={key:0,class:"content-hide"},Rt={class:"product-parcel-row"},Ut=D(()=>e("div",{class:"product-parcel-text"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E: ",-1)),wt={class:"product-parcel-row"},Bt=D(()=>e("div",{class:"product-parcel-text"},"\u0421\u0443\u043C\u043C\u0430: ",-1)),Ft={class:"product-parcel-value"},Lt={class:"product-parcel-row"},Mt=D(()=>e("div",{class:"product-parcel-text"},"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0432\u0435\u0441: ",-1)),Ht={class:"product-parcel-value"},Gt={class:"product-parcel-row"},jt=D(()=>e("div",{class:"product-parcel-text"},"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1)),Wt={class:"product-parcel-value"},zt={key:0,class:"product-parcel-text"},Yt=$({__name:"ProductParcelCard",props:{data:{type:Object},discount:{type:Number}},setup(i){const d=i,t=f(!0),p=f(1),l=f(0),_=f("percent"),h=P(()=>{var g;if((g=d.data)!=null&&g.PRICE_OPT){let r=d.discount?Number(d.data.PRICE_OPT)-Number(d.data.PRICE_OPT/100)*d.discount:d.data.PRICE_OPT;return _.value==="add"?Number(r)+Number(l.value):Number(r)+Number(r)/100*Number(l.value)}else return 0});return(g,r)=>(n(),m("div",Et,[e("div",Dt,[e("div",yt,[s(S,{name:"fade1",mode:"out-in"},{default:A(()=>[t.value?(n(),m("div",It,[e("div",At,[St,e("div",Tt,[e("div",Ot,[s(x,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=v=>l.value=v)},null,8,["modelValue"]),e("button",{class:N("product-parcel-btn"+(_.value==="percent"?" active":"")),onClick:r[1]||(r[1]=v=>_.value="percent")},"%",2),e("button",{class:N("product-parcel-btn"+(_.value==="add"?" active":"")),onClick:r[2]||(r[2]=v=>_.value="add")},"\u20BD",2)])])]),e("div",$t,[bt,e("div",Vt,y(Number(u(h)).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1)])])):C("",!0)]),_:1}),t.value?C("",!0):(n(),m("div",kt,"\u041D\u0430\u0446\u0435\u043D\u043A\u0430"))]),e("div",xt,[s(S,{name:"fade2"},{default:A(()=>[t.value?(n(),m("div",Nt,[e("div",Rt,[Ut,s(x,{modelValue:p.value,"onUpdate:modelValue":r[3]||(r[3]=v=>p.value=v)},null,8,["modelValue"])]),e("div",wt,[Bt,e("div",Ft,y(Number(u(h)*p.value).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1)]),e("div",Lt,[Mt,e("div",Ht,y((Number(i.data.WEIGHT?i.data.WEIGHT:0)*p.value).toFixed(3)),1)]),e("div",Gt,[jt,e("div",Wt,y((Number(i.data.VALUME?i.data.VALUME:0)*p.value).toFixed(3)),1)])])):C("",!0)]),_:1}),t.value?C("",!0):(n(),m("div",zt,"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E"))])])]))}});var Kt=R(Yt,[["__scopeId","data-v-68b8d31a"]]);const Xt={class:"top-line product-page"},qt={key:0},Jt=e("br",null,null,-1),Qt={key:1,class:"content-wrap content-product-wrap"},Zt={class:"content-wrap-elem"},te={class:"content-elem-desc"},ee={class:"content-wrap-elem"},ue={key:1},ae={key:0},_e=$({__name:"ProductPage",props:{article:{type:String}},setup(i){const d=i,t=et(),p=ut(),l=P({get:()=>t.getters.getLoader,set:c=>t.commit(at.SET_LOADER,c)}),_=f(""),h=f(""),g=f(!1),r=f(!1),v=f(""),T=f([]),U=()=>{p.push({name:"Order"})};K(async()=>{var c;if(d.article&&(l.value=!0,t.dispatch(I.SEARCH_PRODUCT,d.article).then(()=>{g.value=!0,t.getters.getProduct.ID?v.value=t.getters.getProduct.ID:p.push({name:"Product"})}).finally(()=>{l.value=!1})),t.getters.getActiveCompanyId!==""){_.value=t.getters.getActiveCompanyId;return}(!t.getters.isCompanysLoad||!t.getters.isManagerLoad)&&await t.dispatch(X.GET_COMPANYS),_.value=t.getters.getCompanys===[]?"":(c=t.getters.getCompanys[0])==null?void 0:c.uid}),q(()=>d.article,c=>{c&&(l.value=!0,t.dispatch(I.SEARCH_PRODUCT,d.article).then(()=>{g.value=!0,t.getters.getProduct.ID?v.value=t.getters.getProduct.ID:p.push({name:"Product"})}).finally(()=>{l.value=!1}))});const w=()=>{l.value=!0,t.dispatch(I.GET_PRODUCT_BY_ID,v.value).then(()=>{v.value=t.getters.getProduct.ID}).finally(()=>{l.value=!1})},b=()=>{g.value=!1,t.commit(st.SET_SEARCH_PRODUCT_CLEAR)},B=()=>{h.value.trim()!==""&&(b(),l.value=!0,t.dispatch(I.SEARCH_PRODUCT,h.value).then(()=>{g.value=!0,v.value=t.getters.getProduct.ID}).finally(()=>{l.value=!1}))},F=()=>{b(),h.value="",p.push("/product")},L=()=>{const c={article:t.getters.getProduct.ARTICLE,guid:t.getters.getProduct.UID,product:t.getters.getProduct,characteristics:T.value};t.dispatch(ot.ADD_POSITION,c),r.value=!0},M=P(()=>t.getters.getCompanysList),H=P(()=>t.getters.getProductOffers),E=P(()=>t.getters.getProduct),V=P(()=>t.getters.getProductFound),G=P(()=>t.getters.getProductImages),j=P(()=>t.getters.getProductProtect),O=P(()=>{var k;const c=t.getters.getProduct.STATUS,a=Number((k=t.getters.getProduct)==null?void 0:k.MAX_DISCOUNT),o=t.getters.getCompanyDiscount(_.value,t.getters.getProductOffersORGGUID);return a==0&&c=="-"||a==null&&c=="-"?o!=null?o:0:c=="Outlet"||c=="Discount"||c=="Activity"?0:o>a?a:o});return(c,a)=>(n(),m("div",null,[e("div",Xt,[s(u(pt),{data:u(M),modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=o=>_.value=o)},null,8,["data","modelValue"]),s(u(dt)),s(u(rt))]),s(u(vt),{catalog:""}),s(u(J),{modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=o=>h.value=o),to:"product",onSearch:a[2]||(a[2]=o=>B())},null,8,["modelValue"]),u(V).length>0?(n(),m("div",qt,[g.value?(n(),Q(u(lt),{key:0,title:String(u(E).NAME),price:String(u(E).PRICE_OPT),status:String(u(E).STATUS),discount:u(O),onShowSearch:a[3]||(a[3]=o=>F())},null,8,["title","price","status","discount"])):C("",!0),Jt,g.value?(n(),m("div",Qt,[e("div",Zt,[s(u(Z),{data:u(V),cardType:"search",modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=o=>v.value=o),onOnClick:a[5]||(a[5]=o=>w())},null,8,["data","modelValue"]),e("div",te,[s(u(nt),{modelValue:T.value,"onUpdate:modelValue":a[6]||(a[6]=o=>T.value=o),data:u(H),discount:u(O),onOnClick:a[7]||(a[7]=o=>L())},null,8,["modelValue","data","discount"])]),s(u(Ct),{data:u(E)},null,8,["data"])]),e("div",ee,[s(u(ct),{data:u(G),onToOrder:U},null,8,["data"]),s(u(Kt),{data:u(E),discount:u(O)},null,8,["data","discount"]),s(u(it),{data:u(E),protect:u(j)},null,8,["data","protect"])])])):C("",!0)])):(n(),m("div",ue,[g.value?(n(),m("div",ae,"\u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")):C("",!0)])),s(u(tt),{modelValue:r.value,"onUpdate:modelValue":a[8]||(a[8]=o=>r.value=o),message:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0432 \u0437\u0430\u043A\u0430\u0437",timeout:5e3,notification:""},null,8,["modelValue"])]))}});export{_e as default};
