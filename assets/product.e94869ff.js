import{_ as K,N as j}from"./PersonalBar.09c57ab4.js";import{_ as q}from"./CompanyBarTop.7b57c29d.js";import{P as W,a as J,b as Q,c as X}from"./ProductInfoCard.bb3e27a3.js";import{d as T,_ as b,o as s,b as r,a as u,F as I,e as w,B as Z,g as m,m as c,w as y,y as E,s as R,t as g,j as _,i as h,U as x,f as V,V as H,r as f,T as B,k as L,u as U,v as ee,x as te,z as ue,a6 as k,a7 as M,a8 as ae,a9 as oe,aa as se,c as G,l as re,h as de,q as ne,O as le}from"./index.f5ab21cf.js";import{A as N}from"./AmountInput.76b159ed.js";import{P as ce}from"./PreloaderLocal.33fc7e63.js";import{T as ie}from"./TopNav.3f495362.js";const pe=T({props:{data:{type:Array},discount:{type:Number}},setup(){}}),ve={class:"content-elem"},me={class:"product-more-info-table-wrap scroll-elem"},_e={class:"table more-info-table"},fe=Z('<div class="table-row table-heading"><div class="table-elem">\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430</div><div class="table-elem">\u041E\u0441\u0442\u0430\u0442\u043E\u043A</div><div class="table-elem">\u0426\u0435\u043D\u0430</div><div class="table-elem">\u041F\u043F / \u0414\u0430\u0442\u0430</div></div>',1),he={class:"table-elem"},Ce=["innerHTML"],ge={class:"table-elem"},Pe=["innerHTML"],$e={class:"table-elem"},Ee=["innerHTML"],ye={class:"table-elem"},be=["innerHTML"];function De(t,e,l,d,i,p){return s(),r("div",ve,[u("div",me,[u("div",_e,[fe,(s(!0),r(I,null,w(t.data,n=>(s(),r("div",{class:"table-row",key:n.ID},[u("div",he,[u("span",{innerHTML:n.CHARACTERISTIC},null,8,Ce)]),u("div",ge,[u("span",{innerHTML:n.RESIDUE},null,8,Pe)]),u("div",$e,[u("span",{innerHTML:(n.PRICE?n.PRICE-n.PRICE/100*t.discount:0).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")+" \u20BD"},null,8,Ee)]),u("div",ye,[u("span",{innerHTML:n.PPDATA.replaceAll("/","\xA0/\xA0")},null,8,be)])]))),128))])])])}var Ae=b(pe,[["render",De]]);const Se={setup(){return{show:m(!0)}}},Te={class:"product-addinfo content-elem content-elem-info"},ke={class:"content-elem-heading"},Ie={key:0,class:"content-elem-bottom content-elem-desc content-hide"};function we(t,e,l,d,i,p){return s(),r("div",Te,[u("div",ke,[c(R,{name:"text",mode:"out-in"},{default:y(()=>[(s(),r("div",{key:d.show,class:E(d.show?"content-elem-heading-text":"hide-text")},"\u0414\u043E\u043F. \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B",2))]),_:1}),u("div",{class:"content-elem-heading-btn content-hide-btn",onClick:e[0]||(e[0]=n=>d.show=!d.show)},g(d.show?"\u0421\u043A\u0440\u044B\u0442\u044C \u2014":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C +"),1)]),c(R,{name:"fade"},{default:y(()=>[d.show?(s(),r("div",Ie," \u0421\u043E\u043E\u0431\u0449\u0430\u0435\u043C \u0432\u0430\u043C \u0447\u0442\u043E \u0441\u043E\u0433\u043B\u0430\u0441\u043D\u043E \u041F\u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044E \u041F\u0440\u0430\u0432\u0438\u0442\u0435\u043B\u044C\u0441\u0442\u0432\u0430 \u0420\u043E\u0441\u0441\u0438\u0439\u0441\u043A\u043E\u0439 \u0424\u0435\u0434\u0435\u0440\u0430\u0446\u0438\u0438 \u2116 216 \u043E\u0442 29.02.2020 \u0434\u0430\u0442\u0430 \u0437\u0430\u043F\u0440\u0435\u0442\u0430 \u043E\u0431\u043E\u0440\u043E\u0442\u0430 \u043D\u0435\u043C\u0430\u0440\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0439 \u043E\u0431\u0443\u0432\u0438 \u043F\u0435\u0440\u0435\u043D\u0435\u0441\u0435\u043D\u0430 \u043D\u0430 1 \u0438\u044E\u043B\u044F 2020 \u0433\u043E\u0434\u0430. ")):_("",!0)]),_:1})])}var Re=b(Se,[["render",we],["__scopeId","data-v-3abff266"]]);const Fe=T({props:{data:{type:Array}},components:{ProductSliderFullscreen:W},emits:["toOrder"],setup(t){var a;let e=m([]);const l=V(L),d=h({get:()=>l.getters.getLoader,set:o=>l.commit(H.SET_LOADER,o)}),i=m(!1);return(a=t.data)==null||a.forEach((o,v)=>e.value.push({id:v,src:o})),x(()=>{var o;e.value=[],(o=t.data)==null||o.forEach((v,P)=>e.value.push({id:P,src:v}))}),{loader:d,slides:e,fullscreen:i,next:()=>{const o=e.value.shift();e.value=e.value.concat(o)},previous:()=>{const o=e.value.pop();e.value=[o].concat(e.value)}}}}),Oe={class:"content-elem"},Ve={key:0,class:"product-slider-wrap"},Le=["src"],Be=["src"],Ue={class:"product-slider-buttons"};function Ne(t,e,l,d,i,p){const n=f("ProductSliderFullscreen");return s(),r("div",Oe,[t.loader?_("",!0):(s(),r("div",Ve,[u("button",{class:"product-slider-arrow prev",onClick:e[0]||(e[0]=(...a)=>t.previous&&t.previous(...a))}),c(B,{name:"product-slider-trans",class:"product-slider",tag:"div"},{default:y(()=>[(s(!0),r(I,null,w(t.slides,a=>(s(),r("div",{class:"product-slider-slide",key:a.id},[a.src?(s(),r("img",{key:0,src:a.src,onClick:e[1]||(e[1]=o=>t.fullscreen=!0)},null,8,Le)):_("",!0)]))),128))]),_:1}),u("div",{class:"product-slider-arrow next",onClick:e[2]||(e[2]=(...a)=>t.next&&t.next(...a))}),c(B,{name:"product-slider-trans",class:"product-slider-small",tag:"div"},{default:y(()=>[(s(!0),r(I,null,w(t.slides,a=>(s(),r("div",{class:"product-slider-small-slide",key:a.id},[a.src?(s(),r("img",{key:0,src:a.src},null,8,Be)):_("",!0)]))),128))]),_:1})])),u("div",Ue,[u("div",{class:"product-slider-link",style:{width:"100%"},onClick:e[3]||(e[3]=a=>t.$emit("toOrder",a.target.click))},"\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C")]),c(n,{modelValue:t.fullscreen,"onUpdate:modelValue":e[4]||(e[4]=a=>t.fullscreen=a),data:t.data},null,8,["modelValue","data"])])}var He=b(Fe,[["render",Ne]]);const D=t=>(ee("data-v-ba9d93fc"),t=t(),te(),t),Me={class:"product-parcel"},Ge={class:"product-parcel-wrap"},Ye={class:"product-parcel-elem content-elem"},ze={key:0,class:"content-hide"},Ke={class:"product-parcel-row"},je=D(()=>u("div",{class:"product-parcel-text"},"\u041D\u0430\u0446\u0435\u043D\u043A\u0430: ",-1)),qe={class:"product-parcel-value"},We={class:"product-parcel-value-block"},Je={class:"product-parcel-row"},Qe=D(()=>u("div",{class:"product-parcel-text"},"\u0426\u0435\u043D\u0430 \u0441 \u043D\u0430\u0446\u0435\u043D\u043A\u043E\u0439: ",-1)),Xe={class:"product-parcel-value"},Ze={key:0,class:"product-parcel-text"},xe={class:"product-parcel-elem content-elem"},et={key:0,class:"content-hide"},tt={class:"product-parcel-row"},ut=D(()=>u("div",{class:"product-parcel-text"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E: ",-1)),at={class:"product-parcel-row"},ot=D(()=>u("div",{class:"product-parcel-text"},"\u0421\u0443\u043C\u043C\u0430: ",-1)),st={class:"product-parcel-value"},rt={class:"product-parcel-row"},dt=D(()=>u("div",{class:"product-parcel-text"},"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0432\u0435\u0441: ",-1)),nt={class:"product-parcel-value"},lt={class:"product-parcel-row"},ct=D(()=>u("div",{class:"product-parcel-text"},"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u043E\u0431\u044A\u0435\u043C: ",-1)),it={class:"product-parcel-value"},pt={key:0,class:"product-parcel-text"},vt=T({__name:"ProductParcelCard",props:{data:{type:Object},discount:{type:Number}},setup(t){const e=t,l=m(!0),d=m(1),i=m(0),p=m("percent"),n=h(()=>{var a;if((a=e.data)!=null&&a.PRICE_OPT){let o=e.discount?Number(e.data.PRICE_OPT)-Number(e.data.PRICE_OPT/100)*e.discount:e.data.PRICE_OPT;return p.value==="add"?Number(o)+Number(i.value):Number(o)+Number(o)/100*Number(i.value)}else return 0});return(a,o)=>(s(),r("div",Me,[u("div",Ge,[u("div",Ye,[c(R,{name:"fade1",mode:"out-in"},{default:y(()=>[l.value?(s(),r("div",ze,[u("div",Ke,[je,u("div",qe,[u("div",We,[c(N,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=v=>i.value=v)},null,8,["modelValue"]),u("button",{class:E("product-parcel-btn"+(p.value==="percent"?" active":"")),onClick:o[1]||(o[1]=v=>p.value="percent")},"%",2),u("button",{class:E("product-parcel-btn"+(p.value==="add"?" active":"")),onClick:o[2]||(o[2]=v=>p.value="add")},"\u20BD",2)])])]),u("div",Je,[Qe,u("div",Xe,g(Number(U(n)).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1)])])):_("",!0)]),_:1}),l.value?_("",!0):(s(),r("div",Ze,"\u041D\u0430\u0446\u0435\u043D\u043A\u0430"))]),u("div",xe,[c(R,{name:"fade2"},{default:y(()=>[l.value?(s(),r("div",et,[u("div",tt,[ut,c(N,{modelValue:d.value,"onUpdate:modelValue":o[3]||(o[3]=v=>d.value=v)},null,8,["modelValue"])]),u("div",at,[ot,u("div",st,g(Number(U(n)*d.value).toLocaleString("RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."))+" \u20BD",1)]),u("div",rt,[dt,u("div",nt,g((Number(t.data.WEIGHT?t.data.WEIGHT:0)*d.value).toFixed(3)),1)]),u("div",lt,[ct,u("div",it,g((Number(t.data.VALUME?t.data.VALUME:0)*d.value).toFixed(3)),1)])])):_("",!0)]),_:1}),l.value?_("",!0):(s(),r("div",pt,"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E"))]),u("div",{class:"product-parcel-hide-btn content-hide-btn",onClick:o[4]||(o[4]=v=>l.value=!l.value)},g(l.value?"\u0421\u043A\u0440\u044B\u0442\u044C \u2014":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C +"),1)])]))}});var mt=b(vt,[["__scopeId","data-v-ba9d93fc"]]);const _t=T({props:{modelValue:{type:String,required:!0}},emits:["update:modelValue","search"],components:{PreloaderLocal:ce},setup(t,{emit:e}){const l=V(L),d=m(""),i=m(!1),p=m(),n=m(null),a=m(!1),o=()=>{clearTimeout(p.value),a.value=!0,e("update:modelValue",d.value),i.value=!0,p.value=setTimeout(()=>{d.value.length>=2&&l.dispatch(k.SEARCH_PRODUCT_ARTICLE,d.value).then(()=>{setTimeout(()=>{i.value=!1},500)})},500)},v=()=>{d.value="",a.value=!1,l.commit(M.SET_PRODUCT_ARTICLS,[]),e("update:modelValue","")},P=A=>{a.value=!1,e("update:modelValue",A),e("search")};return ue(n,()=>{a.value=!1}),{search_str:d,loading:i,target:n,show_options:a,articles:h(()=>l.getters.getProductArticles),doSearch:o,close:v,done:P}}}),ft={class:E("product-search "),ref:"target"},ht={class:"product-search-input-container"},Ct={key:0},gt={key:1},Pt=["onClick"],$t={class:"article"},Et=re(),yt={class:"name"},bt={key:0},Dt={key:1},At=u("div",null,"\u041F\u043E\u0438\u0441\u043A",-1),St=[At];function Tt(t,e,l,d,i,p){const n=f("PreloaderLocal");return s(),r("div",ft,[u("div",ht,[u("div",{class:E("product-search-input"+(t.show_options?" options":""))},[ae(u("input",{type:"text",placeholder:"\u041F\u043E\u0438\u0441\u043A",autocomplete:"off",onKeyup:[e[0]||(e[0]=a=>t.doSearch()),e[1]||(e[1]=se(a=>t.done(t.search_str),["enter"]))],"onUpdate:modelValue":e[2]||(e[2]=a=>t.search_str=a),onClick:e[3]||(e[3]=a=>t.show_options=!0)},null,544),[[oe,t.search_str]]),t.loading?(s(),G(n,{key:0,small:""})):_("",!0),u("div",{class:"product-search-clear",onClick:e[4]||(e[4]=a=>t.close())})],2),t.show_options?(s(),r("div",{key:0,class:E("product-search-input-options"+(t.search_str==""||t.articles.length==0?" default":""))},[t.search_str==""?(s(),r("span",Ct,"\u0427\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u0430\u0437 \u043D\u043E\u0432\u044B\u0439 \u043F\u0440\u043E\u0434\u0443\u043A\u0442 - \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0432\u0432\u043E\u0434 \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0430")):(s(),r("div",gt,[(s(!0),r(I,null,w(t.articles,(a,o)=>(s(),r("p",{key:o,class:E("product-search-input-options-item"+(t.loading?" loading":""))},[u("a",{onClick:v=>{t.done(a.article),t.search_str=a.name}},[u("div",$t,g(a.article),1),Et,u("div",yt,g(a.name),1)],8,Pt)],2))),128)),t.loading&&t.articles.length==0?(s(),r("span",bt," \u041F\u043E\u0438\u0441\u043A...")):_("",!0),!t.loading&&t.articles.length==0?(s(),r("span",Dt," \u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")):_("",!0)]))],2)):_("",!0)]),u("button",{class:"product-search-btn gradient-btn",onClick:e[5]||(e[5]=a=>t.doSearch())},St)],512)}var kt=b(_t,[["render",Tt]]);const It=T({components:{PersonalBar:K,Notification:j,CompanyBarTop:q,ProductHeaderCard:J,ProductSearchResultCard:Q,ProductOffersCard:Ae,ProductAddInfoCard:Re,ProductSliderCard:He,ProductParcelCard:mt,ProductInfoCard:X,ProductSearchInput:kt,TopNav:ie},props:["article"],setup(t){const e=V(L),l=le(),d=h({get:()=>e.getters.getLoader,set:$=>e.commit(H.SET_LOADER,$)}),i=m(""),p=m(""),n=m(!1),a=m(""),o=m(!0),v=()=>{l.push({name:"Order"})};de(()=>{(!e.getters.isCompanysLoad||!e.getters.isManagerLoad)&&Promise.all([e.dispatch(ne.GET_COMPANYS)]).finally(()=>{setTimeout(()=>{i.value=e.getters.getCompanys===[]?"":e.getters.getCompanys[0].uid},500)}),t.article!==""&&t.article!==void 0&&(d.value=!0,e.dispatch(k.SEARCH_PRODUCT,t.article).then(()=>{n.value=!0,e.getters.getProduct.ID?a.value=e.getters.getProduct.ID:l.push({name:"Product"})}).finally(()=>{d.value=!1}))});const P=h(()=>{let $=e.getters.getProduct.STATUS;return $=="Outlet"||$=="Discount"||$=="Activity"?0:e.getters.getCompanyDiscount(i.value,e.getters.getProductOffersORGGUID)}),A=()=>{d.value=!0,e.dispatch(k.GET_PRODUCT_BY_ID,a.value).then(()=>{a.value=e.getters.getProduct.ID}).finally(()=>{d.value=!1})},S=()=>{n.value=!1,e.commit(M.SET_SEARCH_PRODUCT_CLEAR)},F=()=>{p.value.trim()!==""&&(S(),d.value=!0,e.dispatch(k.SEARCH_PRODUCT,p.value).then(()=>{n.value=!0,a.value=e.getters.getProduct.ID}).finally(()=>{d.value=!1}))},O=()=>{S(),p.value="",l.push("/product")};return{companyBarTopData:h(()=>e.getters.getCompanysList),resultSearch:h(()=>e.getters.getProductSearchResult),productOffers:h(()=>e.getters.getProductOffers),product:h(()=>e.getters.getProduct),productFound:h(()=>e.getters.getProductFound),productImages:h(()=>e.getters.getProductImages),productProtect:h(()=>e.getters.getProductProtect),discount:P,productSearch:o,isLoad:n,activeCompanyUid:i,activeProductId:a,search_str:p,doSearch:F,clearSearch:S,loadProduct:A,toOrder:v,newSearch:O}}}),wt={class:"top-line product-page"},Rt={key:0},Ft=u("br",null,null,-1),Ot={key:1,class:"content-wrap content-product-wrap"},Vt={class:"content-wrap-elem"},Lt={class:"content-elem-desc"},Bt={class:"content-wrap-elem"},Ut={key:1},Nt={key:0};function Ht(t,e,l,d,i,p){const n=f("CompanyBarTop"),a=f("Notification"),o=f("PersonalBar"),v=f("top-nav"),P=f("ProductSearchInput"),A=f("ProductHeaderCard"),S=f("ProductSearchResultCard"),F=f("ProductOffersCard"),O=f("ProductAddInfoCard"),$=f("ProductSliderCard"),Y=f("ProductParcelCard"),z=f("ProductInfoCard");return s(),r("div",null,[u("div",wt,[c(n,{data:t.companyBarTopData,modelValue:t.activeCompanyUid,"onUpdate:modelValue":e[0]||(e[0]=C=>t.activeCompanyUid=C)},null,8,["data","modelValue"]),c(a),c(o)]),c(v,{catalog:""}),c(P,{modelValue:t.search_str,"onUpdate:modelValue":e[1]||(e[1]=C=>t.search_str=C),onSearch:e[2]||(e[2]=C=>t.doSearch())},null,8,["modelValue"]),t.productFound.length>0?(s(),r("div",Rt,[t.isLoad?(s(),G(A,{key:0,title:String(t.product.NAME),price:String(t.product.PRICE_OPT),status:String(t.product.STATUS),discount:t.discount,onShowSearch:e[3]||(e[3]=C=>t.newSearch())},null,8,["title","price","status","discount"])):_("",!0),Ft,t.isLoad?(s(),r("div",Ot,[u("div",Vt,[c(S,{data:t.productFound,cardType:"search",modelValue:t.activeProductId,"onUpdate:modelValue":e[4]||(e[4]=C=>t.activeProductId=C),onOnClick:e[5]||(e[5]=C=>t.loadProduct())},null,8,["data","modelValue"]),u("div",Lt,[c(F,{data:t.productOffers,discount:t.discount},null,8,["data","discount"])]),c(O)]),u("div",Bt,[c($,{data:t.productImages,onToOrder:t.toOrder},null,8,["data","onToOrder"]),c(Y,{data:t.product,discount:t.discount},null,8,["data","discount"]),c(z,{data:t.product,protect:t.productProtect},null,8,["data","protect"])])])):_("",!0)])):(s(),r("div",Ut,[t.isLoad?(s(),r("div",Nt,"\u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")):_("",!0)]))])}var Wt=b(It,[["render",Ht]]);export{Wt as default};
